<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="AI之覔">
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>【07】宏与函数 - personal-知识库</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../../extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/diff.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/llvm.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/nasm.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/txt.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">personal-知识库</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">首页</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">技术博文</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">开发工具</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">cmake</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/" class="dropdown-item">【01】安装与基本介绍</a>
</li>
            
<li>
    <a href="../02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/" class="dropdown-item">【02】CMake 的文件分布</a>
</li>
            
<li>
    <a href="../03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/" class="dropdown-item">【03】变量的设置与引用</a>
</li>
            
<li>
    <a href="../04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/" class="dropdown-item">【04】运算符与条件、循环语句</a>
</li>
            
<li>
    <a href="../05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/" class="dropdown-item">【05】目标构建</a>
</li>
            
<li>
    <a href="../06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/" class="dropdown-item">【06】变量参与 C++ 的编译</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">【07】宏与函数</a>
</li>
            
<li>
    <a href="../08-find_package%20%E8%AF%A6%E8%A7%A3/" class="dropdown-item">【08】find_package 详解</a>
</li>
            
<li>
    <a href="../09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="dropdown-item">【09】生成器表达式</a>
</li>
            
<li>
    <a href="../10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/" class="dropdown-item">【10】项目的导出与安装</a>
</li>
            
<li>
    <a href="../11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" class="dropdown-item">【11】项目实战</a>
</li>
            
<li>
    <a href="../12-CTest%20%E5%B7%A5%E5%85%B7/" class="dropdown-item">【12】CTest 工具</a>
</li>
            
<li>
    <a href="../13-CPack%20%E5%B7%A5%E5%85%B7/" class="dropdown-item">【13】CPack 工具</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/serendipitywgy/personal-docs" class="nav-link">GitHub</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../08-find_package%20%E8%AF%A6%E8%A7%A3/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/serendipitywgy/personal-docs/edit/master/docs/开发工具/cmake/07-宏与函数.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#07" class="nav-link">【07】宏与函数</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#1" class="nav-link">1. 前言</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#2" class="nav-link">2. 宏、函数</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#3" class="nav-link">3. 参数解析</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="07">【07】宏与函数</h1>
<h2 id="1">1. 前言</h2>
<p>我们假设有以下文件架构：</p>
<pre><code class="language-txt">.
├── core1
│   ├── CMakeLists.txt
│   ├── include
│   │   └── core1.hpp
│   └── src
│       ├── core1.cpp
│       ├── core_cal.cpp
│       └── util.cpp
└── core2
    ├── CMakeLists.txt
    ├── include
    │   └── core2.hpp
    └── src
        ├── core2.cpp
        ├── core_cal.cpp
        └── util.cpp
</code></pre>
<p>两个模块，同样的架构，因此需要同样的构建方式，假设<code>core1</code>依赖 OpenCV，假设<code>core2</code>依赖 <code>core1</code>：</p>
<pre><code class="language-cmake"># core1/CMakeLists.txt 部分内容
find_package(OpenCV REQUIRED)

aux_source_directory(src core1_dir)
add_library(
  core1
  SHARED ${core1_dir}
)
target_include_directories(
  core1
  PUBLIC include
)
target_link_libraries(
  core1
  PUBLIC ${OpenCV_LIBS}
)

# core2/CMakeLists.txt 部分内容
aux_source_directory(src core2_dir)
add_library(
  core2
  SHARED ${core2_dir}
)
target_include_directories(
  core2
  PUBLIC include
)
target_link_libraries(
  core2
  PUBLIC core1
)
</code></pre>
<p>可以看出，上面一段<code>CMakeLists.txt</code>的代码重复率比较高，每次创建库目标都是几乎一样的操作，为此我们可以使用宏、函数操作。这样可以使得构建操作缩短至几行，例如 OpenCV 的 core 模块：</p>
<pre><code class="language-cmake">ocv_add_module(core
               OPTIONAL opencv_cudev
               WRAP java objc python js)
</code></pre>
<p>其中，<code>ocv_add_module</code>就是 OpenCV 定义于<code>OpenCVModule.cmake</code>文件中的宏。</p>
<p>对于上述例子我们先给出结果，如果我们创建了这样一个宏</p>
<pre><code class="language-cmake">macro(add_module name)
  # 参数解析
  set(multy_args DEP_LIBS)
  cmake_parse_arguments(MOD &quot;&quot; &quot;&quot; &quot;${multy_args}&quot; ${ARGN})
  # 创建 target
  aux_source_directory(src _src_dir)
  add_library(${name} SHARED ${_src_dir})
  # 设置 target 属性
  target_include_directories(${name} PUBLIC include)
  target_link_libraries(${name} PUBLIC ${MOD_DEP_LIBS})
  unset(_src_dir)
endmacro()
</code></pre>
<p>我们就可以改写成以下形式</p>
<pre><code class="language-cmake"># core1/CMakeLists.txt 部分内容
find_package(OpenCV REQUIRED)

add_module(
  core1
  DEP_LIBS ${OpenCV_LIBS}
)
# core2/CMakeLists.txt 部分内容
add_module(
  core2
  DEP_LIBS core1
)
</code></pre>
<p>这种情况不仅减少了书写难度，还提高了可读性。</p>
<h2 id="2">2. 宏、函数</h2>
<h3 id="21">2.1 函数基本用法</h3>
<h4 id="211">2.1.1 定义</h4>
<pre><code class="language-cmake">function(my_func)
  # function
endfunction()
</code></pre>
<h4 id="212">2.1.2 调用</h4>
<p>函数调用的函数名不区分大小写，不过通常在 CMake 中函数名建议写小写。</p>
<pre><code class="language-cmake">my_func() # 可以
MY_FUNC() # 可以
mY_fUnC() # 有些逆天，但也可以
</code></pre>
<p>除此之外，一个函数还打开一个新的作用域，这点与C/C++一致。同样，使用<code>set(xxx PARENT_SCOPE)</code>可以提升变量作用域。</p>
<p>CMake 3.18 起，也可以使用<code>cmake_language(CALL ...)</code>子命令来调用函数，可以参考<a href="https://cmake.org/cmake/help/latest/command/cmake_language.html#calling-commands">官方手册</a>：</p>
<pre><code class="language-cmake">function(my_foo x1 x2)
  message(STATUS &quot;x1 = ${x1}, x2 = ${x2}&quot;)
endfunction()
cmake_language(CALL my_foo 2 7)
</code></pre>
<h4 id="213">2.1.3 参数</h4>
<p><strong>使用形参</strong></p>
<p>当函数被调用时，首先通过实参替换形参 ，然后作为普通命令调用。</p>
<pre><code class="language-cmake">function(my_foo x1 x2 x3)
  message(STATUS &quot;x1 = ${x1}, x2 = ${x2}, x3 = ${x3}&quot;)
endfunction()
my_foo(2 7 4)
# 显示结果
# -- x1 = 2, x2 = 7, x3 = 4
</code></pre>
<p><strong>使用 ARGC、ARGVn</strong></p>
<p>除了引用形参之外，还可以引用<code>ARGC</code>变量 和<code>ARGVn</code>变量来引用参数，<code>ARGC</code>表示参数数量，以及<code>ARGV0, ARGV1, ARGV2, ...</code>将具有传入参数的值，有助于创建带有可选参数的函数。同时<code>ARGV</code>保存了所有的参数列表</p>
<pre><code class="language-cmake">function(my_foo)
  message(STATUS &quot;ARGC = ${ARGC}&quot;)
  message(STATUS &quot;x1 = ${ARGV0}, x2 = ${ARGV1}, x3 = ${ARGV2}&quot;)
endfunction()
my_foo(2 7 4)
# 显示结果
# -- ARGC = 3
# -- x1 = 2, x2 = 7, x3 = 4
</code></pre>
<p><strong>使用 ARGN</strong></p>
<p>此外，<code>ARGN</code>变量保存超过形参列表之后的参数。如果实参数量大于形参数量，用<code>ARGN</code>变量引用预期之外的参数。</p>
<pre><code class="language-cmake">function(my_foo x1)
  message(STATUS &quot;x1 = ${x1}&quot;)
  message(STATUS &quot;ARGN = ${ARGN}&quot;)
endfunction()
# 调用，执行了 set(x1 2)... 的操作
my_foo(2 7 4)
# 显示结果
# -- x1 = 2
# -- ARGN = 7;4
</code></pre>
<p><strong>形参为变量</strong></p>
<p>以上的例子中，参数都为具体的值，例如<code>2, 7, 4</code>，那么变量取值的语法<code>${}</code>作用于参数，获取到的就是具体的值。如果参数为变量的话，那么<code>${}</code>获取到的参数内容就是变量这个字符串，要想获取值的话就要使用 <code>${${}}</code>。</p>
<pre><code class="language-cmake">set(a1 10)
function(foo val)
  message(STATUS &quot;val, ${val}, ${${val}}&quot;)
endfunction()
foo(a1)
# 显示结果
# -- val, a1, 10
</code></pre>
<h3 id="22">2.2 宏的基本用法</h3>
<p>宏与函数最大的区别就是，宏不会创建新的作用域，而是单纯的发生了文本替换，这与C/C++完全一致</p>
<h4 id="221">2.2.1 定义</h4>
<pre><code class="language-cmake">macro(myFun)
  # macro
endmacro()
</code></pre>
<h4 id="222">2.2.2 调用</h4>
<ul>
<li>与函数一样，宏在调用时也可以不区分大小写，但同样建议使用小写。</li>
<li>CMake 3.18 起，也可以使用<code>cmake_language(CALL ...)</code>子命令来调用宏：</li>
</ul>
<p><code>cmake
  macro(my_foo x1 x2)
    message(STATUS "x1 = ${x1}, x2 = ${x2}")
  endmacro()
  cmake_language(CALL my_foo 2 7)</code></p>
<h4 id="223">2.2.3 参数</h4>
<p>与函数一样，同样可以设置参数，也同时具备<code>ARGC</code>、<code>ARGV</code>、<code>ARGVx</code>、<code>ARGN</code>的参数，如果这些参数在宏内部<font color="red">进行引用</font>，调用该宏的时候，这些内容会发生替换，例如</p>
<pre><code class="language-cmake">macro(my_macro xx)
  message(STATUS &quot;xx   = ${xx}&quot;)   # 这里的 ${xx} 会被直接替换为 aa
  message(STATUS &quot;ARGC = ${ARGC}&quot;) # 这里的 ${ARGC} 会被直接替换为 3
  message(STATUS &quot;ARGV = ${ARGV}&quot;) # 这里的 ${ARGV} 会被直接替换为 aa;bb;cc
endmacro()

my_macro(aa bb cc)

# 打印结果
# -- xx   = aa
# -- ARGC = 3
# -- ARGV = aa;bb;cc
</code></pre>
<h3 id="23">2.3 函数与宏的区别</h3>
<ol>
<li>宏不会开辟新的作用域，因此在宏内部定义的变量，将在外部继续生效</li>
</ol>
<p>```cmake
   macro(test)
     set(val "666")
   endmacro()</p>
<p>set(val "123")
   message("val = ${val}")
   test()
   message("val = ${val}")</p>
<p># 打印结果
   # -- val = 123
   # -- val = 666
   ```</p>
<p>这一点在函数就不会出现，内部设置的变量一般无法覆盖外部的变量，但如果需要覆盖，可以使用 <code>PARENT_SCOPE</code> 提升作用域。</p>
<ol>
<li>宏在被调用的范围内有一个同名的变量，将使用现有变量而不是参数。</li>
</ol>
<p>```cmake
   macro(aaa)
     # 这里的 ${ARGN} 在调用时会发生替换，替换为 x;y;z
     foreach(m ${ARGN})
       message(STATUS "m = ${m}")
     endforeach() 
     message(STATUS "================")
     # 这里的 ARGN 没有引用，在调用时不会发生替换
     foreach(m IN LISTS ARGN)
       message(STATUS "m = ${m}")
     endforeach()<br />
   endmacro()</p>
<p>function(bbb)
     aaa(x y z)
   endfunction()</p>
<p>bbb(a b c)</p>
<p># 打印结果
   # -- m = x
   # -- m = y
   # -- m = z
   # -- ================
   # -- m = a
   # -- m = b
   # -- m = c
   ```</p>
<p>这里的 <code>ARGN</code> 其实指代的是函数中的 <code>ARGN</code></p>
<h2 id="3">3. 参数解析</h2>
<p>经常见到以下命令：</p>
<pre><code class="language-cmake"># 案例 1
target_include_directories(
  MyLib
  PUBLIC include
  PRIVATE _deps
)
# 案例 2
execute_process(
  COMMAND ls ${current_dir}
  OUTPUT_VARIABLE subs
)
</code></pre>
<p>这些内置的函数和宏可以对以上的<code>include</code>、<code>_deps</code>和<code>ls ${current_dir}</code>等内容进行解析，如果我们自己写的函数或宏，要如何实现这种参数解析的功能？这里要介绍一个 CMake 内置的命令：<code>cmake_parse_arguments()</code></p>
<h3 id="31">3.1 用法</h3>
<p>有两个具体的用法：</p>
<pre><code class="language-cmake">cmake_parse_arguments(&lt;prefix&gt; &lt;options&gt; &lt;one_value_keywords&gt;
                      &lt;multi_value_keywords&gt; &lt;args&gt;...)

cmake_parse_arguments(PARSE_ARGV &lt;N&gt; &lt;prefix&gt; &lt;options&gt;
                      &lt;one_value_keywords&gt; &lt;multi_value_keywords&gt;)
</code></pre>
<p>通常使用第一个用法，第二个用法整体与第一个类似，有兴趣者可以参考CMake官网。下面主要对第一个用法做讲解。</p>
<ol>
<li><code>&lt;options&gt;</code>：表示可选关键词列表，如果传入参数包含此变量名，则为<code>TRUE</code>，反之为 <code>FALSE</code>。</li>
</ol>
<p>例如，我们常见的<code>INTERFACE</code>，<code>PUBLIC</code>，<code>PRIVATE</code>都是<code>target_include_directories</code>函数中可选关键字列表中的元素。</p>
<p><code>cmake
   set(options INTERFACE PUBLIC PRIVATE)
   cmake_parse_arguments(xxx "${options}" "" "" ${ARGN})</code></p>
<ol>
<li>
<p><code>&lt;one_value_keywords&gt;</code>：表示单值关键词列表，每个关键词仅对应一个值。</p>
</li>
<li>
<p><code>&lt;multi_value_keywords&gt;</code>：表示多值关键词列表，每个关键词可对应多个值。</p>
</li>
</ol>
<p>::: tip
   1. 实际上，能用<code>&lt;one_value_keywords&gt;</code>的都能用<code>&lt;multi_value_keywords&gt;</code>。
   2. 要解析的参数<code>&lt;args&gt;...</code>，我们一般传入为<code>${ARGN}</code>即可，一般定义的函数或宏是无参的，除非第一个参数不是关键词，那么有多少非关键词变量，定义多少形参。
   :::</p>
<p>举个例子</p>
<p>```cmake
   function(my_function)
     set(multi_args YYY ZZZ)
     cmake_parse_arguments("ABC" "" "" "${multi_args}" ${ARGN})
     message(STATUS "YYY: ${ABC_YYY}")
     message(STATUS "ZZZ: ${ABC_ZZZ}")
   endfunction()</p>
<p>my_function(
     YYY 123 456 789
     ZZZ abc
   )</p>
<p># 打印结果
   # -- YYY: 123;456;789
   # -- ZZZ: abc
   ```</p>
<ol>
<li><code>prefix</code>：我们将参数<code>${ARGN}</code>根据<code>&lt;options&gt;</code>，<code>&lt;one_value_keywords&gt;</code>，<code>&lt;multi_value_keywords&gt;</code>规则进行解析，解析出来的新变量名根据<code>&lt;prefix&gt;</code>前缀，按照 <code>prefix_参数名</code>的形式进行设置，例如：</li>
</ol>
<p><code>cmake
   set(options INTERFACE PUBLIC PRIVATE)
   set(multy_args DEPENDS)
   cmake_parse_arguments(ABC "${options}" "" "${multy_args}" ${ARGN})
   # 访问 options 的内容是否为 ON
   if(${ABC_INTERFACE})   # ABC_ 前缀
   elseif(${ABC_PUBLIC})  # ABC_ 前缀
   elseif(${ABC_PRIVATE}) # ABC_ 前缀
   endif()
   # 访问 multy_args 的内容
   message(STATUS "${ABC_DEPENDS}") # ABC_ 前缀</code></p>
<h3 id="32">3.2 案例</h3>
<p>最后，来看 <a href="/projects/rmvl/">RMVL</a> 中使用有关添加测试用例的宏来做巩固：</p>
<pre><code class="language-cmake"># 在当前目录中添加新的测试用例
# 用法:
# rmvl_add_test(
#   &lt;name&gt;
#   [DEPENDS &lt;rmvl_target&gt;]
#   [DEPEND_TESTS &lt;test_target&gt;]
# )
# 示例:
# rmvl_add_test(
#   detector                       # 测试名
#   DEPENDS armor_detector         # 需要依赖的 RMVL 目标库
#   DEPEND_TESTS GTest::gtest_main # 需要依赖的第三方测试工具目标库
# )
macro(rmvl_add_test _name)
  # add arguments variable    
  set(multy_args DEPENDS DEPEND_TESTS)
  cmake_parse_arguments(TEST &quot;&quot; &quot;&quot; &quot;${multy_args}&quot; ${ARGN})
  # add testing executable
  set(test_dir)
  aux_source_directory(test test_dir)
  add_executable(rmvl_${_name}_test ${test_dir})
  # depends
  foreach(_dep ${TEST_DEPENDS})
    target_link_libraries(
      rmvl_${_name}_test
      PRIVATE rmvl_${_dep}
    )
  endforeach(_dep ${TEST_DEPENDS})
  # test depends
  target_link_libraries(
    rmvl_${_name}_test
    PRIVATE ${TEST_DEPEND_TESTS}
  )
  gtest_discover_tests(rmvl_${_name}_test)
endmacro(rmvl_add_test _name)
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright © AI之覔</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../extra.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
