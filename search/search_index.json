{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\ud83c\udf89 Just for fun","text":"\ud83d\udcdd \u7ed9\u672a\u6765\u7559\u70b9\u75d5\u8ff9 \ud83d\udcdd \u8bb0\u5f55\u662f\u63d0\u5347\u7684\u6700\u4f73\u65b9\u5f0f"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/","title":"01 C++\u7684\u5185\u5b58\u7ed3\u6784","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#c","title":"C++\u7684\u5185\u5b58\u7ed3\u6784","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#1","title":"1. \u5185\u5b58\u7ed3\u6784","text":"<p>C++\u7684\u5185\u5b58\u7ed3\u6784\u4e3b\u8981\u6d89\u53ca5 \u4e2a\u533a\u57df </p> <p>Tip</p> <p>\u60f3\u4e00\u60f3\uff1a\u5982\u679c\u4f60\u662f\u7f16\u8bd1\u5668\uff0c\u7ed9\u4f60\u4e00\u6bb5\u522b\u4eba\u5199\u7684\u4ee3\u7801\uff0c\u4f60\u8be5\u600e\u4e48\u8c03\u5ea6\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\uff1f</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#2","title":"2. \u7ed3\u6784\u793a\u610f\u56fe","text":"<p>\u8fd9\u4e9b\u5185\u5b58\u533a\u57df\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u534f\u540c\u5de5\u4f5c\uff0c\u6bcf\u4e2a\u533a\u57df\u6709\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u3001\u4f5c\u7528\u548c\u7ba1\u7406\u65b9\u5f0f\u3002\u4e0b\u9762\u662f\u5bf9\u8fd9\u4e9b\u5185\u5b58\u533a\u5757\u7684\u5173\u7cfb\u548c\u4f7f\u7528\u7684\u8be6\u7ec6\u8bf4\u660e\uff1a</p> <ol> <li> <p>\u4ee3\u7801\u533a\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5b58\u50a8\u7a0b\u5e8f\u7684\u673a\u5668\u7801\u6307\u4ee4\uff0c\u5305\u62ec\u6267\u884c\u4ee3\u7801\u548c\u53ea\u8bfb\u6570\u636e\u3002</li> <li>\u4f7f\u7528\uff1a\u7a0b\u5e8f\u5728\u542f\u52a8\u65f6\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u6307\u4ee4\u548c\u53ea\u8bfb\u6570\u636e\u5728\u4ee3\u7801\u533a\u6267\u884c\u3002</li> </ul> </li> <li> <p>\u5e38\u91cf\u5b58\u50a8\u533a\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5b58\u50a8\u4e0d\u53ef\u4fee\u6539\u7684\u5e38\u91cf\u6570\u636e\uff0c\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\u3001\u5168\u5c40\u5e38\u91cf\u3001const\u4fee\u9970\u7684\u53d8\u91cf\u7b49\u3002</li> <li>\u4f7f\u7528\uff1a\u5e38\u91cf\u6570\u636e\u5728\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u88ab\u5206\u914d\u5185\u5b58\uff0c\u901a\u5e38\u4ee5\u53ea\u8bfb\u7684\u65b9\u5f0f\u5b58\u50a8\u3002</li> </ul> </li> <li> <p>\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5b58\u50a8\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\uff0c\u5176\u751f\u547d\u5468\u671f\u8d2f\u7a7f\u6574\u4e2a\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u3002</li> <li>\u4f7f\u7528\uff1a\u5168\u5c40\u53d8\u91cf\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\u5206\u914d\u5185\u5b58\uff0c\u9759\u6001\u53d8\u91cf\u5728\u58f0\u660e\u65f6\u5206\u914d\u5185\u5b58\u3002\u5b83\u4eec\u7684\u6570\u636e\u5728\u6574\u4e2a\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u53ef\u8bfb\u5199\u3002</li> </ul> </li> <li> <p>\u6808\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u5b58\u50a8\u51fd\u6570\u8c03\u7528\u4fe1\u606f\u3001\u5c40\u90e8\u53d8\u91cf\u3001\u4e34\u65f6\u6570\u636e\u7b49\u3002\u9075\u5faa\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u539f\u5219\u3002</li> <li>\u4f7f\u7528\uff1a\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u6808\u5e27\uff0c\u5305\u542b\u5c40\u90e8\u53d8\u91cf\u548c\u51fd\u6570\u8c03\u7528\u4fe1\u606f\u3002\u6808\u5e27\u5728\u51fd\u6570\u8fd4\u56de\u65f6\u88ab\u9500\u6bc1\u3002</li> </ul> </li> <li> <p>\u5806\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5185\u5b58\uff0c\u5b58\u50a8\u5728\u5806\u4e0a\u7684\u6570\u636e\u7684\u751f\u547d\u5468\u671f\u7531\u7a0b\u5e8f\u5458\u7ba1\u7406\u3002</li> <li>\u4f7f\u7528\uff1a\u901a\u8fc7<code>new</code>\uff08C++\uff09\u6216<code>malloc</code>\uff08C\uff09\u7b49\u64cd\u4f5c\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\uff0c\u7a0b\u5e8f\u5458\u8d1f\u8d23\u5728\u9002\u5f53\u7684\u65f6\u5019\u91ca\u653e\u5185\u5b58\uff08<code>delete</code> \u6216 <code>free</code>\uff09\u3002\u5806\u4e0a\u7684\u6570\u636e\u53ef\u4ee5\u5728\u7a0b\u5e8f\u7684\u4e0d\u540c\u90e8\u5206\u5171\u4eab\u3002</li> </ul> </li> </ol> <p>\u5185\u5b58\u533a\u57df\u4e4b\u95f4\u7684\u8054\u7cfb\uff1a</p> <ul> <li>\u4ee3\u7801\u533a\u4e0e\u5176\u4ed6\u533a\u57df\uff1a\u4ee3\u7801\u533a\u7684\u6307\u4ee4\u548c\u53ea\u8bfb\u6570\u636e\u5728\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u5206\u914d\uff0c\u662f\u7a0b\u5e8f\u7684\u521d\u59cb\u72b6\u6001\u3002\u5176\u4ed6\u533a\u57df\u7684\u6570\u636e\u53ef\u4ee5\u88ab\u4ee3\u7801\u533a\u8bfb\u53d6\u3002</li> <li>\u5e38\u91cf\u5b58\u50a8\u533a\u4e0e\u4ee3\u7801\u533a\uff1a\u5e38\u91cf\u5b58\u50a8\u533a\u4e2d\u5b58\u50a8\u7684\u5e38\u91cf\u6570\u636e\u53ef\u4ee5\u5728\u7a0b\u5e8f\u6267\u884c\u65f6\u88ab\u4ee3\u7801\u533a\u8bfb\u53d6\u3002</li> <li>\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\u4e0e\u5176\u4ed6\u533a\u57df\uff1a\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u7684\u6570\u636e\u53ef\u4ee5\u5728\u7a0b\u5e8f\u7684\u4efb\u4f55\u5730\u65b9\u8bbf\u95ee\uff0c\u5305\u62ec\u4ee3\u7801\u533a\u3001\u6808\u548c\u5806\u3002</li> <li>\u6808\u548c\u5806\u4e4b\u95f4\u7684\u8054\u7cfb\uff1a\u6808\u4e3b\u8981\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u548c\u51fd\u6570\u8c03\u7528\u4fe1\u606f\uff0c\u800c\u5806\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5185\u5b58\u3002\u6808\u4e0a\u7684\u6307\u9488\u53d8\u91cf\u53ef\u4ee5\u5b58\u50a8\u5806\u4e0a\u6570\u636e\u7684\u5730\u5740\uff0c\u5b9e\u73b0\u5728\u6808\u4e0a\u5f15\u7528\u5806\u4e0a\u7684\u6570\u636e\u3002</li> </ul> <p>\u8fd9\u4e9b\u5185\u5b58\u533a\u57df\u534f\u540c\u5de5\u4f5c\uff0c\u5f62\u6210\u7a0b\u5e8f\u7684\u5185\u5b58\u5e03\u5c40\u3002\u6808\u548c\u5806\u7684\u7ba1\u7406\u7531\u7a0b\u5e8f\u5458\u8d1f\u8d23\uff0c\u800c\u4ee3\u7801\u533a\u3001\u5e38\u91cf\u5b58\u50a8\u533a\u3001\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\u7531\u7f16\u8bd1\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u3002\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\uff0c\u8fd9\u4e9b\u533a\u57df\u534f\u540c\u5de5\u4f5c\u4ee5\u652f\u6301\u7a0b\u5e8f\u7684\u8fd0\u884c\u3001\u6570\u636e\u5b58\u50a8\u548c\u52a8\u6001\u5185\u5b58\u5206\u914d\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#3","title":"3. \u4ee3\u7801\u533a","text":"<p>\u5728C++\u7a0b\u5e8f\u4e2d\uff0c\u4ee3\u7801\u533a\u662f\u5b58\u50a8\u7a0b\u5e8f\u6267\u884c\u4ee3\u7801\u7684\u4e00\u90e8\u5206\u5185\u5b58\u533a\u57df\u3002\u5b83\u901a\u5e38\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a\u4ee3\u7801\u6bb5\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\u3002</p> <p>Tip</p> <p>\u4ee3\u7801\u533a\u901a\u5e38\u6307\u7684\u662f\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u5b58\u50a8\u5728\u786c\u76d8\u4e0a\u7684\u4ee3\u7801\u3002\u5728\u8ba1\u7b97\u673a\u7a0b\u5e8f\u6267\u884c\u65f6\uff0c\u4ee3\u7801\u4ece\u786c\u76d8\u4e0a\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u88ab\u5206\u914d\u7ed9\u4ee3\u7801\u533a\u3002\u4ee3\u7801\u533a\u5305\u62ec\u4ee3\u7801\u6bb5\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\uff0c\u7528\u4e8e\u5b58\u50a8\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u6307\u4ee4\u548c\u53ea\u8bfb\u7684\u5e38\u91cf\u6570\u636e</p> <ol> <li> <p>\u4ee3\u7801\u6bb5\uff08Text Segment\uff09\uff1a</p> <ul> <li>\u7ed3\u6784\uff1a\u4ee3\u7801\u6bb5\u5b58\u50a8\u7a0b\u5e8f\u7684\u53ef\u6267\u884c\u6307\u4ee4\uff0c\u5373\u673a\u5668\u7801\u3002\u8fd9\u662f\u7a0b\u5e8f\u4e2d\u5b9e\u9645\u6267\u884c\u7684\u4ee3\u7801\u90e8\u5206\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u5305\u62ec\u7a0b\u5e8f\u7684\u51fd\u6570\u3001\u65b9\u6cd5\u3001\u63a7\u5236\u6d41\u7b49\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u662f\u53ea\u8bfb\u7684\uff0c\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u4e0d\u80fd\u4fee\u6539\u4ee3\u7801\u6bb5\u7684\u5185\u5bb9\u3002</li> <li>\u793a\u4f8b\uff1a\u8003\u8651\u4ee5\u4e0b\u7b80\u5355\u7684C++\u4ee3\u7801\uff1a</li> </ul> </li> </ol> <pre><code>#include &lt;iostream&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>main</code> \u51fd\u6570\u7684\u673a\u5668\u7801\u5c06\u4f1a\u5b58\u50a8\u5728\u4ee3\u7801\u6bb5\u4e2d\u3002</p> <ol> <li> <p>\u53ea\u8bfb\u6570\u636e\u6bb5\uff08Read-Only Data Segment\uff09\uff1a</p> <ul> <li>\u7ed3\u6784\uff1a\u53ea\u8bfb\u6570\u636e\u6bb5\u5b58\u50a8\u5e38\u91cf\u6570\u636e\uff0c\u4f8b\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u4ee5\u53ca\u5168\u5c40\u6216\u9759\u6001\u53d8\u91cf\u7684\u521d\u59cb\u5316\u503c\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u7528\u4e8e\u5b58\u50a8\u4e0d\u53ef\u4fee\u6539\u7684\u6570\u636e\u3002\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u53ea\u8bfb\u6570\u636e\u6bb5\u7684\u4f8b\u5b50\u3002</li> <li>\u793a\u4f8b\uff1a\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c\u5b57\u7b26\u4e32\u5e38\u91cf \"Hello, World!\" \u5c06\u5b58\u50a8\u5728\u53ea\u8bfb\u6570\u636e\u6bb5\u4e2d\u3002</li> </ul> </li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5316\u7684\u5185\u5b58\u7ed3\u6784\u793a\u610f\u56fe\uff1a</p> <pre><code>-----------------------\n|      \u4ee3\u7801\u6bb5           |\n|  (\u53ef\u6267\u884c\u6307\u4ee4)        |\n-----------------------\n| \u53ea\u8bfb\u6570\u636e\u6bb5            |\n|  (\u5e38\u91cf\u6570\u636e)           |\n-----------------------\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u4ee3\u7801\u6bb5\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\u901a\u5e38\u5728\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u7531\u64cd\u4f5c\u7cfb\u7edf\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u4e00\u65e6\u52a0\u8f7d\u5c31\u4e0d\u80fd\u88ab\u4fee\u6539\u3002</li> <li>\u5728\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u51fd\u6570\u7684\u673a\u5668\u7801\u4e5f\u5b58\u50a8\u5728\u4ee3\u7801\u6bb5\u4e2d\uff0c\u6bcf\u4e2a\u51fd\u6570\u6709\u5176\u72ec\u7279\u7684\u4ee3\u7801\u6bb5\u5730\u5740\u3002</li> <li>\u5b57\u7b26\u4e32\u5e38\u91cf\u7b49\u53ea\u8bfb\u6570\u636e\u6bb5\u4e2d\u7684\u6570\u636e\u662f\u4e0d\u53ef\u4fee\u6539\u7684\uff0c\u4efb\u4f55\u8bd5\u56fe\u4fee\u6539\u8fd9\u4e9b\u6570\u636e\u7684\u5c1d\u8bd5\u90fd\u4f1a\u5bfc\u81f4\u8fd0\u884c\u65f6\u9519\u8bef\u3002</li> </ul> <p>\u7406\u89e3C++\u7684\u4ee3\u7801\u533a\u7ed3\u6784\u6709\u52a9\u4e8e\u66f4\u597d\u5730\u7406\u89e3\u7a0b\u5e8f\u7684\u5185\u5b58\u5e03\u5c40\uff0c\u540c\u65f6\u4e5f\u6709\u52a9\u4e8e\u7f16\u5199\u66f4\u5b89\u5168\u3001\u9ad8\u6548\u7684\u4ee3\u7801\u3002</p> <p></p> <p>\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\"\u53ea\u8bfb\" \u548c \"\u53ef\u5171\u4eab\"\uff08\u53ef\u590d\u7528\uff09\u662f\u4ee3\u7801\u533a\u7684\u4e24\u4e2a\u91cd\u8981\u7279\u70b9\uff1a</p> <ol> <li> <p>\u53ea\u8bfb\uff08Read-Only\uff09\uff1a</p> <ul> <li>\u4ee3\u7801\u533a\u7684\u4ee3\u7801\u6bb5\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\u901a\u5e38\u662f\u53ea\u8bfb\u7684\u3002\u8fd9\u610f\u5473\u7740\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u8fd9\u4e9b\u90e8\u5206\u7684\u5185\u5bb9\u4e0d\u80fd\u88ab\u4fee\u6539\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u4fdd\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u7684\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b89\u5168\u6027\u3002</li> <li>\u4f8b\u5982\uff0c\u7a0b\u5e8f\u7684\u673a\u5668\u7801\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u7b49\u6570\u636e\u662f\u653e\u5728\u53ea\u8bfb\u90e8\u5206\u7684\uff0c\u9632\u6b62\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u610f\u5916\u5730\u4fee\u6539\u8fd9\u4e9b\u6570\u636e\u3002</li> </ul> </li> <li> <p>\u53ef\u590d\u7528\uff08Sharable\uff09\uff1a</p> <ul> <li>\u4ee3\u7801\u533a\u7684\u5185\u5bb9\u901a\u5e38\u662f\u53ef\u5171\u4eab\u7684\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u76f8\u540c\u7684\u7a0b\u5e8f\u7684\u591a\u4e2a\u5b9e\u4f8b\u6216\u540c\u65f6\u8fd0\u884c\u7684\u591a\u4e2a\u7a0b\u5e8f\u6765\u8bf4\u3002\u591a\u4e2a\u7a0b\u5e8f\u5b9e\u4f8b\u53ef\u4ee5\u5171\u4eab\u76f8\u540c\u7684\u673a\u5668\u7801\uff0c\u8fd9\u6709\u52a9\u4e8e\u8282\u7701\u5185\u5b58\u3002</li> <li>\u5171\u4eab\u7684\u4ee3\u7801\u6bb5\u901a\u5e38\u4f4d\u4e8e\u6240\u6709\u7a0b\u5e8f\u7684\u76f8\u540c\u865a\u62df\u5730\u5740\uff0c\u4f46\u5b9e\u9645\u7684\u7269\u7406\u5185\u5b58\u53ef\u80fd\u88ab\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u7279\u70b9\u4f7f\u5f97\u4ee3\u7801\u533a\u80fd\u591f\u66f4\u6709\u6548\u5730\u652f\u6301\u591a\u4e2a\u7a0b\u5e8f\u7684\u5e76\u53d1\u6267\u884c\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u63d0\u4f9b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4fdd\u62a4\uff0c\u786e\u4fdd\u4ee3\u7801\u548c\u53ea\u8bfb\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002\u5728\u5171\u4eab\u5e93\uff08shared libraries\uff09\u7684\u6982\u5ff5\u4e2d\uff0c\u8fd9\u79cd\u53ef\u590d\u7528\u6027\u5f97\u5230\u4e86\u66f4\u8fdb\u4e00\u6b65\u7684\u5229\u7528\uff0c\u5141\u8bb8\u591a\u4e2a\u7a0b\u5e8f\u5171\u4eab\u540c\u4e00\u4e2a\u5e93\u7684\u4ee3\u7801\u6bb5\uff0c\u51cf\u5c11\u4e86\u5185\u5b58\u5360\u7528\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#4","title":"4. \u5e38\u91cf\u5b58\u50a8\u533a","text":"<p>\u5e38\u91cf\u5b58\u50a8\u533a\u901a\u5e38\u662f\u6307\u5b58\u50a8\u7a0b\u5e8f\u4e2d\u7684\u5e38\u91cf\u6570\u636e\u7684\u4e00\u5757\u5185\u5b58\u533a\u57df\u3002\u5728C++\u4e2d\uff0c\u5e38\u91cf\u6570\u636e\u5305\u62ec\u5b57\u7b26\u4e32\u5e38\u91cf\u3001\u5168\u5c40\u5e38\u91cf\u3001const\u4fee\u9970\u7684\u5168\u5c40/\u5c40\u90e8\u53d8\u91cf\u7b49\uff0c\u5b83\u4eec\u7684\u503c\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u4e0d\u53ef\u88ab\u4fee\u6539\u3002\u8fd9\u4e9b\u5e38\u91cf\u6570\u636e\u901a\u5e38\u5b58\u50a8\u5728\u53ea\u8bfb\u6570\u636e\u6bb5\uff08Read-Only Data Segment\uff09\u4e2d\u3002</p> <p>\u4ee5\u4e0b\u662f\u5bf9\u5e38\u91cf\u5b58\u50a8\u533a\u7684\u8be6\u7ec6\u8bf4\u660e\uff1a</p> <ol> <li> <p>\u7ed3\u6784\uff1a</p> <ul> <li>\u5e38\u91cf\u5b58\u50a8\u533a\u662f\u7a0b\u5e8f\u5185\u5b58\u5e03\u5c40\u7684\u4e00\u90e8\u5206\uff0c\u4e3b\u8981\u5305\u542b\u53ea\u8bfb\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u4e0d\u53ef\u88ab\u4fee\u6539\u3002</li> <li>\u5e38\u91cf\u6570\u636e\u7684\u5b58\u50a8\u65b9\u5f0f\u53d6\u51b3\u4e8e\u5176\u7c7b\u578b\u548c\u58f0\u660e\u4f4d\u7f6e\uff0c\u53ef\u80fd\u5305\u62ec\u5b57\u7b26\u4e32\u5e38\u91cf\u3001\u5168\u5c40\u5e38\u91cf\u3001\u4ee5\u53ca\u4f7f\u7528const\u4fee\u9970\u7684\u5168\u5c40/\u5c40\u90e8\u53d8\u91cf\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u5b58\u50a8\u4e0d\u53ef\u53d8\u7684\u5e38\u91cf\u6570\u636e\uff0c\u4f8b\u5982\u5b57\u7b26\u4e32\u3001\u5e38\u91cf\u53d8\u91cf\u7b49\u3002</li> <li>\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u5728\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u88ab\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u5185\u5b58\uff0c\u5e76\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u4e00\u76f4\u5b58\u5728\u3002</li> </ul> </li> <li> <p>\u793a\u4f8b\uff1a</p> </li> </ol> <pre><code>#include &lt;iostream&gt;\n\n// \u5168\u5c40\u5e38\u91cf\nconst int GLOBAL_CONSTANT = 42;\n\nint main() {\n    // \u5b57\u7b26\u4e32\u5e38\u91cf\n    const char* message = \"Hello, Constants!\";\n\n    // \u5c40\u90e8\u5e38\u91cf\n    const double LOCAL_CONSTANT = 3.14;\n\n    // \u4f7f\u7528\u5e38\u91cf\n    std::cout &lt;&lt; \"Global Constant: \" &lt;&lt; GLOBAL_CONSTANT &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"String Constant: \" &lt;&lt; message &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Local Constant: \" &lt;&lt; LOCAL_CONSTANT &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>GLOBAL_CONSTANT</code> \u662f\u4e00\u4e2a\u5168\u5c40\u5e38\u91cf\uff0c<code>message</code> \u662f\u4e00\u4e2a\u6307\u5411\u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u6307\u9488\uff0c<code>LOCAL_CONSTANT</code> \u662f\u4e00\u4e2a\u5c40\u90e8\u5e38\u91cf\u3002\u8fd9\u4e9b\u5e38\u91cf\u6570\u636e\u5728\u7a0b\u5e8f\u6267\u884c\u671f\u95f4\u88ab\u5b58\u50a8\u5728\u5e38\u91cf\u5b58\u50a8\u533a\u3002</p> <ol> <li> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u5e38\u91cf\u5b58\u50a8\u533a\u7684\u6570\u636e\u662f\u53ea\u8bfb\u7684\uff0c\u8bd5\u56fe\u4fee\u6539\u8fd9\u4e9b\u6570\u636e\u4f1a\u5bfc\u81f4\u8fd0\u884c\u65f6\u9519\u8bef\u3002</li> <li>\u5b57\u7b26\u4e32\u5e38\u91cf\u901a\u5e38\u4ee5null\u7ed3\u5c3e\uff08null-terminated\uff09\uff0c\u800c\u5168\u5c40\u5e38\u91cf\u548cconst\u4fee\u9970\u7684\u53d8\u91cf\u7684\u503c\u5728\u7f16\u8bd1\u65f6\u5c31\u88ab\u786e\u5b9a\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#5","title":"5. \u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a","text":"<p>\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\u662f\u7a0b\u5e8f\u4e2d\u7528\u4e8e\u5b58\u50a8\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u7684\u5185\u5b58\u533a\u57df\u3002\u8fd9\u4e9b\u53d8\u91cf\u5728\u7a0b\u5e8f\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u5b58\u5728\uff0c\u5e76\u4e14\u5176\u5185\u5b58\u5206\u914d\u53d1\u751f\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\uff0c\u76f4\u5230\u7a0b\u5e8f\u7ed3\u675f\u3002\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\u5305\u62ec\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a\u5168\u5c40\u53d8\u91cf\u533a\u548c\u9759\u6001\u53d8\u91cf\u533a\u3002</p> <ol> <li> <p>\u5168\u5c40\u53d8\u91cf\u533a\uff1a</p> <ul> <li>\u7ed3\u6784\uff1a\u5168\u5c40\u53d8\u91cf\u533a\u7528\u4e8e\u5b58\u50a8\u5168\u5c40\u53d8\u91cf\uff0c\u5373\u5728\u51fd\u6570\u5916\u90e8\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u53ef\u4ee5\u88ab\u6574\u4e2a\u7a0b\u5e8f\u8bbf\u95ee\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u9002\u7528\u4e8e\u9700\u8981\u5728\u591a\u4e2a\u51fd\u6570\u6216\u6587\u4ef6\u4e2d\u5171\u4eab\u7684\u6570\u636e\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> </li> </ol> <pre><code>// \u5168\u5c40\u53d8\u91cf\uff0c\u5b58\u50a8\u5728\u5168\u5c40\u53d8\u91cf\u533a\nint globalVariable = 10;\n\nvoid function1() {\n    // \u53ef\u4ee5\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    globalVariable++;\n}\n\nvoid function2() {\n    // \u4e5f\u53ef\u4ee5\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\n    globalVariable--;\n}\n\nint main() {\n    // \u7a0b\u5e8f\u5165\u53e3\n    return 0;\n}\n</code></pre> <ol> <li> <p>\u9759\u6001\u53d8\u91cf\u533a\uff1a</p> <ul> <li>\u7ed3\u6784\uff1a\u9759\u6001\u53d8\u91cf\u533a\u7528\u4e8e\u5b58\u50a8\u9759\u6001\u53d8\u91cf\uff0c\u5373\u5728\u51fd\u6570\u5185\u90e8\u58f0\u660e\u4f46\u4f7f\u7528<code>static</code>\u5173\u952e\u5b57\u4fee\u9970\u7684\u53d8\u91cf\u3002\u4e0e\u5168\u5c40\u53d8\u91cf\u4e00\u6837\uff0c\u9759\u6001\u53d8\u91cf\u7684\u5185\u5b58\u5206\u914d\u53d1\u751f\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\u3002</li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u9002\u7528\u4e8e\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u95f4\u4fdd\u6301\u6301\u4e45\u6027\u6570\u636e\u7684\u9700\u6c42\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> </li> </ol> <pre><code>void exampleFunction() {\n    // \u9759\u6001\u5c40\u90e8\u53d8\u91cf\uff0c\u5b58\u50a8\u5728\u9759\u6001\u53d8\u91cf\u533a\n    static int staticVariable = 5;\n\n    // \u5bf9\u9759\u6001\u53d8\u91cf\u7684\u64cd\u4f5c\u5c06\u5728\u51fd\u6570\u8c03\u7528\u4e4b\u95f4\u4fdd\u6301\n    staticVariable++;\n}\n\nint main() {\n    exampleFunction();  // \u9759\u6001\u53d8\u91cf staticVariable \u88ab\u521d\u59cb\u5316\u4e3a 5\n    exampleFunction();  // staticVariable \u589e\u52a0\u5230 6\n    return 0;\n}\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a\u7684\u6570\u636e\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\u5206\u914d\uff0c\u5728\u7a0b\u5e8f\u7ed3\u675f\u65f6\u91ca\u653e\u3002</li> <li>\u5168\u5c40\u53d8\u91cf\u533a\u7684\u6570\u636e\u53ef\u4ee5\u88ab\u6574\u4e2a\u7a0b\u5e8f\u8bbf\u95ee\uff0c\u800c\u9759\u6001\u53d8\u91cf\u533a\u7684\u6570\u636e\u4ec5\u5728\u58f0\u660e\u5b83\u7684\u51fd\u6570\u5185\u53ef\u89c1\u3002</li> <li>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684\u540c\u6b65\u673a\u5236\uff0c\u4ee5\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u5bf9\u5b83\u4eec\u7684\u5b89\u5168\u8bbf\u95ee\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#6","title":"6. \u6808","text":"<p>\u6808\uff08Stack\uff09\u662f\u4e00\u79cd\u5185\u5b58\u5206\u914d\u548c\u7ba1\u7406\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u9075\u5faa\u540e\u8fdb\u5148\u51fa\uff08Last In, First Out\uff0cLIFO\uff09\u7684\u539f\u5219\u3002\u6808\u5185\u5b58\u4e3b\u8981\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u8c03\u7528\u4fe1\u606f\u4ee5\u53ca\u4e00\u4e9b\u4e34\u65f6\u6570\u636e\uff0c\u662f\u7a0b\u5e8f\u6267\u884c\u65f6\u81ea\u52a8\u7ba1\u7406\u7684\u4e00\u5757\u5185\u5b58\u533a\u57df\u3002</p> <p> \u4ee5\u4e0b\u662f\u5bf9\u6808\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p> <ol> <li> <p>\u7ed3\u6784\uff1a</p> <ul> <li>\u6808\u662f\u4e00\u79cd\u7ebf\u6027\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u4ee5\u60f3\u8c61\u6210\u4e00\u4e2a\u5177\u6709\u4e24\u4e2a\u4e3b\u8981\u64cd\u4f5c\u7684\u5bb9\u5668\uff1a\u538b\u6808\uff08Push\uff09\u548c\u5f39\u6808\uff08Pop\uff09\u3002</li> <li>\u6570\u636e\u9879\u6309\u7167\u540e\u8fdb\u5148\u51fa\u7684\u6b21\u5e8f\u8fdb\u51fa\u6808\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u5b58\u50a8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\uff1a\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u5176\u5c40\u90e8\u53d8\u91cf\u88ab\u5206\u914d\u5230\u6808\u4e0a\uff0c\u51fd\u6570\u8fd4\u56de\u65f6\u8fd9\u4e9b\u53d8\u91cf\u5c31\u88ab\u81ea\u52a8\u91ca\u653e\u3002</li> <li>\u5b58\u50a8\u51fd\u6570\u7684\u8c03\u7528\u4fe1\u606f\uff1a\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\u548c\u4e00\u4e9b\u5176\u4ed6\u4fe1\u606f\u88ab\u538b\u5165\u6808\u4e2d\uff0c\u51fd\u6570\u8fd4\u56de\u65f6\u518d\u4ece\u6808\u4e2d\u5f39\u51fa\u8fd9\u4e9b\u4fe1\u606f\u3002</li> <li>\u4e34\u65f6\u6570\u636e\u7684\u5b58\u50a8\uff1a\u6808\u4e5f\u7528\u4e8e\u5b58\u50a8\u4e00\u4e9b\u51fd\u6570\u8c03\u7528\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u6570\u636e\u3002</li> </ul> </li> <li> <p>\u6808\u5e27\uff1a</p> <ul> <li>\u5728\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u4e00\u4e2a\u6808\u5e27\uff08Stack Frame\uff09\u88ab\u538b\u5165\u6808\u4e2d\u3002\u6808\u5e27\u5305\u542b\u4e86\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u3001\u8fd4\u56de\u5730\u5740\u548c\u5176\u4ed6\u4e0e\u51fd\u6570\u8c03\u7528\u76f8\u5173\u7684\u4fe1\u606f\u3002</li> <li>\u5f53\u51fd\u6570\u8fd4\u56de\u65f6\uff0c\u6808\u5e27\u88ab\u5f39\u51fa\uff0c\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u88ab\u9500\u6bc1\uff0c\u63a7\u5236\u6d41\u56de\u5230\u8c03\u7528\u51fd\u6570\u7684\u4f4d\u7f6e\u3002</li> </ul> </li> <li> <p>\u793a\u4f8b\uff1a</p> </li> </ol> <pre><code>#include &lt;iostream&gt;\n\nint add(int a, int b) {\n    // \u6808\u5e27\u5f00\u59cb\uff0c\u5c40\u90e8\u53d8\u91cf a \u548c b \u88ab\u5206\u914d\u5728\u6808\u4e0a\n    int result = a + b;  // \u4e34\u65f6\u53d8\u91cf result \u4e5f\u5728\u6808\u4e0a\n    // \u6808\u5e27\u7ed3\u675f\uff0c\u5c40\u90e8\u53d8\u91cf a\u3001b \u548c result \u88ab\u9500\u6bc1\n    return result;\n}\n\nint main() {\n    // \u6808\u5e27\u5f00\u59cb\uff0c\u5c40\u90e8\u53d8\u91cf x \u548c y \u88ab\u5206\u914d\u5728\u6808\u4e0a\n    int x = 5, y = 10;\n    int sum = add(x, y);  // \u51fd\u6570\u8c03\u7528\uff0c\u65b0\u7684\u6808\u5e27\u88ab\u538b\u5165\u6808\u4e2d\n    // \u6808\u5e27\u7ed3\u675f\uff0c\u5c40\u90e8\u53d8\u91cf x\u3001y \u548c sum \u88ab\u9500\u6bc1\n\n    std::cout &lt;&lt; \"Sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>main</code> \u51fd\u6570\u548c <code>add</code> \u51fd\u6570\u7684\u6808\u5e27\u4f9d\u6b21\u88ab\u521b\u5efa\u548c\u9500\u6bc1\u3002<code>add</code> \u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u548c\u4e34\u65f6\u53d8\u91cf\u90fd\u5b58\u50a8\u5728\u6808\u4e0a\uff0c\u968f\u7740\u51fd\u6570\u7684\u8fd4\u56de\uff0c\u8fd9\u4e9b\u53d8\u91cf\u4e5f\u88ab\u9500\u6bc1\u3002\u51fd\u6570\u8c03\u7528\u8fc7\u7a0b\u4e2d\u7684\u6808\u5e27\u64cd\u4f5c\u6e05\u6670\u5730\u5c55\u793a\u4e86\u6808\u7684\u7279\u6027\u3002</p> <p>\u6808\u7684\u7ba1\u7406\u901a\u5e38\u7531\u7f16\u8bd1\u5668\u8d1f\u8d23\u3002\u7f16\u8bd1\u5668\u6839\u636e\u7a0b\u5e8f\u7684\u7ed3\u6784\u548c\u51fd\u6570\u8c03\u7528\u5173\u7cfb\u6765\u5206\u914d\u548c\u7ba1\u7406\u6808\u7a7a\u95f4\u3002\u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u7f16\u8bd1\u5668\u4f1a\u751f\u6210\u4e00\u4e9b\u4ee3\u7801\u6765\u5904\u7406\u6808\u7684\u64cd\u4f5c\uff0c\u5305\u62ec\u6808\u5e27\u7684\u521b\u5efa\u548c\u9500\u6bc1\uff0c\u5c40\u90e8\u53d8\u91cf\u7684\u5206\u914d\u548c\u91ca\u653e\uff0c\u4ee5\u53ca\u51fd\u6570\u8c03\u7528\u65f6\u76f8\u5173\u7684\u6808\u64cd\u4f5c\u3002</p> <p>\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u6e90\u4ee3\u7801\u65f6\u4f1a\uff1a</p> <ol> <li>\u5206\u6790\u51fd\u6570\u8c03\u7528\u5173\u7cfb\uff1a\u7f16\u8bd1\u5668\u9700\u8981\u4e86\u89e3\u7a0b\u5e8f\u4e2d\u51fd\u6570\u7684\u8c03\u7528\u5173\u7cfb\uff0c\u4ee5\u4fbf\u6b63\u786e\u751f\u6210\u6808\u5e27\u548c\u5904\u7406\u51fd\u6570\u8c03\u7528\u65f6\u7684\u53c2\u6570\u4f20\u9012\u548c\u8fd4\u56de\u503c\u3002</li> <li>\u5206\u914d\u6808\u7a7a\u95f4\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u51fd\u6570\uff0c\u7f16\u8bd1\u5668\u9700\u8981\u51b3\u5b9a\u5206\u914d\u591a\u5c11\u7a7a\u95f4\u7528\u4e8e\u6808\u5e27\uff0c\u4ee5\u5bb9\u7eb3\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u3001\u8fd4\u56de\u5730\u5740\u7b49\u3002</li> <li>\u751f\u6210\u6808\u64cd\u4f5c\u6307\u4ee4\uff1a\u7f16\u8bd1\u5668\u4f1a\u751f\u6210\u76f8\u5e94\u7684\u6c47\u7f16\u6216\u673a\u5668\u7801\u6307\u4ee4\uff0c\u7528\u4e8e\u6267\u884c\u6808\u7684\u538b\u6808\u548c\u5f39\u6808\u64cd\u4f5c\uff0c\u4ee5\u53ca\u5904\u7406\u51fd\u6570\u8c03\u7528\u65f6\u7684\u6808\u64cd\u4f5c\u3002</li> </ol> <p>\u867d\u7136\u7f16\u8bd1\u5668\u8d1f\u8d23\u751f\u6210\u5927\u90e8\u5206\u4e0e\u6808\u76f8\u5173\u7684\u4ee3\u7801\uff0c\u4f46\u5728\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u7a0b\u5e8f\u5458\u4e5f\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u64cd\u4f5c\u6808\u6307\u9488\u6765\u8fdb\u884c\u5e95\u5c42\u7684\u6808\u7ba1\u7406\u3002\u5728\u6c47\u7f16\u8bed\u8a00\u7b49\u4f4e\u7ea7\u8bed\u8a00\u4e2d\uff0c\u7a0b\u5e8f\u5458\u6709\u66f4\u591a\u7684\u63a7\u5236\u6743\uff0c\u53ef\u4ee5\u76f4\u63a5\u64cd\u4f5c\u6808\u3002\u5728\u9ad8\u7ea7\u8bed\u8a00\u4e2d\uff0c\u8fd9\u79cd\u5e95\u5c42\u7684\u6808\u64cd\u4f5c\u901a\u5e38\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u5904\u7406\u3002</p> <p>Tip</p> <p>\u6808 stack \uff1a\u662f\u90a3\u4e9b\u7f16\u8bd1\u5668\u5728\u9700\u8981\u65f6\u5206\u914d\uff0c\u5728\u4e0d\u9700\u8981\u65f6\u81ea\u52a8\u6e05\u9664\u7684\u5b58\u50a8\u533a\u3002\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u3002\u5b58\u653e\u5728\u6808\u4e2d\u7684\u6570\u636e\u53ea\u5728\u5f53\u524d\u51fd\u6570\u53ca\u4e0b\u4e00\u5c42\u51fd\u6570\u4e2d\u6709\u6548\uff0c\u4e00\u65e6\u51fd\u6570\u8fd4\u56de\u4e86\uff0c\u8fd9\u4e9b\u6570\u636e\u4e5f\u5c31\u81ea\u52a8\u91ca\u653e\u4e86\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#7","title":"7. \u5806","text":"<p>\u5806\u662f\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5185\u5b58\u7684\u4e00\u79cd\u5185\u5b58\u533a\u57df\uff0c\u4e5f\u79f0\u4e3a\u81ea\u7531\u5b58\u50a8\u533a\u3002\u5806\u4e0a\u7684\u5185\u5b58\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u5206\u914d\u548c\u91ca\u653e\uff0c\u7531\u7a0b\u5e8f\u5458\u8d1f\u8d23\u7ba1\u7406\u3002\u4e0e\u6808\u4e0d\u540c\uff0c\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u4e0d\u53d7\u7a0b\u5e8f\u7684\u6267\u884c\u987a\u5e8f\u9650\u5236\u3002</p> <p>\u4ee5\u4e0b\u662f\u5bf9\u5806\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p> <ol> <li> <p>\u7ed3\u6784\uff1a</p> <ul> <li>\u5806\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7684\u4e00\u5757\u8f83\u5927\u7684\u5185\u5b58\u533a\u57df\uff0c\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u5728\u5806\u4e0a\u52a8\u6001\u5730\u5206\u914d\u5185\u5b58\u3002</li> <li>\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u662f\u7531\u7a0b\u5e8f\u5458\u624b\u52a8\u63a7\u5236\u7684\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u52a8\u6001\u5185\u5b58\u5206\u914d\uff1a\u5f53\u7a0b\u5e8f\u65e0\u6cd5\u786e\u5b9a\u9700\u8981\u591a\u5c11\u5185\u5b58\u65f6\uff0c\u6216\u8005\u9700\u8981\u5728\u7a0b\u5e8f\u7684\u4e0d\u540c\u90e8\u5206\u5171\u4eab\u6570\u636e\u65f6\uff0c\u4f7f\u7528\u5806\u4e0a\u7684\u5185\u5b58\u662f\u5f88\u6709\u7528\u7684\u3002</li> <li>\u5bf9\u8c61\u7684\u52a8\u6001\u521b\u5efa\u548c\u9500\u6bc1\uff1a\u4f8b\u5982\uff0c\u4f7f\u7528 <code>new</code> \u64cd\u4f5c\u7b26\u5728\u5806\u4e0a\u521b\u5efa\u5bf9\u8c61\uff0c\u4ee5\u53ca\u4f7f\u7528 <code>delete</code> \u64cd\u4f5c\u7b26\u91ca\u653e\u76f8\u5e94\u7684\u5185\u5b58\u3002</li> </ul> </li> <li> <p>\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\uff1a</p> <ul> <li>\u5206\u914d\u5185\u5b58\uff1a\u53ef\u4ee5\u4f7f\u7528 <code>new</code> \u64cd\u4f5c\u7b26\uff08\u5728C++\u4e2d\uff09\u6216\u8005 <code>malloc</code> \u51fd\u6570\uff08\u5728C\u8bed\u8a00\u4e2d\uff09\u6765\u5728\u5806\u4e0a\u52a8\u6001\u5206\u914d\u5185\u5b58\u3002</li> </ul> </li> </ol> <pre><code>// \u5728\u5806\u4e0a\u5206\u914d\u6574\u6570\u6570\u7ec4\nint* dynamicArray = new int[10];\n</code></pre> <ul> <li>\u91ca\u653e\u5185\u5b58\uff1a\u5206\u914d\u7684\u5185\u5b58\u9700\u8981\u624b\u52a8\u91ca\u653e\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\u3002\u4f7f\u7528 <code>delete</code> \u64cd\u4f5c\u7b26\uff08\u5728C++\u4e2d\uff09\u6216\u8005 <code>free</code> \u51fd\u6570\uff08\u5728C\u8bed\u8a00\u4e2d\uff09\u3002</li> </ul> <pre><code>// \u91ca\u653e\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\ndelete[] dynamicArray;\n</code></pre> <ol> <li>\u793a\u4f8b\uff1a</li> </ol> <pre><code>#include &lt;iostream&gt;\n\nint main() {\n    // \u5728\u5806\u4e0a\u5206\u914d\u4e00\u4e2a\u6574\u6570\n    int* dynamicInt = new int;\n    *dynamicInt = 42;\n\n    // \u5728\u5806\u4e0a\u5206\u914d\u4e00\u4e2a\u5b57\u7b26\u4e32\n    char* dynamicString = new char[10];\n    strcpy(dynamicString, \"Hello\");\n\n    // \u4f7f\u7528\u5206\u914d\u7684\u5185\u5b58\n    std::cout &lt;&lt; \"Dynamic Int: \" &lt;&lt; *dynamicInt &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Dynamic String: \" &lt;&lt; dynamicString &lt;&lt; std::endl;\n\n    // \u91ca\u653e\u5806\u4e0a\u7684\u5185\u5b58\n    delete dynamicInt;\n    delete[] dynamicString;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u901a\u8fc7 <code>new</code> \u64cd\u4f5c\u7b26\u5728\u5806\u4e0a\u5206\u914d\u4e86\u4e00\u4e2a\u6574\u6570\u548c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u4f7f\u7528 <code>delete</code> \u64cd\u4f5c\u7b26\u91ca\u653e\u4e86\u8fd9\u4e9b\u5185\u5b58\u3002\u8fd9\u6837\u7684\u52a8\u6001\u5185\u5b58\u7ba1\u7406\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u521b\u5efa\u548c\u9500\u6bc1\u5bf9\u8c61\uff0c\u589e\u52a0\u4e86\u7075\u6d3b\u6027\u3002\u4f46\u9700\u8981\u6ce8\u610f\uff0c\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u9700\u8981\u7a0b\u5e8f\u5458\u5c0f\u5fc3\u7ba1\u7406\uff0c\u4ee5\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u6216\u60ac\u6302\u6307\u9488\u7b49\u95ee\u9898\u3002\u5728\u73b0\u4ee3C++\u4e2d\uff0c\u63a8\u8350\u4f7f\u7528\u667a\u80fd\u6307\u9488\u7b49\u8d44\u6e90\u7ba1\u7406\u5de5\u5177\u6765\u51cf\u5c11\u624b\u52a8\u5185\u5b58\u7ba1\u7406\u7684\u590d\u6742\u6027\u3002</p> <p>Tip</p> <p>\u5806 heap \uff1a\u7531 new \u5206\u914d\u7684\u5185\u5b58\u5757\uff0c\u5176\u91ca\u653e\u7f16\u8bd1\u5668\u4e0d\u53bb\u7ba1\uff0c\u7531\u7a0b\u5e8f\u5458\u81ea\u5df1\u63a7\u5236\u3002\u5982\u679c\u7a0b\u5e8f\u5458\u6ca1\u6709\u91ca\u653e\u6389\uff0c\u5728\u7a0b\u5e8f\u7ed3\u675f\u65f6\u7cfb\u7edf\u4f1a\u81ea\u52a8\u56de\u6536\u3002\u6d89\u53ca\u7684\u95ee\u9898\uff1a\u201c\u7f13\u51b2\u533a\u6ea2\u51fa\u201d\u3001\u201c\u5185\u5b58\u6cc4\u9732\u201d\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/01-C%2B%2B%E7%9A%84%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/#8","title":"8. \u5c0f\u7ed3","text":"<p>\u7406\u89e3 \u592a\u591a \u592a\u6742</p> <p>\u6211\u7684\u7ecf\u9a8c\uff1a</p> <p>\u5f53\u4f60\u5728VS\u4e2d\u5199\u4e0b\u4e00\u6bb5\u4ee3\u7801\uff0c\u6309\u9053\u7406\u6765\u8bb2\uff0c\u4f60\u5e76\u4e0d\u9700\u8981\u592a\u5728\u610f\uff0c\u4f60\u7684\u4ee3\u7801\u53d8\u91cf\u88ab\u5206\u914d\u5230\u54ea\u4e2a\u5185\u5b58\u533a\u57df\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u5bf9\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u57fa\u672c\u4e0a\u662f\u900f\u660e\u7684\uff0c\u4f60\u53ef\u4ee5\u5728\u610f\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5728\u610f\u3002\u4f46\u662f\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u4e13\u4e1a\u7684C++\u4f7f\u7528\u8005\u6765\u8bb2\uff0c\u4f60\u5e94\u8be5\u5bf9\u81ea\u5df1\u6240\u5199\u7684\u4ee3\u7801\u6709\u6bd4\u8f83\u6e05\u6670\u7684\u628a\u63e1\uff0c\u6e05\u695a\u81ea\u5df1\u7684\u4ee3\u7801\u4e2d\u7684\u53d8\u91cf\u5b58\u5728\u4ec0\u4e48\u533a\u57df\u4e2d\uff0c\u4f1a\u6709\u975e\u5e38\u5927\u597d\u5904\uff0c\u8fd9\u4e0d\u4f46\u80fd\u591f\u8ba9\u4f60\u5199\u51fa\u9ad8\u6027\u80fd\u7684\u4ee3\u7801\uff0c\u8fd8\u6709\u52a9\u4e8e\u4f60\u51cf\u5c11\u4e00\u4e9b\u6bd4\u8f83\u6df1\u5c42\u6b21\u7684BUG\u3002</p> <p>\u4f8b\u5982\u4e0b\u9762\u7684\u95ee\u9898\uff1a</p> <p>\u4f7f\u7528C++\u5185\u5b58\u65f6\u7684\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u5185\u5b58\u6cc4\u6f0f\uff1a\u786e\u4fdd\u5728\u52a8\u6001\u5206\u914d\u5185\u5b58\u540e\u9002\u65f6\u91ca\u653e\uff0c\u907f\u514d\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u3002</li> <li>\u91ce\u6307\u9488\uff1a\u6ce8\u610f\u5728\u6307\u9488\u4f7f\u7528\u540e\u53ca\u65f6\u7f6e\u4e3a nullptr \u907f\u514d\u91ce\u6307\u9488\u7684\u4ea7\u751f\uff0c\u907f\u514d\u8bbf\u95ee\u5df2\u7ecf\u91ca\u653e\u7684\u5185\u5b58\u3002</li> <li>\u6808\u6ea2\u51fa\uff1a\u8c28\u614e\u4f7f\u7528\u9012\u5f52\u6216\u8005\u5206\u914d\u5927\u91cf\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u4ee5\u514d\u9020\u6210\u6808\u6ea2\u51fa\u3002</li> <li>\u60ac\u6302\u6307\u9488\uff1a\u907f\u514d\u60ac\u6302\u6307\u9488\u95ee\u9898\uff0c\u5373\u6307\u5411\u5df2\u7ecf\u91ca\u653e\u7684\u5185\u5b58\u533a\u57df\u3002</li> <li>\u667a\u80fd\u6307\u9488\uff1a\u8003\u8651\u4f7f\u7528C++\u7684\u667a\u80fd\u6307\u9488\uff08\u5982<code>std::unique_ptr</code>\u548c<code>std::shared_ptr</code>\uff09\uff0c\u4ee5\u63d0\u9ad8\u5185\u5b58\u7ba1\u7406\u7684\u5b89\u5168\u6027\u548c\u4fbf\u5229\u6027\u3002</li> <li>\u5c40\u90e8\u53d8\u91cf\u751f\u547d\u5468\u671f\uff1a\u7406\u89e3\u5c40\u90e8\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\uff0c\u786e\u4fdd\u5728\u79bb\u5f00\u5176\u4f5c\u7528\u57df\u524d\u4e0d\u518d\u8bbf\u95ee\u3002</li> </ul> <p>\u91ce\u6307\u9488\uff08Wild Pointer\uff09\u548c\u60ac\u7a7a\u6307\u9488\uff08Dangling Pointer\uff09\u90fd\u662f\u4e0e\u6307\u9488\u76f8\u5173\u7684\u95ee\u9898\uff0c\u4f46\u5b83\u4eec\u4ea7\u751f\u7684\u539f\u56e0\u548c\u8868\u73b0\u6709\u6240\u4e0d\u540c\u3002</p> <ol> <li> <p>\u91ce\u6307\u9488\uff1a</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u91ce\u6307\u9488\u662f\u6307\u672a\u521d\u59cb\u5316\u6216\u8005\u5df2\u7ecf\u91ca\u653e\u7684\u6307\u9488\uff0c\u5176\u503c\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u53ef\u80fd\u6307\u5411\u4efb\u610f\u5185\u5b58\u5730\u5740\u3002</p> </li> <li>\u793a\u4f8b\uff1a</li> </ol> <pre><code>int* wildPointer;  // \u672a\u521d\u59cb\u5316\u7684\u91ce\u6307\u9488\n// \u6216\u8005\nint* ptr = new int;  // \u521b\u5efa\u4e86\u4e00\u4e2a\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\uff0c\u4f46\u6ca1\u6709\u521d\u59cb\u5316\u6307\u9488\u7684\u503c\n// \u6b64\u65f6 ptr \u662f\u91ce\u6307\u9488\n</code></pre> <ul> <li> <p>\u95ee\u9898\uff1a\u5bf9\u91ce\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u6216\u8005\u4fee\u6539\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\uff0c\u56e0\u4e3a\u5b83\u4eec\u6307\u5411\u7684\u5185\u5b58\u533a\u57df\u662f\u4e0d\u53ef\u77e5\u7684\u3002</p> </li> <li> <p>\u60ac\u7a7a\u6307\u9488\uff1a</p> </li> <li> <p>\u5b9a\u4e49\uff1a\u60ac\u7a7a\u6307\u9488\u662f\u6307\u6307\u5411\u5df2\u7ecf\u88ab\u91ca\u653e\u7684\u5185\u5b58\u5730\u5740\u7684\u6307\u9488\uff0c\u5373\u6307\u9488\u6307\u5411\u7684\u5185\u5b58\u5df2\u7ecf\u4e0d\u518d\u6709\u6548\uff0c\u4f46\u6307\u9488\u672c\u8eab\u5e76\u6ca1\u6709\u88ab\u91cd\u7f6e\u4e3a <code>nullptr</code> \u6216 <code>NULL</code>\u3002</p> </li> <li>\u793a\u4f8b\uff1a</li> </ul> <pre><code>int* danglingPointer;\n{\n    int x = 5;\n    danglingPointer = &amp;x;  // x \u5728\u79bb\u5f00\u4f5c\u7528\u57df\u540e\uff0cdanglingPointer \u6210\u4e3a\u60ac\u7a7a\u6307\u9488\n}\n</code></pre> <ul> <li>\u95ee\u9898\uff1a\u5bf9\u60ac\u7a7a\u6307\u9488\u8fdb\u884c\u89e3\u5f15\u7528\u6216\u8005\u4fee\u6539\u64cd\u4f5c\u540c\u6837\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\uff0c\u56e0\u4e3a\u5b83\u4eec\u6307\u5411\u7684\u5185\u5b58\u5df2\u7ecf\u88ab\u91ca\u653e\u3002</li> </ul> <p>\u533a\u522b\u603b\u7ed3\uff1a</p> <ul> <li>\u91ce\u6307\u9488\u901a\u5e38\u662f\u56e0\u4e3a\u672a\u521d\u59cb\u5316\u6216\u8005\u672a\u660e\u786e\u8d4b\u503c\u5bfc\u81f4\u7684\uff0c\u5b83\u4eec\u6307\u5411\u7684\u5185\u5b58\u533a\u57df\u662f\u4e0d\u786e\u5b9a\u7684\u3002</li> <li>\u60ac\u7a7a\u6307\u9488\u5219\u662f\u6307\u5411\u5df2\u7ecf\u88ab\u91ca\u653e\u7684\u5185\u5b58\uff0c\u5b83\u4eec\u6307\u5411\u7684\u5185\u5b58\u533a\u57df\u867d\u7136\u66fe\u7ecf\u6709\u6548\uff0c\u4f46\u73b0\u5728\u5df2\u7ecf\u4e0d\u518d\u5c5e\u4e8e\u7a0b\u5e8f\u3002</li> <li>\u91ce\u6307\u9488\u548c\u60ac\u7a7a\u6307\u9488\u90fd\u53ef\u80fd\u5bfc\u81f4\u7a0b\u5e8f\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u5e94\u8be5\u907f\u514d\u5b83\u4eec\u7684\u4ea7\u751f\u3002\u4f7f\u7528\u667a\u80fd\u6307\u9488\u3001\u826f\u597d\u7684\u5185\u5b58\u7ba1\u7406\u5b9e\u8df5\u548c\u89c4\u8303\u7684\u6307\u9488\u4f7f\u7528\u53ef\u4ee5\u51cf\u5c11\u8fd9\u4e9b\u95ee\u9898\u7684\u53d1\u751f\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/01-%E6%A8%A1%E6%9D%BF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/","title":"\u301001\u3011\u57fa\u672c\u6982\u5ff5","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/01-%E6%A8%A1%E6%9D%BF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#-","title":"\u6a21\u677f-\u57fa\u672c\u6982\u5ff5","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/01-%E6%A8%A1%E6%9D%BF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#11","title":"1.1. \u4ec0\u4e48\u662f\u6a21\u677f\u7f16\u7a0b\uff1f","text":"<p>\u4ec0\u4e48\u662f\u6a21\u677f\uff1f</p> <p></p> <p>\u6a21\u677f\u7f16\u7a0b</p> <p>\u5bbd\u6cdb\u3001\u5e7f\u6cdb\uff0c\u6cdb\u6cdb....</p> <p>Tip</p> <ul> <li>\u6a21\u677f\u7f16\u7a0b\u662fC++\u5b9e\u73b0\u6cdb\u578b\u7f16\u7a0b\u7684\u624b\u6bb5\uff0c\u6cdb\u578b\u6545\u540d\u601d\u8bae\uff0c\u540c\u4e00\u6bb5\u4ee3\u7801\u903b\u8f91\u53ef\u4ee5\u63a5\u6536\u591a\u4e2a\u7c7b\u578b\u7684\u53c2\u6570\u3002</li> </ul> <p>Important</p> <ul> <li>\u4e3a\u4ec0\u4e48\u51fa\u73b0\u6cdb\u578b\uff1f</li> </ul> <p>\u5f3a\u7c7b\u578b\u8bed\u8a00\uff08Java\uff0cC#\uff0cSwift\uff0cPython\uff09\u548c\u5f31\u7c7b\u578b\uff08Javascript,php,python\uff09\u7684\u8bed\u8a00\u3002C++\u662f\u5f3a\u7c7b\u578b\u8bed\u8a00\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u5728 C++ \u4e2d\u5c06\u4e00\u4e2a\u6574\u6570\u548c\u4e00\u4e2a\u6d6e\u70b9\u6570\u76f8\u52a0\uff0c\u4f60\u9700\u8981\u660e\u786e\u5730\u5c06\u5176\u4e2d\u4e00\u4e2a\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\uff0c\u4ee5\u786e\u4fdd\u7c7b\u578b\u5339\u914d\u3002\u8fd9\u6837\u7684\u4e25\u683c\u7c7b\u578b\u68c0\u67e5\u6709\u52a9\u4e8e\u9884\u9632\u4e00\u4e9b\u7531\u4e8e\u7c7b\u578b\u4e0d\u5339\u914d\u800c\u5bfc\u81f4\u7684\u9519\u8bef\u3002</p> <p>\u4e3a\u4e86\u8ba9\u4e00\u6bb5\u4ee3\u7801\u903b\u8f91\uff0c\u53ef\u4ee5\u540c\u65f6\u9002\u5e94\u591a\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u5728C++\u4e2d\u91c7\u7528\u4e86\u6a21\u677f\u6280\u672f\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\uff0c\u4f60\u5199\u4e00\u5957\u4ee3\u7801\uff0c\u53ef\u4ee5\u9002\u5e94\u591a\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u8fd9\u6837\u4f60\u5c31\u7701\u4e8b\u513f\u4e86\uff0c\u8fbe\u5230\u4e86\u9ad8\u6548\u590d\u7528\u4ee3\u7801\u7684\u76ee\u7684\u3002</p> <p>Note</p> <p>\u6a21\u677f\u7684\u7ec8\u6781\u76ee\u6807\u662f\uff1a\u652f\u6301\u6cdb\u578b\u7f16\u7a0b\uff0c\u5373\u7f16\u5199\u4e0e\u6570\u636e\u7c7b\u578b\u65e0\u5173\u7684\u901a\u7528\u4ee3\u7801\u3002\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u521b\u5efa\u66f4\u7075\u6d3b\u3001\u901a\u7528\u7684\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\uff0c\u800c\u65e0\u9700\u4e3a\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u90fd\u7f16\u5199\u5355\u72ec\u7684\u4ee3\u7801</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/01-%E6%A8%A1%E6%9D%BF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#12","title":"1.2. \u4ea7\u751f\u7684\u539f\u56e0\u4e3e\u4f8b","text":"<p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u6a21\u677f\uff0c\u5b83\u5230\u5e95\u8981\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u5462\uff1f \u8ba9\u6211\u4eec\u6765\u770b\u4e00\u6bb5\u70c2\u5927\u8857\u4e14\u52a1\u5fc5\u7ecf\u5178\u7684\u6848\u4f8b\u3002</p> <p>\u5728\u4f20\u7edf\u7684C++\u4e2d\uff0c\u5982\u679c\u8981\u4ea4\u6362\u4e0d\u540c\u7c7b\u578b\u7684\u53c2\u6570\uff08\u5982int\u3001double\u3001char\u7b49\uff09\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e3a\u6bcf\u4e00\u79cd\u7c7b\u578b\u7f16\u5199\u4e00\u4e2a\u72ec\u7acb\u7684\u51fd\u6570\u3002\u8fd9\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u91cd\u590d\uff0c\u800c\u6a21\u677f\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u901a\u7528\u548c\u7075\u6d3b\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u4f20\u7edf\u7684\u975e\u6a21\u677f\u65b9\u5f0f\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u4ea4\u6362\u4e24\u4e2aint\u578b\u53c2\u6570\nvoid swapInt(int &amp;a, int &amp;b) {\n    int temp = a;  // \u4e34\u65f6\u53d8\u91cf\u5b58\u50a8a\u7684\u503c\n    a = b;         // \u5c06b\u7684\u503c\u8d4b\u7ed9a\n    b = temp;      // \u5c06\u4e34\u65f6\u53d8\u91cf\u7684\u503c\u8d4b\u7ed9b\uff0c\u5b8c\u6210\u4ea4\u6362\n}\n\n// \u4ea4\u6362\u4e24\u4e2adouble\u578b\u53c2\u6570\nvoid swapDouble(double &amp;a, double &amp;b) {\n    double temp = a;  // \u4e34\u65f6\u53d8\u91cf\u5b58\u50a8a\u7684\u503c\n    a = b;            // \u5c06b\u7684\u503c\u8d4b\u7ed9a\n    b = temp;         // \u5c06\u4e34\u65f6\u53d8\u91cf\u7684\u503c\u8d4b\u7ed9b\uff0c\u5b8c\u6210\u4ea4\u6362\n}\n\n// \u4ea4\u6362\u4e24\u4e2achar\u578b\u53c2\u6570\nvoid swapChar(char &amp;a, char &amp;b) {\n    char temp = a;  // \u4e34\u65f6\u53d8\u91cf\u5b58\u50a8a\u7684\u503c\n    a = b;         // \u5c06b\u7684\u503c\u8d4b\u7ed9a\n    b = temp;      // \u5c06\u4e34\u65f6\u53d8\u91cf\u7684\u503c\u8d4b\u7ed9b\uff0c\u5b8c\u6210\u4ea4\u6362\n}\n\nint main() {\n    int x = 5, y = 10;\n    double a = 3.14, b = 6.28;\n    char c = 'A', d = 'B';\n\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; std::endl;\n    swapInt(x, y);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; std::endl;\n    swapDouble(a, b);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: c = \" &lt;&lt; c &lt;&lt; \", d = \" &lt;&lt; d &lt;&lt; std::endl;\n    swapChar(c, d);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: c = \" &lt;&lt; c &lt;&lt; \", d = \" &lt;&lt; d &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u6a21\u677f\u6765\u6539\u8fdb\u8fd9\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u5b9a\u4e49\u6a21\u677f\u51fd\u6570\uff0c\u5b9e\u73b0\u901a\u7528\u7684\u4e24\u4e2a\u53c2\u6570\u4ea4\u6362\ntemplate &lt;typename JT&gt;\nvoid swap(JT &amp;a, JT &amp;b) {\n    JT temp = a;\n    a = b;\n    b = temp;\n}\n\nint main() {\n    // \u793a\u4f8b\uff1aint\u7c7b\u578b\u53c2\u6570\u4ea4\u6362\n    int x = 5, y = 10;\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; std::endl;\n    swap(x, y);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; std::endl;\n\n    // \u793a\u4f8b\uff1adouble\u7c7b\u578b\u53c2\u6570\u4ea4\u6362\n    double a = 3.14, b = 6.28;\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; std::endl;\n    swap(a, b);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; std::endl;\n\n    // \u793a\u4f8b\uff1achar\u7c7b\u578b\u53c2\u6570\u4ea4\u6362\n    char c = 'A', d = 'B';\n    std::cout &lt;&lt; \"\u4ea4\u6362\u524d: c = \" &lt;&lt; c &lt;&lt; \", d = \" &lt;&lt; d &lt;&lt; std::endl;\n    swap(c, d);\n    std::cout &lt;&lt; \"\u4ea4\u6362\u540e: c = \" &lt;&lt; c &lt;&lt; \", d = \" &lt;&lt; d &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u901a\u8fc7\u4f7f\u7528\u6a21\u677f\uff0c\u6211\u4eec\u53ea\u9700\u7f16\u5199\u4e00\u4e2a<code>swap</code>\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u7c7b\u578b\u7684\u53c2\u6570\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u907f\u514d\u4e86\u4e3a\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u7f16\u5199\u4e0d\u540c\u7684\u4ea4\u6362\u51fd\u6570\u7684\u91cd\u590d\u4ee3\u7801\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u8bfb\u6027\u3002\u6a21\u677f\u7684\u597d\u5904\u4e4b\u4e00\u5c31\u662f\u80fd\u591f\u5b9e\u73b0\u66f4\u901a\u7528\u7684\u4ee3\u7801\uff0c\u540c\u65f6\u51cf\u5c11\u4ee3\u7801\u7684\u5197\u4f59\u3002</p> <p>\u901a\u8fc7\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c \u6211\u76f8\u4fe1 \u60a8\u5df2\u7ecf\u4e0d\u96be\u611f\u77e5\u5230\uff0c\u6a21\u677f\u7f16\u7a0b\u7684\u9b45\u529b\u4e86\u5427\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/01-%E6%A8%A1%E6%9D%BF-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#13","title":"1.3. \u5982\u4f55\u5b9a\u4e49\u6a21\u677f\uff1f","text":"<p>\u5728C++\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u6a21\u677f\u6765\u5b9a\u4e49\u901a\u7528\u7684\u3001\u4e0e\u6570\u636e\u7c7b\u578b\u65e0\u5173\u7684\u4ee3\u7801\u3002\u6a21\u677f\u7684\u5b9a\u4e49\u4f7f\u7528<code>template</code>\u5173\u952e\u5b57\uff0c\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>template &lt;typename T&gt;\n// \u6216\u8005\u4f7f\u7528\n// template &lt;class T&gt;\n</code></pre> <p>\u8fd9\u91cc\uff0c<code>typename</code>\u6216\u8005<code>class</code>\u5173\u952e\u5b57\u90fd\u53ef\u4ee5\u7528\u6765\u58f0\u660e\u6a21\u677f\u53c2\u6570\u3002<code>T</code>\u662f\u6a21\u677f\u53c2\u6570\u7684\u5360\u4f4d\u7b26\uff0c\u8868\u793a\u7c7b\u578b\u53c2\u6570\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u5176\u4ed6\u6807\u8bc6\u7b26\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\uff0c\u4f8b\u5982<code>template &lt;typename ElementType&gt;</code>\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\u51fd\u6570\u7684\u5b9a\u4e49\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u6a21\u677f\u53c2\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\ntemplate &lt;typename T&gt;\nT add(T a, T b) {\n    return a + b;\n}\n\nint main() {\n    // \u4f7f\u7528\u6a21\u677f\u51fd\u6570\uff0c\u4f20\u5165\u4e0d\u540c\u7c7b\u578b\u7684\u53c2\u6570\n    int resultInt = add(5, 10);\n    double resultDouble = add(3.14, 6.28);\n\n    std::cout &lt;&lt; \"Result (int): \" &lt;&lt; resultInt &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Result (double): \" &lt;&lt; resultDouble &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>add</code>\u51fd\u6570\u662f\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u63a5\u53d7\u4efb\u610f\u76f8\u540c\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u548c\u3002\u6a21\u677f\u51fd\u6570\u7684\u5b9a\u4e49\u4ee5<code>template &lt;typename T&gt;</code>\u5f00\u59cb\uff0c\u7136\u540e\u5728\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u7c7b\u578b\u4e2d\u4f7f\u7528<code>T</code>\u4f5c\u4e3a\u7c7b\u578b\u5360\u4f4d\u7b26\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6a21\u677f\u5e76\u4e0d\u4ec5\u9650\u4e8e\u51fd\u6570\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u7c7b\u548c\u7c7b\u6210\u5458\u51fd\u6570\u3002\u6a21\u677f\u7684\u4f7f\u7528\u53ef\u4ee5\u8ba9\u4f60\u7f16\u5199\u66f4\u901a\u7528\u3001\u53ef\u91cd\u7528\u7684\u4ee3\u7801\uff0c\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/","title":"\u301002\u3011\u7c7b\u6a21\u677f","text":"<p>\u6709\u4e86\u524d\u4e24\u8282\u7684\u94fa\u57ab\uff0c \u6211\u4eec\u518d\u6765\u770b\u7c7b\u6a21\u677f \u5c31\u53d8\u5f97\u7b80\u5355\u4e86\u3002</p> <p>\u5c31\u662f\u8981\u770b <code>template &lt;typename T &gt;</code> \u8fd9\u4e00\u53e5\u8bdd\u540e\u8fb9\u8ddf\u7684\u662f\u4ec0\u4e48\uff0c\u5982\u679c\u8ddf\u7684\u662f\u51fd\u6570\u7684\u5b9a\u4e49\u90a3\u5c31\u662f\u51fd\u6570\u6a21\u677f\uff0c\u5982\u679c\u8ddf\u7684\u7c7b\u90a3\u5c31\u662f\u7c7b\u6a21\u677f\u3002</p> <p>\u5f53\u7136\uff0c\u7c7b\u6a21\u677f\u4e5f\u6709\u4e00\u4e9b\u7ec6\u8282 \u9700\u8981\u6211\u4eec\u6ce8\u610f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#1","title":"1. \u5982\u4f55\u5b9a\u4e49\u7c7b\u6a21\u677f","text":"<p>\u8981\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u6a21\u677f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>template</code> \u5173\u952e\u5b57\u548c\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u677f\u53c2\u6570\u6765\u5b9a\u4e49\u4e00\u4e2a\u901a\u7528\u7684\u7c7b\u3002\u7c7b\u6a21\u677f\u7684\u5b9a\u4e49\u5f62\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>template &lt;typename T1, typename T2, ...&gt;\nclass ClassName {\n    // \u7c7b\u6210\u5458\u548c\u6210\u5458\u51fd\u6570\u7684\u5b9a\u4e49\n};\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>template &lt;typename T1, typename T2, ...&gt;</code> \u8868\u793a\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u6a21\u677f\uff0c\u5176\u4e2d <code>T1</code>, <code>T2</code>, ... \u662f\u6a21\u677f\u53c2\u6570\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6307\u5b9a\u4efb\u610f\u6570\u91cf\u7684\u6a21\u677f\u53c2\u6570\uff0c\u4ee5\u9017\u53f7\u5206\u9694\u3002\u6a21\u677f\u53c2\u6570\u53ef\u4ee5\u662f\u4efb\u4f55\u5408\u6cd5\u7684 C++ \u7c7b\u578b\uff0c\u5305\u62ec\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3001\u7c7b\u7c7b\u578b\u3001\u6307\u9488\u7c7b\u578b\u7b49\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u4f60\u53ef\u4ee5\u5728\u7c7b\u7684\u5b9a\u4e49\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u6a21\u677f\u53c2\u6570\u6765\u58f0\u660e\u7c7b\u7684\u6210\u5458\u53d8\u91cf\u3001\u6210\u5458\u51fd\u6570\u3001\u5185\u90e8\u7c7b\u578b\u7b49\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u4f60\u53ef\u4ee5\u5c06\u5177\u4f53\u7684\u7c7b\u578b\u4f20\u9012\u7ed9\u7c7b\u6a21\u677f\uff0c\u4ece\u800c\u5b9e\u4f8b\u5316\u4e00\u4e2a\u7279\u5b9a\u7c7b\u578b\u7684\u7c7b\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u6a21\u677f\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u6a21\u677f\ntemplate &lt;typename T&gt;\nclass Pair {\nprivate:\n    T first;\n    T second;\npublic:\n    Pair(T a, T b) : first(a), second(b) {}\n    T getFirst() const { return first; }\n    T getSecond() const { return second; }\n};\n\nint main() {\n    // \u4f7f\u7528\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u7c7b\n    Pair&lt;int&gt; intPair(5, 10);\n    std::cout &lt;&lt; \"First: \" &lt;&lt; intPair.getFirst() &lt;&lt; \", Second: \" &lt;&lt; intPair.getSecond() &lt;&lt; std::endl;\n\n    Pair&lt;double&gt; doublePair(3.14, 2.718);\n    std::cout &lt;&lt; \"First: \" &lt;&lt; doublePair.getFirst() &lt;&lt; \", Second: \" &lt;&lt; doublePair.getSecond() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Pair</code> \u7684\u7c7b\u6a21\u677f\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u7c7b\u578b\u53c2\u6570 <code>T</code>\u3002\u7136\u540e\u6211\u4eec\u4f7f\u7528 <code>Pair&lt;int&gt;</code> \u548c <code>Pair&lt;double&gt;</code> \u5206\u522b\u5b9e\u4f8b\u5316\u4e86\u4e24\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u7c7b\u5bf9\u8c61\uff0c\u5206\u522b\u8868\u793a\u4e00\u5bf9\u6574\u6570\u548c\u4e00\u5bf9\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#2","title":"2. \u7c7b\u6a21\u677f\u4e0e\u51fd\u6570\u6a21\u677f\u7684\u533a\u522b","text":"<ol> <li>\u7c7b\u6a21\u677f\u7684\u7c7b\u578b\u53c2\u6570\u53ef\u4ee5\u6709\u9ed8\u8ba4\u503c</li> <li>\u7c7b\u6a21\u677f\u6ca1\u6709\u81ea\u52a8\u63a8\u5bfc\u7684\u4f7f\u7528\u65b9\u5f0f</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#3","title":"3. \u7c7b\u6a21\u677f\u6210\u5458\u51fd\u6570\u7684\u5b9e\u4f8b\u5316","text":"<p>\u5ef6\u8fdf\u5b9e\u4f8b\u5316</p> <p>\u5728\u8c03\u7528\u7684\u65f6\u5019 \u624d\u4f1a\u88ab\u5b9e\u4f8b\u5316</p> <pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\n\nclass MyClass {\n\npublic:\n    void showme() {\n        cout &lt;&lt; \"this is me\" &lt;&lt; endl;\n    }\n\n};\n\n////\u5b9a\u4e00\u4e2a\u6a21\u677f\u7c7b\ntemplate &lt;typename T&gt;\nclass MyTest {\n\npublic:\n    void zhixing() {\n        T obj;\n        obj.showme(); //\u8fd9\u91cc\u5e76\u6ca1\u6709\u62a5\u9519\n    }\n};\n\n\nint main() {\n    MyTest&lt;MyClass&gt; myobj;\n    myobj.zhixing();\n    cout &lt;&lt; \"ddddddddddddd\"&lt;&lt; endl;\n    //return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#4","title":"4. \u6a21\u677f\u7c7b\u5916\u6210\u5458\u51fd\u6570\u7684\u5b9a\u4e49","text":"<p>\u5728\u5b9a\u4e49\u6a21\u677f\u7c7b\u7684\u6210\u5458\u51fd\u6570\u65f6\uff0c\u5982\u679c\u4f60\u60f3\u8981\u5c06\u51fd\u6570\u7684\u5b9e\u73b0\u653e\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u4f60\u9700\u8981\u5728\u51fd\u6570\u5b9a\u4e49\u4e4b\u524d\u52a0\u4e0a\u6a21\u677f\u53c2\u6570\u7684\u58f0\u660e\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u4f60\u9700\u8981\u5728\u51fd\u6570\u540d\u79f0\u524d\u9762\u52a0\u4e0a\u6a21\u677f\u53c2\u6570\u5217\u8868\uff0c\u5e76\u5728\u51fd\u6570\u540d\u540e\u9762\u52a0\u4e0a\u5c16\u62ec\u53f7\u548c\u6a21\u677f\u53c2\u6570\u540d\u3002\u7136\u540e\uff0c\u518d\u7f16\u5199\u51fd\u6570\u7684\u5b9e\u73b0\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5728\u7c7b\u6a21\u677f\u5916\u90e8\u5b9a\u4e49\u6210\u5458\u51fd\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u58f0\u660e\u6a21\u677f\u7c7b\ntemplate &lt;typename T&gt;\nclass MyClass {\nprivate:\n    T data;\npublic:\n    // \u58f0\u660e\u6784\u9020\u51fd\u6570\n    MyClass(T val);\n\n    // \u58f0\u660e\u6210\u5458\u51fd\u6570\n    void printData();\n};\n\n// \u5728\u7c7b\u6a21\u677f\u5916\u90e8\u5b9a\u4e49\u6784\u9020\u51fd\u6570\ntemplate &lt;typename T&gt;\nMyClass&lt;T&gt;::MyClass(T val) : data(val) {}\n\n// \u5728\u7c7b\u6a21\u677f\u5916\u90e8\u5b9a\u4e49\u6210\u5458\u51fd\u6570\ntemplate &lt;typename T&gt;\nvoid MyClass&lt;T&gt;::printData() {\n    std::cout &lt;&lt; \"Data: \" &lt;&lt; data &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u4f7f\u7528\u6a21\u677f\u7c7b\n    MyClass&lt;int&gt; obj(42);\n    obj.printData(); // \u8f93\u51fa Data: 42\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u58f0\u660e\u4e86\u4e00\u4e2a\u6a21\u677f\u7c7b <code>MyClass</code>\uff0c\u7136\u540e\u5728\u7c7b\u6a21\u677f\u5916\u90e8\u5b9a\u4e49\u4e86\u6784\u9020\u51fd\u6570 <code>MyClass&lt;T&gt;::MyClass(T val)</code> \u548c\u6210\u5458\u51fd\u6570 <code>MyClass&lt;T&gt;::printData()</code>\u3002\u5728\u51fd\u6570\u5b9a\u4e49\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u6a21\u677f\u53c2\u6570 <code>T</code>\uff0c\u5e76\u5728\u51fd\u6570\u540d\u79f0\u524d\u9762\u548c\u540e\u9762\u6dfb\u52a0\u4e86\u6a21\u677f\u53c2\u6570\u7684\u58f0\u660e\uff0c\u4ee5\u6307\u660e\u8fd9\u4e9b\u51fd\u6570\u662f\u5c5e\u4e8e\u6a21\u677f\u7c7b\u7684\u3002</p> <p>\u8fd9\u6837\u505a\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5c06\u6a21\u677f\u7c7b\u7684\u6210\u5458\u51fd\u6570\u7684\u5b9a\u4e49\u4e0e\u7c7b\u6a21\u677f\u672c\u8eab\u5206\u5f00\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#5","title":"5. \u7c7b\u6a21\u677f\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570","text":"<p>\u5728C++\u6a21\u677f\u7f16\u7a0b\u4e2d\uff0c\u7c7b\u6a21\u677f\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u662f\u6307\u5c06\u4e00\u4e2a\u7c7b\u6a21\u677f\u7684\u5b9e\u4f8b\uff08\u5bf9\u8c61\uff09\u4f20\u9012\u7ed9\u51fd\u6570\u6216\u5176\u4ed6\u7c7b\u6a21\u677f\u7684\u6784\u9020\u51fd\u6570\u3001\u6210\u5458\u51fd\u6570\u7b49\u3002\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u8ba9\u6211\u4eec\u5728\u7f16\u5199\u901a\u7528\u7684\u4ee3\u7801\u65f6\u7075\u6d3b\u5730\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <pre><code>class myclass{}\n\nvoid func(myclass &amp;p){}\n\nint main(){\n    myclass p;\n    func(p);\n}\n</code></pre> <p>\u4e00\u822c\u6709\u4e09\u79cd\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <p></p> <p>\u4ee3\u7801\u793a\u4f8b:</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//\u54b1\u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u7c7b,\u542b\u6709\u4e24\u4e2a\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\npublic:\n    Student(T1 name,T2 score){\n        this-&gt;name = name;\n        this-&gt;score = score;\n    }\n    void showme() {\n        cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n    }\nprivate:\n    T1 name;\n    T2 score;\n};\n\n\n//\u7b2c\u4e00\u79cd\uff0c\u4f20\u503c\u65b9\u5f0f\uff0c\u786e\u5b9a\u53c2\u6570\u4f20\u503c\n//\u63a5\u6536\u7684\u53c2\u6570 \u662f\u4e00\u4e2a\u5df2\u7ecf\u786e\u5b9a\u4e86\u7c7b\u578b\u7684\u6a21\u677f\u5bf9\u8c61\nvoid func1(Student&lt;string, int&gt; &amp;p)\n{\n    p.showme();\n    cout &lt;&lt; typeid(p).name() &lt;&lt; endl&lt;&lt;endl;\n}\n\n\n//\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff0c\u5c06\u53c2\u6570\u7c7b\u578b\u6a21\u677f\u5316\u4e86\n//\u5176\u5b9e\u4e5f\u95f4\u63a5\u5730\u5c06\u8c03\u7528\u65b9\u8f6c\u5316\u6210\u4e86\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\ntemplate&lt;typename T1,typename T2&gt;\nvoid func2(Student&lt;T1, T2&gt; &amp;p)\n{\n    p.showme();\n    cout &lt;&lt; typeid(p).name() &lt;&lt; endl &lt;&lt; endl;\n}\n\n//\u7b2c\u4e09\u79cd\u65b9\u5f0f\uff0c\u5c06\u6574\u4e2a\u7c7b\u6a21\u677f\u5316\ntemplate&lt;typename T&gt;\nvoid func3(T &amp;p)\n{\n    p.showme();\n    cout &lt;&lt; typeid(p).name() &lt;&lt; endl &lt;&lt; endl;\n}\n\n\nint main() {\n    Student&lt;string, int&gt; myTobj(\"\u5c0f\u660e\",99); //\u5bf9\u8c61\n    func1(myTobj); //\u7b2c\u4e00\u79cd\u65b9\u5f0f\u7684\u8c03\u7528\n\n    func2(myTobj);\n\n    func3(myTobj);\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#6","title":"6. \u7c7b\u6a21\u677f\u4e0e\u7ee7\u627f","text":"<p>\u5f53\u8c08\u53ca\u7c7b\u6a21\u677f\u548c\u7ee7\u627f\u65f6\uff0c\u53ef\u4ee5\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u60c5\u51b5\u548c\u7528\u6cd5\uff1a</p> <ol> <li>\u57fa\u7c7b\u662f\u7c7b\u6a21\u677f\uff1a\u5982\u679c\u57fa\u7c7b\u662f\u7c7b\u6a21\u677f\uff0c\u800c\u6d3e\u751f\u7c7b\u4e0d\u662f\uff0c\u6d3e\u751f\u7c7b\u53ef\u4ee5\u901a\u8fc7\u7279\u5b9a\u7c7b\u578b\u7684\u7ee7\u627f\u6765\u5b9e\u73b0\u3002\u6d3e\u751f\u7c7b\u53ef\u4ee5\u4f7f\u7528\u57fa\u7c7b\u6a21\u677f\u7684\u7279\u5b9a\u5b9e\u4f8b\u5316\u3002</li> </ol> <pre><code>template&lt;typename T&gt;\nclass Base {\npublic:\n    T data;\n    Base(T d) : data(d) {}\n};\n\n// \u6d3e\u751f\u7c7b\u4e0d\u662f\u7c7b\u6a21\u677f\uff0c\u4f7f\u7528\u7279\u5b9a\u7c7b\u578b\u7684\u57fa\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\nclass Derived : public Base&lt;int&gt; {\npublic:\n    Derived(int d) : Base&lt;int&gt;(d) {}\n};\n</code></pre> <ol> <li>\u7c7b\u6a21\u677f\u7ee7\u627f\u7c7b\u6a21\u677f\uff1a\u6d3e\u751f\u7c7b\u548c\u57fa\u7c7b\u90fd\u53ef\u4ee5\u662f\u7c7b\u6a21\u677f\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d3e\u751f\u7c7b\u53ef\u4ee5\u7ee7\u627f\u57fa\u7c7b\u7684\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5df1\u7684\u6a21\u677f\u53c2\u6570\u6216\u4f7f\u7528\u4e0d\u540c\u7684\u6a21\u677f\u53c2\u6570\u3002</li> </ol> <pre><code>template&lt;typename T&gt;\nclass Base {\npublic:\n    T data;\n    Base(T d) : data(d) {}\n};\n\n// \u6d3e\u751f\u7c7b\u662f\u7c7b\u6a21\u677f\uff0c\u7ee7\u627f\u81ea\u7c7b\u6a21\u677f\ntemplate&lt;typename T&gt;\nclass Derived : public Base&lt;T&gt; {\npublic:\n    T extraData;\n    Derived(T d1, T d2) : Base&lt;T&gt;(d1), extraData(d2) {}\n};\n</code></pre> <p>\u65e0\u8bba\u662f\u54ea\u79cd\u60c5\u51b5\uff0c\u7c7b\u6a21\u677f\u548c\u7ee7\u627f\u90fd\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5728\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\u5b9e\u73b0\u7075\u6d3b\u6027\u548c\u91cd\u7528\u6027\u3002\u901a\u8fc7\u7ed3\u5408\u7c7b\u6a21\u677f\u548c\u7ee7\u627f\uff0c\u53ef\u4ee5\u8bbe\u8ba1\u51fa\u9002\u5e94\u591a\u79cd\u7c7b\u578b\u9700\u6c42\u7684\u9ad8\u5ea6\u53ef\u6269\u5c55\u548c\u901a\u7528\u7684\u7c7b\u7ed3\u6784\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#7","title":"7. \u53cb\u5143\u51fd\u6570\u548c\u6a21\u677f\u7c7b","text":"<p>\u5206\u4e24\u79cd\u60c5\u51b5\uff1a\u5728\u7c7b\u5185\u90e8\u5b9e\u73b0\u7684\u5168\u5c40\u53cb\u5143\u51fd\u6570 \u548c \u5728\u5185\u5916\u90e8\u5b9e\u73b0\u7684\u5168\u5c40\u53cb\u5143\u51fd\u6570</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u5728\u7c7b\u7684\u5185\u90e8\u5b9e\u73b0\u7684\u5168\u5c40\u53cb\u5143\u51fd\u6570</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//\u54b1\u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u7c7b,\u542b\u6709\u4e24\u4e2a\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\n    //\u8fd9\u91cc\u54b1\u5b9a\u4e49\u4e00\u4e2a\u6709\u7f18\u51fd\u6570\uff0c\u4e5f\u662f\u5168\u5c40\u51fd\u6570\uff0c\u53cb\u5143\u51fd\u6570\u7684\u7c7b\u5185\u5b9e\u73b0\n    //\u5982\u679c\u53bb\u6389 friend\u5173\u952e\u5b57 \u662f\u9519\u8bef\u7684\n    friend void PrintS(Student&lt;T1, T2&gt;&amp; p) {\n        cout &lt;&lt; p.name &lt;&lt;\" \"&lt;&lt;p.score &lt;&lt; endl; //\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf\n        p.showme(); //\u53ef\u4ee5\u8bbf\u95ee\u516c\u6709\u51fd\u6570\n\n    }\npublic:\n    Student(T1 name,T2 score){\n        this-&gt;name = name;\n        this-&gt;score = score;\n    }\n    void showme() {\n        cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n    }\nprivate:\n    T1 name;\n    T2 score;\n};\n\n\nint main() {\n    Student&lt;string, int&gt; myTobj(\"\u5c0f\u660e\",99); //\u5bf9\u8c61\n    PrintS(myTobj); //\u8c03\u7528\u5168\u5c40\u51fd\u6570\uff08\u5728\u7c7b\u5185\u90e8\u5b9e\u73b0\u7684\uff09\n\n    return 0;\n}\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u5728\u7c7b\u5916\u5b9e\u73b0\u7684\u5168\u5c40\u53cb\u5143\u51fd\u6570</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//\u63d0\u524d\u8ba9\u7f16\u8bd1\u5668\u77e5\u9053\u7c7b\u7684\u5b58\u5728\ntemplate &lt;typename T1, typename T2&gt;\nclass Student;\n\n//\u63d0\u524d\u8ba9\u7f16\u8bd1\u5668\u77e5\u9053\u8fd9\u4e2a\u51fd\u6570\u7684\u5b58\u5728\ntemplate &lt;typename T1, typename T2&gt;\nvoid PrintS(Student&lt;T1, T2&gt;&amp; p);\n\n\n\n//\u54b1\u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u7c7b,\u542b\u6709\u4e24\u4e2a\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\n    //\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff1a\u7c7b\u5185\u58f0\u660e \u7c7b\u5916\u5b9e\u73b0 \n    //\u5fc5\u987b\u52a0\u4e00\u4e2a\u7a7a\u6a21\u677f\u53c2\u6570\u5217\u8868\uff0c\u4f5c\u7528\u662f\u544a\u8bc9\u7f16\u8bd1\u5668 \u8fd9\u662f\u4e00\u4e2a\u6a21\u677f\u65b9\u6cd5\n    friend void PrintS&lt;&gt;(Student&lt;T1, T2&gt;&amp; p);\npublic:\n    Student(T1 name,T2 score){\n        this-&gt;name = name;\n        this-&gt;score = score;\n    }\n    void showme() {\n        cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n    }\nprivate:\n    T1 name;\n    T2 score;\n};\n\n\n//\u7c7b\u5916\u7684\u5b9a\u4e49\ntemplate &lt;typename T1, typename T2&gt;\nvoid PrintS(Student&lt;T1, T2&gt;&amp; p) {\n    cout &lt;&lt; p.name &lt;&lt; \" \" &lt;&lt; p.score &lt;&lt; endl; //\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf\n    p.showme(); //\u53ef\u4ee5\u8bbf\u95ee\u516c\u6709\u51fd\u6570\n}\n\n\n\nint main() {\n    Student&lt;string, int&gt; myTobj(\"\u5c0f\u660e\",99); //\u5bf9\u8c61\n    PrintS&lt;&gt;(myTobj); //\u8c03\u7528\u5168\u5c40\u51fd\u6570\uff08\u5728\u7c7b\u5185\u90e8\u5b9e\u73b0\u7684\uff09\n\n    return 0;\n}\n</code></pre> <p>\u5982\u679c\u4e0d\u662f\u4e3a\u96be\u81ea\u5df1\uff0c\u60a8\u8fd8\u662f\u7528\u7b2c\u4e00\u79cd\u65b9\u6cd5\u5427\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#8","title":"8. \u7c7b\u6a21\u677f\u5206\u6587\u4ef6\u7f16\u5199","text":"<p>\u60a8\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528.cpp\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u521b\u5efa.hpp</p> <p>.hpp \u662f\u6a21\u677f\u7c7b\u5b9a\u4e49\u7684\u8fc7\u7a0b\u3002</p> <p>\u4ea7\u751fhpp\u7684\u6839\u672c\u539f\u56e0\uff1acpp\u7684\u5355\u72ec\u7f16\u8bd1\u4ea7\u751f obj\uff0c\u94fe\u63a5\u9636\u6bb5\u4ea7\u751f\u9519\u8bef\u3002</p> <p>\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a</p> <p>\u4e0b\u9762\u662f\u5b8c\u6574\u7684\u5355\u6587\u4ef6</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//\u7c7b\u5b9a\u4e49\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\npublic:\n    Student(T1 name, T2 score);\n    void showme();\nprivate:\n    T1 name;\n    T2 score;\n};\n\n//\u7c7b\u6210\u5458\u7684\u7c7b\u5916\u5b9e\u73b0\ntemplate &lt;typename T1, typename T2&gt;\nStudent&lt;T1, T2&gt;::Student(T1 name, T2 score) {\n    this-&gt;name = name;\n    this-&gt;score = score;\n}\n\ntemplate &lt;typename T1, typename T2&gt;\nvoid Student&lt;T1, T2&gt;::showme() {\n    cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n}\n\n\nint main() {\n    Student&lt;string, int&gt; myTobj(\"\u5c0f\u660e\",99); //\u5bf9\u8c61\n    myTobj.showme();\n    return 0;\n}\n</code></pre> <p>student.h</p> <pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\npublic:\n    Student(T1 name, T2 score);\n    void showme();\nprivate:\n    T1 name;\n    T2 score;\n};\n</code></pre> <p>student.cpp</p> <pre><code>#include \"student.h\"\n\ntemplate &lt;typename T1, typename T2&gt;\nStudent&lt;T1,T2&gt;::Student(T1 name, T2 score) {\n    this-&gt;name = name;\n    this-&gt;score = score;\n}\n\ntemplate &lt;typename T1, typename T2&gt;\nvoid Student&lt;T1, T2&gt;::showme() {\n    cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n}\n</code></pre> <p>student.hpp(\u7edf\u4e00\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e2d \u7136\u540e\u5728main.cpp\u4e2d\u5f15\u7528)</p> <pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\ntemplate &lt;typename T1, typename T2&gt;\nclass Student {\npublic:\n    Student(T1 name, T2 score);\n    void showme();\nprivate:\n    T1 name;\n    T2 score;\n};\n\ntemplate &lt;typename T1, typename T2&gt;\nStudent&lt;T1, T2&gt;::Student(T1 name, T2 score) {\n    this-&gt;name = name;\n    this-&gt;score = score;\n}\n\ntemplate &lt;typename T1, typename T2&gt;\nvoid Student&lt;T1, T2&gt;::showme() {\n    cout &lt;&lt; \"\u6211\u662f\uff1a\" &lt;&lt; this-&gt;name &lt;&lt; \" \u5206\u503c\uff1a\" &lt;&lt; this-&gt;score &lt;&lt; endl;\n\n}\n</code></pre> <p>\u4e0b\u9762\u8fd8\u6709\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u4f9b\u5927\u5bb6\u53c2\u8003\uff08\u89c6\u9891\u4e2d\u4e0d\u8bb2\uff09</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#81-mytemplateh","title":"8.1. mytemplate.h","text":"<pre><code>#ifndef MYTEMPLATE_H\n#define MYTEMPLATE_H\n\ntemplate&lt;typename T&gt;\nclass MyTemplate {\nprivate:\n    T data;\npublic:\n    MyTemplate(T d);\n    void setData(T d);\n    T getData() const;\n};\n\n#include \"mytemplate.cpp\" // \u5305\u542b\u6e90\u6587\u4ef6\u4ee5\u8fdb\u884c\u94fe\u63a5\n\n#endif /* MYTEMPLATE_H */\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#82-mytemplatecpp","title":"8.2. mytemplate.cpp","text":"<pre><code>#include \"mytemplate.h\"\n\ntemplate&lt;typename T&gt;\nMyTemplate&lt;T&gt;::MyTemplate(T d) : data(d) {}\n\ntemplate&lt;typename T&gt;\nvoid MyTemplate&lt;T&gt;::setData(T d) {\n    data = d;\n}\n\ntemplate&lt;typename T&gt;\nT MyTemplate&lt;T&gt;::getData() const {\n    return data;\n}\n</code></pre> <p>\u5728 <code>mytemplate.h</code> \u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u7c7b\u6a21\u677f <code>MyTemplate</code> \u7684\u58f0\u660e\uff0c\u5e76\u5728\u6587\u4ef6\u672b\u5c3e\u5305\u542b\u4e86 <code>mytemplate.cpp</code>\uff0c\u8fd9\u6837\u7f16\u8bd1\u5668\u5c31\u80fd\u591f\u5728\u94fe\u63a5\u65f6\u627e\u5230\u5b9e\u73b0\u3002\u5728 <code>mytemplate.cpp</code> \u4e2d\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86 <code>MyTemplate</code> \u7c7b\u6a21\u677f\u7684\u6210\u5458\u51fd\u6570\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u7c7b\u6a21\u677f <code>MyTemplate</code> \u6765\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/02-%E6%A8%A1%E6%9D%BF-%E7%B1%BB%E6%A8%A1%E6%9D%BF/#83-maincpp","title":"8.3. main.cpp","text":"<pre><code>#include &lt;iostream&gt;\n#include \"mytemplate.h\"\n\nint main() {\n    MyTemplate&lt;int&gt; obj(10);\n    std::cout &lt;&lt; \"Data: \" &lt;&lt; obj.getData() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>main.cpp</code> \u5305\u542b\u4e86\u5bf9 <code>MyTemplate</code> \u7c7b\u6a21\u677f\u7684\u4f7f\u7528\u3002\u6211\u4eec\u5305\u542b\u4e86\u5934\u6587\u4ef6 <code>mytemplate.h</code>\uff0c\u8fd9\u6837\u7f16\u8bd1\u5668\u5c31\u80fd\u591f\u77e5\u9053\u7c7b\u6a21\u677f\u7684\u58f0\u660e\u3002\u5728 <code>main()</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a <code>MyTemplate</code> \u7c7b\u6a21\u677f\u7684\u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u4e86\u5176\u6210\u5458\u51fd\u6570\u3002</p> <p>\u4e3a\u4e86\u7f16\u8bd1\u8fd9\u4e2a\u7a0b\u5e8f\uff0c\u9700\u8981\u786e\u4fdd <code>mytemplate.cpp</code> \u548c <code>main.cpp</code> \u90fd\u8981\u88ab\u7f16\u8bd1\uff0c\u5e76\u4e14\u94fe\u63a5\u5728\u4e00\u8d77\u3002\u5982\u679c\u4f7f\u7528 <code>g++</code> \u7f16\u8bd1\u5668\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>g++ -o myprogram main.cpp mytemplate.cpp\n</code></pre> <p>\u8fd9\u6837\u5c31\u4f1a\u5c06 <code>main.cpp</code> \u548c <code>mytemplate.cpp</code> \u7f16\u8bd1\u6210\u4e00\u4e2a\u540d\u4e3a <code>myprogram</code> \u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u7c7b\u6a21\u677f\u7684\u5b9a\u4e49\u548c\u5b9e\u73b0\u3002</p> <p>\u8fd9\u6837\uff0c\u901a\u8fc7\u5c06\u7c7b\u6a21\u677f\u7684\u58f0\u660e\u548c\u5b9a\u4e49\u5206\u522b\u653e\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u7ec4\u7ec7\u548c\u7ba1\u7406\u4ee3\u7801\uff0c\u5e76\u4e14\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/","title":"\u301003\u3011\u51fd\u6570\u6a21\u677f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#1","title":"1. \u51fd\u6570\u6a21\u677f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#11","title":"1.1. \u51fd\u6570\u6a21\u677f\u7684\u5b9a\u4e49\u8bed\u6cd5","text":"<pre><code>template &lt;typename T&gt;\nT add(T a, T b) {\n    return a + b;\n}\n</code></pre> <ol> <li>T\u53ea\u662f\u4e00\u4e2a\u4ee3\u53f7\uff0c\u4f60\u53ef\u4ee5\u6539\u6210\u81ea\u5df1\u5b9a\u4e49\u7684\u5b57\u7b26\uff0c\u4f8b\u5982\uff1aJT\uff0cABC ...\u7b49</li> <li><code>typename</code> \u5173\u952e\u5b57 \u4e5f\u53ef\u4ee5\u6362\u6210 <code>class</code> \u3002\u662f\u7b49\u6548\u7684\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#12","title":"1.2. \u591a\u4e2a\u7c7b\u578b\u53c2\u6570\u7684\u51fd\u6570\u6a21\u677f","text":"<p>\u5f53\u6d89\u53ca\u591a\u4e2a\u53c2\u6570\u7684\u6a21\u677f\u65f6\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u6a21\u677f\u5b9a\u4e49\u4e2d\u6dfb\u52a0\u591a\u4e2a\u7c7b\u578b\u53c2\u6570\u6216\u975e\u7c7b\u578b\u53c2\u6570\u6765\u5904\u7406\u3002\u4ee5\u4e0b\u662f\u5904\u7406\u591a\u4e2a\u53c2\u6570\u7684\u4e24\u79cd\u4e3b\u8981\u60c5\u51b5\uff1a\u51fd\u6570\u6a21\u677f\u548c\u7c7b\u6a21\u677f\u3002</p> <pre><code>#include &lt;iostream&gt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u5904\u7406\u591a\u4e2a\u7c7b\u578b\u53c2\u6570\ntemplate &lt;typename T, typename U&gt;\nvoid printPair(T a, U b) {\n    std::cout &lt;&lt; \"Pair: \" &lt;&lt; a &lt;&lt; \" and \" &lt;&lt; b &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u4f7f\u7528\u6a21\u677f\u51fd\u6570\uff0c\u4f20\u5165\u4e0d\u540c\u7c7b\u578b\u7684\u53c2\u6570\n    printPair&lt;int,double&gt;(5, 3.14);          // T\u4e3aint\uff0cU\u4e3adouble\n    printPair&lt;string,char&gt;(\"Hello\", 'A');     // T\u4e3aconst char[6]\uff0cU\u4e3achar\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>printPair</code>\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5e76\u5728\u8f93\u51fa\u4e2d\u663e\u793a\u5b83\u4eec\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#13","title":"1.3. \u975e\u7c7b\u578b\u53c2\u6570","text":"<p>\u5728C++\u4e2d\uff0c\u975e\u7c7b\u578b\u53c2\u6570\u662f\u4e00\u79cd\u6a21\u677f\u53c2\u6570\uff0c\u5141\u8bb8\u4f60\u5c06\u5e38\u91cf\u503c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u6a21\u677f\u3002\u8fd9\u6837\u7684\u53c2\u6570\u5728\u6a21\u677f\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u4e2d\u88ab\u7528\u4f5c\u5e38\u91cf\uff0c\u800c\u4e0d\u662f\u7c7b\u578b\u3002\u8fd9\u4f7f\u5f97\u4f60\u53ef\u4ee5\u7f16\u5199\u66f4\u7075\u6d3b\u7684\u901a\u7528\u4ee3\u7801\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u975e\u7c7b\u578b\u53c2\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u63a5\u53d7\u4e00\u4e2a\u975e\u7c7b\u578b\u53c2\u6570\u4f5c\u4e3a\u5e38\u91cf\ntemplate &lt;int N&gt;\nvoid printNTimes(const std::string&amp; message) {\n    for (int i = 0; i &lt; N; ++i) {\n        std::cout &lt;&lt; message &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    // \u4f7f\u7528\u6a21\u677f\u51fd\u6570\uff0c\u4f20\u5165\u4e0d\u540c\u7684\u5e38\u91cf\u53c2\u6570\n    printNTimes&lt;3&gt;(\"Hello\");  // \u6253\u5370 \"Hello\" 3\u6b21\n    printNTimes&lt;5&gt;(\"World\");  // \u6253\u5370 \"World\" 5\u6b21\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>printNTimes</code>\u51fd\u6570\u662f\u4e00\u4e2a\u63a5\u53d7\u975e\u7c7b\u578b\u53c2\u6570\u7684\u51fd\u6570\u6a21\u677f\u3002\u901a\u8fc7\u4f7f\u7528<code>&lt;3&gt;</code>\u548c<code>&lt;5&gt;</code>\u7b49\u975e\u7c7b\u578b\u53c2\u6570\uff0c\u6211\u4eec\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\u4e86\u5faa\u73af\u8fed\u4ee3\u7684\u6b21\u6570\u3002\u8fd9\u4f7f\u5f97\u7f16\u8bd1\u5668\u80fd\u591f\u5728\u751f\u6210\u4ee3\u7801\u65f6\u8fdb\u884c\u4f18\u5316\uff0c\u800c\u4e0d\u9700\u8981\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u5faa\u73af\u6b21\u6570\u7684\u8ba1\u7b97\u3002</p> <p>\u975e\u7c7b\u578b\u53c2\u6570\u53ef\u4ee5\u662f\u6574\u6570\u3001\u679a\u4e3e\u3001\u6307\u9488\u7b49\u5e38\u91cf\u8868\u8fbe\u5f0f\u3002\u5b83\u4eec\u5728\u6a21\u677f\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u4e2d\u8d77\u5230\u4e86\u5e38\u91cf\u7684\u4f5c\u7528\uff0c\u6709\u52a9\u4e8e\u751f\u6210\u66f4\u9ad8\u6548\u3001\u66f4\u7075\u6d3b\u7684\u4ee3\u7801\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#14","title":"1.4. \u9690\u5f0f\u5b9e\u4f8b\u5316","text":"<p>\u9690\u5f0f\u5b9e\u4f8b\u5316\uff1a \u7f16\u8bd1\u5668\u6839\u636e\u8c03\u7528\u7684\u6570\u636e\u7c7b\u578b\u81ea\u52a8\u5b9e\u4f8b\u5316\u6a21\u677f\u3002</p> <pre><code>int resultInt = add(5, 10);\ndouble resultDouble = add(3.14, 6.28);\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#15","title":"1.5. \u6a21\u677f\u7279\u5316","text":"<p>\u7279\u5316\uff1a \u5141\u8bb8\u4e3a\u7279\u5b9a\u7684\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u5b9a\u5236\u7684\u5b9e\u73b0\u3002</p> <pre><code>template &lt;&gt;\ndouble add(double a, double b) {\n    return a + b + 10.0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#16-hpp","title":"1.6. \u5ef6\u8fdf\u5b9e\u4f8b\u5316\u548c.hpp","text":"<p>\u5728 C++ \u4e2d\uff0c\u672a\u4f7f\u7528\u7684\u6a21\u677f\u51fd\u6570\uff08\u5305\u62ec\u7c7b\u6a21\u677f\u4e2d\u7684\u6210\u5458\u51fd\u6570\uff09\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u751f\u6210\u7f16\u8bd1\u4ee3\u7801\uff0c\u8fd9\u662f\u56e0\u4e3a C++ \u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u6a21\u677f\u5b9e\u4f8b\u5316\uff08Template Instantiation\uff09\uff0c\u53ea\u6709\u5f53\u6a21\u677f\u51fd\u6570\u88ab\u5b9e\u9645\u8c03\u7528\u65f6\uff0c\u7f16\u8bd1\u5668\u624d\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u51fd\u6570\u4ee3\u7801\u3002\u8fd9\u88ab\u79f0\u4e3a\u6a21\u677f\u7684\u5ef6\u8fdf\u5b9e\u4f8b\u5316\uff08Template Instantiation on Demand\uff09\u3002  \u8fd9\u79cd\u884c\u4e3a\u6709\u52a9\u4e8e\u51cf\u5c11\u7f16\u8bd1\u65f6\u95f4\u548c\u751f\u6210\u7684\u76ee\u6807\u4ee3\u7801\u7684\u5927\u5c0f\uff0c\u56e0\u4e3a\u53ea\u6709\u5b9e\u9645\u9700\u8981\u7684\u6a21\u677f\u51fd\u6570\u624d\u4f1a\u88ab\u7f16\u8bd1\u548c\u94fe\u63a5\u5230\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u3002</p> <p>\u7136\u800c\uff0c\u6709\u4e00\u4e9b\u60c5\u51b5\u4e0b\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u751f\u6210\u672a\u4f7f\u7528\u7684\u6a21\u677f\u51fd\u6570\u7684\u4e00\u90e8\u5206\u4ee3\u7801\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u7f16\u8bd1\u5668\u7684\u4f18\u5316\u7b56\u7565\u548c\u5177\u4f53\u7684\u4f7f\u7528\u60c5\u51b5\u3002\u4f8b\u5982\uff0c\u4e00\u4e9b\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u751f\u6210\u51fd\u6570\u7684\u51fd\u6570\u6846\u67b6\uff08Function Frame\uff09\uff0c\u4f46\u662f\u51fd\u6570\u7684\u4e3b\u4f53\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u88ab\u751f\u6210\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0c\u672a\u4f7f\u7528\u7684\u6a21\u677f\u51fd\u6570\u901a\u5e38\u4e0d\u4f1a\u5728\u6700\u7ec8\u7684\u76ee\u6807\u4ee3\u7801\u4e2d\u751f\u6210\u7f16\u8bd1\u4ee3\u7801\uff0c\u4f46\u662f\u5177\u4f53\u884c\u4e3a\u53ef\u80fd\u56e0\u7f16\u8bd1\u5668\u800c\u5f02\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/02-C%2B%2B%E6%A8%A1%E6%9D%BF/03-%E6%A8%A1%E6%9D%BF-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF/#17","title":"1.7. \u6ce8\u610f\u4e8b\u9879","text":"<p> \u5728\u4f7f\u7528\u51fd\u6570\u6a21\u677f\u65f6\uff0c\u6709\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u9700\u8981\u8003\u8651\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u7684\u4f7f\u7528\u548c\u9884\u9632\u4e00\u4e9b\u6f5c\u5728\u7684\u95ee\u9898\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u51fd\u6570\u6a21\u677f\u7684\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ol> <li> <p>\u6a21\u677f\u53c2\u6570\u5fc5\u987b\u80fd\u591f\u63a8\u5bfc\u51fa\u7c7b\u578b\uff1a \u7f16\u8bd1\u5668\u9700\u8981\u80fd\u591f\u63a8\u5bfc\u51fa\u6a21\u677f\u53c2\u6570\u7684\u7c7b\u578b\u3002\u5982\u679c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7c7b\u578b\u65e0\u6cd5\u63a8\u5bfc\uff0c\u53ef\u80fd\u5bfc\u81f4\u7f16\u8bd1\u9519\u8bef\u3002\u786e\u4fdd\u4f20\u9012\u7684\u53c2\u6570\u8db3\u591f\u660e\u786e\uff0c\u4ee5\u4fbf\u7c7b\u578b\u63a8\u5bfc\u662f\u6709\u6548\u7684\u3002 <pre><code>// \u6709\u6548\u7684\u4f7f\u7528\ntemplate &lt;typename T&gt;\nvoid myFunction(T a) {\n    // ...\n}\n\n// \u65e0\u6cd5\u63a8\u5bfc\u51fa\u7c7b\u578b\uff0c\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u9519\u8bef\n// template &lt;typename T&gt;\n// void myFunction(T a, T b) {\n//     // ...\n// }\n</code></pre></p> </li> <li> <p>\u907f\u514d\u4e8c\u4e49\u6027\uff1a \u5982\u679c\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u6a21\u677f\u51fd\u6570\uff0c\u7f16\u8bd1\u5668\u53ef\u80fd\u65e0\u6cd5\u786e\u5b9a\u4f7f\u7528\u54ea\u4e2a\u6a21\u677f\uff0c\u4ece\u800c\u5bfc\u81f4\u4e8c\u4e49\u6027\u9519\u8bef\u3002\u786e\u4fdd\u6a21\u677f\u7684\u4f7f\u7528\u662f\u660e\u786e\u7684\u3002</p> </li> </ol> <pre><code>template &lt;typename T&gt;\nvoid myFunction(T a) {\n    // ...\n}\n\ntemplate &lt;typename T&gt;\nvoid myFunction(T a, T b) {\n    // ...\n}\n</code></pre> <ol> <li> <p>\u663e\u793a\u5b9e\u4f8b\u5316\uff1a \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u901a\u8fc7\u663e\u793a\u5b9e\u4f8b\u5316\u6765\u6307\u5b9a\u4f7f\u7528\u7684\u5177\u4f53\u6a21\u677f\u5b9e\u4f8b\u3002 <pre><code>template &lt;typename T&gt;\nvoid myFunction(T a) {\n    // ...\n}\n\n// \u663e\u793a\u5b9e\u4f8b\u5316\u4e3aint\u7c7b\u578b\ntemplate void myFunction&lt;int&gt;(int a);\n</code></pre></p> </li> <li> <p>\u9ed8\u8ba4\u6a21\u677f\u53c2\u6570\uff1a \u53ef\u4ee5\u4e3a\u6a21\u677f\u53c2\u6570\u63d0\u4f9b\u9ed8\u8ba4\u503c\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u9ed8\u8ba4\u53c2\u6570\u7684\u4f4d\u7f6e\u3002 <pre><code>// \u6709\u6548\u7684\u4f7f\u7528\ntemplate &lt;typename T = int&gt;\nvoid myFunction(T a) {\n    // ...\n}\n\n// \u65e0\u6548\u7684\u4f7f\u7528\uff0c\u5e94\u8be5\u5c06\u9ed8\u8ba4\u53c2\u6570\u653e\u5728\u6700\u540e\n// template &lt;typename T = int&gt;\n// void myFunction(T a, T b) {\n//     // ...\n// }\n</code></pre></p> </li> <li> <p>\u51fd\u6570\u6a21\u677f\u4e0e\u91cd\u8f7d\uff1a \u51fd\u6570\u6a21\u677f\u53ef\u80fd\u4e0e\u91cd\u8f7d\u7684\u51fd\u6570\u53d1\u751f\u51b2\u7a81\uff0c\u7279\u522b\u662f\u5728\u6d89\u53ca\u7c7b\u578b\u63a8\u5bfc\u7684\u60c5\u51b5\u4e0b\u3002\u786e\u4fdd\u6a21\u677f\u548c\u91cd\u8f7d\u7684\u51fd\u6570\u4e4b\u95f4\u6ca1\u6709\u6b67\u4e49\u3002</p> </li> </ol> <pre><code>template &lt;typename T&gt;\nvoid myFunction(T a) {\n    // ...\n}\n\nvoid myFunction(int a) {\n    // ...\n}\n</code></pre> <ol> <li>\u4f9d\u8d56\u4e8e\u6a21\u677f\u53c2\u6570\u7684\u6210\u5458\u51fd\u6570\uff1a \u5982\u679c\u4f60\u5728\u7c7b\u4e2d\u5b9a\u4e49\u4f9d\u8d56\u4e8e\u6a21\u677f\u53c2\u6570\u7684\u6210\u5458\u51fd\u6570\uff0c\u786e\u4fdd\u4f7f\u7528\u4e86\u7c7b\u6a21\u677f\u7684\u6240\u6709\u6a21\u677f\u53c2\u6570\u3002</li> </ol> <pre><code>template &lt;typename T&gt;\nclass MyClass {\npublic:\n    void myFunction(T a) {\n        // ...\n    }\n};\n\nMyClass&lt;int&gt; obj;\nobj.myFunction(5);  // \u6709\u6548\n</code></pre> <ol> <li>\u6a21\u677f\u7279\u5316\u4e0e\u504f\u7279\u5316\uff1a \u4e86\u89e3\u6a21\u677f\u7279\u5316\u548c\u504f\u7279\u5316\u7684\u6982\u5ff5\uff0c\u4ee5\u4fbf\u5728\u9700\u8981\u65f6\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u3002</li> </ol> <pre><code>// \u5b8c\u5168\u7279\u5316\ntemplate &lt;&gt;\nvoid myFunction&lt;int&gt;(int a) {\n    // ...\n}\n\n// \u90e8\u5206\u7279\u5316\ntemplate &lt;typename T, typename U&gt;\nvoid myFunction&lt;T&gt;(T a, U b) {\n    // ...\n}\n</code></pre> <ol> <li>\u6a21\u677f\u7684\u9650\u5236\u548c\u7ea6\u675f\uff1a C++20\u5f15\u5165\u4e86\u6982\u5ff5\uff08Concepts\uff09\uff0c\u7528\u4e8e\u5bf9\u6a21\u677f\u53c2\u6570\u8fdb\u884c\u7ea6\u675f\u3002\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u6982\u5ff5\u6765\u589e\u5f3a\u5bf9\u6a21\u677f\u7684\u9650\u5236\u3002</li> </ol> <pre><code>template &lt;typename T&gt;\nrequires std::is_integral_v&lt;T&gt;\nvoid myFunction(T a) {\n    // ...\n}\n</code></pre> <p>\u5728\u4f7f\u7528\u51fd\u6570\u6a21\u677f\u65f6\uff0c\u7406\u89e3\u8fd9\u4e9b\u6ce8\u610f\u4e8b\u9879\u5e76\u5408\u7406\u8bbe\u8ba1\u6a21\u677f\u5c06\u6709\u52a9\u4e8e\u907f\u514d\u6f5c\u5728\u7684\u95ee\u9898\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u5065\u58ee\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/01-STL/","title":"\u301001\u3011\u4ec0\u4e48\u662fSTL","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/01-STL/#stl","title":"STL\u4ea7\u751f\u7684\u539f\u56e0","text":"<p>C++\u7684STL\uff08Standard Template Library\uff09</p> <p>\u4e3a\u4ec0\u4e48\u4f1a\u6709\u6807\u51c6\u7684\u6a21\u677f\u5e93\u3002</p> <p>\u4e3b\u8981\u662f\u4e3a\u4e86\u4ee3\u7801\u91cd\u7528\u5229\u7528\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u4ed8\u51fa</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/01-STL/#stl_1","title":"STL\u7684\u5185\u5bb9","text":"<p>STL\u662fC++\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u63d0\u4f9b\u4e86\u4e00\u7ec4\u901a\u7528\u7684\u6a21\u677f\u7c7b\u548c\u51fd\u6570\uff0c\u7528\u4e8e\u5b9e\u73b0\u5e38\u89c1\u7684\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u3002STL\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u7ec4\u4ef6\uff1a</p> <p></p> <p></p> <p>\u54b1\u4eec\u7528\u5927\u767d\u8bdd \u8bf4\u4e00\u4e0b\uff1a</p> <p>\u5bb9\u5668\uff1a\u5c31\u50cf\u662f\u653e\u6c64\u5706\u7684\u76d2\u5b50</p> <p>\u6570\u636e\uff1a\u5c31\u662f\u76d2\u5b50\u91cc\u7684\u6c64\u5706</p> <p>\u62ff\u6c64\u5706\u7684\u5939\u5b50\uff1a\u5c31\u53ef\u4ee5\u770b\u505a\u8fed\u4ee3\u5668</p> <p>\u5bf9\u6c64\u5706\u7684\u4e8c\u6b21\u52a0\u5de5\u5c31\u662f\u7b97\u6cd5</p> <p>\u9002\u914d\u5668\u5c31\u662f\u4e3a\u6765\u66f4\u597d\u5730\u8ba9\u4f60\u64cd\u4f5c\u6c64\u5706\u7684\u4e00\u79cd\u5de5\u5177\u5305\u88c5\u3002</p> <ol> <li>\u5bb9\u5668\uff08Containers\uff09\uff1aSTL\u63d0\u4f9b\u4e86\u591a\u79cd\u5bb9\u5668\uff0c\u5305\u62ecvector\u3001deque\u3001list\u3001set\u3001map\u7b49\uff0c\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\u3002</li> <li>\u7b97\u6cd5\uff08Algorithms\uff09\uff1aSTL\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u7b97\u6cd5\uff0c\u5982\u6392\u5e8f\u3001\u641c\u7d22\u3001\u6570\u503c\u8ba1\u7b97\u7b49\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u53ef\u4ee5\u4e0e\u5404\u79cd\u5bb9\u5668\u4e00\u8d77\u4f7f\u7528\u3002</li> <li>\u8fed\u4ee3\u5668\uff08Iterators\uff09\uff1a\u8fed\u4ee3\u5668\u662fSTL\u7684\u6838\u5fc3\u6982\u5ff5\u4e4b\u4e00\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u7edf\u4e00\u7684\u8bbf\u95ee\u5bb9\u5668\u5143\u7d20\u7684\u65b9\u5f0f\uff0c\u4f7f\u5f97\u7b97\u6cd5\u80fd\u591f\u72ec\u7acb\u4e8e\u5bb9\u5668\u8fdb\u884c\u64cd\u4f5c\u3002</li> <li>\u51fd\u6570\u5bf9\u8c61\uff08Function Objects\uff09\uff1aSTL\u4e2d\u7684\u5f88\u591a\u7b97\u6cd5\u90fd\u662f\u901a\u8fc7\u51fd\u6570\u5bf9\u8c61\u6765\u5b8c\u6210\u7684\uff0c\u51fd\u6570\u5bf9\u8c61\u662f\u53ef\u8c03\u7528\u5bf9\u8c61\u7684\u62bd\u8c61\uff0c\u53ef\u4ee5\u662f\u51fd\u6570\u6307\u9488\u3001\u51fd\u6570\u3001lambda\u8868\u8fbe\u5f0f\u7b49\u3002</li> <li>\u9002\u914d\u5668\uff08Adapters\uff09\uff1aSTL\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9002\u914d\u5668\uff0c\u7528\u4e8e\u6539\u53d8\u5bb9\u5668\u7684\u63a5\u53e3\u6216\u884c\u4e3a\uff0c\u5982stack\u3001queue\u3001priority_queue\u7b49\u3002</li> <li>\u667a\u80fd\u6307\u9488\uff08Smart Pointers\uff09\uff1aSTL\u8fd8\u63d0\u4f9b\u4e86\u667a\u80fd\u6307\u9488\uff0c\u5305\u62ecshared_ptr\u3001unique_ptr\u548cweak_ptr\uff0c\u7528\u4e8e\u7ba1\u7406\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u3002</li> <li>\u7a7a\u95f4\u914d\u7f6e\u5668\uff1aSTL\u4e2d\u4e5f\u5305\u542b\u7a7a\u95f4\u914d\u7f6e\u5668\uff08allocator\uff09\u4f5c\u4e3a\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u7ba1\u7406\u5185\u5b58\u7684\u5206\u914d\u548c\u91ca\u653e\u3002\u7a7a\u95f4\u914d\u7f6e\u5668\u662f\u5bb9\u5668\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u5c01\u88c5\u5e95\u5c42\u7684\u5185\u5b58\u5206\u914d\u7b97\u6cd5\uff0c\u5e76\u63d0\u4f9b\u4e00\u81f4\u7684\u63a5\u53e3\u4f9b\u5bb9\u5668\u4f7f\u7528\u3002\u901a\u8fc7\u4f7f\u7528\u7a7a\u95f4\u914d\u7f6e\u5668\uff0c\u5bb9\u5668\u7c7b\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u5206\u914d\u5185\u5b58\uff0c\u5e76\u5728\u4e0d\u518d\u9700\u8981\u65f6\u91ca\u653e\u8fd9\u4e9b\u5185\u5b58\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9\u5185\u5b58\u7684\u9ad8\u6548\u7ba1\u7406\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/02-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8/","title":"\u301002\u3011\u4ec0\u4e48\u662f\u5bb9\u5668","text":"<p>\u5bb9\u5668\u662f\u7528\u6765\u76db\u653e\u4e1c\u897f\u7684\u3002</p> <p>C++\u4e2d\u7684\u5bb9\u5668\u662f\u7528\u6765\u5b58\u653e\u6570\u636e\u7684\uff0c\u6839\u636e\u5bb9\u5668\u7684\u7279\u70b9\uff0cC++\u7684STL\uff08Standard Template Library\uff09\u63d0\u4f9b\u4e86\u591a\u79cd\u5bb9\u5668\uff0c\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\u3002\u8fd9\u4e9b\u5bb9\u5668\u53ef\u4ee5\u6839\u636e\u5176\u5185\u90e8\u7684\u6570\u636e\u7ed3\u6784\u548c\u7279\u6027\u5206\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\u3002\u4ee5\u4e0b\u662fSTL\u4e2d\u5e38\u89c1\u7684\u5bb9\u5668\uff1a</p> <ol> <li> <p>\u987a\u5e8f\u5bb9\u5668\uff08Sequence Containers\uff09\uff1a</p> <ul> <li>vector\uff08\u5411\u91cf\uff09\uff1a\u52a8\u6001\u6570\u7ec4\uff0c\u652f\u6301\u968f\u673a\u8bbf\u95ee\u548c\u5feb\u901f\u5c3e\u90e8\u63d2\u5165/\u5220\u9664\u3002</li> <li>deque\uff08\u53cc\u7aef\u961f\u5217\uff09\uff1a\u53cc\u5411\u961f\u5217\uff0c\u652f\u6301\u968f\u673a\u8bbf\u95ee\u548c\u5feb\u901f\u9996\u5c3e\u63d2\u5165/\u5220\u9664\u3002</li> <li>list\uff08\u94fe\u8868\uff09\uff1a\u53cc\u5411\u94fe\u8868\uff0c\u652f\u6301\u5feb\u901f\u63d2\u5165/\u5220\u9664\uff0c\u4f46\u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002</li> <li>forward_list\uff08\u5355\u5411\u94fe\u8868\uff09\uff1a\u5355\u5411\u94fe\u8868\uff0c\u53ea\u652f\u6301\u5355\u5411\u904d\u5386\uff0c\u4f46\u5360\u7528\u66f4\u5c11\u7684\u5185\u5b58\u3002</li> </ul> </li> <li> <p>\u5173\u8054\u5bb9\u5668\uff08Associative Containers\uff09\uff1a</p> <ul> <li>set\uff08\u96c6\u5408\uff09\uff1a\u6709\u5e8f\u7684\u552f\u4e00\u5143\u7d20\u96c6\u5408\uff0c\u57fa\u4e8e\u7ea2\u9ed1\u6811\u5b9e\u73b0\u3002</li> <li>map\uff08\u6620\u5c04\uff09\uff1a\u952e\u503c\u5bf9\u96c6\u5408\uff0c\u6bcf\u4e2a\u952e\u5bf9\u5e94\u4e00\u4e2a\u552f\u4e00\u7684\u503c\uff0c\u57fa\u4e8e\u7ea2\u9ed1\u6811\u5b9e\u73b0\u3002</li> <li>multiset\uff08\u591a\u91cd\u96c6\u5408\uff09\uff1a\u6709\u5e8f\u7684\u5143\u7d20\u96c6\u5408\uff0c\u5141\u8bb8\u91cd\u590d\u5143\u7d20\uff0c\u57fa\u4e8e\u7ea2\u9ed1\u6811\u5b9e\u73b0\u3002</li> <li>multimap\uff08\u591a\u91cd\u6620\u5c04\uff09\uff1a\u952e\u53ef\u4ee5\u91cd\u590d\u7684\u952e\u503c\u5bf9\u96c6\u5408\uff0c\u57fa\u4e8e\u7ea2\u9ed1\u6811\u5b9e\u73b0\u3002</li> </ul> </li> <li> <p>\u65e0\u5e8f\u5bb9\u5668\uff08Unordered Containers\uff09\uff1a</p> <ul> <li>unordered_set\uff08\u65e0\u5e8f\u96c6\u5408\uff09\uff1a\u65e0\u5e8f\u7684\u552f\u4e00\u5143\u7d20\u96c6\u5408\uff0c\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\u3002</li> <li>unordered_map\uff08\u65e0\u5e8f\u6620\u5c04\uff09\uff1a\u952e\u503c\u5bf9\u96c6\u5408\uff0c\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\u3002</li> <li>unordered_multiset\uff08\u65e0\u5e8f\u591a\u91cd\u96c6\u5408\uff09\uff1a\u65e0\u5e8f\u7684\u5143\u7d20\u96c6\u5408\uff0c\u5141\u8bb8\u91cd\u590d\u5143\u7d20\uff0c\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\u3002</li> <li>unordered_multimap\uff08\u65e0\u5e8f\u591a\u91cd\u6620\u5c04\uff09\uff1a\u952e\u53ef\u4ee5\u91cd\u590d\u7684\u952e\u503c\u5bf9\u96c6\u5408\uff0c\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\u3002</li> </ul> </li> <li> <p>\u5bb9\u5668\u9002\u914d\u5668\uff08Container Adapters\uff09\uff1a</p> <ul> <li>stack\uff08\u6808\uff09\uff1a\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u57fa\u4e8edeque\u6216list\u5b9e\u73b0\u3002</li> <li>queue\uff08\u961f\u5217\uff09\uff1a\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u57fa\u4e8edeque\u6216list\u5b9e\u73b0\u3002</li> <li>priority_queue\uff08\u4f18\u5148\u961f\u5217\uff09\uff1a\u57fa\u4e8e\u5806\u5b9e\u73b0\u7684\u4f18\u5148\u7ea7\u961f\u5217\uff0c\u53ef\u4ee5\u9ad8\u6548\u5730\u63d2\u5165\u548c\u83b7\u53d6\u6700\u5927\uff08\u6700\u5c0f\uff09\u5143\u7d20\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u5bb9\u5668\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u63a5\u53e3\u548c\u6027\u80fd\u7279\u6027\uff0c\u7a0b\u5e8f\u5458\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u5bb9\u5668\u6765\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/03-vector%E5%AE%B9%E5%99%A8/","title":"\u301003\u3011vector\u5bb9\u5668","text":"<p>vector \u8868\u793a\u5bf9\u8c61\u7684\u96c6\u5408\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/03-vector%E5%AE%B9%E5%99%A8/#vector","title":"vector\u672c\u8eab\u662f\u6a21\u677f","text":"<p><code>vector</code> \u4e0d\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u7c7b\u578b\uff0c\u800c\u662fC++\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u6a21\u677f\u7c7b\u3002\u5b83\u7528\u4e8e\u521b\u5efa\u52a8\u6001\u6570\u7ec4\u5bb9\u5668\uff0c\u53ef\u4ee5\u5b58\u50a8\u4e00\u7ec4\u76f8\u540c\u7c7b\u578b\u7684\u5143\u7d20\u3002\u5b9e\u9645\u4e0a\uff0c<code>std::vector</code> \u662f\u4e00\u4e2a\u53c2\u6570\u5316\u7684\u6a21\u677f\u7c7b\uff0c\u60a8\u9700\u8981\u6307\u5b9a\u8981\u5b58\u50a8\u7684\u5143\u7d20\u7c7b\u578b\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/03-vector%E5%AE%B9%E5%99%A8/#vector_1","title":"vector\u7684\u5b9a\u4e49\u521d\u59cb\u5316","text":"<pre><code>//\u4ee5\u4e0b\u662f\u51e0\u79cd\u5b9a\u4e49vector\u53d8\u91cf\u7684\u8bed\u53e5\n//\u6cdb\u578b\nvector&lt;T&gt; x; //\u7a7a\u7684\u5411\u91cf\u6570\u7ec4\n\nvector&lt;T&gt; b(x) ;//\u5b9a\u4e49\nvector&lt;T&gt; c=x;\nvector&lt;T&gt; v2(n,a); //\u7531n\u4e2aa\u7ec4\u6210\u7684vector\nvector&lt;T&gt; v4(n) ; //n\u4e2a\u9ed8\u8ba4\u7684\u5143\u7d20\nvector&lt;T&gt; v3={a,b,c,d}; //\u5b9a\u4e49\u6563\u88c5\nvector&lt;T&gt; v5{a,b,c}; //C++11 \u662f{} \u4e0d\u662f\uff08\uff09\n\n//T \u662f\u53ef\u4ee5\u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\u7684\uff0c\u4f8b\u5982 \u7528\u6237\u5b9a\u4e49\u7684\u7c7b\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/03-vector%E5%AE%B9%E5%99%A8/#vector_2","title":"vector\u7684\u63d2\u5165","text":"<p>Note</p> <p>\u4e0d\u80fd\u4f7f\u7528[]\u4e0b\u6807\u7684\u65b9\u5f0f\uff0c\u5411vector\u4e2d\u6dfb\u52a0\u5143\u7d20\u3002\u800c\u662f\u8981\u4f7f\u7528push_back()\u3002 \u4e5f\u5c31\u662f\u8bf4\u53ea\u80fd\u5bf9\u5df2\u7ecf\u5b58\u5728\u7684\u5143\u7d20\u6267\u884c\u4e0b\u6807\u64cd\u4f5c</p> <pre><code>int main()\n{\n    vector&lt;int&gt; mybox(200); //\u5982\u679c\u5c06\u5b9a\u4e49\u6362\u6210 vector&lt;int&gt; mybox(200) \u5c31\u4e0d\u62a5\u9519\u4e86\n    for (int i = 0; i &lt; 100; i++)\n    {\n        mybox[i]=i; //\u9519\u8bef\uff1a\u56e0\u4e3amybox\u662f\u7a7a\u7684 ,\u5e94\u8be5\u4f7f\u7528push_back()\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/03-vector%E5%AE%B9%E5%99%A8/#vector_3","title":"vector\u7684\u4f7f\u7528\u5f52\u7eb3","text":"<p><code>std::vector</code> \u662fC++\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u52a8\u6001\u6570\u7ec4\u5bb9\u5668\uff0c\u7528\u4e8e\u5b58\u50a8\u4e00\u7ec4\u5143\u7d20\u3002\u5b83\u63d0\u4f9b\u4e86\u52a8\u6001\u8c03\u6574\u5927\u5c0f\u3001\u968f\u673a\u8bbf\u95ee\u5143\u7d20\u3001\u9ad8\u6548\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\u7b49\u529f\u80fd\uff0c\u662fC++\u4e2d\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\u4e4b\u4e00\u3002\u4e0b\u9762\u662f\u5173\u4e8e<code>std::vector</code>\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p> <ol> <li>\u5305\u542b\u5934\u6587\u4ef6\uff1a \u8981\u4f7f\u7528<code>std::vector</code>\uff0c\u9700\u8981\u5305\u542b\u5934\u6587\u4ef6 <code>&lt;vector&gt;</code>\u3002</li> </ol> <pre><code>#include &lt;vector&gt;\n</code></pre> <ol> <li>\u521b\u5efa\u548c\u521d\u59cb\u5316\uff1a \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u521b\u5efa\u548c\u521d\u59cb\u5316<code>std::vector</code>\uff0c\u5305\u62ec\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u3001\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u3001\u521d\u59cb\u5316\u5217\u8868\u7b49\u3002</li> </ol> <pre><code>std::vector&lt;int&gt; numbers; // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u6574\u6570\u5411\u91cf\nstd::vector&lt;int&gt; numbers2 = {1, 2, 3, 4, 5}; // \u4f7f\u7528\u521d\u59cb\u5316\u5217\u8868\u521d\u59cb\u5316\n</code></pre> <ol> <li>\u8bbf\u95ee\u5143\u7d20\uff1a \u4f7f\u7528\u4e0b\u6807\u64cd\u4f5c\u7b26 <code>[]</code> \u6216 <code>at()</code> \u65b9\u6cd5\u53ef\u4ee5\u8bbf\u95ee\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u3002</li> </ol> <pre><code>int firstElement = numbers2[0];\nint secondElement = numbers2.at(1);\n</code></pre> <ol> <li>\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\uff1a \u4f7f\u7528<code>push_back()</code>\u65b9\u6cd5\u5728\u5411\u91cf\u672b\u5c3e\u63d2\u5165\u5143\u7d20\uff0c\u4f7f\u7528<code>pop_back()</code>\u65b9\u6cd5\u5220\u9664\u672b\u5c3e\u7684\u5143\u7d20\u3002</li> </ol> <pre><code>numbers.push_back(10);\nnumbers.pop_back();\n</code></pre> <p>`</p> <ol> <li>\u83b7\u53d6\u5927\u5c0f\u548c\u5bb9\u91cf\uff1a <code>size()</code> \u65b9\u6cd5\u8fd4\u56de\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u6570\u91cf\uff0c<code>capacity()</code> \u65b9\u6cd5\u8fd4\u56de\u5411\u91cf\u5f53\u524d\u53ef\u5bb9\u7eb3\u7684\u5143\u7d20\u6570\u91cf\u3002</li> </ol> <pre><code>size_t size = numbers.size();\nsize_t capacity = numbers.capacity();\n</code></pre> <ol> <li>\u52a8\u6001\u8c03\u6574\u5927\u5c0f\uff1a \u4f7f\u7528<code>resize()</code>\u65b9\u6cd5\u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u5411\u91cf\u7684\u5927\u5c0f\u3002</li> </ol> <pre><code>numbers.resize(10); // \u5c06\u5411\u91cf\u8c03\u6574\u4e3a\u5305\u542b 10 \u4e2a\u5143\u7d20\n</code></pre> <ol> <li>\u8fed\u4ee3\uff1a \u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5668\u6765\u904d\u5386\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u3002</li> </ol> <pre><code>for (std::vector&lt;int&gt;::iterator it = numbers.begin(); it != numbers.end(); ++it) {\n    // \u4f7f\u7528 *it \u8bbf\u95ee\u5143\u7d20\n}\n</code></pre> <ol> <li>\u5176\u4ed6\u529f\u80fd\uff1a <code>std::vector</code>\u8fd8\u63d0\u4f9b\u4e86\u8bb8\u591a\u5176\u4ed6\u529f\u80fd\uff0c\u5982\u63d2\u5165\u5143\u7d20\u5230\u6307\u5b9a\u4f4d\u7f6e\u3001\u5220\u9664\u6307\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\u3001\u67e5\u627e\u5143\u7d20\u7b49\u3002</li> </ol> <pre><code>numbers.insert(numbers.begin() + 2, 7); // \u5728\u7d22\u5f15 2 \u5904\u63d2\u5165\u5143\u7d20 7\nnumbers.erase(numbers.begin() + 3);     // \u5220\u9664\u7d22\u5f15 3 \u5904\u7684\u5143\u7d20\nauto it = std::find(numbers.begin(), numbers.end(), 5); // \u67e5\u627e\u5143\u7d20 5\n</code></pre> <p>\u603b\u4e4b\uff0c<code>std::vector</code>\u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u52a8\u6001\u6570\u7ec4\u5bb9\u5668\uff0c\u9002\u7528\u4e8e\u5b58\u50a8\u548c\u64cd\u4f5c\u4e00\u7ec4\u5143\u7d20\u3002\u5b83\u662fC++\u6807\u51c6\u5e93\u63d0\u4f9b\u7684\u5e38\u7528\u6570\u636e\u7ed3\u6784\u4e4b\u4e00\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u5728\u7a0b\u5e8f\u4e2d\u66f4\u65b9\u4fbf\u5730\u5904\u7406\u6570\u7ec4\u64cd\u4f5c\u548c\u52a8\u6001\u5185\u5b58\u7ba1\u7406\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/","title":"\u301005\u3011\u8fed\u4ee3\u5668","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#_1","title":"\u4ec0\u4e48\u662f\u8fed\u4ee3\u5668","text":"<p>\u8fed\u4ee3\u5668\uff08Iterator\uff09\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5728\u7f16\u7a0b\u4e2d\u5e7f\u6cdb\u7528\u4e8e\u904d\u5386\uff08\u8fed\u4ee3\uff09\u96c6\u5408\uff08\u5bb9\u5668\uff09\u4e2d\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u66b4\u9732\u96c6\u5408\u7684\u5e95\u5c42\u5b9e\u73b0\u7ec6\u8282\u3002\u5728C++\u4e2d\uff0c\u8fed\u4ee3\u5668\u662f\u4e00\u79cd\u7279\u5b9a\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u7528\u4e8e\u5728\u5bb9\u5668\u4e2d\u904d\u5386\u5143\u7d20\u5e76\u8bbf\u95ee\u5b83\u4eec\u3002</p> <p>\u8fed\u4ee3\u5668\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u6307\u5411\u5bb9\u5668\u5185\u5143\u7d20\u7684\u6307\u9488\uff0c\u5141\u8bb8\u60a8\u901a\u8fc7\u6307\u9488\u8bed\u6cd5\u6765\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u5fc5\u5173\u5fc3\u5bb9\u5668\u7684\u5e95\u5c42\u8868\u793a\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u7528\u7684\u65b9\u5f0f\u6765\u904d\u5386\u4e0d\u540c\u7c7b\u578b\u7684\u5bb9\u5668\uff0c\u65e0\u8bba\u5bb9\u5668\u662f\u6570\u7ec4\u3001\u94fe\u8868\u3001\u96c6\u5408\u8fd8\u662f\u6620\u5c04\u3002</p> <p>C++\u6807\u51c6\u5e93\u4e2d\u7684\u5bb9\u5668\u7c7b\uff08\u5982 <code>std::vector</code>\u3001<code>std::list</code>\u3001<code>std::map</code> \u7b49\uff09\u90fd\u63d0\u4f9b\u4e86\u8fed\u4ee3\u5668\uff0c\u4ee5\u4fbf\u5f00\u53d1\u8005\u53ef\u4ee5\u65b9\u4fbf\u5730\u904d\u5386\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386 <code>std::vector</code> \u7684\u793a\u4f8b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main() {\n    std::vector&lt;int&gt; numbers = {1, 2, 3, 4, 5};\n\n    // \u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386 vector\n    for (std::vector&lt;int&gt;::iterator it = numbers.begin(); it != numbers.end(); ++it) {\n        std::cout &lt;&lt; *it &lt;&lt; \" \"; // \u901a\u8fc7\u8fed\u4ee3\u5668\u8bbf\u95ee\u5143\u7d20\n    }\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>numbers.begin()</code> \u8fd4\u56de\u6307\u5411\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u8fed\u4ee3\u5668\uff0c<code>numbers.end()</code> \u8fd4\u56de\u6307\u5411\u672b\u5c3e\u7684\u8fed\u4ee3\u5668\u3002\u901a\u8fc7\u8fed\u4ee3\u5668\u53ef\u4ee5\u9010\u4e2a\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u5373\u4f7f\u5bb9\u5668\u7684\u7c7b\u578b\u548c\u5b9e\u73b0\u7ec6\u8282\u4e0d\u540c\u3002</p> <p>C++11 \u5f15\u5165\u4e86\u66f4\u7b80\u6d01\u7684\u8fed\u4ee3\u5668\u8bed\u6cd5\uff0c\u79f0\u4e3a\u8303\u56f4\u57fa\u4e8e\u5faa\u73af\uff08Range-based for loop\uff09\u3002\u4f7f\u7528\u8303\u56f4\u57fa\u4e8e\u5faa\u73af\uff0c\u904d\u5386\u5bb9\u5668\u7684\u4ee3\u7801\u53ef\u4ee5\u66f4\u52a0\u7b80\u6d01\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main() {\n    std::vector&lt;int&gt; numbers = {1, 2, 3, 4, 5};\n\n    // \u4f7f\u7528\u8303\u56f4\u57fa\u4e8e\u5faa\u73af\u904d\u5386 vector\n    for (const int&amp; num : numbers) {\n        std::cout &lt;&lt; num &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre> <p>\u8fed\u4ee3\u5668\u662f\u4e00\u4e2a\u5f3a\u5927\u4e14\u7075\u6d3b\u7684\u6982\u5ff5\uff0c\u5b83\u4f7f\u60a8\u80fd\u591f\u5728\u4e0d\u540c\u7c7b\u578b\u7684\u5bb9\u5668\u4e0a\u8fdb\u884c\u901a\u7528\u7684\u904d\u5386\u64cd\u4f5c\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u590d\u7528\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#_2","title":"\u4f7f\u7528\u8fed\u4ee3\u5668","text":"<p>end\u7b80\u79f0\u4e3a\u5c3e\u540e\u8fed\u4ee3\u5668\uff0c\u5b83\u672c\u8eab\u5e76\u6ca1\u6709\u5b9e\u9645\u610f\u4e49\uff0c\u8868\u793a\u5bb9\u5668\u5df2\u7ecf\u88ab\u904d\u5386\u5b8c\u4e86\u3002</p> <p>\u5982\u679c\u5bb9\u5668\u4e3a\u7a7a\uff0c\u5219begin()\u548cend()\u8fd4\u56de\u7684\u662f\u540c\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u90fd\u662f\u5c3e\u540e\u8fed\u4ee3\u5668</p> <p><pre><code>int main() {\n    string mystr = \"hello world\"; // \u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u4e32 \"hello world\"\n    auto b = mystr.begin();       // \u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u8d77\u59cb\u8fed\u4ee3\u5668\n    auto e = mystr.end();         // \u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u8fed\u4ee3\u5668\n\n    if (b != e) {\n         //b++; //\u8fd9\u91cc\u53ef\u4ee5\u8ba9\u6307\u9488\u5411\u540e\u79fb\u52a8\u4e00\u4f4d\n        *b = toupper(*b); // \u5c06\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\n        //*b = toupper(*b);\n    }\n\n    cout &lt;&lt; mystr &lt;&lt; endl; // \u8f93\u51fa\u4fee\u6539\u540e\u7684\u5b57\u7b26\u4e32\n\n    return 0;\n}\n</code></pre> <code>b</code> \u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5b9e\u9645\u4e0a\u5728\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u4e2d\u5c31\u662f\u4e00\u4e2a\u6307\u9488\u3002\u8fed\u4ee3\u5668\u662f\u4e00\u79cd\u884c\u4e3a\u7c7b\u4f3c\u6307\u9488\u7684\u5bf9\u8c61\uff0c\u7528\u4e8e\u904d\u5386\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002\u5f53\u60a8\u4f7f\u7528 <code>*b</code> \u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u5728\u83b7\u53d6\u8fed\u4ee3\u5668\u6240\u6307\u5411\u7684\u5143\u7d20\u7684\u503c\u3002</p> <p>\u5728\u8fd9\u4e2a\u4ee3\u7801\u7247\u6bb5\u4e2d\uff0c<code>*b</code> \u7528\u4e8e\u83b7\u53d6\u8fed\u4ee3\u5668 <code>b</code> \u6240\u6307\u5411\u7684\u5b57\u7b26\uff08\u5373\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff09\uff0c\u7136\u540e\u5bf9\u8be5\u5b57\u7b26\u5e94\u7528 <code>toupper()</code> \u51fd\u6570\u5c06\u5176\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u56de\u539f\u4f4d\u7f6e\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5728\u8fd9\u91cc\u4f7f\u7528 <code>*b</code>\u3002</p> <p>\u5728C++\u4e2d\uff0c\u901a\u8fc7\u89e3\u5f15\u7528\u8fed\u4ee3\u5668\uff0c\u60a8\u53ef\u4ee5\u8bbf\u95ee\u8fed\u4ee3\u5668\u6307\u5411\u7684\u5143\u7d20\uff0c\u5c31\u50cf\u4f7f\u7528\u6307\u9488\u4e00\u6837\u3002\u8fd9\u79cd\u673a\u5236\u4f7f\u5f97\u4f7f\u7528\u8fed\u4ee3\u5668\u6765\u904d\u5386\u5bb9\u5668\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002</p> <p>Note</p> <p>\u6211\u4eec\u8ba4\u5b9a\u4e00\u4e2a\u7c7b\u578b\u662f\u8fed\u4ee3\u5668\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b83\u652f\u6301\u4e00\u5957\u64cd\u4f5c\u3002\u8fd9\u5957\u64cd\u4f5c\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u8bbf\u95ee\u5bb9\u5668\u7684\u5143\u7d20\uff0c\u4e5f\u53ef\u4ee5\u4ece\u4e00\u4e2a\u5143\u7d20\u7684\u8bbf\u95ee\u8df3\u8f6c\u5230\u5bf9\u53e6\u5916\u4e00\u4e2a\u5143\u7d20\u7684\u8bbf\u95ee\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#begin-end","title":"begin \u548c end\u7684\u8fd0\u7b97","text":"<p>begin\u548cend\u8fd4\u56de\u7684\u7c7b\u578b\u7531\u5bf9\u8c61\u662f\u5426\u662f\u5e38\u91cf\u800c\u51b3\u5b9a\uff0c\u5982\u679c\u5bf9\u8c61\u662f\u5e38\u91cf\uff0cbegin\u548cend\u8fd4\u56de\u7684\u662f const_iterator,</p> <p>\u5426\u5219\u8fd4\u56deiterator. \u5f53\u53ea\u8bfb\u4e0d\u5199\u65f6\uff0c\u5efa\u8bae\u91c7\u7528 const_iterator \u3002C++11\u4e2d\u4e13\u95e8\u4e3a\u8fd9\u79cd\u5e38\u91cf\u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u7279\u6709\u7684\u8fed\u4ee3\u5668\u3002cbegin \u548c cend.</p> <pre><code>vector&lt;int&gt; v;\nconst vector&lt;int&gt; cv;\n\nauto it1=v.begin();\nauto it2=cv.begin();\nauto it3=cv.cbegin();\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#_3","title":"\u7ed3\u5408\u89e3\u5f15\u7528\u548c\u6210\u5458\u8bbf\u95ee","text":"<p>\u901a\u8fc7<code>*t</code>\u7684\u65b9\u5f0f \u53ef\u4ee5\u5bf9\u8fed\u4ee3\u5bb9\u5668\u6210\u5458\u8fdb\u884c\u8bbf\u95ee\u3002</p> <pre><code>(*t).empty(); //\u6b63\u786e\uff1a\u5224\u65ad\u5143\u7d20\u662f\u4e0d\u662f\u4e3a\u7a7a\n*t.empty() //\u9519\u8bef\uff1a\u5c0f\u62ec\u53f7\u4e0d\u80fd\u5c11\nit-&gt;mem; //\u6b63\u786e \u6210\u5458\u8bbf\u95ee  \u7b49\u540c\u4e8e\uff08*t\uff09.mem \n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#_4","title":"\u8fed\u4ee3\u5668\u7684\u8fd0\u7b97","text":"<p>\u8fed\u4ee3\u5668\u7684\u9012\u589e\u8fd0\u7b97\uff0c\u4f7f\u5f97\u8fed\u4ee3\u5668\u6bcf\u6b21\u79fb\u52a8\u4e00\u4e2a\u5143\u7d20</p> <pre><code>int main()\n{\n\n    string mystr = \"hello world\";\n    auto b = mystr.begin();\n    auto e = mystr.end();\n    if (b != e)\n    {\n        *b = toupper(*b);\n        b += 3;\n        *b = toupper(*b);\n        b += -1;\n        *b = toupper(*b);\n    }\n    cout &lt;&lt; mystr &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre> <p>C++\u4e2d\u7684\u8fed\u4ee3\u5668\u652f\u6301\u4e00\u7cfb\u5217\u8fd0\u7b97\uff0c\u8fd9\u4e9b\u8fd0\u7b97\u7528\u4e8e\u5728\u5bb9\u5668\u4e2d\u79fb\u52a8\u548c\u64cd\u4f5c\u8fed\u4ee3\u5668\u3002\u4e0d\u540c\u7c7b\u578b\u7684\u8fed\u4ee3\u5668\u652f\u6301\u4e0d\u540c\u7684\u8fd0\u7b97\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u8fed\u4ee3\u5668\u8fd0\u7b97\uff1a</p> <ol> <li>\u9012\u589e\uff08Increment\uff09\uff1a \u4f7f\u7528 <code>++</code> \u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c06\u8fed\u4ee3\u5668\u79fb\u52a8\u5230\u5bb9\u5668\u4e2d\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a<code>++it;</code></li> <li>\u9012\u51cf\uff08Decrement\uff09\uff1a \u9002\u7528\u4e8e\u53cc\u5411\u8fed\u4ee3\u5668\u548c\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\uff0c\u4f7f\u7528 <code>--</code> \u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c06\u8fed\u4ee3\u5668\u79fb\u52a8\u5230\u5bb9\u5668\u4e2d\u7684\u4e0a\u4e00\u4e2a\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a<code>--it;</code></li> <li>\u52a0\u6cd5\uff08Addition\uff09\uff1a \u9002\u7528\u4e8e\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>+</code> \u8fd0\u7b97\u7b26\u5c06\u8fed\u4ee3\u5668\u79fb\u52a8\u5230\u8ddd\u79bb\u5f53\u524d\u4f4d\u7f6e\u6307\u5b9a\u6570\u91cf\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a<code>it = it + 3;</code></li> <li>\u51cf\u6cd5\uff08Subtraction\uff09\uff1a \u9002\u7528\u4e8e\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>-</code> \u8fd0\u7b97\u7b26\u5c06\u8fed\u4ee3\u5668\u5411\u524d\u79fb\u52a8\u6307\u5b9a\u6570\u91cf\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a<code>it = it - 2;</code></li> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08Comparison Operators\uff09\uff1a \u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u8fed\u4ee3\u5668\u7684\u76f8\u5bf9\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a<code>it1 == it2</code> \u8868\u793a\u4e24\u4e2a\u8fed\u4ee3\u5668\u76f8\u7b49\uff0c<code>it1 &lt; it2</code> \u8868\u793a <code>it1</code> \u5728 <code>it2</code> \u4e4b\u524d\u3002</li> <li>\u89e3\u5f15\u7528\uff08Dereference\uff09\uff1a \u4f7f\u7528 <code>*</code> \u8fd0\u7b97\u7b26\u53ef\u4ee5\u8bbf\u95ee\u8fed\u4ee3\u5668\u6307\u5411\u7684\u5143\u7d20\u3002\u4f8b\u5982\uff1a<code>int value = *it;</code></li> <li>\u6210\u5458\u8bbf\u95ee\uff08Member Access\uff09\uff1a \u4f7f\u7528 <code>-&gt;</code> \u8fd0\u7b97\u7b26\u53ef\u4ee5\u8bbf\u95ee\u8fed\u4ee3\u5668\u6307\u5411\u5143\u7d20\u7684\u6210\u5458\uff08\u9002\u7528\u4e8e\u8fed\u4ee3\u5668\u6307\u5411\u5bf9\u8c61\u7684\u60c5\u51b5\uff09\u3002\u4f8b\u5982\uff1a<code>it-&gt;member;</code></li> <li>\u8ddd\u79bb\u8ba1\u7b97\uff08Distance Calculation\uff09\uff1a \u9002\u7528\u4e8e\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::distance()</code> \u51fd\u6570\u8ba1\u7b97\u4e24\u4e2a\u8fed\u4ee3\u5668\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002\u4f8b\u5982\uff1a<code>int dist = std::distance(it1, it2);</code></li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u8fed\u4ee3\u5668\u652f\u6301\u4e0d\u540c\u7684\u8fd0\u7b97\u3002\u9012\u589e\u548c\u9012\u51cf\u8fd0\u7b97\u5bf9\u4e8e\u6240\u6709\u8fed\u4ee3\u5668\u7c7b\u578b\u90fd\u662f\u652f\u6301\u7684\uff0c\u4f46\u52a0\u6cd5\u3001\u51cf\u6cd5\u3001\u6bd4\u8f83\u8fd0\u7b97\u7b26\u7b49\u53ef\u80fd\u4ec5\u9002\u7528\u4e8e\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u3002\u5728\u4f7f\u7528\u8fed\u4ee3\u5668\u65f6\uff0c\u60a8\u5e94\u8be5\u6839\u636e\u8fed\u4ee3\u5668\u7684\u7c7b\u578b\u548c\u5bb9\u5668\u7684\u7279\u6027\u6765\u9009\u62e9\u9002\u5f53\u7684\u8fd0\u7b97\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/05-%E8%BF%AD%E4%BB%A3%E5%99%A8/#_5","title":"\u7f16\u7a0b\u601d\u60f3\uff1a\u8fed\u4ee3\u601d\u60f3","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/","title":"\u301006\u3011deque","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#_1","title":"\u57fa\u672c\u6982\u5ff5\uff1a","text":"<p>deque\u662f\u53cc\u7aef\u961f\u5217\uff08Double-Ended Queue\uff09\u7684\u7f29\u5199\uff0c\u662fC++ STL\uff08\u6807\u51c6\u6a21\u677f\u5e93\uff09\u4e2d\u7684\u4e00\u79cd\u987a\u5e8f\u5bb9\u5668\u3002\u53cc\u7aef\u961f\u5217\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u961f\u5217\uff0c\u5141\u8bb8\u4ece\u961f\u5217\u7684\u4e24\u7aef\u8fdb\u884c\u5143\u7d20\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002deque\uff08\u53cc\u7aef\u961f\u5217\uff09\u652f\u6301\u5728\u961f\u5217\u7684\u524d\u7aef\u548c\u540e\u7aef\u8fdb\u884c\u9ad8\u6548\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u56e0\u6b64\u5177\u6709\u8f83\u597d\u7684\u7075\u6d3b\u6027\u548c\u6548\u7387\u3002 </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#1","title":"1. \u5b9e\u73b0\u539f\u7406","text":"<p>deque\uff08\u53cc\u7aef\u961f\u5217\uff09\u662f\u4e00\u79cd\u53cc\u5411\u5f00\u53e3\u7684\u8fde\u7eed\u7ebf\u6027\u5b58\u50a8\u7ed3\u6784\uff0c\u5b83\u5141\u8bb8\u5728\u4e24\u7aef\u8fdb\u884c\u5feb\u901f\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u56e0\u6b64\u53ef\u4ee5\u9ad8\u6548\u5730\u5b9e\u73b0\u961f\u5217\u3001\u6808\u7b49\u6570\u636e\u7ed3\u6784\u3002deque \u662f\u7531\u4e00\u7cfb\u5217\u8fde\u7eed\u7684\u5185\u5b58\u5757\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5185\u5b58\u5757\u5b58\u50a8\u82e5\u5e72\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5185\u5b58\u5757\u662f\u5206\u6563\u5206\u5e03\u5728\u5185\u5b58\u4e2d\u7684\u3002</p> <p>Note</p> <p>\u6bcf\u4e2a\u533a\u5757\u7684\u5927\u5c0f\u901a\u5e38\u662f\u56fa\u5b9a\u7684\uff0c\u5177\u4f53\u7684\u5927\u5c0f\u662f\u7531\u5b9e\u73b0\u51b3\u5b9a\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u548c\u4e0d\u540c\u7684\u6807\u51c6\u5e93\u5b9e\u73b0\u4e2d\u6709\u6240\u4e0d\u540c\u3002\u8fd9\u4e2a\u5927\u5c0f\u901a\u5e38\u662f\u6839\u636e\u5e73\u53f0\u7684\u5185\u5b58\u5206\u914d\u7b56\u7565\u548c\u6027\u80fd\u4f18\u5316\u8003\u8651\u800c\u786e\u5b9a\u7684\u3002</p> <p>deque \u7684\u5b9e\u73b0\u901a\u5e38\u662f\u901a\u8fc7\u4e00\u79cd\u53eb\u505a\u201c\u5206\u6bb5\u8fde\u7eed\u7a7a\u95f4\u201d\u7684\u6570\u636e\u7ed3\u6784\u6765\u5b9e\u73b0\u7684\u3002\u5728\u8fd9\u79cd\u7ed3\u6784\u4e2d\uff0cdeque \u88ab\u5212\u5206\u4e3a\u591a\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u5757\uff0c\u6bcf\u4e2a\u5185\u5b58\u5757\u90fd\u662f\u4e00\u4e2a\u5b9a\u957f\u6570\u7ec4\uff0c\u7528\u6765\u5b58\u50a8\u5143\u7d20\u3002\u8fd9\u4e9b\u5185\u5b58\u5757\u4ee5\u53cc\u5411\u94fe\u63a5\u7684\u65b9\u5f0f\u7ec4\u7ec7\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u6bcf\u4e2a\u5185\u5b58\u5757\u90fd\u5305\u542b\u6307\u5411\u524d\u4e00\u4e2a\u548c\u540e\u4e00\u4e2a\u5185\u5b58\u5757\u7684\u6307\u9488\u3002\u8fd9\u79cd\u7ed3\u6784\u4f7f\u5f97\u5728\u4e24\u7aef\u8fdb\u884c\u5feb\u901f\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u6210\u4e3a\u53ef\u80fd\u3002</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#2","title":"2. \u5b9a\u4e49\u4e0e\u6784\u9020","text":"<p>\u5728C++\u7684deque\u4e2d\uff0c\u6709\u51e0\u79cd\u6784\u9020\u548c\u8d4b\u503c\u65b9\u6cd5\uff0c\u6211\u4f1a\u5217\u4e3e\u4e00\u4e9b\u5e38\u89c1\u7684\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#21","title":"2.1. \u6784\u9020\u65b9\u6cd5\uff1a","text":"<ol> <li>\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff1a</li> </ol> <pre><code>std::deque&lt;int&gt; myDeque; // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684deque\n</code></pre> <ol> <li>\u5e26\u6709\u521d\u59cb\u5143\u7d20\u4e2a\u6570\u548c\u521d\u59cb\u503c\u7684\u6784\u9020\u51fd\u6570\uff1a</li> </ol> <pre><code>std::deque&lt;int&gt; myDeque(5, 10); // \u521b\u5efa\u4e00\u4e2a\u5305\u542b5\u4e2a\u503c\u4e3a10\u7684\u5143\u7d20\u7684deque\n</code></pre> <ol> <li>\u4f7f\u7528\u8fed\u4ee3\u5668\u8303\u56f4\u6784\u9020\u51fd\u6570\uff1a</li> </ol> <pre><code>std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};\nstd::deque&lt;int&gt; myDeque(vec.begin(), vec.end()); // \u4f7f\u7528vec\u4e2d\u7684\u5143\u7d20\u6765\u6784\u9020deque\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#22","title":"2.2. \u8d4b\u503c\u65b9\u6cd5\uff1a","text":"<ol> <li>\u4f7f\u7528\u8d4b\u503c\u64cd\u4f5c\u7b26<code>=</code></li> </ol> <pre><code>std::deque&lt;int&gt; anotherDeque;\nanotherDeque = myDeque; // \u4f7f\u7528myDeque\u4e2d\u7684\u5143\u7d20\u8d4b\u503c\u7ed9anotherDeque\n</code></pre> <ol> <li>\u4f7f\u7528<code>assign</code>\u51fd\u6570\uff1a</li> </ol> <pre><code>std::deque&lt;int&gt; anotherDeque;\nanotherDeque.assign(myDeque.begin(), myDeque.end()); // \u4f7f\u7528myDeque\u4e2d\u7684\u5143\u7d20\u8d4b\u503c\u7ed9anotherDeque\n</code></pre> <ol> <li>\u4f7f\u7528<code>assign</code>\u51fd\u6570\u8fdb\u884c\u91cd\u590d\u8d4b\u503c\uff1a</li> </ol> <pre><code>std::deque&lt;int&gt; anotherDeque;\nanotherDeque.assign(5, 10); // \u5c065\u4e2a\u503c\u4e3a10\u7684\u5143\u7d20\u8d4b\u503c\u7ed9anotherDeque\n</code></pre> <p>\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u6784\u9020\u548c\u8d4b\u503c\u65b9\u6cd5\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5408\u4f60\u7684\u60c5\u51b5\u7684\u65b9\u6cd5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#3-deque","title":"3. deque \u7684\u4e3b\u8981\u7279\u70b9","text":"<ol> <li>\u53cc\u5411\u5f00\u53e3\uff1adeque \u5141\u8bb8\u5728\u4e24\u7aef\u8fdb\u884c\u5feb\u901f\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u56e0\u6b64\u53ef\u4ee5\u9ad8\u6548\u5730\u5b9e\u73b0\u961f\u5217\u3001\u6808\u7b49\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u52a8\u6001\u6269\u5c55\uff1adeque \u5728\u9700\u8981\u65f6\u53ef\u4ee5\u52a8\u6001\u5730\u589e\u52a0\u5185\u5b58\u5757\uff0c\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7684\u5143\u7d20\uff0c\u56e0\u6b64\u53ef\u4ee5\u52a8\u6001\u5730\u6269\u5c55\u5176\u5bb9\u91cf\u3002</li> <li>\u968f\u673a\u8bbf\u95ee\uff1adeque \u652f\u6301\u968f\u673a\u8bbf\u95ee\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u6216\u8fed\u4ee3\u5668\u76f4\u63a5\u8bbf\u95ee\u4efb\u610f\u4f4d\u7f6e\u7684\u5143\u7d20\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\u3002</li> <li>\u5185\u5b58\u5206\u914d\uff1adeque \u91c7\u7528\u5206\u6bb5\u8fde\u7eed\u7a7a\u95f4\u7684\u65b9\u5f0f\u5b58\u50a8\u5143\u7d20\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u7a7a\u95f4\uff0c\u51cf\u5c11\u5185\u5b58\u788e\u7247\u3002</li> </ol> <p>\u5728C++\u4e2d\uff0cvector\u548cdeque\u90fd\u662f\u6807\u51c6\u6a21\u677f\u5e93\uff08STL\uff09\u4e2d\u7684\u5bb9\u5668\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u7528\u6765\u5b58\u50a8\u4e00\u7cfb\u5217\u5143\u7d20\uff0c\u4f46\u5b83\u4eec\u5728\u5185\u90e8\u5b9e\u73b0\u548c\u6027\u80fd\u7279\u5f81\u4e0a\u6709\u4e00\u4e9b\u533a\u522b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#4-dequevector","title":"4. deque\u4e0evector\u7684\u6bd4\u8f83","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#41","title":"4.1. \u5185\u90e8\u5b9e\u73b0\uff1a","text":"<ol> <li> <p>vector\uff1a</p> </li> <li> <p>\u5e95\u5c42\u901a\u8fc7\u52a8\u6001\u6570\u7ec4\u5b9e\u73b0\u3002</p> </li> <li>\u5185\u90e8\u5206\u914d\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u533a\u57df\uff0c\u56e0\u6b64\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002</li> <li> <p>\u5728\u672b\u5c3e\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u5728\u4e2d\u95f4\u6216\u5934\u90e8\u63d2\u5165/\u5220\u9664\u64cd\u4f5c\u6548\u7387\u8f83\u4f4e\u3002</p> </li> <li> <p>deque\uff1a</p> </li> <li> <p>\u5e95\u5c42\u901a\u8fc7\u4e00\u7cfb\u5217\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4\u5757\u5b9e\u73b0\u3002</p> </li> <li>\u5141\u8bb8\u5728\u4e24\u7aef\uff08\u5934\u90e8\u548c\u5c3e\u90e8\uff09\u8fdb\u884c\u9ad8\u6548\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002</li> <li>\u652f\u6301\u968f\u673a\u8bbf\u95ee\uff0c\u4f46\u4e0d\u50cfvector\u90a3\u6837\u8fde\u7eed\u5185\u5b58\uff0c\u56e0\u6b64\u5728\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u4e0a\u53ef\u80fd\u66f4\u52a0\u9ad8\u6548\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#42","title":"4.2. \u6027\u80fd\u7279\u5f81\uff1a","text":"<ol> <li> <p>\u968f\u673a\u8bbf\u95ee\uff1a</p> </li> <li> <p>\u5bf9\u4e8e\u968f\u673a\u8bbf\u95ee\uff0cvector\u7684\u6027\u80fd\u4f18\u4e8edeque\uff0c\u56e0\u4e3avector\u5177\u6709\u8fde\u7eed\u7684\u5185\u5b58\u5b58\u50a8\uff0c\u56e0\u6b64\u8bbf\u95ee\u5143\u7d20\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\uff0c\u800cdeque\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\u6216\u66f4\u9ad8\u3002</p> </li> <li> <p>\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff1a</p> </li> <li> <p>\u5728\u672b\u5c3e\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u65f6\uff0cvector\u548cdeque\u7684\u6027\u80fd\u76f8\u4f3c\uff0c\u90fd\u4e3a\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6\uff08\u644a\u9500\u60c5\u51b5\u4e0b\uff09\u3002</p> </li> <li> <p>\u5728\u4e2d\u95f4\u6216\u5934\u90e8\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u65f6\uff0cdeque\u7684\u6027\u80fd\u901a\u5e38\u4f18\u4e8evector\uff0c\u56e0\u4e3adeque\u5141\u8bb8\u5728\u4e24\u7aef\u8fdb\u884c\u9ad8\u6548\u64cd\u4f5c\uff0c\u800cvector\u9700\u8981\u79fb\u52a8\u5927\u91cf\u5143\u7d20\u3002</p> </li> <li> <p>\u5185\u5b58\u5206\u914d\uff1a</p> </li> <li> <p>vector\u5728\u9700\u8981\u6269\u5c55\u5bb9\u91cf\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u5206\u914d\u5185\u5b58\u5e76\u590d\u5236\u5143\u7d20\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u4e00\u4e9b\u6027\u80fd\u5f00\u9500\u3002</p> </li> <li>deque\u7684\u6bcf\u4e2a\u5757\u90fd\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\uff0c\u56e0\u6b64\u5b83\u53ef\u80fd\u4f1a\u9891\u7e41\u5730\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\u5757\uff0c\u8fd9\u53ef\u80fd\u4f1a\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#43","title":"4.3. \u9009\u62e9\u4f7f\u7528\u573a\u666f\uff1a","text":"<ul> <li>\u5982\u679c\u9700\u8981\u9ad8\u6548\u7684\u968f\u673a\u8bbf\u95ee\uff0c\u5e76\u4e14\u4e3b\u8981\u64cd\u4f5c\u662f\u5728\u672b\u5c3e\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u90a3\u4e48vector\u53ef\u80fd\u66f4\u9002\u5408\u3002</li> <li>\u5982\u679c\u9700\u8981\u5728\u4e24\u7aef\u8fdb\u884c\u9ad8\u6548\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u6216\u8005\u5728\u4e2d\u95f4\u8fdb\u884c\u9891\u7e41\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u90a3\u4e48deque\u53ef\u80fd\u66f4\u9002\u5408\u3002deque\u5728\u5904\u7406\u5927\u91cf\u6570\u636e\u65f6\uff0c\u53ef\u80fd\u6bd4vector\u66f4\u5177\u6027\u80fd\u4f18\u52bf\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#5-deque","title":"5. deque \u63d2\u5165\u6570\u636e","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n\nint main() {\n    std::deque&lt;int&gt; mydeque = {1, 2, 3, 4, 5};\n\n    // \u5728\u524d\u7aef\u63d2\u5165\u6570\u636e\n    mydeque.push_front(0);\n\n    // \u5728\u540e\u7aef\u63d2\u5165\u6570\u636e\n    mydeque.push_back(6);\n\n    // \u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u6570\u636e\n    std::deque&lt;int&gt;::iterator it = mydeque.begin() + 2;\n    mydeque.insert(it, 99);\n\n    // \u8f93\u51fa\u7ed3\u679c\n    std::cout &lt;&lt; \"Deque elements after insertion:\" &lt;&lt; std::endl;\n    for (int x : mydeque) {\n        std::cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5982\u679c\u5728\u53cc\u7aef\u961f\u5217\u7684\u67d0\u4e2a\u533a\u5757\u4e0a\u8fdb\u884c\u63d2\u5165\u64cd\u4f5c\u65f6\uff0c\u53d1\u73b0\u8be5\u533a\u5757\u7684\u5185\u5b58\u7a7a\u95f4\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5143\u7d20\uff0c\u5c31\u4f1a\u5bfc\u81f4\u5185\u5b58\u4e0d\u8fde\u7eed\u7684\u95ee\u9898\u3002\u8fd9\u79cd\u60c5\u51b5\u901a\u5e38\u79f0\u4e3a\u201c\u5206\u6bb5\u5185\u5b58\u5206\u914d\u201d\u3002</p> <p>\u5f53\u53cc\u7aef\u961f\u5217\u7684\u67d0\u4e2a\u533a\u5757\u5185\u5b58\u7a7a\u95f4\u4e0d\u8db3\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u5185\u5b58\u91cd\u65b0\u5206\u914d\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u533a\u5757\uff0c\u5e76\u5c06\u65b0\u5143\u7d20\u63d2\u5165\u5230\u65b0\u7684\u533a\u5757\u4e2d\u3002\u7531\u4e8e\u65b0\u7684\u533a\u5757\u53ef\u80fd\u4e0d\u4e0e\u539f\u6765\u7684\u533a\u5757\u76f8\u90bb\uff0c\u56e0\u6b64\u5c31\u4f1a\u5bfc\u81f4\u53cc\u7aef\u961f\u5217\u7684\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8fde\u7eed\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53cc\u7aef\u961f\u5217\u4f1a\u4fdd\u6301\u5176\u539f\u6709\u7684\u53cc\u5411\u94fe\u8868\u7ed3\u6784\uff0c\u4f46\u53ef\u80fd\u4f1a\u6d89\u53ca\u5230\u989d\u5916\u7684\u5185\u5b58\u5206\u914d\u548c\u6570\u636e\u590d\u5236\u64cd\u4f5c\u3002\u8fd9\u6837\u7684\u4e0d\u8fde\u7eed\u6027\u53ef\u80fd\u4f1a\u5f71\u54cd\u53cc\u7aef\u961f\u5217\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u5728\u63d2\u5165\u6216\u5220\u9664\u5143\u7d20\u65f6\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7684\u65f6\u95f4\u6765\u5904\u7406\u989d\u5916\u7684\u5185\u5b58\u5206\u914d\u548c\u6570\u636e\u590d\u5236\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#6-deque","title":"6. deque\u7684\u6392\u5e8f","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u5e93\u4e2d\u7684 <code>std::sort</code> \u7b97\u6cd5\u6765\u5bf9 <code>deque</code> \u8fdb\u884c\u6392\u5e8f\u3002<code>std::sort</code> \u53ef\u4ee5\u7528\u4e8e\u6392\u5e8f\u4efb\u4f55\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\uff0c\u5305\u62ec <code>deque</code>\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\uff0c\u6f14\u793a\u5982\u4f55\u5bf9 <code>deque</code> \u8fdb\u884c\u6392\u5e8f\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n#include &lt;algorithm&gt;\n\nint main() {\n    std::deque&lt;int&gt; myDeque = {5, 2, 9, 3, 7, 1};\n\n    // \u4f7f\u7528 std::sort \u5bf9 deque \u8fdb\u884c\u6392\u5e8f\n    std::sort(myDeque.begin(), myDeque.end());\n\n    // \u8f93\u51fa\u6392\u5e8f\u540e\u7684 deque \u5143\u7d20\n    std::cout &lt;&lt; \"Sorted deque elements: \";\n    for (const auto&amp; elem : myDeque) {\n        std::cout &lt;&lt; elem &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>deque</code>\uff0c\u7136\u540e\u4f7f\u7528 <code>std::sort</code> \u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\u3002\u6700\u540e\uff0c\u6211\u4eec\u8f93\u51fa\u6392\u5e8f\u540e\u7684 <code>deque</code> \u5143\u7d20\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c<code>std::sort</code> \u4f1a\u5bf9 <code>deque</code> \u8fdb\u884c\u539f\u5730\u6392\u5e8f\uff0c\u56e0\u6b64\u5b83\u5c06\u4fee\u6539\u539f\u59cb\u5bb9\u5668\uff0c\u800c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u6392\u5e8f\u540e\u5bb9\u5668\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#7","title":"7. \u5220\u9664\u6570\u636e","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n\nint main() {\n    std::deque&lt;int&gt; mydeque = {1, 2, 3, 4, 5};\n\n    // \u5220\u9664\u524d\u7aef\u7684\u6570\u636e\n    mydeque.pop_front();\n\n    // \u5220\u9664\u540e\u7aef\u7684\u6570\u636e\n    mydeque.pop_back();\n\n    // \u5220\u9664\u6307\u5b9a\u4f4d\u7f6e\u7684\u6570\u636e\n    std::deque&lt;int&gt;::iterator it = mydeque.begin() + 1; // \u5220\u9664\u7b2c\u4e8c\u4e2a\u5143\u7d20\n    mydeque.erase(it);\n\n    // \u8f93\u51fa\u7ed3\u679c\n    std::cout &lt;&lt; \"Deque elements after deletion:\" &lt;&lt; std::endl;\n    for (int x : mydeque) {\n        std::cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5f53\u5728\u53cc\u7aef\u961f\u5217\u7684\u67d0\u4e2a\u533a\u5757\u4e0a\u5220\u9664\u6570\u636e\u65f6\uff0c\u4f1a\u6839\u636e\u5220\u9664\u7684\u4f4d\u7f6e\u548c\u60c5\u51b5\uff0c\u53ef\u80fd\u4f1a\u89e6\u53d1\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a</p> <ol> <li>\u5220\u9664\u5143\u7d20\uff0c\u4f46\u4e0d\u91ca\u653e\u5185\u5b58\uff1a\u5982\u679c\u5220\u9664\u7684\u5143\u7d20\u5e76\u4e0d\u662f\u8be5\u533a\u5757\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u7b80\u5355\u5730\u5c06\u76ee\u6807\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u5220\u9664\uff0c\u5e76\u5c06\u540e\u7eed\u7684\u5143\u7d20\u5411\u524d\u79fb\u52a8\u4ee5\u586b\u8865\u5220\u9664\u7684\u7a7a\u4f4d\u3002\u8fd9\u6837\u505a\u4e0d\u4f1a\u6d89\u53ca\u5230\u5185\u5b58\u91ca\u653e\u7684\u64cd\u4f5c\uff0c\u53ea\u662f\u4fee\u6539\u4e86\u5143\u7d20\u7684\u4f4d\u7f6e\u3002</li> <li>\u91ca\u653e\u5185\u5b58\uff0c\u5408\u5e76\u533a\u5757\uff1a\u5982\u679c\u5220\u9664\u7684\u5143\u7d20\u662f\u8be5\u533a\u5757\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u8be5\u533a\u5757\u662f\u961f\u5217\u7684\u6700\u540e\u4e00\u4e2a\u533a\u5757\uff0c\u90a3\u4e48\u53ef\u80fd\u4f1a\u89e6\u53d1\u5185\u5b58\u91ca\u653e\u548c\u533a\u5757\u5408\u5e76\u7684\u64cd\u4f5c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f1a\u91ca\u653e\u6700\u540e\u4e00\u4e2a\u533a\u5757\u7684\u5185\u5b58\uff0c\u5e76\u5c06\u8be5\u533a\u5757\u4ece\u53cc\u7aef\u961f\u5217\u4e2d\u79fb\u9664\u3002\u5982\u679c\u5220\u9664\u7684\u533a\u5757\u4e4b\u524d\u8fd8\u6709\u5176\u4ed6\u533a\u5757\uff0c\u5219\u53ef\u80fd\u4f1a\u5c06\u76f8\u90bb\u7684\u533a\u5757\u5408\u5e76\u6210\u4e00\u4e2a\u533a\u5757\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u788e\u7247\u7684\u4ea7\u751f\u3002</li> <li>\u91cd\u65b0\u5206\u914d\u5185\u5b58\uff1a\u5728\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u6d89\u53ca\u5230\u91cd\u65b0\u5206\u914d\u5185\u5b58\u7684\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5220\u9664\u5143\u7d20\u540e\uff0c\u67d0\u4e2a\u533a\u5757\u7684\u5269\u4f59\u7a7a\u95f4\u8d85\u8fc7\u4e86\u4e00\u5b9a\u7684\u9608\u503c\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u8be5\u533a\u5757\u7684\u5185\u5b58\u7a7a\u95f4\u7f29\u5c0f\uff0c\u4ee5\u51cf\u5c11\u5185\u5b58\u7684\u6d6a\u8d39\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#8","title":"8. \u5e38\u7528\u7684\u6210\u5458\u51fd\u6570","text":"<p>\u4e0b\u8868\u603b\u7ed3\u4e86 <code>std::deque</code> \u5e38\u7528\u7684\u6210\u5458\u51fd\u6570\u53ca\u5176\u4f5c\u7528\u548c\u542b\u4e49\uff1a</p> \u6210\u5458\u51fd\u6570 \u4f5c\u7528\u548c\u542b\u4e49 <code>push_back()</code> \u5728\u53cc\u7aef\u961f\u5217\u7684\u672b\u5c3e\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u3002 <code>push_front()</code> \u5728\u53cc\u7aef\u961f\u5217\u7684\u5f00\u5934\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u3002 <code>pop_back()</code> \u79fb\u9664\u53cc\u7aef\u961f\u5217\u672b\u5c3e\u7684\u5143\u7d20\u3002 <code>pop_front()</code> \u79fb\u9664\u53cc\u7aef\u961f\u5217\u5f00\u5934\u7684\u5143\u7d20\u3002 <code>insert()</code> \u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u3002 <code>erase()</code> \u5220\u9664\u6307\u5b9a\u4f4d\u7f6e\u6216\u6307\u5b9a\u8303\u56f4\u5185\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u3002 <code>clear()</code> \u6e05\u7a7a\u53cc\u7aef\u961f\u5217\uff0c\u79fb\u9664\u6240\u6709\u5143\u7d20\u3002 <code>size()</code> \u8fd4\u56de\u53cc\u7aef\u961f\u5217\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u3002 <code>empty()</code> \u68c0\u67e5\u53cc\u7aef\u961f\u5217\u662f\u5426\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\u5219\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 <code>front()</code> \u8fd4\u56de\u53cc\u7aef\u961f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u3002 <code>back()</code> \u8fd4\u56de\u53cc\u7aef\u961f\u5217\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u3002 <code>at()</code> \u8fd4\u56de\u53cc\u7aef\u961f\u5217\u4e2d\u6307\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\u7684\u5f15\u7528\uff0c\u5e76\u8fdb\u884c\u8fb9\u754c\u68c0\u67e5\u3002 <code>operator[]()</code> \u8fd4\u56de\u53cc\u7aef\u961f\u5217\u4e2d\u6307\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\u7684\u5f15\u7528\uff0c\u4e0d\u8fdb\u884c\u8fb9\u754c\u68c0\u67e5\u3002 <code>begin()</code> \u8fd4\u56de\u6307\u5411\u53cc\u7aef\u961f\u5217\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u8fed\u4ee3\u5668\u3002 <code>end()</code> \u8fd4\u56de\u6307\u5411\u53cc\u7aef\u961f\u5217\u4e2d\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7684\u8fed\u4ee3\u5668\u3002 <code>rbegin()</code> \u8fd4\u56de\u6307\u5411\u53cc\u7aef\u961f\u5217\u4e2d\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u9006\u5411\u8fed\u4ee3\u5668\u3002 <code>rend()</code> \u8fd4\u56de\u6307\u5411\u53cc\u7aef\u961f\u5217\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u524d\u4e00\u4e2a\u4f4d\u7f6e\u7684\u9006\u5411\u8fed\u4ee3\u5668\u3002 <code>resize()</code> \u66f4\u6539\u53cc\u7aef\u961f\u5217\u7684\u5927\u5c0f\u3002 <code>swap()</code> \u4ea4\u6362\u4e24\u4e2a\u53cc\u7aef\u961f\u5217\u7684\u5185\u5bb9\u3002 <p>\u8fd9\u4e9b\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u5bf9\u53cc\u7aef\u961f\u5217\u8fdb\u884c\u5143\u7d20\u7684\u63d2\u5165\u3001\u5220\u9664\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5927\u5c0f\u8c03\u6574\u7b49\u64cd\u4f5c\uff0c\u63d0\u4f9b\u4e86\u5bf9\u53cc\u7aef\u961f\u5217\u8fdb\u884c\u7075\u6d3b\u64cd\u4f5c\u7684\u63a5\u53e3\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#9","title":"9. \u4ec0\u4e48\u662f\u968f\u673a \u4ec0\u4e48\u662f\u4e0d\u968f\u673a","text":"<p>\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u662f\u4e00\u79cd\u8fed\u4ee3\u5668\u7c7b\u578b\uff0c\u5177\u6709\u4e00\u4e9b\u7279\u5b9a\u7684\u7279\u6027\uff0c\u800c\u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u5219\u53ef\u80fd\u5177\u6709\u4e0d\u540c\u7684\u7279\u6027\u3002 at</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#91","title":"9.1. \u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u7684\u7279\u6027\uff1a","text":"<ol> <li>\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u968f\u673a\u8bbf\u95ee\uff1a \u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u652f\u6301\u5728\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u5bf9\u5bb9\u5668\u4e2d\u7684\u4efb\u610f\u5143\u7d20\u8fdb\u884c\u8bbf\u95ee\uff0c\u8fd9\u610f\u5473\u7740\u901a\u8fc7\u8fed\u4ee3\u5668\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u4efb\u4f55\u5143\u7d20\uff0c\u800c\u4e0d\u9700\u8981\u8fdb\u884c\u7ebf\u6027\u641c\u7d22\u3002</li> <li>\u652f\u6301\u7b97\u672f\u64cd\u4f5c\uff1a \u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u652f\u6301\u7b97\u672f\u64cd\u4f5c\uff0c\u5982\u52a0\u6cd5\uff08+\uff09\u3001\u51cf\u6cd5\uff08-\uff09\u3001\u81ea\u589e\uff08++\uff09\u3001\u81ea\u51cf\uff08--\uff09\u7b49\uff0c\u4ee5\u53ca\u6bd4\u8f83\u64cd\u4f5c\uff08&lt;\u3001&gt;\u3001&lt;=\u3001&gt;=\uff09\u3002</li> <li>\u652f\u6301\u8ddd\u79bb\u8ba1\u7b97\uff1a \u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u652f\u6301 std::distance \u51fd\u6570\uff0c\u53ef\u4ee5\u8ba1\u7b97\u4e24\u4e2a\u8fed\u4ee3\u5668\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u5373\u5728\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u3002</li> <li>\u5143\u7d20\u76f4\u63a5\u8bbf\u95ee\uff1a \u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u652f\u6301\u901a\u8fc7\u4e0b\u6807\u64cd\u4f5c\u7b26\uff08[]\uff09\u76f4\u63a5\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#92","title":"9.2. \u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u7684\u7279\u6027\uff1a","text":"<ol> <li>\u7ebf\u6027\u8bbf\u95ee\uff1a \u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u53ef\u80fd\u53ea\u652f\u6301\u7ebf\u6027\u8bbf\u95ee\uff0c\u5373\u53ea\u80fd\u6309\u987a\u5e8f\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u4e0d\u80fd\u5728\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u76f4\u63a5\u8bbf\u95ee\u4efb\u610f\u5143\u7d20\u3002</li> <li>\u9650\u5236\u7684\u8fed\u4ee3\u5668\u64cd\u4f5c\uff1a \u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u53ef\u80fd\u4e0d\u652f\u6301\u4e00\u4e9b\u9ad8\u7ea7\u7684\u8fed\u4ee3\u5668\u64cd\u4f5c\uff0c\u5982\u7b97\u672f\u64cd\u4f5c\u3001\u8ddd\u79bb\u8ba1\u7b97\u7b49\u3002</li> <li>\u63d2\u5165\u548c\u5220\u9664\u6548\u7387\u53ef\u80fd\u8f83\u4f4e\uff1a \u4e0d\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u53ef\u80fd\u5bf9\u4e8e\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u6548\u7387\u4e0d\u5982\u652f\u6301\u968f\u673a\u8bbf\u95ee\u7684\u5bb9\u5668\u9ad8\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u9700\u8981\u5728\u5bb9\u5668\u4e2d\u8fdb\u884c\u7ebf\u6027\u641c\u7d22\u6765\u627e\u5230\u63d2\u5165\u6216\u5220\u9664\u4f4d\u7f6e\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5bb9\u5668\u7684\u8fed\u4ee3\u5668\u7c7b\u578b\u6765\u786e\u5b9a\u5bb9\u5668\u662f\u5426\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002\u5728C++\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::iterator_traits</code> \u6a21\u677f\u7c7b\u6765\u83b7\u53d6\u8fed\u4ee3\u5668\u7684\u5c5e\u6027\uff0c\u5176\u4e2d\u7684 <code>std::iterator_traits::iterator_category</code> \u53ef\u4ee5\u544a\u8bc9\u4f60\u8fed\u4ee3\u5668\u7684\u7c7b\u578b\u3002\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u7684\u7c7b\u578b\u662f <code>std::random_access_iterator_tag</code>\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u68c0\u67e5\u4e00\u4e2a\u5bb9\u5668\u662f\u5426\u652f\u6301\u968f\u673a\u8bbf\u95ee\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;deque&gt;\n#include &lt;array&gt;\n#include &lt;iterator&gt;\n\ntemplate&lt;typename Container&gt;\nvoid checkRandomAccess(Container&amp; cont) {\n    // \u4f7f\u7528 std::iterator_traits \u83b7\u53d6\u8fed\u4ee3\u5668\u7c7b\u578b\n    typename std::iterator_traits&lt;typename Container::iterator&gt;::iterator_category cat;\n\n    // \u68c0\u67e5\u8fed\u4ee3\u5668\u7c7b\u578b\u662f\u5426\u4e3a\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\n    if (std::is_same&lt;cat, std::random_access_iterator_tag&gt;::value) {\n        std::cout &lt;&lt; \"Container supports random access.\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"Container does not support random access.\" &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    std::vector&lt;int&gt; vec;\n    std::deque&lt;int&gt; deq;\n    std::array&lt;int, 5&gt; arr;\n\n    std::cout &lt;&lt; \"Checking vector: \";\n    checkRandomAccess(vec);\n\n    std::cout &lt;&lt; \"Checking deque: \";\n    checkRandomAccess(deq);\n\n    std::cout &lt;&lt; \"Checking array: \";\n    checkRandomAccess(arr);\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570 <code>checkRandomAccess</code>\uff0c\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u5bb9\u5668\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u901a\u8fc7\u8fed\u4ee3\u5668\u7c7b\u578b\u6765\u68c0\u67e5\u5bb9\u5668\u662f\u5426\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002\u7136\u540e\uff0c\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u5bf9 <code>std::vector</code>\u3001<code>std::deque</code> \u548c <code>std::array</code> \u8fdb\u884c\u4e86\u68c0\u67e5\u3002\u6839\u636e\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u786e\u5b9a\u6bcf\u4e2a\u5bb9\u5668\u662f\u5426\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/06-deque%EF%BC%88%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%89/#10","title":"10. \u5bb9\u5668&amp;\u9002\u914d\u5668","text":"<p>\u4ee5\u4e0b\u662f\u4f7f\u7528\u8868\u683c\u5f62\u5f0f\u56de\u7b54\u4f60\u7684\u95ee\u9898\uff1a</p> \u771f\u6b63\u7684\u5bb9\u5668 \u63cf\u8ff0 <code>std::vector</code> \u52a8\u6001\u6570\u7ec4\uff0c\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002 <code>std::deque</code> \u53cc\u7aef\u961f\u5217\uff0c\u652f\u6301\u968f\u673a\u8bbf\u95ee\u548c\u53cc\u7aef\u9ad8\u6548\u64cd\u4f5c\u3002 <code>std::list</code> \u53cc\u5411\u94fe\u8868\uff0c\u652f\u6301\u53cc\u5411\u8fed\u4ee3\u548c\u9ad8\u6548\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002 <code>std::forward_list</code> \u5355\u5411\u94fe\u8868\uff0c\u652f\u6301\u5355\u5411\u8fed\u4ee3\u548c\u9ad8\u6548\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002 <code>std::array</code> \u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4\uff0c\u652f\u6301\u968f\u673a\u8bbf\u95ee\u3002 \u5bb9\u5668\u9002\u914d\u5668 \u63cf\u8ff0 <code>std::stack</code> \u6808\uff0c\u63d0\u4f9b\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u64cd\u4f5c\u63a5\u53e3\u3002\u9ed8\u8ba4\u4f7f\u7528 <code>std::deque</code>\u4f5c\u4e3a\u5e95\u5c42\u5bb9\u5668\u3002 <code>std::queue</code> \u961f\u5217\uff0c\u63d0\u4f9b\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u64cd\u4f5c\u63a5\u53e3\u3002\u9ed8\u8ba4\u4f7f\u7528 <code>std::deque</code>\u4f5c\u4e3a\u5e95\u5c42\u5bb9\u5668\u3002 <code>std::priority_queue</code> \u4f18\u5148\u961f\u5217\uff0c\u6309\u7167\u4e00\u5b9a\u987a\u5e8f\u8fdb\u884c\u5143\u7d20\u7684\u63d2\u5165\u548c\u5f39\u51fa\u64cd\u4f5c\u3002\u9ed8\u8ba4\u4f7f\u7528 <code>std::vector</code>\u4f5c\u4e3a\u5e95\u5c42\u5bb9\u5668\u3002 <p>\u4ee5\u4e0a\u8868\u683c\u5217\u51fa\u4e86STL\u4e2d\u771f\u6b63\u7684\u5bb9\u5668\u548c\u5bb9\u5668\u9002\u914d\u5668\uff0c\u4ee5\u53ca\u5b83\u4eec\u7684\u63cf\u8ff0\u3002\u8fd9\u4e9b\u5bb9\u5668\u548c\u5bb9\u5668\u9002\u914d\u5668\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u6570\u636e\u7ec4\u7ec7\u65b9\u5f0f\u548c\u64cd\u4f5c\u63a5\u53e3\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u5bb9\u5668\u7c7b\u578b\u3002\u5bb9\u5668\u9002\u914d\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\u6765\u8bbf\u95ee\u73b0\u6709\u5bb9\u5668\u7684\u529f\u80fd\uff0c\u5e76\u901a\u8fc7\u9650\u5236\u6216\u6269\u5c55\u5e95\u5c42\u5bb9\u5668\u7684\u67d0\u4e9b\u64cd\u4f5c\u6765\u5b9e\u73b0\u7279\u5b9a\u7684\u884c\u4e3a\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/","title":"\u301007\u3011list","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#1-list","title":"1. list\u7684\u6982\u5ff5","text":"<p>std::list\u662fC++\u6807\u51c6\u6a21\u677f\u5e93\uff08STL\uff09\u4e2d\u7684\u4e00\u79cd\u53cc\u5411\u94fe\u8868\u6570\u636e\u7ed3\u6784\u3002\u4e0e\u6570\u7ec4\u548c\u5411\u91cf\uff08vector\uff09\u4e0d\u540c\uff0clist\u4e2d\u7684\u5143\u7d20\u4e0d\u662f\u5b58\u50a8\u5728\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u4e2d\uff0c\u800c\u662f\u5206\u6563\u5b58\u50a8\uff0c\u5e76\u901a\u8fc7\u6307\u9488\u6216\u8fed\u4ee3\u5668\u94fe\u63a5\u5728\u4e00\u8d77\u3002\u6bcf\u4e2a\u5143\u7d20\u90fd\u5305\u542b\u6307\u5411\u5176\u524d\u4e00\u4e2a\u5143\u7d20\u548c\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\uff0c\u8fd9\u4f7f\u5f97\u5728list\u4e2d\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53d8\u5f97\u975e\u5e38\u9ad8\u6548\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#2-list","title":"2. list\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>list\u7684\u5b9e\u73b0\u4e3b\u8981\u4f9d\u8d56\u4e8e\u8282\u70b9\uff08node\uff09\u7684\u6982\u5ff5\u3002\u6bcf\u4e2a\u8282\u70b9\u5305\u542b\u4e24\u90e8\u5206\uff1a\u6570\u636e\u90e8\u5206\u548c\u6307\u9488\u90e8\u5206\u3002\u6570\u636e\u90e8\u5206\u5b58\u50a8\u5b9e\u9645\u7684\u503c\uff0c\u800c\u6307\u9488\u90e8\u5206\u5219\u5305\u542b\u6307\u5411\u4e0b\u4e00\u4e2a\u548c\u4e0a\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6240\u6709\u7684\u8282\u70b9\u90fd\u88ab\u94fe\u63a5\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u3002 </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#3-list","title":"3. list\u7684\u7279\u70b9","text":"<ol> <li>\u52a8\u6001\u5927\u5c0f\uff1alist\u7684\u5927\u5c0f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u6539\u53d8\uff0c\u65e0\u9700\u9884\u5148\u5206\u914d\u56fa\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u3002</li> <li>\u53cc\u5411\u8fed\u4ee3\uff1a\u53ef\u4ee5\u901a\u8fc7\u8fed\u4ee3\u5668\u5728list\u4e2d\u5411\u524d\u6216\u5411\u540e\u904d\u5386\u5143\u7d20\u3002</li> <li>\u9ad8\u6548\u63d2\u5165\u548c\u5220\u9664\uff1a\u5728list\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\u63d2\u5165\u6216\u5220\u9664\u5143\u7d20\u90fd\u53ea\u9700\u8981\u6539\u53d8\u76f8\u90bb\u5143\u7d20\u7684\u6307\u9488\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\u3002</li> <li>\u975e\u8fde\u7eed\u5185\u5b58\uff1alist\u4e2d\u7684\u5143\u7d20\u4e0d\u5b58\u50a8\u5728\u8fde\u7eed\u7684\u5185\u5b58\u4e2d\uff0c\u8fd9\u6709\u52a9\u4e8e\u5728\u5185\u5b58\u788e\u7247\u8f83\u591a\u7684\u73af\u5883\u4e2d\u66f4\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#4-listvector","title":"4. list\u4e0evector\u7684\u533a\u522b","text":"<ol> <li>\u5185\u5b58\u5e03\u5c40\uff1avector\u7684\u5143\u7d20\u5b58\u50a8\u5728\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u4e2d\uff0c\u800clist\u7684\u5143\u7d20\u5219\u5206\u6563\u5b58\u50a8\u3002 </li> <li>\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\uff1a\u5728vector\u7684\u4e2d\u95f4\u4f4d\u7f6e\u63d2\u5165\u6216\u5220\u9664\u5143\u7d20\u9700\u8981\u79fb\u52a8\u5927\u91cf\u7684\u5143\u7d20\uff0c\u56e0\u6b64\u65f6\u95f4\u590d\u6742\u5ea6\u8f83\u9ad8\uff08O(n)\uff09\u3002\u800c\u5728list\u4e2d\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u53ea\u9700\u8981\u6539\u53d8\u76f8\u90bb\u8282\u70b9\u7684\u6307\u9488\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\u3002</li> <li>\u8bbf\u95ee\u5143\u7d20\uff1a\u7531\u4e8evector\u7684\u5143\u7d20\u5b58\u50a8\u5728\u8fde\u7eed\u7684\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u76f4\u63a5\u8bbf\u95ee\u4efb\u4f55\u5143\u7d20\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1) \u3002\u800c\u5728list\u4e2d\uff0c\u8bbf\u95ee\u5143\u7d20\u9700\u8981\u901a\u8fc7\u8fed\u4ee3\u5668\u9010\u6b65\u904d\u5386\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\u3002</li> <li>\u7a7a\u95f4\u6548\u7387\uff1avector\u5728\u52a8\u6001\u8c03\u6574\u5927\u5c0f\u65f6\u53ef\u80fd\u4f1a\u8fdb\u884c\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u4e00\u5b9a\u7684\u7a7a\u95f4\u6d6a\u8d39\u3002\u800clist\u5219\u4e0d\u9700\u8981\u9884\u5148\u5206\u914d\u56fa\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u56e0\u6b64\u7a7a\u95f4\u6548\u7387\u66f4\u9ad8\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#5","title":"5. \u5e38\u7528\u7684\u6210\u5458\u51fd\u6570","text":"<ol> <li>begin() \u548c end()\uff1a\u8fd4\u56de\u6307\u5411list\u7b2c\u4e00\u4e2a\u5143\u7d20\u548c\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e4b\u540e\u4f4d\u7f6e\u7684\u8fed\u4ee3\u5668\u3002</li> <li>rbegin() \u548c rend()\uff1a\u8fd4\u56de\u6307\u5411list\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u548c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d\u4f4d\u7f6e\u7684\u53cd\u5411\u8fed\u4ee3\u5668\u3002</li> <li>size()\uff1a\u8fd4\u56delist\u4e2d\u5143\u7d20\u7684\u6570\u91cf\u3002</li> <li>empty()\uff1a\u68c0\u67e5list\u662f\u5426\u4e3a\u7a7a\u3002</li> <li>front() \u548c back()\uff1a\u8fd4\u56de\u5bf9list\u4e2d\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u3002</li> <li>push_front() \u548c pop_front()\uff1a\u5728list\u7684\u5f00\u5934\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\u3002</li> <li>push_back() \u548c pop_back()\uff1a\u5728list\u7684\u672b\u5c3e\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\u3002</li> <li>insert()\uff1a\u5728list\u7684\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u3002</li> <li>erase()\uff1a\u5220\u9664list\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u3002</li> <li>clear()\uff1a\u5220\u9664list\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002</li> <li>splice()\uff1a\u5c06\u53e6\u4e00\u4e2alist\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u79fb\u52a8\u5230\u5f53\u524dlist\u7684\u6307\u5b9a\u4f4d\u7f6e\u3002</li> <li>sort()\uff1a\u5bf9list\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f\u3002</li> <li>unique()\uff1a\u5220\u9664list\u4e2d\u8fde\u7eed\u7684\u91cd\u590d\u5143\u7d20\u3002</li> <li>merge()\uff1a\u5408\u5e76\u4e24\u4e2a\u5df2\u6392\u5e8f\u7684list\u3002</li> <li>reverse()\uff1a\u53cd\u8f6clist\u4e2d\u5143\u7d20\u7684\u987a\u5e8f\u3002</li> </ol> <p>\u4ee5\u4e0a\u5c31\u662f\u5173\u4e8eC++ STL\u4e2dlist\u7684\u57fa\u672c\u6982\u5ff5\u3001\u7279\u70b9\u3001\u5b9e\u73b0\u539f\u7406\u4ee5\u53ca\u4e0evector\u7684\u533a\u522b\u548c\u5e38\u7528\u6210\u5458\u51fd\u6570\u7684\u4ecb\u7ecd\u3002\u5e0c\u671b\u8fd9\u4efd\u8bb2\u4e49\u80fd\u5e2e\u52a9\u5b66\u751f\u66f4\u597d\u5730\u7406\u89e3\u548c\u4f7f\u7528list\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#6","title":"6. \u4ee3\u7801\u6837\u4f8b","text":"<p>\u5f53\u7136\u53ef\u4ee5\uff0c\u4ee5\u4e0b\u662fstd::list\u4e2dinsert(), unique(), merge(), splice(), \u548c sort() \u6210\u5458\u51fd\u6570\u7684\u4ee3\u7801\u6837\u4f8b\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#insert","title":"insert()","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;list&gt;  \n\nint main() {  \n    std::list&lt;int&gt; myList = {1, 2, 4, 5};  \n\n    // \u5728\u4f4d\u7f6e2\u63d2\u5165\u5143\u7d203  \n    auto it = myList.begin();  \n    std::advance(it, 2); // \u5c06\u8fed\u4ee3\u5668\u5411\u524d\u79fb\u52a82\u4e2a\u4f4d\u7f6e  \n    myList.insert(it, 3); // \u5728\u8be5\u4f4d\u7f6e\u63d2\u5165\u5143\u7d203  \n\n    // \u8f93\u51fa: 1 2 3 4 5  \n    for (int num : myList) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#unique","title":"unique()","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;list&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    std::list&lt;int&gt; myList = {1, 2, 2, 3, 3, 3, 4};  \n\n    // \u5220\u9664\u8fde\u7eed\u7684\u91cd\u590d\u5143\u7d20  \n    myList.unique();  \n\n    // \u8f93\u51fa: 1 2 3 4  \n    for (int num : myList) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#merge","title":"merge()","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;list&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    std::list&lt;int&gt; list1 = {1, 3, 5};  \n    std::list&lt;int&gt; list2 = {2, 4, 6};  \n\n    // \u5047\u8bbelist1\u548clist2\u5df2\u6392\u5e8f  \n    list1.merge(list2); // \u5408\u5e76\u4e24\u4e2a\u5df2\u6392\u5e8f\u7684list  \n\n    // \u8f93\u51fa: 1 2 3 4 5 6  \n    for (int num : list1) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#splice","title":"splice()","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;list&gt;  \n\nint main() {  \n    std::list&lt;int&gt; list1 = {1, 2, 3, 4, 5};  \n    std::list&lt;int&gt; list2;  \n\n    // \u5c06list1\u4e2d\u7684\u7b2c2\u4e2a\u5230\u7b2c4\u4e2a\u5143\u7d20\u79fb\u52a8\u5230list2\u7684\u5f00\u59cb\u4f4d\u7f6e  \n    auto it = list1.begin();  \n    std::advance(it, 1); // \u79fb\u52a8\u5230\u7b2c2\u4e2a\u5143\u7d20  \n    list2.splice(list2.begin(), list1, it, std::next(it, 3));  \n\n    // list1\u73b0\u5728\u5305\u542b: 1 5  \n    // list2\u73b0\u5728\u5305\u542b: 2 3 4  \n\n    // \u8f93\u51falist1  \n    for (int num : list1) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    // \u8f93\u51falist2  \n    for (int num : list2) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/07-list/#sort","title":"sort()","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;list&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    std::list&lt;int&gt; myList = {5, 2, 4, 1, 3};  \n\n    // \u5bf9list\u8fdb\u884c\u6392\u5e8f  \n    myList.sort();  \n\n    // \u8f93\u51fa: 1 2 3 4 5  \n    for (int num : myList) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <p>\u8fd9\u4e9b\u4ee3\u7801\u6837\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528std::list\u4e2d\u7684insert(), unique(), merge(), splice(), \u548c sort() \u6210\u5458\u51fd\u6570\u3002\u6ce8\u610f\uff0c\u5728\u4f7f\u7528merge()\u51fd\u6570\u65f6\uff0c\u9700\u8981\u786e\u4fdd\u4e24\u4e2a\u5217\u8868\u90fd\u5df2\u7ecf\u6392\u5e8f\uff0c\u5426\u5219\u7ed3\u679c\u5c06\u4e0d\u662f\u9884\u671f\u7684\u6392\u5e8f\u5217\u8868\u3002\u540c\u6837\uff0cunique()\u51fd\u6570\u53ea\u5220\u9664\u8fde\u7eed\u7684\u91cd\u590d\u5143\u7d20\uff0c\u5982\u679c\u5217\u8868\u4e2d\u7684\u91cd\u590d\u5143\u7d20\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u90a3\u4e48\u5b83\u4eec\u5c06\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5728\u4f7f\u7528splice()\u65f6\uff0c\u9700\u8981\u7279\u522b\u6ce8\u610f\u8fed\u4ee3\u5668\u7684\u4f4d\u7f6e\uff0c\u4ee5\u907f\u514d\u9519\u8bef\u5730\u79fb\u52a8\u5143\u7d20\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/","title":"\u301008\u3011Map\u5bb9\u5668","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#1-map","title":"1. Map\u7684\u6982\u5ff5","text":"<p>STL Map\u662fC++\u6807\u51c6\u6a21\u677f\u5e93\uff08Standard Template Library\uff09\u4e2d\u7684\u4e00\u4e2a\u5173\u8054\u5bb9\u5668\uff0c\u5b83\u5b58\u50a8\u7684\u5143\u7d20\u90fd\u662f\u952e\u503c\u5bf9(key-value)\uff0c\u5e76\u4e14\u6839\u636e\u952e\u7684\u503c\u81ea\u52a8\u6392\u5e8f\u3002\u5728Map\u4e2d\uff0c\u952e\u503c(key)\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u952e\u6700\u591a\u53ea\u80fd\u5bf9\u5e94\u4e00\u4e2a\u503c(value)\u3002Map\u7684\u5185\u90e8\u5b9e\u73b0\u901a\u5e38\u662f\u4e00\u4e2a\u7ea2\u9ed1\u6811\uff0c\u56e0\u6b64\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(log n)\u3002 </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#2","title":"2. \u5e95\u5c42\u539f\u7406","text":"<p>std::map \u5728 C++ STL\uff08Standard Template Library\uff09\u4e2d\u7684\u5e95\u5c42\u5b9e\u73b0\u901a\u5e38\u662f\u4e00\u4e2a\u5e73\u8861\u641c\u7d22\u6811\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u6700\u5e38\u7528\u7684\u662f\u7ea2\u9ed1\u6811\uff08Red-Black Tree\uff09\u3002\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5b83\u901a\u8fc7\u5bf9\u6811\u8fdb\u884c\u7740\u8272\u548c\u65cb\u8f6c\u7b49\u64cd\u4f5c\uff0c\u6765\u4fdd\u6301\u6811\u7684\u5e73\u8861\u6027\uff0c\u4ece\u800c\u5728\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u4e2d\u90fd\u80fd\u4fdd\u6301\u76f8\u5bf9\u7a33\u5b9a\u7684\u5bf9\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u3002</p> <p>\u5e73\u8861\u4e8c\u53c9\u6811\u548c\u7ea2\u9ed1\u6811\u90fd\u662f\u7528\u4e8e\u5b9e\u73b0\u9ad8\u6548\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u6811\u5f62\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u5b83\u4eec\u4e4b\u95f4\u5b58\u5728\u4e00\u4e9b\u5173\u952e\u5dee\u5f02\uff0c\u8fd9\u4e9b\u5dee\u5f02\u51b3\u5b9a\u4e86\u5728\u7279\u5b9a\u573a\u666f\u4e0b\u9009\u62e9\u4f7f\u7528\u54ea\u4e00\u79cd\u7ed3\u6784\u66f4\u4e3a\u5408\u9002\u3002</p> <p>\u4ec0\u4e48\u662f\u5e73\u8861\u4e8c\u53c9\u6811\uff1a</p> <p>\u5e73\u8861\u4e8c\u53c9\u6811\uff0c\u5982AVL\u6811\uff0c\u662f\u4e00\u79cd\u4e25\u683c\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\u3002\u5b83\u8981\u6c42\u6bcf\u4e2a\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u6700\u591a\u4e3a1\uff0c\u8fd9\u786e\u4fdd\u4e86\u6811\u7684\u9ad8\u5ea6\u4e0e\u8282\u70b9\u6570\u76ee\u7684\u5bf9\u6570\u6210\u6bd4\u4f8b\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(log n)\u3002\u7136\u800c\uff0c\u7ef4\u6301\u8fd9\u79cd\u4e25\u683c\u7684\u5e73\u8861\u9700\u8981\u4ed8\u51fa\u4e00\u5b9a\u7684\u4ee3\u4ef7\u3002\u5728\u6bcf\u6b21\u63d2\u5165\u6216\u5220\u9664\u8282\u70b9\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u901a\u8fc7\u65cb\u8f6c\u548c\u91cd\u6784\u64cd\u4f5c\u6765\u8c03\u6574\u6811\u7684\u7ed3\u6784\uff0c\u4ee5\u786e\u4fdd\u5e73\u8861\u3002 </p> <p>\u4ec0\u4e48\u662f\u7ea2\u9ed1\u6811\uff1a</p> <p>\u7ea2\u9ed1\u6811\u5219\u662f\u4e00\u79cd\u76f8\u5bf9\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\u3002\u5b83\u653e\u5bbd\u4e86\u5e73\u8861\u6027\u7684\u8981\u6c42\uff0c\u5141\u8bb8\u6811\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u201c\u4e0d\u90a3\u4e48\u5e73\u8861\u201d\u3002\u7ea2\u9ed1\u6811\u901a\u8fc7\u989c\u8272\u548c\u65cb\u8f6c\u64cd\u4f5c\u6765\u4fdd\u6301\u6811\u7684\u5e73\u8861\u6027\uff0c\u8fd9\u79cd\u5e73\u8861\u6027\u8db3\u4ee5\u4fdd\u8bc1\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662fO(log n)\u3002\u4e0e\u5e73\u8861\u4e8c\u53c9\u6811\u76f8\u6bd4\uff0c\u7ea2\u9ed1\u6811\u7684\u5b9e\u73b0\u66f4\u7b80\u5355\uff0c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u5f00\u9500\u4e5f\u76f8\u5bf9\u8f83\u4f4e\u3002 \u7ea2\u9ed1\u6811\u7684\u7279\u6027\u5305\u62ec\uff1a</p> <ol> <li>\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u7ea2\u8272\uff0c\u8981\u4e48\u662f\u9ed1\u8272\u3002</li> <li>\u6839\u8282\u70b9\u662f\u9ed1\u8272\u3002</li> <li>\u6240\u6709\u53f6\u5b50\u8282\u70b9\uff08NIL\u6216\u7a7a\u8282\u70b9\uff09\u662f\u9ed1\u8272\u3002</li> <li>\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f\u7ea2\u8272\u7684\uff0c\u5219\u5b83\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u90fd\u662f\u9ed1\u8272\u7684\uff08\u4ece\u6bcf\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u6240\u6709\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\uff09\u3002</li> <li>\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\uff0c\u4ece\u8be5\u8282\u70b9\u5230\u5176\u6240\u6709\u540e\u4ee3\u53f6\u5b50\u8282\u70b9\u7684\u7b80\u5355\u8def\u5f84\u4e0a\uff0c\u5747\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\u3002</li> </ol> <p>\u8fd9\u4e9b\u7279\u6027\u4fdd\u8bc1\u4e86\u7ea2\u9ed1\u6811\u5728\u52a8\u6001\u6570\u636e\u63d2\u5165\u3001\u5220\u9664\u548c\u641c\u7d22\u65f6\u90fd\u80fd\u4fdd\u6301\u8f83\u5feb\u7684\u6027\u80fd\u3002</p> <p>\u5728 std::map \u4e2d\uff0c\u952e\uff08key\uff09\u7528\u6765\u5728\u7ea2\u9ed1\u6811\u4e2d\u6392\u5e8f\u548c\u5b9a\u4f4d\u5143\u7d20\uff0c\u800c\u503c\uff08value\uff09\u4e0e\u952e\u76f8\u5173\u8054\u5e76\u5b58\u50a8\u5728\u76f8\u5e94\u7684\u8282\u70b9\u4e2d\u3002\u5f53\u5411 map \u63d2\u5165\u5143\u7d20\u65f6\uff0c\u7ea2\u9ed1\u6811\u4f1a\u6839\u636e\u952e\u7684\u503c\u8fdb\u884c\u6392\u5e8f\u5e76\u76f8\u5e94\u5730\u8c03\u6574\u6811\u7684\u7ed3\u6784\u4ee5\u4fdd\u6301\u5e73\u8861\u3002\u540c\u6837\uff0c\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u4e5f\u4f1a\u5229\u7528\u7ea2\u9ed1\u6811\u7684\u7279\u6027\u6765\u9ad8\u6548\u5730\u5b9a\u4f4d\u5143\u7d20\u3002</p> <p>Note</p> <p>\u90a3\u4e48\uff0c\u6709\u4e86\u5e73\u8861\u4e8c\u53c9\u6811\u4e3a\u4ec0\u4e48\u8fd8\u8981\u7ea2\u9ed1\u6811\u5462\uff1f\u8fd9\u4e3b\u8981\u6e90\u4e8e\u7ea2\u9ed1\u6811\u7684\u4ee5\u4e0b\u4f18\u52bf\uff1a</p> <p>\u5b9e\u73b0\u7b80\u5355\u6027\uff1a\u7ea2\u9ed1\u6811\u7684\u5e73\u8861\u6027\u8981\u6c42\u76f8\u5bf9\u5bbd\u677e\uff0c\u8fd9\u4f7f\u5f97\u5176\u5b9e\u73b0\u6bd4\u5e73\u8861\u4e8c\u53c9\u6811\u66f4\u7b80\u5355\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u7ea2\u9ed1\u6811\u7684\u4ee3\u7801\u901a\u5e38\u66f4\u77ed\u3001\u66f4\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4\u3002</p> <p>\u6027\u80fd\u7a33\u5b9a\u6027\uff1a\u867d\u7136\u5e73\u8861\u4e8c\u53c9\u6811\u5728\u7406\u8bba\u4e0a\u5177\u6709\u66f4\u4e25\u683c\u7684\u5e73\u8861\u6027\uff0c\u4f46\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u7ea2\u9ed1\u6811\u7684\u6027\u80fd\u901a\u5e38\u66f4\u4e3a\u7a33\u5b9a\u3002\u7ea2\u9ed1\u6811\u7684\u5e73\u8861\u6027\u8c03\u6574\u7b56\u7565\u4f7f\u5176\u5728\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u4e2d\u80fd\u591f\u4fdd\u6301\u76f8\u5bf9\u7a33\u5b9a\u7684\u6027\u80fd\u3002</p> <p>\u5e94\u7528\u573a\u666f\u5e7f\u6cdb\u6027\uff1a\u7ea2\u9ed1\u6811\u7531\u4e8e\u5176\u7b80\u5355\u6027\u548c\u6027\u80fd\u7a33\u5b9a\u6027\uff0c\u5728\u591a\u79cd\u573a\u5408\u5f97\u5230\u4e86\u5e7f\u6cdb\u5e94\u7528\u3002\u4f8b\u5982\uff0c\u5728C++\u7684STL\u5e93\u4e2d\uff0cmap\u548cset\u5bb9\u5668\u7684\u5e95\u5c42\u5b9e\u73b0\u901a\u5e38\u4f7f\u7528\u7ea2\u9ed1\u6811\u3002\u6b64\u5916\uff0c\u7ea2\u9ed1\u6811\u4e5f\u5e38\u7528\u4e8e\u5185\u6838\u6a21\u5757\u3001\u6570\u636e\u5e93\u7d22\u5f15\u7b49\u573a\u666f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#3-map","title":"3. Map\u7684\u57fa\u672c\u64cd\u4f5c","text":"<ol> <li>\u5305\u542b\u5934\u6587\u4ef6</li> </ol> <pre><code>#include &lt;map&gt;  \nusing namespace std;\n</code></pre> <ol> <li>\u58f0\u660eMap</li> </ol> <pre><code>map&lt;string, int&gt; map_name;  //STL\n</code></pre> <p>\u5176\u4e2d\uff0ckey_type\u662f\u952e\u7684\u7c7b\u578b\uff0cvalue_type\u662f\u503c\u7684\u7c7b\u578b\u3002</p> <ol> <li>\u63d2\u5165\u5143\u7d20</li> </ol> <pre><code>map_name[key] = value;\n</code></pre> <p>\u6216\u8005</p> <pre><code>map_name.insert(pair&lt;key_type, value_type&gt;(key, value));\n</code></pre> <ol> <li>\u8bbf\u95ee\u5143\u7d20</li> </ol> <pre><code>value_type value = map_name[\"apple\"];\n</code></pre> <p>\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u952e\u503c\u5bf9\uff0c\u5176\u4e2dvalue\u88ab\u521d\u59cb\u5316\u4e3avalue_type\u7684\u9ed8\u8ba4\u503c\u3002</p> <ol> <li>\u5220\u9664\u5143\u7d20</li> </ol> <pre><code>map_name.erase(key);\n</code></pre> <ol> <li>\u67e5\u627e\u5143\u7d20</li> </ol> <pre><code>map&lt;key_type, value_type&gt;::iterator it = map_name.find(key);  \nif (it != map_name.end()) {  \n    // \u627e\u5230\u5143\u7d20  \n} else {  \n    // \u6ca1\u627e\u5230\u5143\u7d20  \n}\n</code></pre> <ol> <li>\u904d\u5386\u5143\u7d20</li> </ol> <pre><code>for (map&lt;key_type, value_type&gt;::iterator it = map_name.begin(); it != map_name.end(); ++it) {  \n    key_type key = it-&gt;first;  \n    value_type value = it-&gt;second;  \n    // \u5904\u7406\u952e\u503c\u5bf9  \n}\n</code></pre> <p>\u6216\u8005\u4f7f\u7528C++11\u7684\u57fa\u4e8e\u8303\u56f4\u7684for\u5faa\u73af\uff1a</p> <pre><code>for (const auto &amp;pair : map_name) {  \n    key_type key = pair.first;  \n    value_type value = pair.second;  \n    // \u5904\u7406\u952e\u503c\u5bf9  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#4-map","title":"4. Map\u7684\u9ad8\u7ea7\u7279\u6027","text":"<ol> <li>\u81ea\u5b9a\u4e49\u6392\u5e8f     \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMap\u4e2d\u7684\u5143\u7d20\u4f1a\u6839\u636e\u952e\u7684\u503c\u8fdb\u884c\u5347\u5e8f\u6392\u5e8f\u3002\u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u6392\u5e8f\u89c4\u5219\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u4f9b\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u51fd\u6570\u6216\u51fd\u6570\u5bf9\u8c61\u4f5c\u4e3aMap\u7684\u7b2c\u4e8c\u4e2a\u6a21\u677f\u53c2\u6570\u6765\u5b9e\u73b0\u3002</li> </ol> <pre><code>struct Compare {  \n    bool operator()(const key_type&amp; a, const key_type&amp; b) const {  \n        // \u81ea\u5b9a\u4e49\u6bd4\u8f83\u903b\u8f91  \n    }  \n};  \n\nmap&lt;key_type, value_type, Compare&gt; map_name;\n</code></pre> <ol> <li>Map\u7684\u5927\u5c0f     \u53ef\u4ee5\u4f7f\u7528size()\u51fd\u6570\u83b7\u53d6Map\u4e2d\u5143\u7d20\u7684\u6570\u91cf\u3002</li> </ol> <pre><code>size_t size = map_name.size();\n</code></pre> <ol> <li>\u5224\u65adMap\u662f\u5426\u4e3a\u7a7a     \u53ef\u4ee5\u4f7f\u7528empty()\u51fd\u6570\u5224\u65adMap\u662f\u5426\u4e3a\u7a7a\u3002</li> </ol> <pre><code>if (map_name.empty()) {  \n    // Map\u4e3a\u7a7a  \n} else {  \n    // Map\u4e0d\u4e3a\u7a7a  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#5","title":"5. \u793a\u4f8b","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;map&gt;  \n#include &lt;string&gt;  \n\nusing namespace std;  \n\nint main() {  \n    // \u58f0\u660e\u4e00\u4e2a\u5b58\u50a8\u5b57\u7b26\u4e32\u5230\u6574\u6570\u7684\u6620\u5c04\u7684Map  \n    map&lt;string, int&gt; wordCount;  \n\n    // \u63d2\u5165\u5143\u7d20  \n    wordCount[\"apple\"] = 3;  \n    wordCount[\"banana\"] = 2;  \n    wordCount[\"cherry\"] = 5;  \n\n    // \u8bbf\u95ee\u5143\u7d20  \n    cout &lt;&lt; \"Number of apples: \" &lt;&lt; wordCount[\"apple\"] &lt;&lt; endl;  \n\n    // \u904d\u5386\u5143\u7d20  \n    for (const auto &amp;pair : wordCount) {  \n        cout &lt;&lt; pair.first &lt;&lt; \": \" &lt;&lt; pair.second &lt;&lt; endl;  \n    }  \n\n    // \u5220\u9664\u5143\u7d20  \n    wordCount.erase(\"banana\");  \n\n    // \u5224\u65adMap\u662f\u5426\u4e3a\u7a7a  \n    if (wordCount.empty()) {  \n        cout &lt;&lt; \"Map is empty.\" &lt;&lt; endl;  \n    } else {  \n        cout &lt;&lt; \"Map is not empty.\" &lt;&lt; endl;  \n    }  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/08-Map%E5%AE%B9%E5%99%A8/#6","title":"6. \u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>Map\u7684\u952e\u662f\u552f\u4e00\u7684\uff0c\u4e0d\u80fd\u6709\u91cd\u590d\u7684\u952e\u3002</li> <li>\u5982\u679c\u5728\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u952e\u65f6\uff0c\u4f7f\u7528map_name[key]\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u952e\u503c\u5bf9\uff0c\u5176\u4e2dvalue\u88ab\u521d\u59cb\u5316\u4e3avalue_type\u7684\u9ed8\u8ba4\u503c\u3002\u5982\u679c\u53ea\u662f\u60f3\u68c0\u67e5\u952e\u662f\u5426\u5b58\u5728\u800c\u4e0d\u521b\u5efa\u65b0\u7684\u952e\u503c\u5bf9\uff0c\u5e94\u8be5\u4f7f\u7528find()\u51fd\u6570\u3002</li> <li>Map\u7684\u5185\u90e8\u5b9e\u73b0\u662f\u7ea2\u9ed1\u6811</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/09-Set%E5%AE%B9%E5%99%A8/","title":"\u301009\u3011Set\u5bb9\u5668","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/09-Set%E5%AE%B9%E5%99%A8/#_1","title":"\u6982\u8ff0","text":"<ol> <li>\u4ec0\u4e48\u662f C++ STL \u7684 Set\uff1f C++ STL\uff08Standard Template Library\uff09\u4e2d\u7684 Set \u662f\u4e00\u4e2a\u5173\u8054\u5bb9\u5668\uff0c\u5b83\u5305\u542b\u552f\u4e00\u5143\u7d20\u7684\u96c6\u5408\u3002Set \u4e2d\u7684\u5143\u7d20\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5217\uff0c\u8fd9\u662f\u901a\u8fc7\u7279\u5b9a\u7684\u6bd4\u8f83\u51fd\u6570\u5bf9\u8c61\u5b9e\u73b0\u7684\u3002Set \u7684\u5185\u90e8\u5b9e\u73b0\u901a\u5e38\u57fa\u4e8e\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\uff08\u5982\u7ea2\u9ed1\u6811\uff09\uff0c\u8fd9\u4f7f\u5f97\u5143\u7d20\u7684\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u90fd\u5177\u6709\u5bf9\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u3002  </li> <li>Set \u7684\u7279\u6027 \u25cf\u552f\u4e00\u6027\uff1aSet \u4e2d\u7684\u5143\u7d20\u90fd\u662f\u552f\u4e00\u7684\uff0c\u4e0d\u5141\u8bb8\u6709\u91cd\u590d\u5143\u7d20\u3002 \u25cf\u6709\u5e8f\u6027\uff1aSet \u4e2d\u7684\u5143\u7d20\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5217\u3002 \u25cf\u81ea\u52a8\u6392\u5e8f\uff1a\u5411 Set \u4e2d\u63d2\u5165\u5143\u7d20\u65f6\uff0cSet \u4f1a\u81ea\u52a8\u8c03\u6574\u5143\u7d20\u7684\u987a\u5e8f\u4ee5\u4fdd\u6301\u6709\u5e8f\u6027\u3002 \u25cf\u52a8\u6001\u5927\u5c0f\uff1aSet \u53ef\u4ee5\u52a8\u6001\u5730\u6dfb\u52a0\u548c\u5220\u9664\u5143\u7d20\uff0c\u5176\u5927\u5c0f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u3002  </li> <li>Set \u7684\u5b9e\u73b0\u539f\u7406 Set \u7684\u5b9e\u73b0\u901a\u5e38\u57fa\u4e8e\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\uff08\u5982\u7ea2\u9ed1\u6811\uff09\u3002\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5b83\u80fd\u5728\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\u4e2d\u4fdd\u6301\u6811\u7684\u5e73\u8861\uff0c\u4ece\u800c\u5b9e\u73b0\u8f83\u9ad8\u7684\u6027\u80fd\u3002\u5728\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\u4e2d\uff0c\u5de6\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u5c0f\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\uff0c\u53f3\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u5927\u4e8e\u6216\u7b49\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\uff0c\u5e76\u4e14\u5b83\u7684\u5de6\u3001\u53f3\u5b50\u6811\u4e5f\u5206\u522b\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u3002\u8fd9\u79cd\u7ed3\u6784\u4f7f\u5f97\u5728 Set \u4e2d\u8fdb\u884c\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a O(log n)\u3002  </li> <li>\u5982\u4f55\u4f7f\u7528 Set\uff1f \u4f7f\u7528 Set \u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5305\u542b <code>&lt;set&gt;</code> \u5934\u6587\u4ef6\uff0c\u7136\u540e\u521b\u5efa Set \u5bf9\u8c61\u5e76\u6dfb\u52a0\u5143\u7d20\u5373\u53ef\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a <pre><code>#include &lt;iostream&gt;  \n#include &lt;set&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 Set  \n    std::set&lt;int&gt; mySet;  \n\n    // \u5411 Set \u4e2d\u6dfb\u52a0\u5143\u7d20  \n    mySet.insert(10);  \n    mySet.insert(20);  \n    mySet.insert(30);  \n    mySet.insert(40);  \n\n    // \u904d\u5386 Set \u4e2d\u7684\u5143\u7d20  \n    for (int num : mySet) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    // \u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e Set \u4e2d  \n    if (mySet.find(30) != mySet.end()) {  \n        std::cout &lt;&lt; \"30 is in the set.\" &lt;&lt; std::endl;  \n    } else {  \n        std::cout &lt;&lt; \"30 is not in the set.\" &lt;&lt; std::endl;  \n    }  \n\n    // \u5220\u9664 Set \u4e2d\u7684\u5143\u7d20  \n    mySet.erase(20);  \n\n    // \u518d\u6b21\u904d\u5386 Set \u4e2d\u7684\u5143\u7d20  \n    for (int num : mySet) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> \u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a Set\uff0c\u5982\u4f55\u5411\u5176\u4e2d\u6dfb\u52a0\u5143\u7d20\uff0c\u5982\u4f55\u904d\u5386\u5143\u7d20\uff0c\u5982\u4f55\u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728\uff0c\u4ee5\u53ca\u5982\u4f55\u5220\u9664\u5143\u7d20\u3002\u6ce8\u610f\uff0cSet \u4e2d\u7684\u5143\u7d20\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5217\uff0c\u56e0\u6b64\u904d\u5386\u65f6\u8f93\u51fa\u7684\u5143\u7d20\u4e5f\u662f\u6709\u5e8f\u7684\u3002  </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/09-Set%E5%AE%B9%E5%99%A8/#_2","title":"\u6392\u5e8f","text":"<p>\u81ea\u52a8\u6392\u5e8f\u662f std::set \u5bb9\u5668\u7684\u4e00\u4e2a\u5185\u7f6e\u7279\u6027\uff0c\u65e0\u9700\u663e\u5f0f\u8c03\u7528\u6392\u5e8f\u51fd\u6570\u3002\u5f53\u4f60\u5411 std::set \u4e2d\u63d2\u5165\u5143\u7d20\u65f6\uff0c\u5bb9\u5668\u4f1a\u81ea\u52a8\u8c03\u6574\u5143\u7d20\u7684\u987a\u5e8f\u4ee5\u4fdd\u6301\u6709\u5e8f\u6027\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6837\u4f8b\u4ee3\u7801\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 std::set \u5e76\u89c2\u5bdf\u5176\u81ea\u52a8\u6392\u5e8f\u7684\u7279\u6027\uff1a <pre><code>#include &lt;iostream&gt;  \n#include &lt;set&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 set \u5bb9\u5668  \n    std::set&lt;int&gt; mySet;  \n\n    // \u5411 set \u4e2d\u6dfb\u52a0\u5143\u7d20  \n    mySet.insert(30);  \n    mySet.insert(10);  \n    mySet.insert(40);  \n    mySet.insert(20);  \n\n    // \u904d\u5386 set \u4e2d\u7684\u5143\u7d20\uff0c\u89c2\u5bdf\u5b83\u4eec\u5df2\u7ecf\u81ea\u52a8\u6392\u5e8f  \n    for (int num : mySet) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    // \u8f93\u51fa\uff1a10 20 30 40 \uff08\u81ea\u52a8\u6309\u5347\u5e8f\u6392\u5217\uff09  \n\n    return 0;  \n}\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5c3d\u7ba1\u6211\u4eec\u662f\u4ee5\u4e71\u5e8f\u7684\u65b9\u5f0f\u5411 mySet \u4e2d\u63d2\u5165\u5143\u7d20\uff0830, 10, 40, 20\uff09\uff0c\u4f46\u5f53\u6211\u4eec\u904d\u5386 mySet \u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u5143\u7d20\u5df2\u7ecf\u81ea\u52a8\u6309\u5347\u5e8f\u6392\u5217\u4e86\uff0810, 20, 30, 40\uff09\u3002\u8fd9\u5c31\u662f std::set \u7684\u81ea\u52a8\u6392\u5e8f\u7279\u6027\u3002  </p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cstd::set \u4e2d\u7684\u5143\u7d20\u9ed8\u8ba4\u662f\u6309\u7167\u5c0f\u4e8e\u8fd0\u7b97\u7b26 &lt; \u8fdb\u884c\u6392\u5e8f\u7684\u3002\u5982\u679c\u4f60\u60f3\u8981\u6309\u7167\u5176\u4ed6\u65b9\u5f0f\u8fdb\u884c\u6392\u5e8f\uff0c\u4f60\u53ef\u4ee5\u63d0\u4f9b\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u51fd\u6570\u6216\u51fd\u6570\u5bf9\u8c61\u7ed9 std::set \u7684\u6a21\u677f\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u8981\u4e00\u4e2a\u964d\u5e8f\u6392\u5217\u7684 std::set\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a <pre><code>#include &lt;iostream&gt;  \n#include &lt;set&gt;  \n#include &lt;functional&gt; // \u4e3a\u4e86\u4f7f\u7528 std::greater  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u964d\u5e8f\u6392\u5217\u7684 set \u5bb9\u5668  \n    std::set&lt;int, std::greater&lt;int&gt;&gt; mySetDesc;  \n\n    // \u5411 set \u4e2d\u6dfb\u52a0\u5143\u7d20  \n    mySetDesc.insert(30);  \n    mySetDesc.insert(10);  \n    mySetDesc.insert(40);  \n    mySetDesc.insert(20);  \n\n    // \u904d\u5386 set \u4e2d\u7684\u5143\u7d20\uff0c\u89c2\u5bdf\u5b83\u4eec\u662f\u964d\u5e8f\u6392\u5217\u7684  \n    for (int num : mySetDesc) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    // \u8f93\u51fa\uff1a40 30 20 10 \uff08\u81ea\u52a8\u6309\u964d\u5e8f\u6392\u5217\uff09  \n\n    return 0;  \n}\n</code></pre></p> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5c06 std::greater<code>&lt;int&gt;</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u6a21\u677f\u53c2\u6570\u4f20\u9012\u7ed9 std::set\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u964d\u5e8f\u6392\u5217\u7684 std::set\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u6211\u4eec\u4ee5\u5347\u5e8f\u7684\u65b9\u5f0f\u5411 mySetDesc \u4e2d\u63d2\u5165\u5143\u7d20\uff0c\u5b83\u4eec\u4ecd\u7136\u4f1a\u5728\u5bb9\u5668\u4e2d\u6309\u7167\u964d\u5e8f\u6392\u5217\u3002</p> <p>\u6210\u5458\u51fd\u6570</p> <p>STL Set\u7684\u53d8\u91cf\u548c\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u8868\u683c\u8fdb\u884c\u6982\u8ff0\uff1a</p> \u53d8\u91cf/\u6210\u5458\u51fd\u6570 \u63cf\u8ff0 \u53d8\u91cf \u5143\u7d20 Set\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u5b83\u4eec\u6839\u636e\u7279\u5b9a\u7684\u6392\u5e8f\u51c6\u5219\u81ea\u52a8\u6392\u5e8f\uff0c\u4e14\u5143\u7d20\u552f\u4e00 \u6210\u5458\u51fd\u6570 begin() \u8fd4\u56de\u4e00\u4e2a\u6307\u5411set\u5bb9\u5668\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u8fed\u4ee3\u5668 end() \u8fd4\u56de\u4e00\u4e2a\u6307\u5411set\u5bb9\u5668\u201c\u5c3e\u90e8\u4e4b\u540e\u201d\u7684\u8fed\u4ee3\u5668 rbegin() \u8fd4\u56de\u4e00\u4e2a\u6307\u5411set\u5bb9\u5668\u4e2d\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u53cd\u5411\u8fed\u4ee3\u5668 rend() \u8fd4\u56de\u4e00\u4e2a\u6307\u5411set\u5bb9\u5668\u201c\u5934\u90e8\u4e4b\u524d\u201d\u7684\u53cd\u5411\u8fed\u4ee3\u5668 size() \u8fd4\u56deset\u5bb9\u5668\u4e2d\u5143\u7d20\u7684\u4e2a\u6570 empty() \u5982\u679cset\u5bb9\u5668\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56detrue\uff1b\u5426\u5219\u8fd4\u56defalse max_size() \u8fd4\u56deset\u5bb9\u5668\u53ef\u80fd\u5305\u542b\u7684\u6700\u5927\u5143\u7d20\u6570 swap(set&amp; other) \u4ea4\u6362\u4e24\u4e2aset\u5bb9\u5668\u7684\u5185\u5bb9 insert(const value_type&amp; val) \u5728set\u5bb9\u5668\u4e2d\u63d2\u5165\u4e00\u4e2a\u5143\u7d20 insert(iterator pos, const value_type&amp; val) \u5728set\u5bb9\u5668\u7684\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u5143\u7d20 insert(input_iterator first, input_iterator last) \u5728set\u5bb9\u5668\u4e2d\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u8303\u56f4 erase(const key_type&amp; key) \u4eceset\u5bb9\u5668\u4e2d\u5220\u9664\u4e0e\u6307\u5b9a\u952e\u503c\u76f8\u7b49\u7684\u5143\u7d20 erase(iterator pos) \u4eceset\u5bb9\u5668\u4e2d\u5220\u9664\u6307\u5b9a\u8fed\u4ee3\u5668\u4f4d\u7f6e\u7684\u5143\u7d20 erase(iterator first, iterator last) \u4eceset\u5bb9\u5668\u4e2d\u5220\u9664\u4e00\u4e2a\u5143\u7d20\u8303\u56f4 find(const key_type&amp; key) \u67e5\u627eset\u5bb9\u5668\u4e2d\u7b2c\u4e00\u4e2a\u4e0e\u6307\u5b9a\u952e\u503c\u76f8\u7b49\u7684\u5143\u7d20\u7684\u8fed\u4ee3\u5668 count(const key_type&amp; key) \u8fd4\u56deset\u5bb9\u5668\u4e2d\u4e0e\u6307\u5b9a\u952e\u503c\u76f8\u7b49\u7684\u5143\u7d20\u7684\u4e2a\u6570\uff08\u5bf9\u4e8eset\uff0c\u7ed3\u679c\u603b\u662f0\u62161\uff09 lower_bound(const key_type&amp; key) \u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6307\u5411set\u5bb9\u5668\u4e2d\u7b2c\u4e00\u4e2a\u4e0d\u5c0f\u4e8e\u6307\u5b9a\u952e\u503c\u7684\u5143\u7d20 upper_bound(const key_type&amp; key) \u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6307\u5411set\u5bb9\u5668\u4e2d\u7b2c\u4e00\u4e2a\u5927\u4e8e\u6307\u5b9a\u952e\u503c\u7684\u5143\u7d20 equal_range(const key_type&amp; key) \u8fd4\u56de\u4e00\u4e2apair\uff0c\u8868\u793aset\u5bb9\u5668\u4e2d\u6240\u6709\u4e0e\u6307\u5b9a\u952e\u503c\u76f8\u7b49\u7684\u5143\u7d20\u7684\u8303\u56f4 clear() \u5220\u9664set\u5bb9\u5668\u4e2d\u7684\u6240\u6709\u5143\u7d20 <p>\u8bf7\u6ce8\u610f\uff0c\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684value_type\u3001key_type\u548cinput_iterator\u7b49\u7c7b\u578b\u5e94\u6839\u636eset\u5bb9\u5668\u4e2d\u5b9e\u9645\u5b58\u50a8\u7684\u5143\u7d20\u7c7b\u578b\u8fdb\u884c\u66ff\u6362\u3002\u53e6\u5916\uff0cset\u5bb9\u5668\u4e0d\u5141\u8bb8\u5143\u7d20\u91cd\u590d\uff0c\u4e14\u6839\u636e\u5143\u7d20\u7684\u952e\u503c\u81ea\u52a8\u6392\u5e8f\u3002\u56e0\u6b64\uff0cinsert\u51fd\u6570\u5728\u63d2\u5165\u91cd\u590d\u5143\u7d20\u65f6\u4e0d\u4f1a\u6267\u884c\u63d2\u5165\u64cd\u4f5c\uff0ccount\u51fd\u6570\u5bf9\u4e8eset\u5bb9\u5668\u6765\u8bf4\u7ed3\u679c\u603b\u662f0\u62161\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/","title":"\u301010\u3011stack\u5bb9\u5668","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/#stack","title":"stack\u5bb9\u5668\u6982\u8ff0","text":"<p>stack\uff08\u6808\uff09\u662f\u4e00\u79cd\u540e\u8fdb\u5148\u51fa\uff08LIFO, Last In First Out\uff09\u7684\u6570\u636e\u7ed3\u6784\u3002\u4f60\u53ef\u4ee5\u5c06\u5143\u7d20\u538b\u5165\uff08push\uff09\u6808\u9876\uff0c\u6216\u8005\u4ece\u6808\u9876\u5f39\u51fa\uff08pop\uff09\u5143\u7d20\u3002\u6808\u9876\u5143\u7d20\u603b\u662f\u6700\u540e\u88ab\u538b\u5165\u7684\u90a3\u4e2a\u5143\u7d20\uff0c\u56e0\u6b64\u4e5f\u662f\u7b2c\u4e00\u4e2a\u88ab\u5f39\u51fa\u7684\u5143\u7d20\u3002\u6b64\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u67e5\u770b\uff08peek\uff09\u6808\u9876\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u5c06\u5176\u4ece\u6808\u4e2d\u79fb\u9664\u3002</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/#stack_1","title":"stack\u7684\u7279\u6027","text":"<p>### stack\u5bb9\u5668\u7684\u4f7f\u7528</p> <p>\u5728C++\u7684STL\u4e2d\uff0cstack\u5bb9\u5668\u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u5b9a\u4e49\u5728\u5934\u6587\u4ef6<code>&lt;stack&gt;</code>\u4e2d\u3002\u4f60\u53ef\u4ee5\u8fd9\u6837\u58f0\u660e\u4e00\u4e2astack\uff1a <pre><code>//\u9996\u5148\u7684\u5f15\u5165\u4e0b\u9762\u8fd9\u4e2a\n#include &lt;stack&gt;  \n\nstd::stack&lt;int&gt; intStack;  // \u58f0\u660e\u4e00\u4e2aint\u7c7b\u578b\u7684\u6808\n</code></pre></p> <p>\u8fd9\u91cc\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2aint\u7c7b\u578b\u7684\u6808intStack\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5c06\u6808\u7684\u5143\u7d20\u7c7b\u578b\u66ff\u6362\u4e3a\u5176\u4ed6\u7c7b\u578b\uff0c\u6bd4\u5982\u81ea\u5b9a\u4e49\u7684\u7c7b\u6216\u7ed3\u6784\u4f53\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/#stack_2","title":"stack\u5bb9\u5668\u7684\u5e38\u7528\u64cd\u4f5c","text":"<ol> <li>push(element)\uff1a\u5c06\u5143\u7d20\u538b\u5165\u6808\u9876\u3002</li> </ol> <pre><code>intStack.push(5);  // \u5c06\u6574\u65705\u538b\u5165\u6808\u9876\n</code></pre> <ol> <li>pop()\uff1a\u5f39\u51fa\u6808\u9876\u5143\u7d20\u3002\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u4f1a\u8fd4\u56de\u88ab\u5f39\u51fa\u7684\u5143\u7d20\uff0c\u4f46\u4f1a\u4fee\u6539\u6808\u7684\u5185\u5bb9\u3002</li> </ol> <pre><code>intStack.pop();  // \u5f39\u51fa\u6808\u9876\u5143\u7d20\n</code></pre> <ol> <li>top()\uff1a\u8fd4\u56de\u6808\u9876\u5143\u7d20\u7684\u5f15\u7528\uff0c\u4f46\u4e0d\u5f39\u51fa\u5b83\u3002</li> </ol> <pre><code>int topElement = intStack.top();  // \u83b7\u53d6\u6808\u9876\u5143\u7d20\u7684\u503c\n</code></pre> <ol> <li>empty()\uff1a\u68c0\u67e5\u6808\u662f\u5426\u4e3a\u7a7a\u3002\u5982\u679c\u6808\u4e3a\u7a7a\uff0c\u8fd4\u56detrue\uff1b\u5426\u5219\u8fd4\u56defalse\u3002</li> </ol> <pre><code>if (intStack.empty()) {  \n    // \u6808\u4e3a\u7a7a\u7684\u5904\u7406\u903b\u8f91  \n}\n</code></pre> <ol> <li>size()\uff1a\u8fd4\u56de\u6808\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\u3002</li> </ol> <pre><code>size_t stackSize = intStack.size();  // \u83b7\u53d6\u6808\u7684\u5927\u5c0f\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/#_1","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>stack\u5bb9\u5668\u5185\u90e8\u901a\u5e38\u4f7f\u7528deque\u6216list\u7b49\u5bb9\u5668\u4f5c\u4e3a\u5176\u5e95\u5c42\u5b9e\u73b0\uff0c\u56e0\u6b64\u5b83\u7ee7\u627f\u4e86\u8fd9\u4e9b\u5bb9\u5668\u7684\u7279\u6027\u3002\u4f46\u662f\uff0c\u4f60\u4e0d\u9700\u8981\uff08\u4e5f\u4e0d\u5e94\u8be5\uff09\u76f4\u63a5\u8bbf\u95ee\u6216\u4fee\u6539stack\u7684\u5185\u90e8\u5b9e\u73b0\u3002</li> <li>stack\u5bb9\u5668\u4e0d\u63d0\u4f9b\u8fed\u4ee3\u5668\u652f\u6301\uff0c\u56e0\u4e3a\u6808\u662f\u4e00\u79cd\u53d7\u9650\u7684\u6570\u636e\u7ed3\u6784\uff0c\u53ea\u5141\u8bb8\u5728\u6808\u9876\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002</li> <li>\u5728\u4f7f\u7528stack\u5bb9\u5668\u65f6\uff0c\u8981\u7279\u522b\u6ce8\u610f\u4e0d\u8981\u8bbf\u95ee\u6216\u64cd\u4f5c\u5df2\u7ecf\u5f39\u51fa\u7684\u5143\u7d20\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u3002</li> </ul> <p>\u6211\u6240\u8bf4\u7684\u201c\u5c1d\u8bd5\u8bbf\u95ee\u5df2\u7ecf\u5f39\u51fa\u7684\u5143\u7d20\u201d\u662f\u6307\u5728\u5f39\u51fa\u5143\u7d20\u4e4b\u540e\uff0c\u5982\u679c\u8bd5\u56fe\u8bbf\u95ee\u8be5\u5143\u7d20\u7684\u539f\u59cb\u5185\u5b58\u4f4d\u7f6e\uff08\u5373\u4e0d\u518d\u6307\u5411\u6808\u9876\u5143\u7d20\u7684\u5185\u5b58\u4f4d\u7f6e\uff09\uff0c\u6216\u8005\u9519\u8bef\u5730\u5047\u8bbe\u5f39\u51fa\u7684\u5143\u7d20\u4ecd\u7136\u5b58\u5728\u4e8e\u6808\u4e2d\uff0c\u8fd9\u5c06\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\u5b9e\u9645\u4e0a\uff0c\u5728C++\u7684stack\u5bb9\u5668\u4e2d\uff0c\u4e00\u65e6\u5143\u7d20\u88ab\u5f39\u51fa\uff0c\u5c31\u4e0d\u80fd\u901a\u8fc7\u4efb\u4f55\u65b9\u5f0f\u518d\u6b21\u8bbf\u95ee\u5b83\uff0c\u56e0\u4e3astack\u6ca1\u6709\u63d0\u4f9b\u8fd9\u6837\u7684\u673a\u5236\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/10-stack%E5%AE%B9%E5%99%A8/#_2","title":"\u6210\u5458\u51fd\u6570\u548c\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u66f4\u8be6\u7ec6\u7684stack\u5bb9\u5668\u6210\u5458\u51fd\u6570\u5217\u8868\uff0c\u5305\u62ec\u4e86\u5e38\u89c1\u7684\u4ee5\u53ca\u4e0d\u90a3\u4e48\u5e38\u7528\u7684\u6210\u5458\u51fd\u6570\uff1a</p> \u6210\u5458\u51fd\u6570 \u63cf\u8ff0 push(const T&amp; value) \u5c06\u4e00\u4e2a\u5143\u7d20\u538b\u5165\u6808\u9876\u3002 pop() \u79fb\u9664\u6808\u9876\u7684\u5143\u7d20\u3002 top() \u8fd4\u56de\u6808\u9876\u5143\u7d20\u7684\u5f15\u7528\u3002 empty() \u68c0\u67e5\u6808\u662f\u5426\u4e3a\u7a7a\u3002\u5982\u679c\u4e3a\u7a7a\uff0c\u8fd4\u56detrue\uff1b\u5426\u5219\u8fd4\u56defalse\u3002 size() \u8fd4\u56de\u6808\u4e2d\u5143\u7d20\u7684\u6570\u91cf\u3002 operator= \u8d4b\u503c\u64cd\u4f5c\u7b26\uff0c\u7528\u4e8e\u5c06\u4e00\u4e2astack\u5bf9\u8c61\u7684\u5185\u5bb9\u590d\u5236\u5230\u53e6\u4e00\u4e2astack\u5bf9\u8c61\u3002 stack() \u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684stack\u5bf9\u8c61\u3002 stack(const stack&amp; other) \u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684stack\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u73b0\u6709stack\u5bf9\u8c61\u7684\u526f\u672c\u3002 ~stack() \u6790\u6784\u51fd\u6570\uff0c\u91ca\u653estack\u5bf9\u8c61\u5360\u7528\u7684\u5185\u5b58\u3002 <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528stack\u5bb9\u5668\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;stack&gt;  //\u5f15\u5165\n\nint main() {  \n    std::stack&lt;int&gt; intStack;  //\u5b9a\u4e49\n\n    // \u538b\u5165\u5143\u7d20  \n    intStack.push(1);  \n    intStack.push(2);  \n    intStack.push(3);  \n\n    // \u8f93\u51fa\u6808\u7684\u5927\u5c0f  \n    std::cout &lt;&lt; \"Stack size: \" &lt;&lt; intStack.size() &lt;&lt; std::endl;  \n\n    // \u5f39\u51fa\u5e76\u8f93\u51fa\u6808\u9876\u5143\u7d20   \u4e8b\u5b9e\u4e0a\u662f\u5728\u51fa\u6808\n    while (!intStack.empty()) {  \n        std::cout &lt;&lt; intStack.top() &lt;&lt; \" \";  \n        intStack.pop();  \n    }  \n\n    std::cout &lt;&lt; std::endl;  \n\n    // \u8f93\u51fa\u6808\u7684\u5927\u5c0f\uff08\u6b64\u65f6\u5e94\u4e3a0\uff09  \n    std::cout &lt;&lt; \"Stack size after popping all elements: \" &lt;&lt; intStack.size() &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/11-queque/","title":"\u301011\u3011queque","text":"<ol> <li>queue\u5bb9\u5668\u6982\u8ff0 queue\uff08\u961f\u5217\uff09\u662f\u4e00\u79cd\u5148\u8fdb\u5148\u51fa\uff08FIFO - First In First Out\uff09\u7684\u6570\u636e\u7ed3\u6784\u3002\u5728C++\u7684STL\uff08Standard Template Library\uff09\u4e2d\uff0cqueue\u662f\u4e00\u4e2a\u5bb9\u5668\u9002\u914d\u5668\uff0c\u5b83\u57fa\u4e8e\u5e95\u5c42\u5bb9\u5668\uff08\u5982deque\u3001list\u7b49\uff09\u5b9e\u73b0\u4e86\u4e00\u4e2a\u961f\u5217\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cqueue\u7684\u5e95\u5c42\u5bb9\u5668\u662fdeque\u3002 </li> <li>\u57fa\u672c\u64cd\u4f5c     \u6784\u9020\u51fd\u6570\uff1aqueue() \u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u961f\u5217\u3002     \u5165\u961f\u64cd\u4f5c\uff1apush(const value_type&amp; val) \u5728\u961f\u5217\u5c3e\u90e8\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u3002     \u51fa\u961f\u64cd\u4f5c\uff1apop() \u79fb\u9664\u961f\u5217\u5934\u90e8\u7684\u5143\u7d20\u3002     \u8bbf\u95ee\u961f\u9996\u5143\u7d20\uff1afront() \u8fd4\u56de\u961f\u5217\u5934\u90e8\u7684\u5143\u7d20\uff08\u4f46\u4e0d\u79fb\u9664\uff09\u3002     \u8bbf\u95ee\u961f\u5c3e\u5143\u7d20\uff1aback() \u8fd4\u56de\u961f\u5217\u5c3e\u90e8\u7684\u5143\u7d20\uff08\u4f46\u4e0d\u79fb\u9664\uff09\u3002     \u5224\u65ad\u961f\u5217\u662f\u5426\u4e3a\u7a7a\uff1aempty() \u5982\u679c\u961f\u5217\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56detrue\u3002     \u83b7\u53d6\u961f\u5217\u7684\u5927\u5c0f\uff1asize() \u8fd4\u56de\u961f\u5217\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002</li> <li>\u793a\u4f8b\u4ee3\u7801</li> </ol> <pre><code>#include &lt;iostream&gt;  \n#include &lt;queue&gt;  //\u5f15\u5165\n\nint main() {  \n    std::queue&lt;int&gt; myQueue;  \n\n    // \u63d2\u5165\u5143\u7d20  \n    myQueue.push(1);  \n    myQueue.push(2);  \n    myQueue.push(3);  \n\n    // \u68c0\u67e5\u961f\u5217\u5927\u5c0f  \n    std::cout &lt;&lt; \"Queue size: \" &lt;&lt; myQueue.size() &lt;&lt; std::endl;  \n\n    // \u8bbf\u95ee\u961f\u5217\u5934\u90e8\u5143\u7d20  \n    std::cout &lt;&lt; \"Front element: \" &lt;&lt; myQueue.front() &lt;&lt; std::endl;  \n\n    // \u5220\u9664\u961f\u5217\u5934\u90e8\u5143\u7d20  \n    myQueue.pop();  \n\n    // \u518d\u6b21\u68c0\u67e5\u961f\u5217\u5927\u5c0f  \n    std::cout &lt;&lt; \"Queue size after pop: \" &lt;&lt; myQueue.size() &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <ol> <li>\u6ce8\u610f\u4e8b\u9879     queue\u4e0d\u63d0\u4f9b\u8fed\u4ee3\u5668\uff0c\u56e0\u4e3a\u5b83\u53ea\u652f\u6301\u5728\u961f\u5217\u7684\u5934\u90e8\u548c\u5c3e\u90e8\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002     queue\u7684front()\u548cback()\u6210\u5458\u51fd\u6570\u8fd4\u56de\u7684\u662f\u5bf9\u5143\u7d20\u7684\u5f15\u7528\uff08const reference\u5bf9\u4e8econst queue\uff09\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539\u961f\u5217\u4e2d\u7684\u5143\u7d20\uff08\u9664\u975e\u5b83\u662f\u53ef\u4fee\u6539\u7684\u5f15\u7528\u7c7b\u578b\uff09\u3002     \u7531\u4e8equeue\u662fFIFO\u6570\u636e\u7ed3\u6784\uff0c\u56e0\u6b64\u4f60\u4e0d\u80fd\u4ece\u961f\u5217\u7684\u4e2d\u95f4\u63d2\u5165\u6216\u5220\u9664\u5143\u7d20\u3002</li> <li>std::queue\u7684\u6210\u5458\u51fd\u6570\uff1a</li> </ol> \u6210\u5458\u51fd\u6570 \u63cf\u8ff0 queue() \u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u961f\u5217 queue(const queue&amp; q) \u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u521b\u5efa\u4e00\u4e2a\u4e0eq\u76f8\u540c\u7684\u961f\u5217 queue(const allocator_type&amp; alloc) \u4f7f\u7528\u6307\u5b9a\u7684\u5206\u914d\u5668\u521b\u5efa\u7a7a\u7684\u961f\u5217 ~queue() \u6790\u6784\u51fd\u6570\uff0c\u9500\u6bc1\u961f\u5217\u5e76\u91ca\u653e\u5176\u5185\u5b58 queue&amp; operator=(const queue&amp; q) \u8d4b\u503c\u64cd\u4f5c\u7b26\uff0c\u5c06q\u7684\u5185\u5bb9\u590d\u5236\u5230\u5f53\u524d\u961f\u5217 size_type size() const noexcept \u8fd4\u56de\u961f\u5217\u4e2d\u5143\u7d20\u7684\u6570\u91cf bool empty() const noexcept \u5982\u679c\u961f\u5217\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56detrue const_reference front() const \u8fd4\u56de\u961f\u5217\u5934\u90e8\u5143\u7d20\u7684\u5e38\u91cf\u5f15\u7528 const_reference back() const \u8fd4\u56de\u961f\u5217\u5c3e\u90e8\u5143\u7d20\u7684\u5e38\u91cf\u5f15\u7528 void push(const value_type&amp; val) \u5728\u961f\u5217\u5c3e\u90e8\u63d2\u5165\u5143\u7d20val void push(value_type&amp;&amp; val) \u79fb\u52a8\u8bed\u4e49\u7248\u672c\u7684push\uff0c\u5728\u961f\u5217\u5c3e\u90e8\u63d2\u5165\u5143\u7d20val void pop() \u5220\u9664\u961f\u5217\u5934\u90e8\u7684\u5143\u7d20 void swap(queue&amp; x) noexcept \u4ea4\u6362\u4e24\u4e2a\u961f\u5217\u7684\u5185\u5bb9 <p>\u6ce8\u610f\uff1a</p> <ul> <li>value_type \u662f\u961f\u5217\u4e2d\u5143\u7d20\u7684\u7c7b\u578b\u3002</li> <li>size_type \u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u961f\u5217\u7684\u5927\u5c0f\u3002</li> <li>const_reference \u662f\u4e00\u4e2a\u5230value_type\u7684\u5e38\u91cf\u5f15\u7528\u7c7b\u578b\u3002</li> <li>std::queue\u4e0d\u63d0\u4f9b\u76f4\u63a5\u8bbf\u95ee\u961f\u5217\u4e2d\u5143\u7d20\u7684\u8fed\u4ee3\u5668\u6216\u8fd4\u56de\u975e\u5e38\u91cf\u5f15\u7528\u7684\u6210\u5458\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u63d0\u4f9b\u4e25\u683c\u7684\u961f\u5217\u8bed\u4e49\u3002</li> <li>allocator_type \u662f\u961f\u5217\u4f7f\u7528\u7684\u5206\u914d\u5668\u7c7b\u578b\uff0c\u5b83\u9ed8\u8ba4\u662fstd::allocator\u3002</li> </ul> <p>queue\u4e0edeque\u7684\u5f02\u540c\u70b9\uff1a</p> \u7279\u6027/\u529f\u80fd queue deque \u57fa\u672c\u6982\u5ff5 \u961f\u5217\uff08Queue\uff09 \u53cc\u7aef\u961f\u5217\uff08Double-Ended Queue\uff09 \u6570\u636e\u7ed3\u6784 \u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09 \u53ef\u4ee5\u5728\u4e24\u7aef\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20 \u7528\u9014 \u901a\u5e38\u7528\u4e8e\u9700\u8981\u4fdd\u6301\u5143\u7d20\u987a\u5e8f\u7684\u573a\u5408\uff0c\u5982\u4efb\u52a1\u961f\u5217\u3001\u6d88\u606f\u961f\u5217\u7b49 \u9002\u7528\u4e8e\u9700\u8981\u9891\u7e41\u5728\u4e24\u7aef\u8fdb\u884c\u64cd\u4f5c\u7684\u573a\u5408\uff0c\u5982\u6ed1\u52a8\u7a97\u53e3\u3001\u73af\u5f62\u7f13\u51b2\u533a\u7b49 \u63a5\u53e3 push()\uff08\u5165\u961f\uff09 push_front()\uff08\u524d\u7aef\u63d2\u5165\uff09 pop()\uff08\u51fa\u961f\uff09 pop_front()\uff08\u524d\u7aef\u5220\u9664\uff09 front()\uff08\u961f\u5934\u5143\u7d20\uff09 front()\uff08\u524d\u7aef\u5143\u7d20\uff09 back()\uff08\u961f\u5c3e\u5143\u7d20\uff09 back()\uff08\u540e\u7aef\u5143\u7d20\uff09 empty()\uff08\u662f\u5426\u4e3a\u7a7a\uff09 empty()\uff08\u662f\u5426\u4e3a\u7a7a\uff09 size()\uff08\u5143\u7d20\u6570\u91cf\uff09 size()\uff08\u5143\u7d20\u6570\u91cf\uff09 \u9ed8\u8ba4\u5bb9\u5668 \u901a\u5e38\u662fdeque \u65e0\u9ed8\u8ba4\u5bb9\u5668\uff0c\u76f4\u63a5\u4f7f\u7528deque\u7c7b \u4fee\u6539\u5143\u7d20 \u4e0d\u76f4\u63a5\u652f\u6301\u4fee\u6539\u961f\u4e2d\u5143\u7d20\uff08\u9664\u975e\u5148\u5f39\u51fa\u518d\u5165\u961f\uff09 \u652f\u6301\u76f4\u63a5\u8bbf\u95ee\u548c\u4fee\u6539\u5143\u7d20 \u7ebf\u7a0b\u5b89\u5168 \u672c\u8eab\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u4f7f\u7528\u65f6\u9700\u8981\u989d\u5916\u540c\u6b65\u673a\u5236 \u672c\u8eab\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u4f7f\u7528\u65f6\u9700\u8981\u989d\u5916\u540c\u6b65\u673a\u5236 \u793a\u4f8b\u573a\u666f 1. \u6d88\u606f\u961f\u5217\u5904\u7406 1. \u6ed1\u52a8\u7a97\u53e3\u8ba1\u7b97 2. \u4efb\u52a1\u8c03\u5ea6 2. \u73af\u5f62\u7f13\u51b2\u533a 3. \u5e7f\u5ea6\u4f18\u5148\u641c\u7d22 3. \u53cc\u7aef\u63d2\u5165/\u5220\u9664\u64cd\u4f5c <p>\u8bf7\u6ce8\u610f\uff0c\u867d\u7136queue\u548cdeque\u5728\u529f\u80fd\u4e0a\u6709\u6240\u4e0d\u540c\uff0c\u4f46\u5b83\u4eec\u90fd\u662fSTL\uff08Standard Template Library\uff09\u4e2d\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u7528\u4e8e\u5c01\u88c5\u548c\u7b80\u5316\u5e95\u5c42\u5bb9\u5668\u7684\u4f7f\u7528\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cqueue\u4f7f\u7528deque\u4f5c\u4e3a\u5176\u9ed8\u8ba4\u5e95\u5c42\u5bb9\u5668\uff0c\u4f46\u8fd9\u4e0d\u662f\u5fc5\u9700\u7684\uff0cqueue\u4e5f\u53ef\u4ee5\u4e0e\u5176\u4ed6\u5bb9\u5668\uff08\u5982list\uff09\u4e00\u8d77\u4f7f\u7528\uff08\u5c3d\u7ba1\u8fd9\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd\uff09\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/","title":"\u301012\u3011unordered_map \u548c unordered_set","text":"<p>STL\uff08Standard Template Library\uff0c\u6807\u51c6\u6a21\u677f\u5e93\uff09\u4e2d\u7684\u5bb9\u5668\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u51e0\u5927\u7c7b\uff0c\u5305\u62ec\u5e8f\u5217\u5bb9\u5668\u3001\u5173\u8054\u5bb9\u5668\u548c\u5176\u4ed6\u5bb9\u5668\u3002\u4ee5\u4e0b\u662f\u8fd9\u4e9b\u5bb9\u5668\u7684\u5217\u8868\uff0c\u4ee5\u8868\u683c\u5f62\u5f0f\u5448\u73b0\uff1a</p> \u5bb9\u5668\u7c7b\u578b \u63cf\u8ff0 \u5e8f\u5217\u5bb9\u5668 vector \u53ef\u53d8\u5927\u5c0f\u6570\u7ec4\uff0c\u652f\u6301\u5feb\u901f\u968f\u673a\u8bbf\u95ee\u5143\u7d20\uff0c\u4f46\u5728\u5c3e\u90e8\u4e4b\u5916\u7684\u4f4d\u7f6e\u63d2\u5165\u6216\u5220\u9664\u5143\u7d20\u53ef\u80fd\u8f83\u6162 deque \u53cc\u7aef\u961f\u5217\uff0c\u652f\u6301\u5728\u5934\u5c3e\u5feb\u901f\u63d2\u5165/\u5220\u9664\u5143\u7d20 list \u53cc\u5411\u94fe\u8868\uff0c\u652f\u6301\u5728\u4efb\u4f55\u4f4d\u7f6e\u5feb\u901f\u63d2\u5165/\u5220\u9664\u5143\u7d20\uff0c\u4f46\u4e0d\u652f\u6301\u5feb\u901f\u968f\u673a\u8bbf\u95ee forward_list \u5355\u5411\u94fe\u8868\uff0c\u529f\u80fd\u4e0elist\u7c7b\u4f3c\uff0c\u4f46\u66f4\u8282\u7701\u7a7a\u95f4 array \u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4\uff0c\u652f\u6301\u5feb\u901f\u968f\u673a\u8bbf\u95ee\u5143\u7d20\uff0c\u4f46\u65e0\u6cd5\u6539\u53d8\u5927\u5c0f string \u4e13\u95e8\u7528\u4e8e\u5904\u7406\u5b57\u7b26\u4e32\u7684\u5bb9\u5668\uff0c\u53ef\u89c6\u4e3a\u5b57\u7b26\u7684vector \u5173\u8054\u5bb9\u5668 set \u96c6\u5408\uff0c\u5305\u542b\u552f\u4e00\u5143\u7d20\u7684\u5bb9\u5668\uff0c\u81ea\u52a8\u6392\u5e8f\u5143\u7d20 multiset \u5141\u8bb8\u5305\u542b\u91cd\u590d\u5143\u7d20\u7684\u96c6\u5408 map \u952e\u503c\u5bf9\u6620\u5c04\uff0c\u952e\u662f\u552f\u4e00\u7684\uff0c\u81ea\u52a8\u6392\u5e8f\u952e multimap \u5141\u8bb8\u952e\u91cd\u590d\u7684\u952e\u503c\u5bf9\u6620\u5c04 unordered_set \u4e0d\u6392\u5e8f\u7684\u96c6\u5408\uff0c\u4f7f\u7528\u54c8\u5e0c\u8868\u5b9e\u73b0\u5feb\u901f\u67e5\u627e unordered_multiset \u4e0d\u6392\u5e8f\u4e14\u5141\u8bb8\u91cd\u590d\u5143\u7d20\u7684\u96c6\u5408 unordered_map \u4e0d\u6392\u5e8f\u7684\u952e\u503c\u5bf9\u6620\u5c04\uff0c\u4f7f\u7528\u54c8\u5e0c\u8868\u5b9e\u73b0\u5feb\u901f\u67e5\u627e unordered_multimap \u4e0d\u6392\u5e8f\u4e14\u5141\u8bb8\u952e\u91cd\u590d\u7684\u952e\u503c\u5bf9\u6620\u5c04 \u5176\u4ed6\u5bb9\u5668 stack \u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668 queue \u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668 priority_queue \u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u6bd4\u8f83\u51fd\u6570\u7684\u961f\u5217\uff0c\u5143\u7d20\u603b\u662f\u6309\u4f18\u5148\u7ea7\u987a\u5e8f\u51fa\u961f valarray \u6570\u503c\u6570\u7ec4\uff0c\u652f\u6301\u6570\u5b66\u8fd0\u7b97 bitset \u56fa\u5b9a\u5927\u5c0f\u7684\u4f4d\u96c6\u5408\uff0c\u7528\u4e8e\u5904\u7406\u4f4d\u8fd0\u7b97 <p>\u8fd9\u4e9b\u5bb9\u5668\u63d0\u4f9b\u4e86C++\u7a0b\u5e8f\u8bbe\u8ba1\u4e2d\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u5bb9\u5668\u6765\u4f7f\u7528\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#stdunordered_map","title":"std::unordered_map","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_1","title":"\u6982\u5ff5","text":"<p>std::unordered_map \u662f\u4e00\u4e2a\u65e0\u5e8f\u7684\u5173\u8054\u5bb9\u5668\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_2","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>std::unordered_map \u7684\u5e95\u5c42\u5b9e\u73b0\u57fa\u4e8e\u54c8\u5e0c\u8868\u3002\u6bcf\u4e2a\u952e\u503c\u5bf9\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u88ab\u6620\u5c04\u5230\u4e00\u4e2a\u6876\uff08bucket\uff09\u4e2d\u3002\u6876\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u94fe\u8868\uff0c\u7528\u4e8e\u5904\u7406\u54c8\u5e0c\u51b2\u7a81\uff08\u5373\u4e0d\u540c\u952e\u5177\u6709\u76f8\u540c\u54c8\u5e0c\u503c\u7684\u60c5\u51b5\uff09\u3002\u5f53\u63d2\u5165\u4e00\u4e2a\u952e\u503c\u5bf9\u65f6\uff0c\u9996\u5148\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u8ba1\u7b97\u51fa\u952e\u7684\u54c8\u5e0c\u503c\uff0c\u7136\u540e\u5b9a\u4f4d\u5230\u5bf9\u5e94\u7684\u6876\uff0c\u6700\u540e\u5c06\u8fd9\u4e2a\u952e\u503c\u5bf9\u6dfb\u52a0\u5230\u6876\u7684\u94fe\u8868\u4e2d\u3002\u67e5\u627e\u548c\u5220\u9664\u64cd\u4f5c\u4e5f\u7c7b\u4f3c\uff0c\u9996\u5148\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u627e\u5230\u6876\uff0c\u7136\u540e\u5728\u6876\u7684\u94fe\u8868\u4e2d\u67e5\u627e\u6216\u5220\u9664\u76f8\u5e94\u7684\u952e\u503c\u5bf9\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_3","title":"\u4ee3\u7801\u6837\u4f8b","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;unordered_map&gt;  \n\nint main() {  \n    std::unordered_map&lt;std::string, int&gt; word_counts;  \n    word_counts[\"apple\"] = 3;  \n    word_counts[\"banana\"] = 2;  \n    word_counts[\"apple\"]++; // \u66f4\u65b0apple\u7684\u8ba1\u6570  \n\n    // \u67e5\u627e  \n    if (word_counts.find(\"banana\") != word_counts.end()) {  \n        std::cout &lt;&lt; \"Banana count: \" &lt;&lt; word_counts[\"banana\"] &lt;&lt; std::endl;  \n    }  \n\n    // \u904d\u5386  \n    for (const auto&amp; pair : word_counts) {  \n        std::cout &lt;&lt; pair.first &lt;&lt; \": \" &lt;&lt; pair.second &lt;&lt; std::endl;  \n    }  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_4","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li>\u9700\u8981\u5feb\u901f\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u952e\u503c\u5bf9\u7684\u573a\u666f\uff0c\u5982\u7f13\u5b58\u7cfb\u7edf\u3001\u6570\u636e\u5e93\u7d22\u5f15\u7b49\u3002</li> <li>\u5b58\u50a8\u4ece\u540d\u79f0\u5230\u5bf9\u8c61\u7684\u6620\u5c04\uff0c\u5982\u5b57\u7b26\u4e32\u5230\u6574\u6570\u7684\u6620\u5c04\u3001\u7528\u6237ID\u5230\u7528\u6237\u4fe1\u606f\u7684\u6620\u5c04\u7b49\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_5","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u952e\u7684\u7c7b\u578b\u9700\u8981\u652f\u6301\u54c8\u5e0c\u51fd\u6570\u548c\u76f8\u7b49\u6bd4\u8f83\u64cd\u4f5c\u3002</li> <li>\u54c8\u5e0c\u51fd\u6570\u7684\u9009\u62e9\u5bf9\u6027\u80fd\u6709\u91cd\u8981\u5f71\u54cd\uff0c\u5e94\u5c3d\u91cf\u907f\u514d\u54c8\u5e0c\u51b2\u7a81\u3002</li> <li>\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5bb9\u5668\u7684\u91cd\u65b0\u54c8\u5e0c\uff08rehashing\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u8017\u65f6\u7684\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u5728\u9700\u8981\u9891\u7e41\u63d2\u5165\u548c\u5220\u9664\u7684\u573a\u666f\u4e2d\uff0c\u53ef\u80fd\u9700\u8981\u8003\u8651\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u6216\u4f18\u5316\u7b56\u7565\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#stdunordered_set","title":"std::unordered_set","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_6","title":"\u6982\u5ff5","text":"<p>std::unordered_set \u662f\u4e00\u4e2a\u65e0\u5e8f\u7684\u5173\u8054\u5bb9\u5668\uff0c\u5b83\u5305\u542b\u552f\u4e00\u7684\u5143\u7d20\uff0c\u5e76\u4e14\u4e0d\u4fdd\u5b58\u5143\u7d20\u7684\u987a\u5e8f\u3002\u5b83\u57fa\u4e8e\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u63d0\u4f9b\u4e86\u5feb\u901f\u67e5\u627e\u3001\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u80fd\u529b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_7","title":"\u5e95\u5c42\u5b9e\u73b0\u539f\u7406","text":"<p>\u4e0e std::unordered_map \u7c7b\u4f3c\uff0cstd::unordered_set \u7684\u5e95\u5c42\u5b9e\u73b0\u4e5f\u57fa\u4e8e\u54c8\u5e0c\u8868\u3002\u6bcf\u4e2a\u5143\u7d20\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u88ab\u6620\u5c04\u5230\u4e00\u4e2a\u6876\uff08bucket\uff09\u4e2d\u3002\u6876\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u94fe\u8868\uff0c\u7528\u4e8e\u5904\u7406\u54c8\u5e0c\u51b2\u7a81\u3002\u5f53\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u9996\u5148\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u8ba1\u7b97\u51fa\u5143\u7d20\u7684\u54c8\u5e0c\u503c\uff0c\u7136\u540e\u5b9a\u4f4d\u5230\u5bf9\u5e94\u7684\u6876\uff0c\u6700\u540e\u5c06\u8fd9\u4e2a\u5143\u7d20\u6dfb\u52a0\u5230\u6876\u7684\u94fe\u8868\u4e2d\uff08\u5982\u679c\u6876\u4e2d\u4e0d\u5b58\u5728\u76f8\u540c\u7684\u5143\u7d20\uff09\u3002\u67e5\u627e\u548c\u5220\u9664\u64cd\u4f5c\u4e5f\u7c7b\u4f3c\uff0c\u9996\u5148\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u627e\u5230\u6876\uff0c\u7136\u540e\u5728\u6876\u7684\u94fe\u8868\u4e2d\u67e5\u627e\u6216\u5220\u9664\u76f8\u5e94\u7684\u5143\u7d20\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_8","title":"\u4ee3\u7801\u6837\u4f8b","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;unordered_set&gt;  \n\nint main() {  \n    std::unordered_set&lt;int&gt; unique_numbers;  \n    unique_numbers.insert(1);  \n    unique_numbers.insert(2);  \n    unique_numbers.insert(2); // \u63d2\u5165\u91cd\u590d\u5143\u7d20\uff0c\u4f46\u96c6\u5408\u4e2d\u53ea\u4fdd\u7559\u4e00\u4e2a  \n\n    // \u67e5\u627e  \n    if (unique_numbers.find(2) != unique_numbers.end()) {  \n        std::cout &lt;&lt; \"2 is in the set.\" &lt;&lt; std::endl;  \n    }  \n\n    // \u904d\u5386  \n    for (int num : unique_numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_9","title":"\u4f7f\u7528\u573a\u666f","text":"<ol> <li>\u9700\u8981\u5feb\u901f\u68c0\u67e5\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d\u7684\u573a\u666f\uff0c\u5982\u68c0\u67e5\u7528\u6237ID\u662f\u5426\u5df2\u6ce8\u518c\u3001\u68c0\u67e5\u5355\u8bcd\u662f\u5426\u5728\u8bcd\u5178\u4e2d\u7b49\u3002</li> <li>\u9700\u8981\u6d88\u9664\u91cd\u590d\u5143\u7d20\u6216\u6784\u5efa\u552f\u4e00\u5143\u7d20\u96c6\u5408\u7684\u573a\u666f\uff0c\u5982\u6570\u636e\u53bb\u91cd\u3001\u6784\u5efa\u8bcd\u888b\u6a21\u578b\u7b49\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/12-unordered_map%20%E5%92%8C%20unordered_set/#_10","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u5143\u7d20\u7684\u7c7b\u578b\u9700\u8981\u652f\u6301\u54c8\u5e0c\u51fd\u6570\u548c\u76f8\u7b49\u6bd4\u8f83\u64cd\u4f5c\u3002</li> <li>\u54c8\u5e0c\u51fd\u6570\u7684\u9009\u62e9\u5bf9\u6027\u80fd\u6709\u91cd\u8981\u5f71\u54cd\uff0c\u5e94\u5c3d\u91cf\u907f\u514d\u54c8\u5e0c\u51b2\u7a81\u3002</li> <li>\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5bb9\u5668\u7684\u91cd\u65b0\u54c8\u5e0c\uff08rehashing\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u8017\u65f6\u7684\u64cd\u4f5c\u3002\u56e0\u6b64\uff0c\u5728\u9700\u8981\u9891\u7e41\u63d2\u5165\u548c\u5220\u9664\u7684\u573a\u666f\u4e2d\uff0c\u53ef\u80fd\u9700\u8981\u8003\u8651\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u6216\u4f18\u5316\u7b56\u7565\u3002</li> </ol> <p>\u5e0c\u671b\u8fd9\u6b21\u7684\u89e3\u7b54\u66f4\u52a0\u8be6\u7ec6\u548c\u5168\u9762\uff01</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/","title":"\u301013\u3011\u4eff\u51fd\u6570\uff08\u51fd\u6570\u5bf9\u8c61\uff09","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#1","title":"1. \u4eff\u51fd\u6570\u5b9a\u4e49","text":"<p>\u5728C++\u4e2d\uff0c\u4eff\u51fd\u6570\uff08Functors\uff09\u6216\u79f0\u4e3a\u51fd\u6570\u5bf9\u8c61\uff08Function Objects\uff09\u662f\u91cd\u8f7d\u4e86\u8c03\u7528\u64cd\u4f5c\u7b26operator()\u7684\u7c7b\u6216\u7ed3\u6784\u4f53\u3002\u8fd9\u4f7f\u5f97\u8fd9\u4e9b\u7c7b\u7684\u5bf9\u8c61\u53ef\u4ee5\u50cf\u51fd\u6570\u4e00\u6837\u88ab\u8c03\u7528\u3002\u4eff\u51fd\u6570\u7684\u4e3b\u8981\u7528\u9014\u662f\u63d0\u4f9b\u4e00\u79cd\u7075\u6d3b\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u548c\u64cd\u4f5c\u6570\u636e\u3002\u901a\u8fc7\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u4eff\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u5c06\u7279\u5b9a\u7684\u903b\u8f91\u5c01\u88c5\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u5e76\u5728\u9700\u8981\u65f6\u5c06\u5176\u4f20\u9012\u7ed9\u7b97\u6cd5\u6216\u5bb9\u5668\u3002STL</p> <p>\u5bb9\u5668 \u7b97\u6cd5</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#2","title":"2. \u4eff\u51fd\u6570\u7279\u6027","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#21","title":"2.1. \u4eff\u51fd\u6570\u5b9a\u4e49","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\n// \u5b9a\u4e49\u4e00\u4e2a\u4eff\u51fd\u6570\uff0c\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u6574\u6570  \nstruct CompareInt {  \n    bool operator()(int a, int b) const {  \n        return a &lt; b;  \n    }  \n};  \n\nint main() {  \n    std::vector&lt;int&gt; numbers = {5, 2, 9, 1, 5, 6};  \n\n    // \u4f7f\u7528STL\u7684sort\u7b97\u6cd5\u548c\u81ea\u5b9a\u4e49\u7684\u4eff\u51fd\u6570\u5bf9vector\u8fdb\u884c\u6392\u5e8f  \n    std::sort(numbers.begin(), numbers.end(), CompareInt());  \n\n    // \u8f93\u51fa\u6392\u5e8f\u540e\u7684vector  \n    for (int num : numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; \" \";  \n    }  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#22","title":"2.2. \u4eff\u51fd\u6570\u53ef\u4ee5\u5c01\u88c5\u72b6\u6001","text":"<p>\u4eff\u51fd\u6570\u7684\u4e00\u4e2a\u5173\u952e\u7279\u70b9\u662f\u5b83\u4eec\u53ef\u4ee5\u5c01\u88c5\u72b6\u6001\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u53ef\u4ee5\u62e5\u6709\u6570\u636e\u6210\u5458\uff0c\u8fd9\u4e9b\u6210\u5458\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u51fd\u6570\u8c03\u7528\u4e4b\u95f4\u4fdd\u6301\u72b6\u6001\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684C++\u4eff\u51fd\u6570\u793a\u4f8b\uff0c\u5b83\u5305\u542b\u4e86\u4e00\u4e2a\u72b6\u6001\u53d8\u91cf\uff08internal_sum\uff09\uff0c\u5e76\u5728\u6bcf\u6b21\u8c03\u7528\u65f6\u5c06\u5176\u4e0e\u8f93\u5165\u53c2\u6570\u76f8\u52a0\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n\n// \u5b9a\u4e49\u4e00\u4e2a\u4eff\u51fd\u6570\u7c7b\uff0c\u5e26\u6709\u5185\u90e8\u72b6\u6001  \nclass Accumulator {  \npublic:  \n    // \u6784\u9020\u51fd\u6570\uff0c\u521d\u59cb\u5316\u5185\u90e8\u72b6\u6001  \n    Accumulator(int initial_sum = 0) : internal_sum(initial_sum) {}  \n\n    // \u91cd\u8f7doperator()\uff0c\u4f7f\u5176\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u53c2\u6570\uff0c\u5c06\u5176\u4e0e\u5185\u90e8\u72b6\u6001\u76f8\u52a0\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c  \n    int operator()(int value) {  \n        internal_sum += value; // \u4fee\u6539\u5185\u90e8\u72b6\u6001  \n        return internal_sum;   // \u8fd4\u56de\u7d2f\u52a0\u540e\u7684\u7ed3\u679c  \n    }  \n\n    // \u83b7\u53d6\u5f53\u524d\u5185\u90e8\u72b6\u6001  \n    int getCurrentSum() const {  \n        return internal_sum;  \n    }  \n\nprivate:  \n    int internal_sum; // \u4eff\u51fd\u6570\u7684\u5185\u90e8\u72b6\u6001  \n};  \n\nint main() {  \n    // \u521b\u5efaAccumulator\u7c7b\u7684\u5b9e\u4f8b\uff0c\u521d\u59cb\u5185\u90e8\u72b6\u6001\u4e3a0  \n    Accumulator accumulator;  \n\n    // \u4f7f\u7528\u4eff\u51fd\u6570\u5b9e\u4f8b\u6765\u201c\u8c03\u7528\u201d\u5b83\uff08\u5373\uff0c\u4f7f\u7528\u5b83\u50cf\u4e00\u4e2a\u51fd\u6570\uff09  \n    std::cout &lt;&lt; \"After adding 5: \" &lt;&lt; accumulator(5) &lt;&lt; std::endl;  \n    std::cout &lt;&lt; \"After adding 3: \" &lt;&lt; accumulator(3) &lt;&lt; std::endl;  \n    std::cout &lt;&lt; \"Current sum: \" &lt;&lt; accumulator.getCurrentSum() &lt;&lt; std::endl;  \n\n    // \u521b\u5efa\u53e6\u4e00\u4e2aAccumulator\u5b9e\u4f8b\uff0c\u521d\u59cb\u5185\u90e8\u72b6\u6001\u4e3a10  \n    Accumulator accumulatorWithInitialSum(10);  \n\n    // \u4f7f\u7528\u8fd9\u4e2a\u5b9e\u4f8b\u8fdb\u884c\u7d2f\u52a0  \n    std::cout &lt;&lt; \"With initial sum 10, after adding 2: \" &lt;&lt; accumulatorWithInitialSum(2) &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cAccumulator\u7c7b\u662f\u4e00\u4e2a\u4eff\u51fd\u6570\uff0c\u5b83\u6709\u4e00\u4e2a\u79c1\u6709\u7684\u6574\u6570\u6210\u5458internal_sum\uff0c\u7528\u4e8e\u5b58\u50a8\u7d2f\u52a0\u7684\u503c\u3002\u6784\u9020\u51fd\u6570\u5141\u8bb8\u6211\u4eec\u8bbe\u7f6e\u521d\u59cb\u7684\u7d2f\u52a0\u503c\u3002operator()\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u6574\u6570\u53c2\u6570\uff0c\u5c06\u5176\u52a0\u5230internal_sum\u4e0a\uff0c\u5e76\u8fd4\u56de\u7d2f\u52a0\u540e\u7684\u7ed3\u679c\u3002\u6b64\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u516c\u5171\u51fd\u6570getCurrentSum()\u6765\u83b7\u53d6\u5f53\u524d\u7684\u7d2f\u52a0\u503c\u3002</p> <p>\u5728main\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2aAccumulator\u7684\u5b9e\u4f8b\uff0c\u5e76\u4f7f\u7528\u5b83\u4eec\u6765\u8fdb\u884c\u7d2f\u52a0\u64cd\u4f5c\u3002\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\u4ece0\u5f00\u59cb\u7d2f\u52a0\uff0c\u800c\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\u4ece10\u5f00\u59cb\u7d2f\u52a0\u3002\u7531\u4e8e\u4eff\u51fd\u6570\u53ef\u4ee5\u4fdd\u6301\u72b6\u6001\uff0c\u56e0\u6b64\u4e0d\u540c\u7684\u5b9e\u4f8b\u53ef\u4ee5\u72ec\u7acb\u5730\u7ef4\u62a4\u81ea\u5df1\u7684\u7d2f\u52a0\u503c\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#23","title":"2.3. \u4eff\u51fd\u6570\u53ef\u4ee5\u5f53\u53c2\u6570\u4f20\u9012","text":"<pre><code>#include &lt;iostream&gt;  \n\n// \u5b9a\u4e49\u4e00\u4e2a\u4eff\u51fd\u6570\u7c7b  \nclass MyFunctor {  \npublic:  \n    // \u91cd\u8f7d()\u64cd\u4f5c\u7b26  \n    int operator()(int value) {  \n        return value * 2; // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4e58\u6cd5\u4eff\u51fd\u6570  \n    }  \n};  \n\n// \u4e00\u4e2a\u63a5\u53d7\u4eff\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u51fd\u6570  \nvoid applyFunctor(int value, const MyFunctor&amp; functor) {  \n    std::cout &lt;&lt; \"\u7ecf\u8fc7\u4eff\u51fd\u6570\u5904\u7406\u540e\u7684\u503c: \" &lt;&lt; functor(value) &lt;&lt; std::endl;  \n}  \n\nint main() {  \n    // \u521b\u5efa\u4eff\u51fd\u6570\u5b9e\u4f8b  \n    MyFunctor functor;  \n\n    // \u8c03\u7528\u63a5\u53d7\u4eff\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u51fd\u6570  \n    applyFunctor(5, functor); // \u8f93\u51fa\uff1a\u7ecf\u8fc7\u4eff\u51fd\u6570\u5904\u7406\u540e\u7684\u503c: 10  \n\n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#24","title":"2.4. \u4eff\u51fd\u6570\u7684\u76f8\u5bf9\u6027\u80fd\u4f18\u52bf","text":"<p>\u901a\u5e38\u8bf4\u4eff\u51fd\u6570\uff08\u4e5f\u79f0\u4e3a\u51fd\u6570\u5bf9\u8c61\u6216functor\uff09\u6bd4\u51fd\u6570\u6307\u9488\u7684\u6267\u884c\u901f\u5ea6\u5feb\uff0c\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u7edd\u5bf9\u7684\u7ed3\u8bba\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u6027\u80fd\u5dee\u5f02\u662f\u975e\u5e38\u5c0f\u7684\uff0c\u751a\u81f3\u5728\u73b0\u4ee3\u7684\u7f16\u8bd1\u5668\u4f18\u5316\u4e0b\u53ef\u80fd\u51e0\u4e4e\u65e0\u6cd5\u6d4b\u91cf\u3002\u4f46\u662f\uff0c\u6709\u51e0\u4e2a\u539f\u56e0\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u67d0\u4e9b\u7279\u5b9a\u60c5\u51b5\u4e0b\u4eff\u51fd\u6570\u76f8\u5bf9\u66f4\u5feb\uff1a</p> <ol> <li>\u5185\u8054\u4f18\u5316\uff1a\u4eff\u51fd\u6570\u4f5c\u4e3a\u7c7b\u7684\u6210\u5458\u51fd\u6570\u6216\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff0c\u66f4\u6709\u53ef\u80fd\u88ab\u7f16\u8bd1\u5668\u5185\u8054\uff08inline\uff09\uff0c\u8fd9\u53ef\u4ee5\u51cf\u5c11\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u51fd\u6570\u6307\u9488\u6307\u5411\u7684\u51fd\u6570\u901a\u5e38\u4e0d\u4f1a\u88ab\u5185\u8054\uff0c\u9664\u975e\u7f16\u8bd1\u5668\u7279\u522b\u786e\u5b9a\u8fd9\u6837\u505a\u662f\u5b89\u5168\u7684\u3002</li> <li>\u72b6\u6001\u5c40\u90e8\u6027\uff1a\u4eff\u51fd\u6570\u53ef\u4ee5\u5305\u542b\u72b6\u6001\uff08\u5373\u6570\u636e\u6210\u5458\uff09\uff0c\u8fd9\u4e9b\u72b6\u6001\u53ef\u4ee5\u4e0e\u5176\u6210\u5458\u51fd\u6570\u7d27\u5bc6\u5730\u5b58\u50a8\u5728\u4e00\u8d77\u3002\u8fd9\u79cd\u7d27\u5bc6\u6027\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u8bbf\u95ee\u7684\u5c40\u90e8\u6027\uff0c\u4ece\u800c\u63d0\u9ad8\u7f13\u5b58\u5229\u7528\u7387\uff0c\u8fdb\u800c\u53ef\u80fd\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u7c7b\u578b\u5b89\u5168\uff1a\u4eff\u51fd\u6570\u53ef\u4ee5\u901a\u8fc7\u6a21\u677f\u548c\u7c7b\u578b\u7cfb\u7edf\u63d0\u4f9b\u66f4\u9ad8\u7ea7\u522b\u7684\u7c7b\u578b\u5b89\u5168\u6027\u3002\u867d\u7136\u8fd9\u4e0d\u4f1a\u76f4\u63a5\u5f71\u54cd\u6267\u884c\u901f\u5ea6\uff0c\u4f46\u5b83\u53ef\u4ee5\u51cf\u5c11\u56e0\u7c7b\u578b\u9519\u8bef\u800c\u5bfc\u81f4\u7684\u8fd0\u884c\u65f6\u5f00\u9500\u3002</li> <li>\u65e0\u989d\u5916\u95f4\u63a5\u5f15\u7528\uff1a\u51fd\u6570\u6307\u9488\u9700\u8981\u989d\u5916\u7684\u95f4\u63a5\u5f15\u7528\u6765\u8bbf\u95ee\u76ee\u6807\u51fd\u6570\u3002\u867d\u7136\u8fd9\u79cd\u95f4\u63a5\u5f15\u7528\u5728\u73b0\u4ee3\u5904\u7406\u5668\u4e0a\u901a\u5e38\u662f\u975e\u5e38\u5feb\u7684\uff0c\u4f46\u5728\u67d0\u4e9b\u6781\u7aef\u60c5\u51b5\u4e0b\uff0c\u5b83\u53ef\u80fd\u4f1a\u6210\u4e3a\u6027\u80fd\u74f6\u9888\u3002</li> <li>\u7f16\u8bd1\u65f6\u4f18\u5316\uff1a\u7531\u4e8e\u4eff\u51fd\u6570\u662f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u66f4\u5e7f\u6cdb\u7684\u4f18\u5316\uff0c\u4f8b\u5982\u901a\u8fc7\u6d88\u9664\u865a\u62df\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500\uff08\u5982\u679c\u4eff\u51fd\u6570\u6ca1\u6709\u4f7f\u7528\u865a\u51fd\u6570\uff09\u6216\u4f7f\u7528\u7279\u5b9a\u7684\u7c7b\u7279\u5b9a\u4f18\u5316\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#25","title":"2.5. \u4eff\u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570","text":"<p>\u4eff\u51fd\u6570\u786e\u5b9e\u53ef\u4ee5\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5177\u6709\u81ea\u5df1\u7684\u552f\u4e00\u7c7b\u578b\u3002\u6a21\u677f\u53c2\u6570\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u7c7b\u578b\uff0c\u5305\u62ec\u7c7b\u7c7b\u578b\uff0c\u800c\u4eff\u51fd\u6570\u5c31\u662f\u7c7b\u7c7b\u578b\u7684\u4e00\u79cd\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4ee3\u7801\u6837\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u4eff\u51fd\u6570\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\n// \u5b9a\u4e49\u4e00\u4e2a\u4eff\u51fd\u6570\u7c7b  \nclass MultiplyByTwo {  \npublic:  \n    int operator()(int value) const {  \n        return value * 2;  \n    }  \n};  \n\n// \u5b9a\u4e49\u4e00\u4e2a\u63a5\u53d7\u4eff\u51fd\u6570\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u7684\u51fd\u6570\u6a21\u677f  \ntemplate &lt;typename Functor&gt;  \nvoid transformVector(std::vector&lt;int&gt;&amp; vec, Functor functor) {  \n    for (auto&amp; item : vec) {  \n        item = functor(item);  \n    }  \n}  \n\nint main() {  \n    std::vector&lt;int&gt; numbers = {1, 2, 3, 4, 5};  \n\n    // \u4f7f\u7528MultiplyByTwo\u4eff\u51fd\u6570\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570  \n    transformVector(numbers, MultiplyByTwo());  \n\n    // \u8f93\u51fa\u53d8\u6362\u540e\u7684vector  \n    for (const auto&amp; num : numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528lambda\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570  \n    transformVector(numbers, [](int value) { return value * 3; });  \n\n    // \u518d\u6b21\u8f93\u51fa\u53d8\u6362\u540e\u7684vector  \n    for (const auto&amp; num : numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0ctransformVector \u662f\u4e00\u4e2a\u51fd\u6570\u6a21\u677f\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a<code>std::vector&lt;int&gt;</code> \u548c\u4e00\u4e2a\u4eff\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u6a21\u677f\u4f7f\u7528\u4eff\u51fd\u6570\u6765\u53d8\u6362 vector \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u3002\u5728 main \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4f7f\u7528 MultiplyByTwo \u4eff\u51fd\u6570\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u8c03\u7528 transformVector \u51fd\u6570\uff0c\u7136\u540e\u4f7f\u7528\u4e00\u4e2a lambda \u8868\u8fbe\u5f0f\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u518d\u6b21\u8c03\u7528 transformVector \u51fd\u6570\u3002\u8fd9\u5c55\u793a\u4e86\u4eff\u51fd\u6570\u548c lambda \u8868\u8fbe\u5f0f\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u6a21\u677f\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u6a21\u677f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#26","title":"2.6. \u8c13\u8bcd","text":"<p>Note</p> <p>\u5728\u8ba1\u7b97\u673a\u8bed\u8a00\u4e2d\uff0c\u8c13\u8bcd\u901a\u5e38\u6307\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u6c42\u503c\u8fd4\u56de\u771f\u6216\u5047\u7684\u8fc7\u7a0b</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#261-unary-predicate","title":"2.6.1. \u4e00\u5143\u8c13\u8bcd\uff08Unary Predicate\uff09","text":"<p>\u4e00\u5143\u8c13\u8bcd\u901a\u5e38\u7528\u4e8e\u5224\u65ad\u5355\u4e2a\u5143\u7d20\u662f\u5426\u6ee1\u8db3\u67d0\u4e2a\u6761\u4ef6\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528 std::remove_if \u548c\u4e00\u5143\u8c13\u8bcd\u7684\u7b80\u5355\u4f8b\u5b50\uff0c\u5b83\u79fb\u9664 <code>std::vector&lt;int&gt;</code> \u4e2d\u7684\u6240\u6709\u5076\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\n// \u4e00\u5143\u8c13\u8bcd\uff0c\u68c0\u67e5\u6574\u6570\u662f\u5426\u4e3a\u5076\u6570  \nbool isEven(int num) {  \n    return num % 2 == 0;  \n}  \n\nint main() {  \n    std::vector&lt;int&gt; numbers = {1, 2, 3, 4, 5, 6};  \n\n    // \u4f7f\u7528 std::remove_if \u548c\u4e00\u5143\u8c13\u8bcd isEven \u79fb\u9664\u6240\u6709\u5076\u6570  \n    numbers.erase(std::remove_if(numbers.begin(), numbers.end(), isEven), numbers.end());  \n\n    // \u8f93\u51fa\u5904\u7406\u540e\u7684 vector  \n    for (const auto&amp; num : numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/13-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89/#262-binary-predicate","title":"2.6.2. \u4e8c\u5143\u8c13\u8bcd\uff08Binary Predicate\uff09","text":"<p>\u4e8c\u5143\u8c13\u8bcd\u901a\u5e38\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u5143\u7d20\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528 std::sort \u548c\u4e8c\u5143\u8c13\u8bcd\u7684\u7b80\u5355\u4f8b\u5b50\uff0c\u5b83\u6839\u636e\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u89c4\u5219\u5bf9<code>std::vector&lt;int&gt;</code> \u8fdb\u884c\u6392\u5e8f\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\n// \u4e8c\u5143\u8c13\u8bcd\uff0c\u6bd4\u8f83\u4e24\u4e2a\u6574\u6570\u7684\u5927\u5c0f\uff08\u964d\u5e8f\u6392\u5e8f\uff09  \nbool compareDescending(int a, int b) {  \n    return a &gt; b;  \n}  \n\nint main() {  \n    std::vector&lt;int&gt; numbers = {3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5};  \n\n    // \u4f7f\u7528 std::sort \u548c\u4e8c\u5143\u8c13\u8bcd compareDescending \u5bf9 vector \u8fdb\u884c\u964d\u5e8f\u6392\u5e8f  \n    std::sort(numbers.begin(), numbers.end(), compareDescending);  \n\n    // \u8f93\u51fa\u6392\u5e8f\u540e\u7684 vector  \n    for (const auto&amp; num : numbers) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <p>\u5728\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u5206\u522b\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4e00\u5143\u8c13\u8bcd isEven \u548c\u4e00\u4e2a\u4e8c\u5143\u8c13\u8bcd compareDescending\u3002\u4e00\u5143\u8c13\u8bcd\u7528\u4e8e\u5224\u65ad\u5355\u4e2a\u5143\u7d20\u662f\u5426\u4e3a\u5076\u6570\uff0c\u800c\u4e8c\u5143\u8c13\u8bcd\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u8fd9\u4e9b\u8c13\u8bcd\u4e0e\u6807\u51c6\u5e93\u7b97\u6cd5\uff08\u5982 std::remove_if \u548c std::sort\uff09\u4e00\u8d77\u5de5\u4f5c\uff0c\u4ee5\u5b8c\u6210\u7279\u5b9a\u7684\u4efb\u52a1\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/","title":"\u301014\u3011\u7b97\u6cd5","text":"<p>\u5728C++ STL\uff08Standard Template Library\uff09\u4e2d\uff0c\u7b97\u6cd5\uff08Algorithms\uff09\u90e8\u5206\u5305\u542b\u4e86\u4e00\u7cfb\u5217\u7528\u4e8e\u64cd\u4f5c\u5bb9\u5668\u5143\u7d20\u7684\u901a\u7528\u7b97\u6cd5\u3002\u8fd9\u4e9b\u7b97\u6cd5\u4e3b\u8981\u5b9a\u4e49\u5728algorithm\u5934\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u5b9a\u5236\u548c\u6269\u5c55\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684STL\u7b97\u6cd5\u76ee\u5f55\uff1a</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#non-mutating-sequence-algorithms","title":"\u975e\u4fee\u6539\u5e8f\u5217\u7b97\u6cd5\uff08Non-mutating Sequence Algorithms\uff09","text":"<ul> <li>std::find\uff1a\u5728\u5e8f\u5217\u4e2d\u67e5\u627e\u7b49\u4e8e\u67d0\u503c\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002</li> <li>std::find_if\uff1a\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u7528\u7ed9\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u76f4\u5230\u627e\u5230\u4f7f\u51fd\u6570\u5bf9\u8c61\u8fd4\u56detrue\u7684\u5143\u7d20\u3002</li> <li>std::count\uff1a\u8ba1\u7b97\u5e8f\u5217\u4e2d\u7b49\u4e8e\u67d0\u503c\u7684\u5143\u7d20\u4e2a\u6570\u3002</li> <li>std::count_if\uff1a\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u7528\u7ed9\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u5e76\u8fd4\u56de\u4f7f\u51fd\u6570\u5bf9\u8c61\u8fd4\u56detrue\u7684\u5143\u7d20\u4e2a\u6570\u3002</li> <li>std::for_each\uff1a\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u7528\u7ed9\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\u3002</li> <li>std::equal\uff1a\u6bd4\u8f83\u4e24\u4e2a\u5e8f\u5217\u662f\u5426\u76f8\u7b49\u3002</li> <li>std::mismatch\uff1a\u6bd4\u8f83\u4e24\u4e2a\u5e8f\u5217\uff0c\u5e76\u8fd4\u56de\u7b2c\u4e00\u4e2a\u4e0d\u5339\u914d\u7684\u5143\u7d20\u7684\u4f4d\u7f6e\u3002</li> <li>std::search\uff1a\u5728\u5e8f\u5217\u4e2d\u67e5\u627e\u53e6\u4e00\u4e2a\u5e8f\u5217\u7684\u7b2c\u4e00\u6b21\u51fa\u73b0\u3002</li> <li>std::search_n\uff1a\u5728\u5e8f\u5217\u4e2d\u67e5\u627en\u4e2a\u8fde\u7eed\u7684\u5143\u7d20\uff0c\u8fd9\u4e9b\u5143\u7d20\u4e0e\u7ed9\u5b9a\u503c\u76f8\u7b49\u3002 <pre><code>int main() {\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,3,34,2,5,6,7,8};\n    auto x = count_if(mybox.begin(), mybox.end(), [](int a) {return a == 3; });\n    cout &lt;&lt; x &lt;&lt; endl;  //3\n}\n</code></pre></li> </ul> <pre><code>int main() {\n\n    auto myfun = [](int x) {return x == 3; };\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,34,34,2,5,6,7,8};\n    auto x = find_if(mybox.begin(), mybox.end(), myfun);\n    while (x != mybox.end())\n    {\n        cout &lt;&lt; (x != mybox.end() ? *(++x) : *x) &lt;&lt; endl;\n        x= find_if(next(x), mybox.end(), myfun);\n    }\n\n}\n</code></pre> <pre><code>//for_each\u7684\u7b2c\u4e00\u79cd\u7528\u6cd5,\u4e3b\u8981\u662f\u5728\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684\u53d8\u5316\uff0c\u6700\u4f20\u7edf\u7684\u73a9\u6cd5\n//\u9488\u5bf9\u53ef\u4ee5\u4fee\u6539\u5bb9\u5668\u7684\u5f15\u7528\u5f0f\u8c03\u7528\nint funx(int&amp; a)\n{\n    return a += 10;\n}\n\nint main() {\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,3,34,2,5,6,7,8};\n\n    //\u64cd\u4f5c\u4e4b\u524d\n    for (auto x : mybox)\n    {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n    for_each(mybox.begin(), mybox.end(), ref( funx));\n\n    //\u64cd\u4f5c\u4e4b\u540e\n    for (auto x : mybox)\n    {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre> <pre><code>//\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff1a\u4eff\u51fd\u6570\u5f0f\u7684\u73a9\u6cd5\nclass Myfang {\n\npublic:\n    bool operator()(int&amp; a) {\n        return a =a+ 10;\n    }\n};\n\n\nint main() {\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,3,34,2,5,6,7,8};\n\n    //\u64cd\u4f5c\u4e4b\u524d\n    for (auto x : mybox)\n    {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n    for_each(mybox.begin(), mybox.end(), Myfang());\n\n    //\u64cd\u4f5c\u4e4b\u540e\n    for (auto x : mybox)\n    {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#mutating-sequence-algorithms","title":"\u4fee\u6539\u5e8f\u5217\u7b97\u6cd5\uff08Mutating Sequence Algorithms\uff09","text":"<ul> <li>std::copy\uff1a\u5c06\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\u3002</li> <li>std::copy_if\uff1a\u5c06\u6ee1\u8db3\u7ed9\u5b9a\u6761\u4ef6\u7684\u5e8f\u5217\u5143\u7d20\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\u3002</li> <li>std::replace\uff1a\u5c06\u5e8f\u5217\u4e2d\u7b49\u4e8e\u67d0\u503c\u7684\u5143\u7d20\u66ff\u6362\u4e3a\u53e6\u4e00\u4e2a\u503c\u3002</li> <li>std::replace_if\uff1a\u5bf9\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u7528\u7ed9\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u5e76\u66ff\u6362\u4f7f\u51fd\u6570\u5bf9\u8c61\u8fd4\u56detrue\u7684\u5143\u7d20\u3002</li> <li>std::swap\uff1a\u4ea4\u6362\u4e24\u4e2a\u5143\u7d20\u7684\u503c\u3002</li> <li>std::swap_ranges\uff1a\u4ea4\u6362\u4e24\u4e2a\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u3002</li> <li>std::reverse\uff1a\u53cd\u8f6c\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u987a\u5e8f\u3002</li> <li>std::rotate\uff1a\u5c06\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u5411\u5de6\u6216\u5411\u53f3\u65cb\u8f6c\u3002</li> <li>std::remove\uff1a\u79fb\u9664\u5e8f\u5217\u4e2d\u7b49\u4e8e\u67d0\u503c\u7684\u6240\u6709\u5143\u7d20\uff08\u901a\u8fc7\u5c06\u5b83\u4eec\u79fb\u52a8\u5230\u5e8f\u5217\u7684\u672b\u5c3e\uff09\u3002</li> <li>std::remove_if\uff1a\u79fb\u9664\u5e8f\u5217\u4e2d\u4f7f\u7ed9\u5b9a\u51fd\u6570\u5bf9\u8c61\u8fd4\u56detrue\u7684\u6240\u6709\u5143\u7d20\u3002</li> <li>std::unique\uff1a\u79fb\u9664\u5e8f\u5217\u4e2d\u7684\u8fde\u7eed\u91cd\u590d\u5143\u7d20\uff08\u901a\u8fc7\u5c06\u5b83\u4eec\u79fb\u52a8\u5230\u5e8f\u5217\u7684\u672b\u5c3e\uff09\u3002</li> <li>std::unique_copy\uff1a\u5c06\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\uff0c\u5e76\u79fb\u9664\u8fde\u7eed\u91cd\u590d\u7684\u5143\u7d20\u3002</li> </ul> <pre><code>int main() {\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,3,34,2,5,6,7,8};\n    vector&lt;int&gt; mybox1 = {1,2,3,4,56};\n    mybox1.resize(mybox.size());\n    //auto x =copy(mybox.begin(), mybox.end(), mybox1.begin());\n    auto x = copy_if(mybox.begin(), mybox.end(), mybox1.begin(), [](int&amp; x) {return x % 2 == 0; });\n    for (auto x : mybox1) {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre> <p>//repalce</p> <pre><code>int main() {\n    vector&lt;int&gt; mybox = {12,2,3,9,1,3,4,45,3,34,2,5,6,7,8};\n    vector&lt;int&gt; mybox1 = {1,2,3,4,56};\n    mybox1.resize(mybox.size());\n    //replace(mybox.begin(), mybox.end(), 3, 300);\n    replace_if(mybox.begin(), mybox.end(), [](const int&amp; x) {return x % 2 == 0; },300);\n\n    for (auto x : mybox)\n    {\n        cout &lt;&lt; x &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre> <pre><code>#include\"iostream\"\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\n\nvoid printIntVector(const vector&lt;int&gt; &amp; mybox)\n{\n    for (auto x : mybox) {\n\n        cout &lt;&lt; x &lt;&lt; \" \";\n\n    }\n    cout &lt;&lt; endl;\n\n}\n\nint main() {\n    vector&lt;int&gt; mybox = {12,2,3,3,3,3,4,45,3,34,2,5,6,7,8};\n    vector&lt;int&gt; mybox1 = {1,2,3,4,56};\n    mybox1.resize(mybox.size());\n\n    //1.\u7ffb\u8f6c\u5143\u7d20\n    //reverse(mybox.begin(), mybox.end());\n\n    //2.\u65cb\u8f6c \u5c06\u5de6\u8fb9\u7684\u4e00\u534a\u79fb\u52a8\u5230\u53f3\u8fb9\n    //rotate(mybox.begin(), mybox.begin() + mybox.size() / 2, mybox.end());\n\n    //3.\u5220\u9664\u67d0\u4e2a\u6307\u5b9a\u7684\u5143\u7d20\n    //remove(mybox.begin(), mybox.end(), 45);\n\n    //4.\u5220\u9664\u67d0\u4e00\u7c7b\u5143\u7d20,\u6ce8\u610fremove \u5e76\u4e0d\u662f\u771f\u7684\u5220\u9664\u5143\u7d20  \u800c\u662f\u4ece\u5934\u90e8\u5f00\u59cb\u8986\u76d6 \u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\u9996\u4f4d\u7f6e\n    /*auto it = std::remove_if(mybox.begin(), mybox.end(), [](const int&amp; a) {return a % 2 == 0; });\n    mybox.erase(it, mybox.end());*/\n\n    //5.unique \u79fb\u9664\u91cd\u590d\u7684\u5143\u7d20\n    /*auto it = unique(mybox.begin(), mybox.end());\n    mybox.erase(it, mybox.end());*/\n\n    //6.unique_copy \u5c06\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5e8f\u5217\uff0c\u5e76\u79fb\u9664\u8fde\u7eed\u91cd\u590d\u7684\u5143\u7d20\u3002\n    /*printIntVector(mybox1);\n    auto it=unique_copy(mybox.begin(), mybox.end(),mybox1.begin());\n    mybox1.erase(it, mybox1.end());\n    printIntVector(mybox1);*/\n\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#sorting-and-related-algorithms","title":"\u6392\u5e8f\u548c\u76f8\u5173\u7b97\u6cd5\uff08Sorting and Related Algorithms\uff09","text":"<ul> <li>std::sort\uff1a\u5bf9\u5e8f\u5217\u8fdb\u884c\u6392\u5e8f\u3002</li> <li>std::stable_sort\uff1a\u5bf9\u5e8f\u5217\u8fdb\u884c\u7a33\u5b9a\u6392\u5e8f\uff08\u5373\u76f8\u7b49\u7684\u5143\u7d20\u4fdd\u6301\u5176\u539f\u59cb\u987a\u5e8f\uff09\u3002</li> <li>std::partial_sort\uff1a\u5bf9\u5e8f\u5217\u8fdb\u884c\u90e8\u5206\u6392\u5e8f\uff0c\u4f7f\u524dN\u4e2a\u5143\u7d20\u5904\u4e8e\u5df2\u6392\u5e8f\u72b6\u6001\u3002</li> <li>std::nth_element\uff1a\u5bf9\u5e8f\u5217\u8fdb\u884c\u90e8\u5206\u6392\u5e8f\uff0c\u4ee5\u4fbf\u6307\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\uff08\u5373\u7b2cn\u4e2a\u5143\u7d20\uff09\u4f4d\u4e8e\u5176\u5df2\u6392\u5e8f\u4f4d\u7f6e\u3002</li> <li>std::partition\uff1a\u6839\u636e\u7ed9\u5b9a\u7684\u51fd\u6570\u5bf9\u8c61\u5bf9\u5e8f\u5217\u8fdb\u884c\u5212\u5206\uff0c\u4f7f\u5f97\u6ee1\u8db3\u51fd\u6570\u5bf9\u8c61\u7684\u5143\u7d20\u5728\u524d\uff0c\u4e0d\u6ee1\u8db3\u7684\u5728\u540e\u3002</li> <li>std::stable_partition\uff1a\u4e0estd::partition\u7c7b\u4f3c\uff0c\u4f46\u4fdd\u6301\u76f8\u7b49\u5143\u7d20\u7684\u539f\u59cb\u987a\u5e8f\u3002</li> <li>std::make_heap\uff1a\u5c06\u5e8f\u5217\u8f6c\u6362\u4e3a\u5806\u7ed3\u6784\u3002</li> <li>std::push_heap\uff1a\u5728\u5806\u7684\u672b\u5c3e\u6dfb\u52a0\u5143\u7d20\u5e76\u91cd\u65b0\u5806\u5316\u3002</li> <li>std::pop_heap\uff1a\u79fb\u9664\u5806\u9876\u5143\u7d20\u5e76\u5c06\u5176\u653e\u5728\u672b\u5c3e\uff0c\u7136\u540e\u91cd\u65b0\u5806\u5316\u3002</li> <li>std::sort_heap\uff1a\u5bf9\u5806\u8fdb\u884c\u6392\u5e8f\u3002</li> </ul> <pre><code>#include\"iostream\"\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n#include&lt;queue&gt;\nusing namespace std;\n\n\nvoid printIntVector(const vector&lt;int&gt; &amp; mybox)\n{\n    for (auto x : mybox) {\n\n        cout &lt;&lt; x &lt;&lt; \" \";\n\n    }\n    cout &lt;&lt; endl;\n\n}\n\nint main() {\n    vector&lt;int&gt; mybox = {12,2,1,2,7,3,4,45,3,34,2,5,6,7,8};\n    vector&lt;int&gt; mybox1 = {1,2,3,4,56};\n    mybox1.resize(mybox.size());\n\n    //1.sort \u5bf9\u5bb9\u5668\u8fdb\u884c\u6392\u5e8f\n    //sort(mybox.begin(), mybox.end());\n\n    //2.stable_sort \u7a33\u5b9a\u6392\u5e8f\n    //stable_sort(mybox.begin(), mybox.end());\n\n    //3.partial_sort\uff1a\u5bf9\u5e8f\u5217\u8fdb\u884c\u90e8\u5206\u6392\u5e8f\uff0c\u4f7f\u524dN\u4e2a\u5143\u7d20\u5904\u4e8e\u5df2\u6392\u5e8f\u72b6\u6001\u3002\n    //partial_sort(mybox.begin(),mybox.begin()+8, mybox.end());\n\n    //4.make_heap\n    make_heap(mybox.begin(), mybox.end(), [](const int&amp; a, const int&amp; b) {return a &gt; b; });\n    //\u4e0b\u9762\u54b1\u4eec\u901a\u8fc7\u5efa\u5806\u7684\u65b9\u6cd5 \u5bf9vector\u8fdb\u884c\u6392\u5e8f\n    //vector&lt;int&gt; mynew; //\u6392\u597d\u4ee5\u540e\u653e\u8fd9\u91cc\u9762\n    //while (mybox.begin() != mybox.end())\n    //{\n    //  make_heap(mybox.begin(), mybox.end());\n    //  mynew.push_back(mybox[0]);\n    //  mybox.erase(mybox.begin());\n    //}\n    //printIntVector(mynew);\n\n    //5.push_heap\n    //mybox.push_back(60);\n    //push_heap(mybox.begin(), mybox.end());\n    sort_heap(mybox.begin(), mybox.end());\n\n\n\n\n    printIntVector(mybox);\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#numeric-algorithms","title":"\u901a\u7528\u6570\u503c\u7b97\u6cd5\uff08Numeric Algorithms\uff09","text":"<ul> <li>std::accumulate\uff1a\u8ba1\u7b97\u5e8f\u5217\u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c\uff08\u6216\u5176\u4ed6\u4e8c\u5143\u64cd\u4f5c\u7684\u7d2f\u79ef\u7ed3\u679c\uff09\u3002</li> <li>std::inner_product\uff1a\u8ba1\u7b97\u4e24\u4e2a\u5e8f\u5217\u7684\u70b9\u79ef\u3002</li> <li>std::adjacent_difference\uff1a\u8ba1\u7b97\u5e8f\u5217\u4e2d\u76f8\u90bb\u5143\u7d20\u7684\u5dee\u503c\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728\u53e6\u4e00\u4e2a\u5e8f\u5217\u4e2d\u3002</li> <li>std::partial_sum\uff1a\u8ba1\u7b97\u5e8f\u5217\u4e2d\u5143\u7d20\u7684\u90e8\u5206\u548c\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728\u53e6\u4e00\u4e2a\u5e8f\u5217\u4e2d\u3002</li> </ul> <p>\u8fd9\u4e9b\u7b97\u6cd5\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u7528\u4e8e\u5904\u7406\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e0eSTL\u4e2d\u7684\u5176\u4ed6\u7ec4\u4ef6\uff08\u5982\u5bb9\u5668\u548c\u8fed\u4ee3\u5668\uff09\u65e0\u7f1d\u96c6\u6210\u3002</p> <p>\u54b1\u4eec\u4e0d\u80fd\u90fd\u641e\uff0c\u4e3e\u51e0\u4e2a\u4f8b\u5b50\u610f\u601d\u4e00\u4e0b\uff1a</p> <p>\u5f53\u7136\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9bC++ STL\u7b97\u6cd5\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u5e76\u9644\u5e26\u4e86\u4e2d\u6587\u6ce8\u91ca\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#1-stdfind","title":"1. std::find","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};  \n\n    // \u4f7f\u7528std::find\u67e5\u627e\u503c\u4e3a3\u7684\u5143\u7d20  \n    auto it = std::find(vec.begin(), vec.end(), 3);  \n\n    // \u68c0\u67e5\u662f\u5426\u627e\u5230\u4e86\u5143\u7d20  \n    if (it != vec.end()) {  \n        // \u6253\u5370\u627e\u5230\u7684\u5143\u7d20\u7684\u4f4d\u7f6e  \n        std::cout &lt;&lt; \"\u627e\u5230\u4e863\uff0c\u4f4d\u7f6e\u4e3a: \" &lt;&lt; std::distance(vec.begin(), it) &lt;&lt; std::endl;  \n    } else {  \n        std::cout &lt;&lt; \"\u672a\u627e\u52303\" &lt;&lt; std::endl;  \n    }  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#2-stdsort","title":"2. std::sort","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u672a\u6392\u5e8f\u7684\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {5, 2, 4, 1, 3};  \n\n    // \u4f7f\u7528std::sort\u5bf9\u5411\u91cf\u8fdb\u884c\u6392\u5e8f  \n    std::sort(vec.begin(), vec.end());  \n\n    // \u6253\u5370\u6392\u5e8f\u540e\u7684\u5411\u91cf  \n    for (int num : vec) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#3-stdfor_each","title":"3. std::for_each","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\n// \u6253\u5370\u51fd\u6570  \nvoid print_number(int num) {  \n    std::cout &lt;&lt; num &lt;&lt; ' ';  \n}  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};  \n\n    // \u4f7f\u7528std::for_each\u904d\u5386\u5411\u91cf\u5e76\u8c03\u7528print_number\u51fd\u6570  \n    std::for_each(vec.begin(), vec.end(), print_number);  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#4-stdreplace","title":"4. std::replace","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {1, 2, 2, 3, 2, 4};  \n\n    // \u4f7f\u7528std::replace\u5c06\u6240\u6709\u503c\u4e3a2\u7684\u5143\u7d20\u66ff\u6362\u4e3a0  \n    std::replace(vec.begin(), vec.end(), 2, 0);  \n\n    // \u6253\u5370\u66ff\u6362\u540e\u7684\u5411\u91cf  \n    for (int num : vec) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#5-stdcount_if","title":"5. std::count_if","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5, 6, 7, 8, 9};  \n\n    // \u4f7f\u7528std::count_if\u8ba1\u7b97\u5076\u6570\u7684\u4e2a\u6570  \n    // \u5b9a\u4e49\u4e00\u4e2alambda\u51fd\u6570\u68c0\u67e5\u4e00\u4e2a\u6570\u662f\u5426\u4e3a\u5076\u6570  \n    auto is_even = [](int num) { return num % 2 == 0; };  \n    std::cout &lt;&lt; \"\u5076\u6570\u7684\u4e2a\u6570\u4e3a: \" &lt;&lt; std::count_if(vec.begin(), vec.end(), is_even) &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/14-%E7%AE%97%E6%B3%95/#6-stdremove_ifstdremove_if","title":"6. std::remove_if\uff08\u6ce8\u610f\uff1astd::remove_if\u4e0d\u4f1a\u5b9e\u9645\u5220\u9664\u5143\u7d20\uff0c\u800c\u662f\u5c06\u5b83\u4eec\u79fb\u52a8\u5230\u5bb9\u5668\u672b\u5c3e\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\u6307\u5411\u65b0\u903b\u8f91\u672b\u5c3e\uff09","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;algorithm&gt;  \n#include &lt;iterator&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a\u6574\u6570\u5411\u91cf  \n    std::vector&lt;int&gt; vec = {1, 2, 3, 2, 4, 2, 5};  \n\n    // \u4f7f\u7528std::remove_if\u79fb\u9664\u503c\u4e3a2\u7684\u5143\u7d20  \n    // \u5b9a\u4e49\u4e00\u4e2alambda\u51fd\u6570\u68c0\u67e5\u4e00\u4e2a\u6570\u662f\u5426\u7b49\u4e8e2  \n    auto is_two = [](int num) { return num == 2; };  \n    vec.erase(std::remove_if(vec.begin(), vec.end(), is_two), vec.end());  \n\n    // \u6253\u5370\u79fb\u9664\u540e\u7684\u5411\u91cf  \n    for (int num : vec) {  \n        std::cout &lt;&lt; num &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/15-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%99%A8/","title":"\u301015\u3011\u5185\u5b58\u5206\u914d\u5668","text":"<p>\u5728C++\u7684STL\uff08Standard Template Library\uff09\u4e2d\uff0c\u5206\u914d\u5668\uff08Allocators\uff09\u662f\u4e00\u4e2a\u76f8\u5bf9\u9ad8\u7ea7\u4e14\u8f83\u5c11\u76f4\u63a5\u4f7f\u7528\u7684\u7279\u6027\uff0c\u5b83\u7528\u4e8e\u7ba1\u7406STL\u5bb9\u5668\uff08\u5982std::vector, std::list, std::map\u7b49\uff09\u4e2d\u5143\u7d20\u7684\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSTL\u5bb9\u5668\u4f7f\u7528std::allocator\u4f5c\u4e3a\u5b83\u4eec\u7684\u5206\u914d\u5668\uff0c\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u7684\u5185\u5b58\u5206\u914d\u5668\uff0c\u5b83\u4f7f\u7528\u4e86new\u548cdelete\u64cd\u4f5c\u7b26\u3002</p> <p>\u7136\u800c\uff0cSTL\u5141\u8bb8\u4f60\u81ea\u5b9a\u4e49\u5206\u914d\u5668\uff0c\u4ee5\u6ee1\u8db3\u7279\u5b9a\u7684\u5185\u5b58\u7ba1\u7406\u9700\u6c42\uff0c\u4f8b\u5982\u5185\u5b58\u6c60\uff08memory pooling\uff09\u3001\u5185\u5b58\u8ddf\u8e2a\uff08memory tracking\uff09\u6216\u7279\u5b9a\u7684\u5185\u5b58\u5bf9\u9f50\u8981\u6c42\u3002</p> <p>\u4e00\u4e2a\u5206\u914d\u5668\u81f3\u5c11\u9700\u8981\u63d0\u4f9b\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\uff1a</p> <ol> <li>allocate(size_t n, const void* = 0): \u5206\u914d\u5927\u5c0f\u4e3an\u5b57\u8282\u7684\u672a\u521d\u59cb\u5316\u5185\u5b58\u5757\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u8be5\u5185\u5b58\u5757\u7684\u6307\u9488\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u901a\u5e38\u4e0d\u4f7f\u7528\uff0c\u4f46\u4fdd\u7559\u4ee5\u7b26\u5408C++\u5185\u5b58\u5206\u914d\u51fd\u6570\u7684\u63a5\u53e3\u3002</li> <li>deallocate(void* p, size_t n): \u91ca\u653e\u4e4b\u524d\u901a\u8fc7allocate\u5206\u914d\u7684\u5185\u5b58\u5757\u3002p\u662f\u6307\u5411\u8981\u91ca\u653e\u7684\u5185\u5b58\u5757\u7684\u6307\u9488\uff0cn\u662f\u5f53\u521d\u5206\u914d\u65f6\u7684\u5927\u5c0f\uff08\u5c3d\u7ba1\u5728\u5b9e\u8df5\u4e2d\uff0c\u8fd9\u4e2a\u503c\u53ef\u80fd\u4e0d\u88ab\u4f7f\u7528\uff09\u3002</li> <li>max_size() const: \u8fd4\u56de\u4e00\u4e2asize_t\u503c\uff0c\u8868\u793a\u53ef\u4ee5\u901a\u8fc7allocate\u5206\u914d\u7684\u6700\u5927\u5b57\u8282\u6570\u3002</li> <li>construct(pointer p, const T&amp; val): \u5728\u5df2\u5206\u914d\u7684\u5185\u5b58\u5757p\u4e0a\u6784\u9020\u4e00\u4e2aT\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5e76\u7528val\u521d\u59cb\u5316\u5b83\u3002\u8fd9\u901a\u5e38\u4f7f\u7528new (p) T(val)\u5f62\u5f0f\u7684\u5b9a\u4f4dnew\u6765\u5b9e\u73b0\u3002</li> <li>destroy(pointer p): \u9500\u6bc1\u5728p\u6307\u5411\u7684\u5185\u5b58\u5757\u4e0a\u7684\u5bf9\u8c61\u3002\u8fd9\u901a\u5e38\u901a\u8fc7\u8c03\u7528\u5bf9\u8c61\u7684\u6790\u6784\u51fd\u6570\u6765\u5b8c\u6210\uff0c\u4f46\u4e0d\u91ca\u653e\u5185\u5b58\u3002</li> <li>rebind: \u4e00\u4e2a\u6a21\u677f\u6210\u5458\uff0c\u7528\u4e8e\u4ea7\u751f\u53e6\u4e00\u79cd\u7c7b\u578b\u7684\u5206\u914d\u5668\uff0c\u8be5\u5206\u914d\u5668\u53ef\u4ee5\u4e3a\u53e6\u4e00\u79cd\u7c7b\u578b\u5206\u914d\u5185\u5b58\u3002\u8fd9\u5141\u8bb8\u4e0d\u540c\u7c7b\u578b\u7684STL\u5bb9\u5668\u4f7f\u7528\u76f8\u540c\u7684\u5185\u5b58\u7ba1\u7406\u7b56\u7565\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u81ea\u5b9a\u4e49\u5206\u914d\u5668\u7684\u793a\u4f8b\uff0c\u5b83\u4f7f\u7528malloc\u548cfree\u6765\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff08\u6ce8\u610f\uff0c\u8fd9\u4ec5\u7528\u4e8e\u6559\u5b66\u76ee\u7684\uff0c\u5e76\u4e0d\u63a8\u8350\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u4f7f\u7528\uff0c\u56e0\u4e3astd::allocator\u5df2\u7ecf\u8db3\u591f\u9ad8\u6548\uff09\uff1a</p> <pre><code>#include &lt;cstddef&gt; // for size_t  \n#include &lt;cstdlib&gt; // for malloc, free  \n#include &lt;new&gt;     // for placement new  \n\ntemplate &lt;class T&gt;  \nclass SimpleAllocator {  \npublic:  \n    using value_type = T;  \n    using pointer = T*;  \n    using const_pointer = const T*;  \n    using reference = T&amp;;  \n    using const_reference = const T&amp;;  \n    using size_type = std::size_t;  \n    using difference_type = std::ptrdiff_t;  \n\n    // 1. Allocate memory  \n    pointer allocate(size_type n) {  \n        return static_cast&lt;pointer&gt;(std::malloc(n * sizeof(T)));  \n    }  \n\n    // 2. Deallocate memory  \n    void deallocate(pointer p, size_type) {  \n        std::free(p);  \n    }  \n\n    // 3. Maximum size of allocation  \n    size_type max_size() const {  \n        return std::size_t(-1) / sizeof(T);  \n    }  \n\n    // 4. Construct an object  \n    void construct(pointer p, const_reference val) {  \n        new(p) T(val);  \n    }  \n\n    // 5. Destroy an object  \n    void destroy(pointer p) {  \n        p-&gt;~T();  \n    }  \n\n    // 6. Rebind allocator to other type  \n    template &lt;class U&gt;  \n    struct rebind {  \n        using other = SimpleAllocator&lt;U&gt;;  \n    };  \n};  \n\n// \u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u914d\u5668\u7684STL\u5bb9\u5668\u9700\u8981\u663e\u5f0f\u6307\u5b9a\u5206\u914d\u5668\u7c7b\u578b  \n// \u4f8b\u5982\uff0c\u4f7f\u7528SimpleAllocator\u7684std::vector  \ntemplate &lt;class T, class Allocator = std::allocator&lt;T&gt;&gt;  \nclass MyVector; // \u5047\u8bbeMyVector\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684STL\u5bb9\u5668\u6a21\u677f  \n\n// \u4f7f\u7528\u793a\u4f8b  \nint main() {  \n    MyVector&lt;int, SimpleAllocator&lt;int&gt;&gt; vec;  \n    // ... \u4f7f\u7528vec\uff0c\u5b83\u5c06\u4f7f\u7528SimpleAllocator\u6765\u7ba1\u7406\u5185\u5b58 ...  \n    return 0;  \n}  \n\n// \u6ce8\u610f\uff1aMyVector\u7c7b\u5e76\u4e0d\u662fSTL\u7684\u4e00\u90e8\u5206\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3a\u4e86\u793a\u4f8b\u800c\u5047\u8bbe\u5176\u5b58\u5728\u3002  \n// \u5728\u5b9e\u9645\u4e2d\uff0c\u4f60\u9700\u8981\u4e3a\u81ea\u5b9a\u4e49\u5206\u914d\u5668\u5b9e\u73b0\u6216\u9009\u62e9\u4e00\u4e2a\u652f\u6301\u5b83\u7684STL\u5bb9\u5668\u3002\n</code></pre> <p>\u8bf7\u8bb0\u4f4f\uff0c\u7f16\u5199\u4e00\u4e2a\u5065\u58ee\u4e14\u9ad8\u6548\u7684\u5206\u914d\u5668\u662f\u4e00\u4e2a\u590d\u6742\u7684\u4efb\u52a1\uff0c\u9700\u8981\u6df1\u5165\u7406\u89e3C++\u7684\u5185\u5b58\u7ba1\u7406\u3001\u5f02\u5e38\u5b89\u5168\u6027\u4ee5\u53caSTL\u5bb9\u5668\u7684\u5185\u90e8\u5de5\u4f5c\u539f\u7406\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684std::allocator\u5c31\u5df2\u7ecf\u8db3\u591f\u4e86\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/","title":"\u301016\u3011\u51fd\u6570\u9002\u914d\u5668","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/#1","title":"1. \u4ec0\u4e48\u662f\u9002\u914d\u5668\uff1f","text":"<p>C++\u4e2d\u6709\u4e09\u7c7b\u9002\u914d\u5668\uff0c\u5206\u522b\u662f\u5bb9\u5668\u9002\u914d\u5668\uff0c\u8fed\u4ee3\u5668\u9002\u914d\u5668\u548c\u51fd\u6570\u9002\u914d\u5668\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u51fd\u6570\u9002\u914d\u5668</p> <p>\u4ee5\u4e0b\u662fC++\u6807\u51c6\u5e93\u4e2d\u5e38\u89c1\u7684\u51e0\u79cd\u9002\u914d\u5668\u53ca\u5176\u7528\u9014\uff1a</p> <ol> <li> <p>\u51fd\u6570\u9002\u914d\u5668\uff08Function Adapters\uff09</p> <ul> <li>std::bind\uff1a\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u9002\u914d\u5668\uff0c\u53ef\u4ee5\u5c06\u6210\u5458\u51fd\u6570\u3001\u5168\u5c40\u51fd\u6570\u3001\u9759\u6001\u6210\u5458\u51fd\u6570\u4ee5\u53ca\u4efb\u4f55\u53ef\u8c03\u7528\u5bf9\u8c61\u7ed1\u5b9a\u5230\u7279\u5b9a\u53c2\u6570\u3002\u7136\u800c\uff0c\u968f\u7740C++11\u5f15\u5165\u4e86lambda\u8868\u8fbe\u5f0f\uff0cstd::bind\u7684\u4f7f\u7528\u5df2\u7ecf\u76f8\u5bf9\u51cf\u5c11\uff0c\u56e0\u4e3alambda\u901a\u5e38\u66f4\u7b80\u6d01\u4e14\u6613\u4e8e\u4f7f\u7528\u3002</li> <li>std::function\uff1a\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u3001\u591a\u6001\u7684\u51fd\u6570\u5305\u88c5\u5668\u3002\u5b83\u53ef\u4ee5\u4fdd\u5b58\u3001\u590d\u5236\u548c\u8c03\u7528\u4efb\u4f55\u53ef\u8c03\u7528\u76ee\u6807\u2014\u2014\u51fd\u6570\u3001lambda\u8868\u8fbe\u5f0f\u3001bind\u8868\u8fbe\u5f0f\u6216\u5176\u4ed6\u51fd\u6570\u5bf9\u8c61\u3002std::function\u63d0\u4f9b\u4e86\u4e00\u79cd\u7c7b\u578b\u5b89\u5168\u7684\u3001\u7edf\u4e00\u7684\u65b9\u5f0f\u6765\u5904\u7406\u53ef\u8c03\u7528\u5bf9\u8c61\u3002</li> <li>std::not1 \u548c std::not2\uff08C++98/03\uff09\uff1a\u8fd9\u4e9b\u9002\u914d\u5668\u7528\u4e8e\u4e00\u5143\u548c\u4e8c\u5143\u8c13\u8bcd\uff08\u8fd4\u56de\u5e03\u5c14\u503c\u7684\u51fd\u6570\u6216\u51fd\u6570\u5bf9\u8c61\uff09\uff0c\u5b83\u4eec\u53cd\u8f6c\u8c13\u8bcd\u7684\u903b\u8f91\u7ed3\u679c\u3002\u7136\u800c\uff0c\u5728C++11\u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\uff0c\u8fd9\u4e9b\u9002\u914d\u5668\u5df2\u4e0d\u5e38\u7528\uff0c\u56e0\u4e3alambda\u8868\u8fbe\u5f0f\u53ef\u4ee5\u66f4\u7b80\u6d01\u5730\u5b9e\u73b0\u76f8\u540c\u7684\u529f\u80fd\u3002</li> </ul> </li> <li> <p>\u5bb9\u5668\u9002\u914d\u5668\uff08Container Adapters\uff09</p> <ul> <li>std::stack\uff1a\u8fd9\u662f\u4e00\u4e2a\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u5b83\u63d0\u4f9b\u4e86\u5bf9\u5e95\u5c42\u5bb9\u5668\uff08\u5982std::deque\u3001std::vector\u6216std::list\uff09\u7684\u6808\u64cd\u4f5c\u63a5\u53e3\u3002</li> <li>std::queue\uff1a\u8fd9\u662f\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u5b83\u63d0\u4f9b\u4e86\u5bf9\u5e95\u5c42\u5bb9\u5668\uff08\u5982std::deque\u6216std::list\uff09\u7684\u961f\u5217\u64cd\u4f5c\u63a5\u53e3\u3002</li> <li>std::priority_queue\uff1a\u8fd9\u662f\u4e00\u4e2a\u4f18\u5148\u7ea7\u961f\u5217\u7684\u5bb9\u5668\u9002\u914d\u5668\uff0c\u5b83\u901a\u5e38\u4f7f\u7528std::vector\u4f5c\u4e3a\u5e95\u5c42\u5bb9\u5668\uff0c\u5e76\u4f7f\u7528std::less\u4f5c\u4e3a\u6bd4\u8f83\u51fd\u6570\u3002\u5143\u7d20\u6839\u636e\u5b83\u4eec\u7684\u4f18\u5148\u7ea7\u8fdb\u884c\u6392\u5e8f\uff0c\u6700\u9ad8\u4f18\u5148\u7ea7\u7684\u5143\u7d20\u603b\u662f\u7b2c\u4e00\u4e2a\u51fa\u961f\u3002</li> </ul> </li> <li> <p>\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff08Iterator Adapters\uff09</p> <ul> <li>std::back_inserter\uff1a\u8fd9\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff0c\u5b83\u5c06\u5728\u5bb9\u5668\u672b\u5c3e\u63d2\u5165\u5143\u7d20\u7684\u64cd\u4f5c\u5305\u88c5\u4e3a\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002\u5f53\u901a\u8fc7\u6b64\u8fed\u4ee3\u5668\u8d4b\u503c\u65f6\uff0c\u5143\u7d20\u5c06\u88ab\u6dfb\u52a0\u5230\u5bb9\u5668\u7684\u672b\u5c3e\u3002</li> <li>back_inserter \u662f C++ \u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u5bb9\u5668\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8fd9\u4e2a\u8fed\u4ee3\u5668\u88ab\u7528\u4f5c\u76ee\u6807\u65f6\uff0c\u4f1a\u5728\u5bb9\u5668\u7684\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\u3002\u5b83\u901a\u5e38\u4e0e\u7b97\u6cd5\uff08\u5982 std::copy\u3001std::move \u7b49\uff09\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u5c06\u5143\u7d20\u4ece\u4e00\u4e2a\u5bb9\u5668\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5bb9\u5668\u7684\u672b\u5c3e\u3002</li> </ul> </li> </ol> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 back_inserter \u5c06\u4e00\u4e2a std::list \u4e2d\u7684\u5143\u7d20\u590d\u5236\u5230 std::vector \u7684\u672b\u5c3e\uff1a <pre><code>#include &lt;iostream&gt;  \n#include &lt;vector&gt;  \n#include &lt;list&gt;  \n#include &lt;iterator&gt;  \n#include &lt;algorithm&gt;  \n\nint main() {  \n    // \u521b\u5efa\u4e00\u4e2a std::list \u5e76\u521d\u59cb\u5316  \n    std::list&lt;int&gt; list_of_ints = {1, 2, 3, 4, 5};  \n\n    // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 std::vector  \n    std::vector&lt;int&gt; vector_of_ints;  \n\n    // \u4f7f\u7528 std::copy \u548c back_inserter \u5c06 list \u4e2d\u7684\u5143\u7d20\u590d\u5236\u5230 vector \u7684\u672b\u5c3e  \n    std::copy(list_of_ints.begin(), list_of_ints.end(), std::back_inserter(vector_of_ints));  \n\n    //\u6ce8\u610f\uff0cstd::back_inserter \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u8fed\u4ee3\u5668\uff0c\u5f53\u901a\u8fc7\u8fd9\u4e2a\u8fed\u4ee3\u5668\u5411\u5bb9\u5668\u4e2d\u6dfb\u52a0\u5143\u7d20\u65f6\uff0c\n    //\u5b9e\u9645\u4e0a\u662f\u5728\u8c03\u7528\u5bb9\u5668\u7684 push_back \u65b9\u6cd5\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u624b\u52a8\u8c03\u6574\u76ee\u6807\u5bb9\u5668\u7684\u5927\u5c0f\u6765\u5bb9\u7eb3\u6e90\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u3002\n    // \u6253\u5370 vector \u4e2d\u7684\u5143\u7d20  \n    for (const auto&amp; elem : vector_of_ints) {  \n        std::cout &lt;&lt; elem &lt;&lt; ' ';  \n    }  \n    std::cout &lt;&lt; '\\n';  \n\n    return 0;  \n}\n</code></pre></p> <ul> <li>std::front_inserter\uff1a\u7c7b\u4f3c\u4e8estd::back_inserter\uff0c\u4f46\u5b83\u5728\u5bb9\u5668\u7684\u5f00\u5934\u63d2\u5165\u5143\u7d20\uff08\u4ec5\u9002\u7528\u4e8e\u652f\u6301\u5728\u5f00\u5934\u63d2\u5165\u7684\u5bb9\u5668\uff0c\u5982std::deque\u548cstd::list\uff09\u3002</li> <li>std::inserter\uff1a\u8fd9\u662f\u4e00\u4e2a\u66f4\u901a\u7528\u7684\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff0c\u5b83\u5141\u8bb8\u4f60\u6307\u5b9a\u4e00\u4e2a\u8fed\u4ee3\u5668\u548c\u4e00\u4e2a\u5bb9\u5668\uff0c\u7136\u540e\u901a\u8fc7\u5728\u8fd4\u56de\u7684\u8fed\u4ee3\u5668\u4e0a\u8d4b\u503c\u6765\u5728\u5bb9\u5668\u7684\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u5143\u7d20\u3002</li> <li> <p>std::reverse_iterator\uff1a\u8fd9\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff0c\u5b83\u63d0\u4f9b\u4e86\u5bf9\u5bb9\u5668\u7684\u53cd\u5411\u8fed\u4ee3\u3002\u5b83\u5141\u8bb8\u4f60\u4ece\u540e\u5411\u524d\u904d\u5386\u5bb9\u5668\uff0c\u5e76\u50cf\u6b63\u5411\u8fed\u4ee3\u5668\u4e00\u6837\u8fdb\u884c\u89e3\u5f15\u7528\u548c\u9012\u589e/\u9012\u51cf\u64cd\u4f5c\u3002</p> </li> <li> <p>\u8f93\u5165/\u8f93\u51fa\u6d41\u9002\u914d\u5668</p> <ul> <li>std::istreambuf_iterator \u548c std::ostreambuf_iterator\uff1a\u8fd9\u4e9b\u9002\u914d\u5668\u5141\u8bb8\u4f60\u5c06\u8f93\u5165/\u8f93\u51fa\u6d41\u4e0eSTL\u7b97\u6cd5\u4e00\u8d77\u4f7f\u7528\u3002\u5b83\u4eec\u5c06\u6d41\u7f13\u51b2\u533a\u8f6c\u6362\u4e3a\u8fed\u4ee3\u5668\uff0c\u4f7f\u5f97\u53ef\u4ee5\u4f7f\u7528STL\u7b97\u6cd5\uff08\u5982std::copy\uff09\u6765\u8bfb\u53d6\u6216\u5199\u5165\u6d41\u3002</li> </ul> </li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/#2","title":"2. \u4ec0\u4e48\u662f\u51fd\u6570\u9002\u914d\u5668\uff1f","text":"<p>\u7b80\u5355\u6765\u8bf4\u51fd\u6570\u9002\u914d\u5668\u5c31\u662f\u57fa\u4e8e\u539f\u6709\u51fd\u6570\u529f\u80fd\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u589e\u52a0\u4e00\u4e9b\u529f\u80fd\u3002</p> <p>\u51fd\u6570\u9002\u914d\u5668\u5c31\u5b9e\u73b0\u4e86\u8fd9\u4e00\u529f\u80fd\uff1a\u5c06\u4e00\u79cd\u51fd\u6570\u5bf9\u8c61\u8f6c\u5316\u4e3a\u53e6\u5916\u4e00\u79cd\u7b26\u5408\u8981\u6c42\u7684\u51fd\u6570\u5bf9\u8c61\u3002</p> <p>STL \u51fd\u6570\u9002\u914d\u5668\uff08Function Adapters\uff09\u662f\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u4fee\u6539\u548c\u7ec4\u5408\u51fd\u6570\u5bf9\u8c61\uff0c\u4ee5\u4fbf\u66f4\u65b9\u4fbf\u5730\u5728 STL \u7b97\u6cd5\u4e2d\u4f7f\u7528\u3002\u4e3b\u8981\u6709\u4e09\u7c7b\u51fd\u6570\u9002\u914d\u5668\uff1a\u7ed1\u5b9a\u9002\u914d\u5668\uff08Binders\uff09\u3001\u6210\u5458\u51fd\u6570\u9002\u914d\u5668\uff08Member Function Adapters\uff09\u548c\u8c13\u8bcd\u9002\u914d\u5668\uff08Predicate Adapters\uff09\u3002\u5728 C++11 \u4e4b\u524d\uff0c\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e00\u4e9b\u51fd\u6570\u9002\u914d\u5668\uff0c\u4f8b\u5982 <code>std::bind1st</code> \u548c <code>std::bind2nd</code>\u3002\u4f46\u5728 C++11 \u4e4b\u540e\uff0c\u8fd9\u4e9b\u9002\u914d\u5668\u88ab <code>std::bind</code> \u548c lambda \u8868\u8fbe\u5f0f\u6240\u53d6\u4ee3\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/#21-stdbind","title":"2.1. <code>std::bind</code>","text":"<p><code>std::bind</code> \u662f\u4e00\u4e2a\u901a\u7528\u7684\u51fd\u6570\u9002\u914d\u5668\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u5bf9\u8c61\u7684\u4e00\u4e9b\u53c2\u6570\u7ed1\u5b9a\u4e3a\u7279\u5b9a\u503c\uff0c\u4ece\u800c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u5bf9\u8c61\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nvoid print(int x, int y) {\n    std::cout &lt;&lt; x &lt;&lt; \", \" &lt;&lt; y &lt;&lt; std::endl;\n}\n\nint main() {\n    auto print_42 = std::bind(print, 42, std::placeholders::_1);\n    std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};\n    std::for_each(vec.begin(), vec.end(), print_42);\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>std::bind</code> \u5c06 <code>print</code> \u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u7ed1\u5b9a\u4e3a <code>42</code>\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u5bf9\u8c61 <code>print_42</code>\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u5e76\u8c03\u7528 <code>print(42, param)</code>\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/#22-stdmem_fn","title":"2.2. <code>std::mem_fn</code>","text":"<p><code>std::mem_fn</code> \u662f\u4e00\u4e2a\u51fd\u6570\u9002\u914d\u5668\uff0c\u7528\u4e8e\u5904\u7406\u6210\u5458\u51fd\u6570\u6307\u9488\u548c\u6210\u5458\u5bf9\u8c61\u6307\u9488\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nstruct Foo {\n    void print_sum(int n1, int n2) {\n        std::cout &lt;&lt; n1 + n2 &lt;&lt; std::endl;\n    }\n};\n\nint main() {\n    Foo foo;\n    auto print_sum = std::mem_fn(&amp;Foo::print_sum);\n\n    print_sum(foo, 3, 4); // \u8f93\u51fa: 7\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>std::mem_fn</code> \u5c06 <code>Foo</code> \u7c7b\u7684\u6210\u5458\u51fd\u6570 <code>print_sum</code> \u9002\u914d\u4e3a\u4e00\u4e2a\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u7684\u51fd\u6570\u5bf9\u8c61\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/03-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/16-%E5%87%BD%E6%95%B0%E9%80%82%E9%85%8D%E5%99%A8/#23","title":"2.3. \u8c13\u8bcd\u9002\u914d\u5668","text":"<p>STL \u63d0\u4f9b\u4e86\u4e00\u4e9b\u9002\u914d\u5668\u6765\u7ec4\u5408\u548c\u4fee\u6539\u8c13\u8bcd\uff0c\u4f8b\u5982 <code>std::not1</code> \u548c <code>std::not2</code>\u3002\u4e0d\u8fc7\u5728 C++11 \u4e4b\u540e\uff0clambda \u8868\u8fbe\u5f0f\u66f4\u4e3a\u5e38\u7528\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\nint main() {\n    std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};\n\n    // \u4f7f\u7528 std::not1 \u548c std::bind \u6765\u521b\u5efa\u4e00\u4e2a\u8c13\u8bcd\n    auto is_even = [](int i) { return i % 2 == 0; };\n    auto is_odd = std::not1(std::function&lt;bool(int)&gt;(is_even));\n\n    auto result = std::find_if(vec.begin(), vec.end(), is_odd);\n\n    if (result != vec.end()) {\n        std::cout &lt;&lt; \"First odd number is \" &lt;&lt; *result &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>std::not1</code> \u9002\u914d\u5668\u5c06 <code>is_even</code> \u8c13\u8bcd\u53cd\u8f6c\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8c13\u8bcd <code>is_odd</code>\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/","title":"\u6587\u4ef6\u6d41\u64cd\u4f5c","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#1","title":"1. \u6587\u4ef6\u5904\u7406\u7b80\u8981\u6982\u8ff0","text":"<p>\u6587\u4ef6\u5904\u7406\u662f\u8ba1\u7b97\u673a\u7f16\u7a0b\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u4e3b\u9898\uff0c\u5b83\u6d89\u53ca\u5230\u8bfb\u53d6\u548c\u5199\u5165\u6587\u4ef6\uff0c\u4ee5\u53ca\u5bf9\u6587\u4ef6\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\u3002\u6587\u4ef6\u5904\u7406\u5141\u8bb8\u7a0b\u5e8f\u4e0e\u5916\u90e8\u5b58\u50a8\u4ea4\u4e92\uff0c\u5b9e\u73b0\u6570\u636e\u7684\u6301\u4e45\u6027\u4fdd\u5b58\u3002\u4ee5\u4e0b\u662f\u6587\u4ef6\u5904\u7406\u7684\u57fa\u672c\u6982\u5ff5\u548c\u7528\u9014\uff1a</p> <p>\u6587\u4ef6\u662f\u4e00\u7ec4\u76f8\u5173\u6570\u636e\u7684\u96c6\u5408\uff0c\u53ef\u4ee5\u662f\u6587\u672c\u6587\u4ef6\uff08\u5305\u542b\u5b57\u7b26\uff09\u6216\u4e8c\u8fdb\u5236\u6587\u4ef6\uff08\u5305\u542b\u4efb\u610f\u6570\u636e\uff09\u3002</p> <p>C++ \u64cd\u4f5c\u4e00\u4e2a\u6587\u4ef6\u7684\u6d41\u7a0b\u4e3b\u8981\u5305\u62ec\u6253\u5f00\u6587\u4ef6\u3001\u8bfb\u5199\u6587\u4ef6\u3001\u5b9a\u4f4d\u6587\u4ef6\u4f4d\u7f6e\u3001\u5173\u95ed\u6587\u4ef6\u7b49\u6b65\u9aa4</p> <p>\u6253\u5f00\u3001\u64cd\u4f5c\u3001\u5173\u95ed &gt;\u4e09\u6b65\u8d70</p> <p>C++\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u6587\u4ef6\u5904\u7406\u529f\u80fd\uff0c\u4e3b\u8981\u901a\u8fc7\u6807\u51c6\u5e93\u4e2d\u7684\u6587\u4ef6\u6d41\uff08fstream\uff09\u7c7b\u6765\u5b9e\u73b0\u3002 </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#2","title":"2. \u6587\u4ef6\u7684\u6253\u5f00\u548c\u5173\u95ed","text":"<p>\u5728C++\u4e2d\uff0c<code>fstream</code> \u7c7b\u662f\u7528\u4e8e\u6587\u4ef6\u64cd\u4f5c\u7684\u91cd\u8981\u7c7b\u3002\u5b83\u7ee7\u627f\u81ea <code>ifstream</code> \u548c <code>ofstream</code> \u7c7b\uff0c\u56e0\u6b64\u53ef\u4ee5\u540c\u65f6\u7528\u4e8e\u6587\u4ef6\u7684\u8bfb\u53d6\u548c\u5199\u5165\u64cd\u4f5c\u3002\u4ee5\u4e0b\u662f\u6587\u4ef6\u7684\u6253\u5f00\u548c\u5173\u95ed\u6d41\u7a0b\uff1a</p> <p>\u5982\u4f55\u6253\u5f00\u6587\u4ef6\uff1a</p> <p>\u4f7f\u7528 <code>fstream</code> \u7c7b\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u3002\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5305\u62ec\u6587\u4ef6\u540d\u548c\u6253\u5f00\u6a21\u5f0f\u3002</p> <pre><code>#include &lt;fstream&gt;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\uff08\u9ed8\u8ba4\u4e3a\u8f93\u51fa\u6a21\u5f0f\uff09\n    std::fstream file(\"laojia.txt\", std::ios::out);\n\n    // \u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c...\n\n    // \u5173\u95ed\u6587\u4ef6\n    file.close();\n\n    return 0;\n}\n</code></pre> <p>\u6253\u5f00\u6a21\u5f0f\u8bf4\u660e\uff1a\u4e0b\u9762\u662f\u4f7f\u7528\u8868\u683c\u5c55\u793a\u6587\u4ef6\u6253\u5f00\u6a21\u5f0f\u8bf4\u660e\u7684\u793a\u4f8b\uff1a</p> \u6a21\u5f0f \u542b\u4e49 std::ios::in \u4ee5\u8f93\u5165\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\u3002 std::ios::out \u4ee5\u8f93\u51fa\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u7528\u4e8e\u5199\u5165\u6570\u636e\u3002 std::ios::app \u4ee5\u8ffd\u52a0\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u65b0\u5199\u5165\u7684\u5185\u5bb9\u4f1a\u6dfb\u52a0\u5230\u6587\u4ef6\u672b\u5c3e\u3002append std::ios::ate \u6253\u5f00\u6587\u4ef6\u5e76\u5b9a\u4f4d\u5230\u6587\u4ef6\u672b\u5c3e\u3002 atend std::ios::binary \u4ee5\u4e8c\u8fdb\u5236\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u7528\u4e8e\u5904\u7406\u4e8c\u8fdb\u5236\u6570\u636e\u3002 <p>\u591a\u4e2a\u6a21\u5f0f\u4e4b\u95f4\u7528<code>\u201c|\u201d</code>\u8fd0\u7b97\u7b26\uff0c\u8054\u5408\u3002</p> <pre><code>// \u4ee5\u4e8c\u8fdb\u5236\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6 \u8bfb\u5199\u6587\u4ef6\nfstream binaryFile(\"binary.bin\", ios::binary | ios::out | ios::in);\n</code></pre> <p>\u5173\u4e8ein\u548cout\u7684\u56f0\u60d1\uff0c\u753b\u4e00\u5e45\u753b\u3002  \u5982\u679c\u6587\u4ef6\u4e0d\u4f7f\u7528 close() \u5173\u95ed\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff1f</p> <p>Note</p> <ol> <li>\u8d44\u6e90\u6cc4\u6f0f\uff1a \u6bcf\u6b21\u6253\u5f00\u6587\u4ef6\u90fd\u4f1a\u5206\u914d\u4e00\u4e9b\u7cfb\u7edf\u8d44\u6e90\uff0c\u5982\u679c\u4e0d\u53ca\u65f6\u5173\u95ed\u6587\u4ef6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8d44\u6e90\u6cc4\u6f0f\uff0c\u6700\u7ec8\u5f71\u54cd\u7a0b\u5e8f\u6027\u80fd\u3002</li> <li>\u6587\u4ef6\u9501\u5b9a\uff1a \u5728\u67d0\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6587\u4ef6\u53ef\u80fd\u4f1a\u88ab\u9501\u5b9a\uff0c\u9632\u6b62\u5176\u4ed6\u7a0b\u5e8f\u6216\u8fdb\u7a0b\u8bbf\u95ee\u3002\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u5173\u95ed\uff0c\u5176\u4ed6\u7a0b\u5e8f\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\u8be5\u6587\u4ef6\u3002</li> <li>\u6570\u636e\u4e0d\u7a33\u5b9a\uff1a \u672a\u5173\u95ed\u7684\u6587\u4ef6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u7a33\u5b9a\uff0c\u56e0\u4e3a\u53ef\u80fd\u5c1a\u672a\u5c06\u6240\u6709\u7684\u5199\u5165\u64cd\u4f5c\u5b8c\u5168\u5237\u65b0\u5230\u78c1\u76d8\u4e0a\u3002</li> </ol> <p>\u5c31\u50cf\u4f60\u540c\u65f6\u4e3a\u4e24\u4e2a\u9886\u5bfc\u670d\u52a1\uff0c\u4f60\u662f\u4ec0\u4e48\u611f\u53d7\uff1f</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#3","title":"3. \u5199\u6587\u4ef6","text":"<p>\u5728C++\u4e2d\uff0c\u4f7f\u7528 <code>ofstream</code> \u7c7b\u53ef\u4ee5\u65b9\u4fbf\u5730\u8fdb\u884c\u6587\u4ef6\u5199\u5165\u64cd\u4f5c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5199\u6587\u4ef6\u7684\u5e38\u89c1\u64cd\u4f5c\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#31-ofstream","title":"3.1. \u4f7f\u7528 <code>ofstream</code> \u7c7b\u5199\u5165\u6587\u672c\u6587\u4ef6","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u5199\u5165\n    ofstream outputFile(\"output.txt\");\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!outputFile.is_open()) {\n        cerr &lt;&lt; \"Unable to open file for writing.\" &lt;&lt; endl;\n        return 1;  // \u9000\u51fa\u7a0b\u5e8f\uff0c\u8fd4\u56de\u9519\u8bef\u72b6\u6001\u7801\n    }\n\n    // \u5199\u5165\u5185\u5bb9\n    outputFile &lt;&lt; \"Hello, this is a line of text.\" &lt;&lt; endl;\n\n    // \u5173\u95ed\u6587\u4ef6\n    outputFile.close();\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>ofstream</code> \u6253\u5f00\u540d\u4e3a \"output.txt\" \u7684\u6587\u4ef6\u8fdb\u884c\u5199\u5165\uff0c\u7136\u540e\u5c06\u4e00\u884c\u6587\u672c\u5199\u5165\u6587\u4ef6\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>close()</code> \u51fd\u6570\u5173\u95ed\u6587\u4ef6\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#32","title":"3.2. \u5199\u5165\u6574\u884c","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u5199\u5165\n    ofstream outputFile(\"output.txt\");\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!outputFile.is_open()) {\n        cerr &lt;&lt; \"Unable to open file for writing.\" &lt;&lt; endl;\n        return 1;  // \u9000\u51fa\u7a0b\u5e8f\uff0c\u8fd4\u56de\u9519\u8bef\u72b6\u6001\u7801\n    }\n\n    // \u5199\u5165\u6574\u884c\n    outputFile &lt;&lt; \"This is a line of text.\" &lt;&lt; endl;\n\n    // \u5173\u95ed\u6587\u4ef6\n    outputFile.close();\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#33","title":"3.3. \u5199\u5165\u5b57\u7b26","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u5199\u5165\n    ofstream outputFile(\"output.txt\");\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!outputFile.is_open()) {\n        cerr &lt;&lt; \"Unable to open file for writing.\" &lt;&lt; endl;\n        return 1;  // \u9000\u51fa\u7a0b\u5e8f\uff0c\u8fd4\u56de\u9519\u8bef\u72b6\u6001\u7801\n    }\n\n    // \u5199\u5165\u5b57\u7b26\n    outputFile.put('A');\n\n    // \u5173\u95ed\u6587\u4ef6\n    outputFile.close();\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#34-write","title":"3.4. \u4f7f\u7528<code>write</code> \u51fd\u6570","text":"<p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684C++\u5199\u6587\u4ef6\u7684\u793a\u4f8b\uff0c\u4f7f\u7528 <code>ofstream</code> \u7c7b\u548c <code>write</code> \u51fd\u6570\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u4ee5\u5199\u5165\u6570\u636e\n    std::ofstream outFile(\"example.txt\", std::ios::binary);\n\n    if (!outFile) {\n        std::cerr &lt;&lt; \"\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6\uff01\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    // \u6570\u636e\u51c6\u5907\n    char data[] = \"Hello, World!\";\n    size_t size = sizeof(data);\n\n    // \u5c06\u6570\u636e\u5199\u5165\u6587\u4ef6\n    outFile.write(data, size);\n\n    // \u5173\u95ed\u6587\u4ef6\n    outFile.close();\n\n    std::cout &lt;&lt; \"\u6570\u636e\u6210\u529f\u5199\u5165\u6587\u4ef6 'example.txt'\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e00\u4e2a <code>ofstream</code> \u5bf9\u8c61 <code>outFile</code>\uff0c\u5e76\u6253\u5f00\u4e00\u4e2a\u540d\u4e3a \"example.txt\" \u7684\u6587\u4ef6\uff0c\u4ee5\u4e8c\u8fdb\u5236\u6a21\u5f0f\u5199\u5165\u6570\u636e\u3002\u63a5\u7740\uff0c\u6211\u4eec\u51c6\u5907\u4e86\u4e00\u4e2a\u5305\u542b\u5b57\u7b26\u4e32 \"Hello, World!\" \u7684\u5b57\u7b26\u6570\u7ec4 <code>data</code>\uff0c\u5e76\u4f7f\u7528 <code>write</code> \u51fd\u6570\u5c06\u6570\u636e\u5199\u5165\u6587\u4ef6\u3002\u6700\u540e\uff0c\u6211\u4eec\u5173\u95ed\u6587\u4ef6\u5e76\u8f93\u51fa\u6210\u529f\u7684\u6d88\u606f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#35","title":"3.5. \u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\u7684\u5904\u7406","text":"<p>\u5728\u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u5199\u5165\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c<code>ofstream</code> \u4f1a\u5c1d\u8bd5\u521b\u5efa\u6587\u4ef6\u3002\u5982\u679c\u521b\u5efa\u6587\u4ef6\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>is_open()</code> \u51fd\u6570\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\uff0c\u4ee5\u4fbf\u8fdb\u884c\u9519\u8bef\u5904\u7406\u3002\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c\u90fd\u5305\u542b\u4e86\u5bf9\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\u7684\u68c0\u67e5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#36","title":"3.6. \u5199\u6587\u4ef6\u5e38\u7528\u51fd\u6570","text":"<p>\u5728C++\u4e2d\u5199\u6587\u4ef6\u65f6\uff0c\u5e38\u7528\u7684\u4e00\u4e9b\u6210\u5458\u51fd\u6570\u5305\u62ec <code>ofstream</code> \u7c7b\u7684\u6210\u5458\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u4e3b\u8981\u7684\u5199\u6587\u4ef6\u6210\u5458\u51fd\u6570\u4ee5\u53ca\u5b83\u4eec\u7684\u4f5c\u7528\uff1a</p> <ol> <li> <p>open\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u6253\u5f00\u6587\u4ef6\uff0c\u5173\u8054\u6587\u4ef6\u540d\u548c\u8f93\u51fa\u6d41\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject.open(\"filename.txt\");</code></li> </ul> </li> <li> <p>is_open\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ofstreamObject.is_open()) { /* \u6587\u4ef6\u6210\u529f\u6253\u5f00 */ }</code></li> </ul> </li> <li> <p>close\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5173\u95ed\u6587\u4ef6\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject.close();</code></li> </ul> </li> <li> <p>seekp\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u8bbe\u7f6e\u6587\u4ef6\u5199\u5165\u4f4d\u7f6e\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject.seekp(0, ios::beg);</code></li> </ul> </li> <li> <p>tellp\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u83b7\u53d6\u5f53\u524d\u7684\u6587\u4ef6\u5199\u5165\u4f4d\u7f6e\u3002</li> <li>\u793a\u4f8b\uff1a<code>streampos position = ofstreamObject.tellp();</code></li> </ul> </li> <li> <p>write\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5c06\u6570\u636e\u5199\u5165\u6587\u4ef6\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject.write(data, size);</code></li> </ul> </li> <li> <p>put\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5c06\u4e00\u4e2a\u5b57\u7b26\u5199\u5165\u6587\u4ef6\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject.put('A');</code></li> </ul> </li> <li> <p>operator&lt;&lt;\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u63d2\u5165\u6570\u636e\u5230\u6587\u4ef6\uff0c\u7c7b\u4f3c\u4e8e\u8f93\u51fa\u6d41\u7684 <code>&lt;&lt;</code> \u64cd\u4f5c\u7b26\u3002</li> <li>\u793a\u4f8b\uff1a<code>ofstreamObject &lt;&lt; \"Hello, World!\" &lt;&lt; endl;</code></li> </ul> </li> <li> <p>good\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u7684\u72b6\u6001\u662f\u5426\u6b63\u5e38\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6b63\u5e38\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ofstreamObject.good()) { /* \u6d41\u72b6\u6001\u6b63\u5e38 */ }</code></li> </ul> </li> <li> <p>bad\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u662f\u5426\u5904\u4e8e\u9519\u8bef\u72b6\u6001\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6709\u9519\u8bef\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ofstreamObject.bad()) { /* \u6d41\u5904\u4e8e\u9519\u8bef\u72b6\u6001 */ }</code></li> </ul> </li> <li> <p>fail\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u662f\u5426\u5904\u4e8e\u5931\u8d25\u72b6\u6001\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6709\u5931\u8d25\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ofstreamObject.fail()) { /* \u6d41\u5904\u4e8e\u5931\u8d25\u72b6\u6001 */ }</code></li> </ul> </li> <li> <p>eof\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u662f\u5426\u5df2\u5230\u8fbe\u6587\u4ef6\u672b\u5c3e\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ofstreamObject.eof()) { /* \u5df2\u5230\u8fbe\u6587\u4ef6\u672b\u5c3e */ }</code></li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u6210\u5458\u51fd\u6570\u5141\u8bb8\u4f60\u5728\u5199\u6587\u4ef6\u65f6\u8fdb\u884c\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u64cd\u4f5c\uff0c\u5305\u62ec\u8bbe\u7f6e\u5199\u5165\u4f4d\u7f6e\u3001\u5199\u5165\u6570\u636e\u3001\u63d2\u5165\u6570\u636e\u7b49\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7\u72b6\u6001\u51fd\u6570\u68c0\u67e5\u6587\u4ef6\u6d41\u7684\u72b6\u6001\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#4","title":"4. \u8bfb\u6587\u4ef6","text":"<p>\u4f7f\u7528 ifstream \u7c7b\u8bfb\u53d6\u6587\u672c\u6587\u4ef6</p> <p>\u5728C++\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 ifstream \u7c7b\u6765\u65b9\u4fbf\u5730\u8bfb\u53d6\u6587\u672c\u6587\u4ef6</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#41","title":"4.1. \u8bfb\u53d6\u65b9\u5f0f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#42","title":"4.2. \u8bfb\u6587\u4ef6\u793a\u4f8b\u4ee3\u7801","text":"<ol> <li>\u9010\u884c\u8bfb\u53d6\uff1a \u4f7f\u7528 <code>getline</code> \u51fd\u6570\u9010\u884c\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9\u3002</li> </ol> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    ifstream inputFile(\"example.txt\");\n    string line;\n\n    while (getline(inputFile, line)) {\n        cout &lt;&lt; line &lt;&lt; endl;\n    }\n\n    inputFile.close();\n    return 0;\n}\n</code></pre> <p>\u5728\u4f60\u63d0\u4f9b\u7684C++\u4ee3\u7801\u4e2d\uff0c<code>getline</code> \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a <code>istream&amp;</code> \u7c7b\u578b\u7684\u5f15\u7528\uff0c\u8868\u793a\u8f93\u5165\u6d41\u5bf9\u8c61\u3002\u5728\u8fd9\u4e2a\u7279\u5b9a\u7684\u60c5\u5883\u4e2d\uff0c<code>getline</code> \u7528\u4e8e\u4ece\u6587\u4ef6\u6d41 <code>inputFile</code> \u4e2d\u8bfb\u53d6\u4e00\u884c\u6587\u672c\uff0c\u5e76\u5c06\u8be5\u884c\u6587\u672c\u5b58\u50a8\u5230\u5b57\u7b26\u4e32\u53d8\u91cf <code>line</code> \u4e2d\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c<code>getline(inputFile, line)</code> \u7684\u4f5c\u7528\u662f\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e00\u884c\u6587\u672c\uff0c\u5c06\u5176\u5b58\u50a8\u5230 <code>line</code> \u53d8\u91cf\u4e2d\uff0c\u5e76\u8fd4\u56de\u8f93\u5165\u6d41\u5bf9\u8c61 <code>inputFile</code> \u7684\u5f15\u7528\u3002\u5982\u679c\u6210\u529f\u8bfb\u53d6\u4e00\u884c\u6587\u672c\uff0c\u6761\u4ef6 <code>while (getline(inputFile, line))</code> \u5c31\u4e3a\u771f\uff0c\u8fdb\u5165\u5faa\u73af\u4f53\u5e76\u8f93\u51fa\u5f53\u524d\u884c\u7684\u5185\u5bb9\u5230\u6807\u51c6\u8f93\u51fa\u6d41 <code>cout</code> \u4e2d\u3002\u5f53\u6587\u4ef6\u8bfb\u53d6\u5230\u672b\u5c3e\u6216\u53d1\u751f\u9519\u8bef\u65f6\uff0c<code>getline</code> \u8fd4\u56de <code>false</code>\uff0c\u5faa\u73af\u7ed3\u675f\uff0c\u7a0b\u5e8f\u5173\u95ed\u6587\u4ef6\u5e76\u8fd4\u56de 0\u3002</p> <p>\u89e3\u51b3\u4e2d\u6587\u4e71\u7801\u95ee\u9898</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n#include &lt;corecrt_io.h&gt;\n#include &lt;fcntl.h&gt;\n\nusing namespace std;\n\nint main() {\n    wifstream inputFile(\"a.txt\", ios::in | ios::binary);\n\n    // \u8bbe\u7f6e\u8f93\u5165\u6d41\u4e3a UTF-8\n    inputFile.imbue(locale(inputFile.getloc(), new codecvt_utf8&lt;wchar_t&gt;));\n\n    // \u8bbe\u7f6e\u63a7\u5236\u53f0\u8f93\u51fa\u4e3a UTF-8\n    _setmode(_fileno(stdout), _O_U8TEXT);\n\n    wstring line;\n    while (getline(inputFile, line)) {\n        wcout &lt;&lt; line &lt;&lt; endl;\n    }\n\n    inputFile.close();\n    return 0;\n}\n</code></pre> <ol> <li>\u6309\u5355\u8bcd\u8bfb\u53d6\uff1a \u4f7f\u7528\u8f93\u5165\u8fd0\u7b97\u7b26 <code>&gt;&gt;</code> \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u5355\u8bcd\u3002</li> </ol> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    ifstream inputFile(\"example.txt\");\n    string word;\n\n    while (inputFile &gt;&gt; word) {\n        cout &lt;&lt; word &lt;&lt; endl;\n    }\n\n    inputFile.close();\n    return 0;\n}\n</code></pre> <ol> <li>\u6309\u5b57\u7b26\u8bfb\u53d6\uff1a \u4f7f\u7528 <code>get</code> \u51fd\u6570\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u5b57\u7b26\u3002</li> </ol> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    ifstream inputFile(\"example.txt\");\n    char character;\n\n    while (inputFile.get(character)) {\n        cout &lt;&lt; character &lt;&lt; endl;\n    }\n\n    inputFile.close();\n    return 0;\n}\n</code></pre> <ol> <li>\u4e8c\u8fdb\u5236\u8bfb\u53d6\uff1a \u4f7f\u7528 <code>read</code> \u51fd\u6570\u6309\u5b57\u8282\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> </ol> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\n    fstream inputFile(\"laojia.txt\", ios::in | ios::binary);\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!inputFile.is_open()) {\n        cerr &lt;&lt; \"\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6\u3002\" &lt;&lt; endl;\n        return 1;\n    }\n\n    // \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\n    inputFile.seekg(0, ios::end);\n    streampos fileSize = inputFile.tellg();\n\n    // \u68c0\u67e5\u6587\u4ef6\u5927\u5c0f\u662f\u5426\u6709\u6548\n    if (fileSize &lt; 0) {\n        cerr &lt;&lt; \"\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\u65f6\u53d1\u751f\u9519\u8bef\u3002\" &lt;&lt; endl;\n        inputFile.close();\n        return 1;\n    }\n\n    // \u5c06\u6587\u4ef6\u6307\u9488\u91cd\u7f6e\u5230\u6587\u4ef6\u5f00\u5934\n    inputFile.seekg(0, ios::beg);\n\n    // \u8f93\u51fa\u6587\u4ef6\u5927\u5c0f\n    cout &lt;&lt; \"\u6587\u4ef6\u5927\u5c0f: \" &lt;&lt; fileSize &lt;&lt; \" \u5b57\u8282\" &lt;&lt; endl;\n\n    // \u5b9a\u4e49\u7f13\u51b2\u533a\u5927\u5c0f\n    const int bufferSize = 100;\n    char buffer[bufferSize];\n\n    // \u9010\u5757\u8bfb\u53d6\u6587\u4ef6\n    while (!inputFile.eof()) {\n        // \u8bfb\u53d6\u7f13\u51b2\u533a\u5927\u5c0f\u7684\u6570\u636e\u5757\n        inputFile.read(buffer, sizeof(buffer));\n\n        // \u5904\u7406\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4ee5\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u8f93\u51fa\u6bcf\u4e2a\u5b57\u8282\n        for (int i = 0; i &lt; inputFile.gcount(); ++i) {\n            cout &lt;&lt; hex &lt;&lt; static_cast&lt;int&gt;(buffer[i]) &lt;&lt; \" \";\n        }\n    }\n\n    // \u5173\u95ed\u6587\u4ef6\n    inputFile.close();\n    return 0;\n}\n</code></pre> <p>\u6bcf\u79cd\u65b9\u5f0f\u90fd\u6709\u5176\u9002\u7528\u7684\u573a\u666f\uff0c\u9009\u62e9\u5408\u9002\u7684\u8bfb\u53d6\u65b9\u5f0f\u53d6\u51b3\u4e8e\u6587\u4ef6\u5185\u5bb9\u7684\u7ed3\u6784\u548c\u5904\u7406\u9700\u6c42\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#43","title":"4.3. \u5f02\u5e38\u5904\u7406","text":"<p>\u5728\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\u65f6\uff0c\u5e94\u8be5\u8003\u8651\u5230\u6587\u4ef6\u53ef\u80fd\u4e0d\u5b58\u5728\u6216\u6253\u5f00\u5931\u8d25\u7684\u60c5\u51b5\u3002\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528\u5f02\u5e38\u5904\u7406\u6765\u6355\u83b7\u5e76\u5904\u7406\u5f02\u5e38</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\nusing namespace std;\n\nint main() {\n    try {\n        // \u5c1d\u8bd5\u6253\u5f00\u6587\u4ef6\n        ifstream inputFile(\"nonexistent.txt\");\n\n        // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n        if (!inputFile.is_open()) {\n            throw runtime_error(\"Unable to open file.\");\n        }\n\n        // \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\n        string line;\n        while (getline(inputFile, line)) {\n            cout &lt;&lt; line &lt;&lt; endl;\n        }\n\n        // \u5173\u95ed\u6587\u4ef6\n        inputFile.close();\n    } catch (const exception&amp; e) {\n        cerr &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 try \u548c catch \u5757\u6765\u6355\u83b7\u5f02\u5e38\u3002\u5982\u679c\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a runtime_error \u5f02\u5e38\uff0c\u5e76\u5728 catch \u5757\u4e2d\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\u3002\u8fd9\u6837\u53ef\u4ee5\u66f4\u597d\u5730\u5904\u7406\u6587\u4ef6\u4e0d\u5b58\u5728\u7b49\u5f02\u5e38\u60c5\u51b5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#44","title":"4.4. \u76f8\u5173\u6210\u5458\u51fd\u6570","text":"<p>\u5728C++\u4e2d\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u8bfb\u53d6\u65f6\uff0c\u5e38\u7528\u7684\u4e00\u4e9b <code>istream</code> \u548c <code>ifstream</code> \u6210\u5458\u51fd\u6570\u5305\u62ec\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#441-istream","title":"4.4.1. \u5bf9\u4e8e <code>istream</code>\uff08\u8f93\u5165\u6d41\uff09\uff1a","text":"<ol> <li> <p>operator&gt;&gt;\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u7528\u4e8e\u4ece\u6d41\u4e2d\u63d0\u53d6\u6570\u636e\u3002</li> <li>\u793a\u4f8b\uff1a<code>istreamObject &gt;&gt; variable;</code></li> </ul> </li> <li> <p>getline\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u4ece\u8f93\u5165\u6d41\u4e2d\u8bfb\u53d6\u4e00\u884c\u6570\u636e\u3002</li> <li>\u793a\u4f8b\uff1a<code>getline(istreamObject, stringVariable);</code></li> </ul> </li> <li> <p>get\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u4ece\u8f93\u5165\u6d41\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u5b57\u7b26\u3002</li> <li>\u793a\u4f8b\uff1a<code>charVariable = istreamObject.get();</code></li> </ul> </li> <li> <p>ignore\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u4ece\u8f93\u5165\u6d41\u4e2d\u5ffd\u7565\u6307\u5b9a\u6570\u91cf\u7684\u5b57\u7b26\uff0c\u6216\u8005\u76f4\u5230\u9047\u5230\u6307\u5b9a\u7684\u5206\u9694\u7b26\u3002</li> <li>\u793a\u4f8b\uff1a<code>istreamObject.ignore(100, '\\n');</code></li> </ul> </li> <li> <p>peek\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u67e5\u770b\u8f93\u5165\u6d41\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\uff0c\u4f46\u4e0d\u4ece\u6d41\u4e2d\u79fb\u9664\u5b83\u3002</li> <li>\u793a\u4f8b\uff1a<code>charVariable = istreamObject.peek();</code></li> </ul> </li> <li> <p>putback\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5c06\u4e00\u4e2a\u5b57\u7b26\u653e\u56de\u8f93\u5165\u6d41\u3002</li> <li>\u793a\u4f8b\uff1a<code>istreamObject.putback('c');</code></li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#442-ifstream","title":"4.4.2. \u5bf9\u4e8e <code>ifstream</code>\uff08\u6587\u4ef6\u8f93\u5165\u6d41\uff09\uff1a","text":"<ol> <li> <p>open\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u6253\u5f00\u6587\u4ef6\uff0c\u5173\u8054\u6587\u4ef6\u540d\u548c\u8f93\u5165\u6d41\u3002</li> <li>\u793a\u4f8b\uff1a<code>ifstreamObject.open(\"filename.txt\");</code></li> </ul> </li> <li> <p>is_open\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ifstreamObject.is_open()) { /* \u6587\u4ef6\u6210\u529f\u6253\u5f00 */ }</code></li> </ul> </li> <li> <p>close\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u5173\u95ed\u6587\u4ef6\u3002</li> <li>\u793a\u4f8b\uff1a<code>ifstreamObject.close();</code></li> </ul> </li> <li> <p>seekg\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u8bbe\u7f6e\u6587\u4ef6\u8bfb\u53d6\u4f4d\u7f6e\u3002</li> <li>\u793a\u4f8b\uff1a<code>ifstreamObject.seekg(0, ios::beg);</code></li> </ul> </li> <li> <p>tellg\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u83b7\u53d6\u5f53\u524d\u7684\u6587\u4ef6\u8bfb\u53d6\u4f4d\u7f6e\u3002</li> <li>\u793a\u4f8b\uff1a<code>streampos position = ifstreamObject.tellg();</code></li> </ul> </li> <li> <p>good\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u7684\u72b6\u6001\u662f\u5426\u6b63\u5e38\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6b63\u5e38\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ifstreamObject.good()) { /* \u6d41\u72b6\u6001\u6b63\u5e38 */ }</code></li> </ul> </li> <li> <p>bad\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u662f\u5426\u5904\u4e8e\u9519\u8bef\u72b6\u6001\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6709\u9519\u8bef\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ifstreamObject.bad()) { /* \u6d41\u5904\u4e8e\u9519\u8bef\u72b6\u6001 */ }</code></li> </ul> </li> <li> <p>fail\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u6d41\u662f\u5426\u5904\u4e8e\u5931\u8d25\u72b6\u6001\uff0c\u8fd4\u56de <code>true</code> \u8868\u793a\u6709\u5931\u8d25\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ifstreamObject.fail()) { /* \u6d41\u5904\u4e8e\u5931\u8d25\u72b6\u6001 */ }</code></li> </ul> </li> <li> <p>eof\uff1a</p> <ul> <li>\u4f5c\u7528\uff1a\u68c0\u67e5\u662f\u5426\u5df2\u5230\u8fbe\u6587\u4ef6\u672b\u5c3e\u3002</li> <li>\u793a\u4f8b\uff1a<code>if (ifstreamObject.eof()) { /* \u5df2\u5230\u8fbe\u6587\u4ef6\u672b\u5c3e */ }</code></li> </ul> </li> </ol> <p>\u8fd9\u4e9b\u51fd\u6570\u5141\u8bb8\u4f60\u5728\u8bfb\u53d6\u6587\u4ef6\u65f6\u8fdb\u884c\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u64cd\u4f5c\uff0c\u4ece\u6574\u884c\u8bfb\u53d6\u5230\u9010\u4e2a\u5b57\u7b26\u7684\u8bfb\u53d6\uff0c\u4ee5\u53ca\u5bf9\u6587\u4ef6\u7684\u72b6\u6001\u8fdb\u884c\u68c0\u67e5\u548c\u63a7\u5236\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#5","title":"5. \u6587\u4ef6\u6307\u9488\u548c\u5b9a\u4f4d","text":"<p>\u5728C++\u4e2d\uff0c\u6587\u4ef6\u6307\u9488\u662f\u7528\u4e8e\u6307\u793a\u6587\u4ef6\u8bfb\u5199\u4f4d\u7f6e\u7684\u5de5\u5177\u3002<code>seekg</code> \u7528\u4e8e\u5b9a\u4f4d\u8f93\u5165\u6587\u4ef6\u6307\u9488\uff0c\u800c <code>seekp</code> \u7528\u4e8e\u5b9a\u4f4d\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6587\u4ef6\u6307\u9488\u548c\u5b9a\u4f4d\u7684\u5e38\u89c1\u7528\u6cd5\uff1a</p> <p>seekg=\u8bfb\u53d6 seek+ get\uff0cseekp=\u5199\u5165 seek+put</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#51","title":"5.1. \u6587\u4ef6\u6307\u9488\u7684\u4f5c\u7528\u548c\u7528\u6cd5","text":"<ul> <li> <p>\u6587\u4ef6\u6307\u9488\u7684\u4f5c\u7528\uff1a</p> <ul> <li>\u6587\u4ef6\u6307\u9488\u7528\u4e8e\u6307\u793a\u6587\u4ef6\u7684\u5f53\u524d\u8bfb\u5199\u4f4d\u7f6e\u3002</li> <li>\u5141\u8bb8\u5728\u6587\u4ef6\u4e2d\u8fdb\u884c\u968f\u673a\u8bbf\u95ee\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6309\u987a\u5e8f\u8bfb\u5199\u6587\u4ef6\u3002</li> </ul> </li> <li> <p>\u6587\u4ef6\u6307\u9488\u7684\u7528\u6cd5\uff1a</p> <ul> <li><code>seekg</code> \u548c <code>seekp</code> \u51fd\u6570\u7528\u4e8e\u5b9a\u4f4d\u8f93\u5165\u548c\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u7684\u4f4d\u7f6e\u3002</li> <li><code>seekg(offset, origin)</code>\uff1a\u5c06\u8f93\u5165\u6587\u4ef6\u6307\u9488\u79fb\u52a8\u5230\u8ddd\u79bb <code>origin</code> \u5904 <code>offset</code> \u4e2a\u5b57\u8282\u7684\u4f4d\u7f6e\u3002</li> <li><code>seekp(2, ios::beg)</code>\uff1a\u5c06\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u79fb\u52a8\u5230\u8ddd\u79bb <code>origin</code> \u5904 <code>offset</code> \u4e2a\u5b57\u8282\u7684\u4f4d\u7f6e\u3002</li> <li><code>ios::beg</code> \u8868\u793a\u76f8\u5bf9\u4e8e\u6587\u4ef6\u5f00\u5934\uff0c<code>ios::cur</code> current\u8868\u793a\u76f8\u5bf9\u4e8e\u5f53\u524d\u4f4d\u7f6e\uff0c<code>ios::end</code> \u8868\u793a\u76f8\u5bf9\u4e8e\u6587\u4ef6\u672b\u5c3e\u3002</li> </ul> </li> </ul> <p>\u6587\u4ef6\u6307\u9488\u7684\u7075\u6d3b\u6027\u4f7f\u5f97\u5728\u6587\u4ef6\u4e2d\u6267\u884c\u5404\u79cd\u5b9a\u4f4d\u548c\u64cd\u4f5c\u6210\u4e3a\u53ef\u80fd\uff0c\u53ef\u4ee5\u968f\u673a\u8bbf\u95ee\u6587\u4ef6\u7684\u4e0d\u540c\u4f4d\u7f6e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6309\u7167\u987a\u5e8f\u8fdb\u884c\u8bfb\u5199\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#52-seekg","title":"5.2. \u4f7f\u7528 <code>seekg</code> \u5b9a\u4f4d\u8f93\u5165\u6587\u4ef6\u6307\u9488","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u8bfb\u53d6\n    ifstream inputFile(\"example.txt\");\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!inputFile.is_open()) {\n        cerr &lt;&lt; \"Unable to open file for reading.\" &lt;&lt; endl;\n        return 1;  // \u9000\u51fa\u7a0b\u5e8f\uff0c\u8fd4\u56de\u9519\u8bef\u72b6\u6001\u7801\n    }\n\n    // \u5b9a\u4f4d\u6587\u4ef6\u6307\u9488\u5230\u7b2c\u4e94\u4e2a\u5b57\u7b26\u5904\n    inputFile.seekg(4, ios::beg);\n\n    // \u8bfb\u53d6\u5e76\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u5f53\u524d\u4f4d\u7f6e\u540e\u7684\u5185\u5bb9\n    char ch;\n    while (inputFile.get(ch)) {\n        cout &lt;&lt; ch;\n    }\n\n    // \u5173\u95ed\u6587\u4ef6\n    inputFile.close();\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>seekg</code> \u5c06\u8f93\u5165\u6587\u4ef6\u6307\u9488\u5b9a\u4f4d\u5230\u6587\u4ef6\u7684\u7b2c\u4e94\u4e2a\u5b57\u7b26\u5904\uff0c\u7136\u540e\u8bfb\u53d6\u5e76\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u5f53\u524d\u4f4d\u7f6e\u540e\u7684\u5185\u5bb9\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#53-seekp","title":"5.3. \u4f7f\u7528 <code>seekp</code> \u5b9a\u4f4d\u8f93\u51fa\u6587\u4ef6\u6307\u9488","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main() {\n    // \u6253\u5f00\u6587\u4ef6\u8fdb\u884c\u5199\u5165\n    ofstream outputFile(\"output.txt\");\n\n    // \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\n    if (!outputFile.is_open()) {\n        cerr &lt;&lt; \"Unable to open file for writing.\" &lt;&lt; endl;\n        return 1;  // \u9000\u51fa\u7a0b\u5e8f\uff0c\u8fd4\u56de\u9519\u8bef\u72b6\u6001\u7801\n    }\n\n    // \u5b9a\u4f4d\u6587\u4ef6\u6307\u9488\u5230\u6587\u4ef6\u672b\u5c3e\n    outputFile.seekp(0, ios::end);\n\n    // \u5199\u5165\u5185\u5bb9\u5230\u6587\u4ef6\u672b\u5c3e\n    outputFile &lt;&lt; \"This text is added at the end.\" &lt;&lt; endl;\n\n    // \u5173\u95ed\u6587\u4ef6\n    outputFile.close();\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>seekp</code> \u5c06\u8f93\u51fa\u6587\u4ef6\u6307\u9488\u5b9a\u4f4d\u5230\u6587\u4ef6\u672b\u5c3e\uff0c\u7136\u540e\u5728\u6587\u4ef6\u672b\u5c3e\u5199\u5165\u5185\u5bb9\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#54","title":"5.4. \u6ce8\u610f\u4e8b\u9879","text":"<p>\u5728\u4f7f\u7528 <code>seekg</code>\u3001<code>seekp</code> \u548c <code>tellg</code> \u51fd\u6570\u65f6\uff0c\u6709\u4e00\u4e9b\u8981\u70b9\u548c\u6ce8\u610f\u4e8b\u9879\u9700\u8981\u8003\u8651\uff1a</p> <p>tell g</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#541-seekg-seekp","title":"5.4.1. <code>seekg</code> \u548c <code>seekp</code> \u8981\u70b9\uff1a","text":"<ol> <li> <p>\u5b9a\u4f4d\u4f4d\u7f6e\u548c\u57fa\u51c6\uff1a</p> <ul> <li><code>seekg(offset, origin)</code> \u7528\u4e8e\u8bbe\u7f6e\u8f93\u5165\u6d41\u7684\u8bfb\u53d6\u4f4d\u7f6e\u3002</li> <li><code>seekp(offset, origin)</code> \u7528\u4e8e\u8bbe\u7f6e\u8f93\u51fa\u6d41\u7684\u5199\u5165\u4f4d\u7f6e\u3002</li> <li><code>offset</code> \u8868\u793a\u504f\u79fb\u91cf\uff0c<code>origin</code> \u8868\u793a\u5b9a\u4f4d\u7684\u57fa\u51c6\uff0c\u53ef\u4ee5\u662f <code>std::ios::beg</code>\uff08\u6587\u4ef6\u5f00\u5934\uff09\u3001<code>std::ios::cur</code>\uff08\u5f53\u524d\u4f4d\u7f6e\uff09\u6216 <code>std::ios::end</code>\uff08\u6587\u4ef6\u672b\u5c3e\uff09\u3002</li> </ul> </li> <li> <p>\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff1a</p> <ul> <li><code>seekg</code> \u548c <code>seekp</code> \u64cd\u4f5c\u7684\u5355\u4f4d\u662f\u5b57\u8282\uff0c\u800c\u4e0d\u662f\u5b57\u7b26\u3002</li> <li>\u5982\u679c\u5728\u6587\u672c\u6a21\u5f0f\u4e0b\uff0cC++ \u6587\u4ef6\u6d41\u53ef\u80fd\u4f1a\u8003\u8651\u5b57\u7b26\u7684\u7f16\u7801\u548c\u6362\u884c\u7b26\u7684\u8f6c\u6362\u3002</li> </ul> </li> <li> <p>\u4e8c\u8fdb\u5236\u6a21\u5f0f\uff1a</p> <ul> <li>\u5982\u679c\u9700\u8981\u6309\u5b57\u8282\u8fdb\u884c\u7cbe\u786e\u5b9a\u4f4d\uff0c\u53ef\u4ee5\u4ee5\u4e8c\u8fdb\u5236\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u4f8b\u5982 <code>std::ios::binary</code>\u3002</li> <li>\u4f8b\u5982\uff1a<code>std::ofstream file(\"example.txt\", std::ios::binary);</code></li> </ul> </li> <li> <p>\u9632\u6b62\u8d8a\u754c\uff1a</p> <ul> <li>\u5728\u4f7f\u7528 <code>seekg</code> \u548c <code>seekp</code> \u4e4b\u524d\uff0c\u786e\u4fdd\u504f\u79fb\u91cf\u4e0d\u4f1a\u5bfc\u81f4\u8d8a\u754c\u3002\u53ef\u4ee5\u901a\u8fc7 <code>tellg</code> \u548c <code>tellp</code> \u83b7\u53d6\u5f53\u524d\u4f4d\u7f6e\uff0c\u7136\u540e\u5728\u8fdb\u884c\u504f\u79fb\u4e4b\u524d\u68c0\u67e5\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#542-tellg","title":"5.4.2. <code>tellg</code> \u8981\u70b9\uff1a","text":"<ol> <li> <p>\u83b7\u53d6\u5f53\u524d\u4f4d\u7f6e\uff1a</p> <ul> <li><code>tellg()</code> \u7528\u4e8e\u83b7\u53d6\u8f93\u5165\u6d41\u7684\u5f53\u524d\u8bfb\u53d6\u4f4d\u7f6e\u3002</li> <li>\u8fd4\u56de\u7c7b\u578b\u662f <code>std::streampos</code>\uff0cstream postion\u8868\u793a\u76f8\u5bf9\u4e8e\u6587\u4ef6\u5f00\u5934\u7684\u5b57\u8282\u504f\u79fb\u3002</li> </ul> </li> <li> <p>\u9002\u7528\u4e8e\u4e8c\u8fdb\u5236\u548c\u6587\u672c\u6a21\u5f0f\uff1a</p> <ul> <li><code>tellg</code> \u7684\u884c\u4e3a\u4e0d\u53d7\u6587\u4ef6\u6a21\u5f0f\uff08\u4e8c\u8fdb\u5236\u6216\u6587\u672c\uff09\u7684\u5f71\u54cd\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u5b57\u8282\u504f\u79fb\u91cf\u3002</li> </ul> </li> <li> <p>\u642d\u914d <code>**seekg**</code> \u4f7f\u7528\uff1a</p> <ul> <li><code>tellg</code> \u5e38\u5e38\u4e0e <code>seekg</code> \u4e00\u8d77\u4f7f\u7528\uff0c\u7528\u4e8e\u83b7\u53d6\u5f53\u524d\u4f4d\u7f6e\u5e76\u5728\u4ee5\u540e\u7684\u67d0\u4e2a\u65f6\u5019\u901a\u8fc7 <code>seekg</code> \u6062\u590d\u5230\u76f8\u540c\u7684\u4f4d\u7f6e\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#543","title":"5.4.3. \u6ce8\u610f\u7ec6\u8282","text":"<ol> <li> <p>\u6587\u4ef6\u6253\u5f00\u6a21\u5f0f\uff1a</p> <ul> <li>\u6253\u5f00\u6587\u4ef6\u65f6\u7684\u6a21\u5f0f\uff08\u6587\u672c\u6216\u4e8c\u8fdb\u5236\uff09\u4f1a\u5f71\u54cd <code>seekg</code> \u548c <code>seekp</code> \u7684\u884c\u4e3a\uff0c\u5c24\u5176\u662f\u5728\u6587\u672c\u6a21\u5f0f\u4e0b\u53ef\u80fd\u4f1a\u6709\u5b57\u7b26\u7f16\u7801\u548c\u6362\u884c\u7b26\u8f6c\u6362\u7684\u5f71\u54cd\u3002</li> </ul> </li> <li> <p>\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\uff1a</p> <ul> <li>\u5728\u6253\u5f00\u6587\u4ef6\u540e\uff0c\u6700\u597d\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6210\u529f\u6253\u5f00\uff0c\u4ee5\u9632\u6b62\u540e\u7eed\u7684\u6587\u4ef6\u64cd\u4f5c\u5931\u8d25\u3002</li> </ul> </li> <li> <p>\u9632\u6b62\u8d8a\u754c\u548c\u9519\u8bef\u5904\u7406\uff1a</p> <ul> <li>\u5728\u8fdb\u884c\u6587\u4ef6\u5b9a\u4f4d\u65f6\uff0c\u786e\u4fdd\u4e0d\u4f1a\u8d8a\u754c\u3002\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5 <code>tellg</code> \u6216 <code>tellp</code> \u7684\u8fd4\u56de\u503c\u6765\u8fdb\u884c\u9519\u8bef\u5904\u7406\u3002</li> </ul> </li> <li> <p>\u5173\u95ed\u6587\u4ef6\uff1a</p> <ul> <li>\u5728\u6587\u4ef6\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u4e0d\u8981\u5fd8\u8bb0\u5173\u95ed\u6587\u4ef6\u3002\u53ef\u4ee5\u4f7f\u7528 <code>close</code> \u51fd\u6570\u6765\u5173\u95ed\u6587\u4ef6\u6d41\u3002</li> </ul> </li> </ol> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u65f6\u8981\u6ce8\u610f\u6587\u4ef6\u7684\u6253\u5f00\u6a21\u5f0f\u3001\u504f\u79fb\u91cf\u7684\u8ba1\u7b97\u3001\u4e8c\u8fdb\u5236\u6a21\u5f0f\u7b49\u56e0\u7d20\uff0c\u4ee5\u786e\u4fdd\u6587\u4ef6\u64cd\u4f5c\u7684\u6b63\u786e\u6027\u548c\u53ef\u9760\u6027\u3002\u5728\u8fdb\u884c\u6587\u4ef6\u5b9a\u4f4d\u548c\u64cd\u4f5c\u65f6\uff0c\u7ecf\u5e38\u68c0\u67e5\u8fd4\u56de\u503c\uff0c\u8fdb\u884c\u9519\u8bef\u5904\u7406\u662f\u4e00\u4e2a\u826f\u597d\u7684\u5b9e\u8df5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#6","title":"6. \u5b9e\u4f8b\u9879\u76ee\uff08\u5904\u7406\u4e8c\u8fdb\u5236\u56fe\u7247\uff09","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#61","title":"6.1. \u9700\u6c42","text":"<ul> <li>\u7b2c\u4e00\u6b65\uff1a\u8bfb\u53d6\u4e00\u4e2a\u56fe\u7247</li> <li>\u7b2c\u4e8c\u6b65\uff1a\u5c06\u56fe\u7247\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\u6570\u636e \u63d0\u53d6\u51fa\u6765\u5206\u522b\u5199\u5165\u5230\u4e0d\u540cTXT\u6587\u4ef6\u4e2d\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C/#62","title":"6.2. \u9700\u6c42\u5b9e\u73b0","text":"<p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u4f8b\u9879\u76ee</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n// \u50cf\u7d20\u7ed3\u6784\u4f53\uff0c\u5305\u542b\u7ea2\u3001\u7eff\u3001\u84dd\u901a\u9053\uff08\u53ef\u6839\u636e\u9700\u8981\u6dfb\u52a0\u5176\u4ed6\u901a\u9053\uff0c\u5982\u900f\u660e\u5ea6\uff09\nstruct Pixel {\n    uint8_t red;\n    uint8_t green;\n    uint8_t blue;\n    // \u6dfb\u52a0\u5176\u4ed6\u901a\u9053\uff08\u4f8b\u5982 alpha \u901a\u9053\uff09\u65f6\uff0c\u8bf7\u5728\u6b64\u5904\u589e\u52a0\u5bf9\u5e94\u7684\u6210\u5458\u53d8\u91cf\n};\n\nint main() {\n    const char* inputImagePath = \"test.jpg\";\n\n    // \u6253\u5f00\u56fe\u50cf\u6587\u4ef6\n    ifstream imageFile(inputImagePath, ios::binary);\n    if (!imageFile.is_open()) {\n        cerr &lt;&lt; \"\u65e0\u6cd5\u6253\u5f00\u56fe\u50cf\u6587\u4ef6: \" &lt;&lt; inputImagePath &lt;&lt; endl;\n        return 1;\n    }\n\n    // \u8bfb\u53d6\u56fe\u50cf\u5934\u4ee5\u83b7\u53d6\u5c3a\u5bf8\uff08\u5047\u8bbe\u4e3a JPEG \u683c\u5f0f\uff09\n    imageFile.seekg(0, ios::end);\n    streampos fileSize = imageFile.tellg();\n    imageFile.seekg(0, ios::beg);\n\n    const int headerSize = 2; // JPEG \u5934\u90e8\u5927\u5c0f\n    const int channels = 3;   // \u5047\u8bbe\u4e3a RGB \u56fe\u50cf\n\n    if (fileSize &lt;= headerSize) {\n        cerr &lt;&lt; \"\u56fe\u50cf\u6587\u4ef6\u65e0\u6548: \" &lt;&lt; inputImagePath &lt;&lt; endl;\n        return 1;\n    }\n\n    int imageWidth = 0;\n    int imageHeight = 0;\n\n    // \u8df3\u8fc7 JPEG \u5934\u90e8\n    imageFile.ignore(headerSize);\n\n\n    // \u8bfb\u53d6\u50cf\u7d20\u6570\u636e\n    const int pixelDataSize = static_cast&lt;int&gt;(fileSize - imageFile.tellg());\n    const int pixelsCount = pixelDataSize / channels;\n\n    // \u4f7f\u7528 vector \u5b58\u50a8\u50cf\u7d20\u6570\u636e\uff0c\u5b83\u4f1a\u5728\u9500\u6bc1\u65f6\u81ea\u52a8\u91ca\u653e\u5185\u5b58\n    vector&lt;Pixel&gt; pixels(pixelsCount);\n    imageFile.read(reinterpret_cast&lt;char*&gt;(pixels.data()), pixelDataSize);\n\n    imageFile.close();\n\n    // \u5c06\u901a\u9053\u6570\u636e\u5199\u5165 TXT \u6587\u4ef6\n    for (int channel = 0; channel &lt; channels; ++channel) {\n        string outputFileName = \"channel_\" + to_string(channel + 1) + \".txt\";\n        ofstream outputFile(outputFileName);\n\n        if (!outputFile.is_open()) {\n            cerr &lt;&lt; \"\u65e0\u6cd5\u6253\u5f00\u8f93\u51fa\u6587\u4ef6: \" &lt;&lt; outputFileName &lt;&lt; endl;\n            return 1;\n        }\n\n        // \u904d\u5386\u6240\u6709\u50cf\u7d20\uff0c\u5e76\u5c06\u6307\u5b9a\u901a\u9053\u7684\u503c\u5199\u5165\u6587\u4ef6\n        for (const auto&amp; pixel : pixels) {\n            uint8_t value;\n            switch (channel) {\n            case 0:\n                value = pixel.red;\n                break;\n            case 1:\n                value = pixel.green;\n                break;\n            case 2:\n                value = pixel.blue;\n                break;\n                // \u6dfb\u52a0\u5176\u4ed6\u901a\u9053\u65f6\uff0c\u5728\u6b64\u5904\u589e\u52a0\u5bf9\u5e94 case\n            default:\n                cerr &lt;&lt; \"\u4e0d\u652f\u6301\u7684\u901a\u9053\" &lt;&lt; endl;\n                return 1;\n            }\n            outputFile &lt;&lt; static_cast&lt;int&gt;(value) &lt;&lt; \" \";\n        }\n\n        outputFile.close();\n        cout &lt;&lt; \"\u901a\u9053 \" &lt;&lt; channel + 1 &lt;&lt; \" \u6570\u636e\u5df2\u5199\u5165\u6587\u4ef6: \" &lt;&lt; outputFileName &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u771f\u5b9e\u7684\u56fe\u50cf\u5904\u7406\u53ef\u80fd\u9700\u8981\u66f4\u590d\u6742\u7684\u7b97\u6cd5\u548c\u5e93\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u56fe\u50cf\u5904\u7406\u5e93\u5982OpenCV\u7b49\u6765\u66f4\u65b9\u4fbf\u5730\u5904\u7406\u56fe\u50cf\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/","title":"\u301001\u3011\u591a\u7ebf\u7a0b\u57fa\u7840","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#1","title":"1. \u4ec0\u4e48\u7ebf\u7a0b\uff1f","text":"<p>\u7ebf\u7a0b\uff08Thread\uff09\u662f\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8fdb\u884c\u8fd0\u7b97\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u5b83\u88ab\u5305\u542b\u5728\u8fdb\u7a0b\u4e4b\u4e2d\uff0c\u662f\u8fdb\u7a0b\u4e2d\u7684\u5b9e\u9645\u8fd0\u4f5c\u5355\u4f4d\u3002\u4e00\u6761\u7ebf\u7a0b\u6307\u7684\u662f\u8fdb\u7a0b\u4e2d\u4e00\u4e2a\u5355\u4e00\u987a\u5e8f\u7684\u63a7\u5236\u6d41\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u53ef\u4ee5\u5e76\u53d1\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u6761\u7ebf\u7a0b\u5e76\u884c\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#2","title":"2. \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b\u7684\u5173\u7cfb","text":"<p>\u4e00\u4e2a\u8fdb\u7a0b\u5f53\u4e2d \u5f80\u5f80\u5305\u542b\u4e86\u591a\u4e2a\u7ebf\u7a0b\u3002 exe,\u4e3b\u7ebf\u7a0b \u63a7\u5236\u7ebf\u7a0b\u3002</p> <p>\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u8fdb\u7a0b\uff08Program\uff09\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\uff08Thread\uff09\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u5171\u4eab\u76f8\u540c\u7684\u8fdb\u7a0b\u7a7a\u95f4\uff08\u5305\u62ec\u4ee3\u7801\u6bb5\u3001\u6570\u636e\u6bb5\u3001\u5806\u7b49\uff09\u548c\u7cfb\u7edf\u8d44\u6e90\uff08\u5982\u6587\u4ef6\u63cf\u8ff0\u7b26\u548c\u4fe1\u53f7\u5904\u7406\uff09\uff0c\u4f46\u5404\u81ea\u6709\u72ec\u7acb\u7684\u6808\u7a7a\u95f4\u548c\u7ebf\u7a0b\u63a7\u5236\u5757\uff08TCB\uff09\u3002 </p> <p></p> <p>\u9505\u7089\u7237\u7237\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u6bcf\u4e00\u6761\u624b\u5c31\u53ef\u4ee5\u88ab\u770b\u6210\u4e00\u4e2a\u7ebf\u7a0b\u3002\u8fd9\u6837\u4e00\u4e2a\u4eba\u80fd\u505a\u66f4\u591a\u7684\u4e8b\u60c5\uff0c\u63d0\u9ad8\u4e86\u6574\u4e2a\u7a0b\u5e8f\u7684\u6548\u7387\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#3","title":"3. \u7ebf\u7a0b\u7684\u7279\u70b9","text":"<ol> <li>\u8f7b\u91cf\u7ea7\uff1a\u4e0e\u8fdb\u7a0b\u76f8\u6bd4\uff0c\u7ebf\u7a0b\u7684\u521b\u5efa\u548c\u9500\u6bc1\u6210\u672c\u8f83\u4f4e\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u6267\u884c\u6d41\uff0c\u5171\u4eab\u8fdb\u7a0b\u7684\u5927\u90e8\u5206\u8d44\u6e90\uff0c\u53ea\u9700\u8981\u5c11\u91cf\u7684\u989d\u5916\u5f00\u9500\u6765\u7ef4\u62a4\u7ebf\u7a0b\u7684\u72b6\u6001\u548c\u63a7\u5236\u4fe1\u606f\u3002</li> <li>\u5171\u4eab\u8d44\u6e90\uff1a\u540c\u4e00\u8fdb\u7a0b\u5185\u7684\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u548c\u5168\u5c40\u53d8\u91cf\u7b49\u8d44\u6e90\uff0c\u8fd9\u4f7f\u5f97\u7ebf\u7a0b\u95f4\u901a\u4fe1\u66f4\u52a0\u4fbf\u6377\u3002\u4f46\u662f\uff0c\u8fd9\u4e5f\u5e26\u6765\u4e86\u6570\u636e\u540c\u6b65\u548c\u4e92\u65a5\u7684\u95ee\u9898\uff0c\u9700\u8981\u4f7f\u7528\u9002\u5f53\u7684\u540c\u6b65\u673a\u5236\u6765\u907f\u514d\u6570\u636e\u7ade\u4e89\u548c\u6b7b\u9501\u7b49\u95ee\u9898\u3002</li> <li>\u5e76\u53d1\u6267\u884c\uff1a\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u5728\u540c\u4e00\u65f6\u95f4\u5185\u5e76\u53d1\u6267\u884c\uff0c\u63d0\u9ad8\u4e86\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u7ebf\u7a0b\u7684\u6267\u884c\u987a\u5e8f\u548c\u901f\u5ea6\u53d7\u5230\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u7b56\u7565\u548c\u786c\u4ef6\u6027\u80fd\u7684\u5f71\u54cd\uff0c\u56e0\u6b64\u7ebf\u7a0b\u7684\u6267\u884c\u7ed3\u679c\u53ef\u80fd\u662f\u4e0d\u786e\u5b9a\u7684\u3002</li> <li>\u72ec\u7acb\u8c03\u5ea6\uff1a\u7ebf\u7a0b\u662f\u72ec\u7acb\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5728\u591a\u7ebf\u7a0b\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u8c03\u5ea6\u5668\u6839\u636e\u7ebf\u7a0b\u7684\u4f18\u5148\u7ea7\u3001\u72b6\u6001\u7b49\u56e0\u7d20\u6765\u51b3\u5b9a\u7ebf\u7a0b\u7684\u8c03\u5ea6\u987a\u5e8f\u548c\u6267\u884c\u65f6\u95f4\u3002</li> <li>\u7cfb\u7edf\u652f\u6301\uff1a\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u901a\u5e38\u63d0\u4f9b\u4e86\u5bf9\u7ebf\u7a0b\u7684\u652f\u6301\uff0c\u5305\u62ec\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u9500\u6bc1\u3001\u8c03\u5ea6\u3001\u540c\u6b65\u7b49\u529f\u80fd\u7684API\u63a5\u53e3\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#4","title":"4. \u4ec0\u4e48\u662f\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff1f","text":"<p>\u591a\u7ebf\u7a0b\u7f16\u7a0b\u662f\u6307\u5728\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u7684\u6267\u884c\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u7ebf\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8fdb\u884c\u8fd0\u7b97\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u662f\u8fdb\u7a0b\u4e2d\u7684\u4e00\u4e2a\u5355\u4e00\u987a\u5e8f\u7684\u63a7\u5236\u6d41\u3002\u591a\u7ebf\u7a0b\u7f16\u7a0b\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u4e86\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u548c\u54cd\u5e94\u901f\u5ea6\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u80fd\u591f\u5145\u5206\u5229\u7528CPU\u8d44\u6e90\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#5","title":"5. \u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u591a\u7ebf\u7a0b\uff1f","text":"<ol> <li>\u5145\u5206\u5229\u7528CPU\u8d44\u6e90\uff1a\u591a\u7ebf\u7a0b\u7f16\u7a0b\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5e76\u53d1\u6267\u884c\uff0c\u4ece\u800c\u5145\u5206\u5229\u7528CPU\u7684\u591a\u6838\u6216\u591a\u5904\u7406\u5668\u8d44\u6e90\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u3002</li> <li>\u63d0\u9ad8\u7a0b\u5e8f\u54cd\u5e94\u901f\u5ea6\uff1a\u591a\u7ebf\u7a0b\u7f16\u7a0b\u53ef\u4ee5\u5c06\u5360\u636e\u65f6\u95f4\u957f\u7684\u4efb\u52a1\u653e\u5230\u540e\u53f0\u53bb\u6267\u884c\uff0c\u4f7f\u5f97\u54cd\u5e94\u7528\u6237\u8bf7\u6c42\u7684\u7ebf\u7a0b\u80fd\u591f\u5c3d\u5feb\u5904\u7406\u5b8c\u6210\uff0c\u7f29\u77ed\u54cd\u5e94\u65f6\u95f4\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002</li> <li>\u4fbf\u4e8e\u7a0b\u5e8f\u8bbe\u8ba1\u548c\u7ef4\u62a4\uff1a\u591a\u7ebf\u7a0b\u7f16\u7a0b\u53ef\u4ee5\u5c06\u590d\u6742\u7684\u7a0b\u5e8f\u5206\u89e3\u4e3a\u591a\u4e2a\u76f8\u5bf9\u72ec\u7acb\u7684\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u8d1f\u8d23\u5b8c\u6210\u7279\u5b9a\u7684\u4efb\u52a1\uff0c\u4ece\u800c\u7b80\u5316\u7a0b\u5e8f\u8bbe\u8ba1\u548c\u7ef4\u62a4\u7684\u96be\u5ea6\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#6-cpu","title":"6. \u7ebf\u7a0b\u4e0eCPU\u6267\u884c\u5173\u7cfb","text":"<ol> <li>CPU\u8c03\u5ea6\u5355\u4f4d\uff1a\u7ebf\u7a0b\u662fCPU\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u3002\u8fd9\u610f\u5473\u7740\u64cd\u4f5c\u7cfb\u7edf\u6839\u636e\u4e00\u5b9a\u7684\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5c06CPU\u7684\u6267\u884c\u65f6\u95f4\u5206\u914d\u7ed9\u5404\u4e2a\u7ebf\u7a0b\uff0c\u4f7f\u5f97\u5b83\u4eec\u80fd\u591f\u5e76\u53d1\u6267\u884c\u3002</li> <li>\u5355\u6838CPU\u4e0e\u591a\u7ebf\u7a0b\uff1a\u5728\u5355\u6838CPU\u4e0a\uff0c\u591a\u4e2a\u7ebf\u7a0b\u5b9e\u9645\u4e0a\u662f\u5e76\u53d1\u800c\u975e\u771f\u6b63\u7684\u540c\u65f6\u6267\u884c\u3002\u8fd9\u662f\u56e0\u4e3aCPU\u4f1a\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e4b\u95f4\u5feb\u901f\u5207\u6362\uff0c\u6bcf\u6b21\u53ea\u6267\u884c\u4e00\u4e2a\u7ebf\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u7136\u540e\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u3002\u7531\u4e8e\u5207\u6362\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u7528\u6237\u901a\u5e38\u611f\u89c9\u591a\u4e2a\u7ebf\u7a0b\u662f\u540c\u65f6\u8fd0\u884c\u7684\u3002\u8fd9\u79cd\u6280\u672f\u79f0\u4e3a\u65f6\u95f4\u7247\u8f6e\u8f6c\uff08Time Slicing\uff09\u6216\u591a\u4efb\u52a1\u5904\u7406\uff08Multitasking\uff09\u3002</li> <li>\u591a\u6838CPU\u4e0e\u591a\u7ebf\u7a0b\uff1a\u5728\u591a\u6838CPU\u4e0a\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u771f\u6b63\u5730\u540c\u65f6\u6267\u884c\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u88ab\u5206\u914d\u7ed9\u4e0d\u540c\u7684CPU\u6838\u5fc3\u53bb\u6267\u884c\u3002\u8fd9\u6837\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u590d\u6742\u7684\u8ba1\u7b97\u4efb\u52a1\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u6574\u4f53\u6027\u80fd\u3002</li> <li>\u7ebf\u7a0b\u4f18\u5148\u7ea7\uff1a\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6839\u636e\u7ebf\u7a0b\u7684\u4f18\u5148\u7ea7\u6765\u51b3\u5b9a\u6267\u884c\u987a\u5e8f\u3002\u4f18\u5148\u7ea7\u9ad8\u7684\u7ebf\u7a0b\u4f1a\u83b7\u5f97\u66f4\u591a\u7684CPU\u65f6\u95f4\u7247\uff0c\u4ece\u800c\u66f4\u9891\u7e41\u5730\u6267\u884c\u3002</li> <li>\u7ebf\u7a0b\u540c\u6b65\u4e0e\u4e92\u65a5\uff1a\u5f53\u591a\u4e2a\u7ebf\u7a0b\u9700\u8981\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u5c31\u9700\u8981\u8003\u8651\u7ebf\u7a0b\u540c\u6b65\u548c\u4e92\u65a5\u7684\u95ee\u9898\u3002\u8fd9\u662f\u56e0\u4e3a\u5982\u679c\u6ca1\u6709\u9002\u5f53\u7684\u540c\u6b65\u673a\u5236\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u540c\u65f6\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u6216\u9519\u8bef\u3002\u5e38\u7528\u7684\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\u5305\u62ec\u4e92\u65a5\u9501\u3001\u6761\u4ef6\u53d8\u91cf\u3001\u4fe1\u53f7\u91cf\u7b49\u3002</li> <li>\u7ebf\u7a0b\u4e0e\u8fdb\u7a0b\u7684\u5173\u7cfb\uff1a\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7ebf\u7a0b\u3002\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u548c\u7cfb\u7edf\u8d44\u6e90\uff0c\u4f46\u8fdb\u7a0b\u4ecd\u7136\u662f\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d\u3002\u56e0\u6b64\uff0c\u591a\u7ebf\u7a0b\u7f16\u7a0b\u53ef\u4ee5\u5728\u4e0d\u589e\u52a0\u7cfb\u7edf\u8d44\u6e90\u6d88\u8017\u7684\u60c5\u51b5\u4e0b\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6267\u884c\u6548\u7387\u3002</li> <li>\u5e76\u53d1\u4e0e\u5e76\u884c\uff1a\u5e76\u53d1\u662f\u6307\u5728\u540c\u4e00\u65f6\u95f4\u6bb5\u5185\uff0c\u591a\u4e2a\u4efb\u52a1\u4ea4\u66ff\u6267\u884c\uff1b\u800c\u5e76\u884c\u5219\u662f\u6307\u5728\u540c\u4e00\u65f6\u95f4\u70b9\uff0c\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u6267\u884c\u3002\u5728\u591a\u6838CPU\u4e0a\uff0c\u591a\u7ebf\u7a0b\u53ef\u4ee5\u5b9e\u73b0\u771f\u6b63\u7684\u5e76\u884c\u6267\u884c\uff1b\u800c\u5728\u5355\u6838CPU\u4e0a\uff0c\u591a\u7ebf\u7a0b\u53ea\u80fd\u5b9e\u73b0\u5e76\u53d1\u6267\u884c\u3002\uff08\u5728\u8ba1\u7b97\u673a\u4e2d \u5e76\u53d1\u4e5f\u6709\u540c\u65f6\u8bbf\u95ee\u7684\u610f\u601d\uff09</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/01-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/#7","title":"7. \u7ebf\u7a0b\u7684\u751f\u547d\u5468\u671f","text":"<p>\u7ebf\u7a0b\u7684\u751f\u547d\u5468\u671f\u901a\u5e38\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>\u65b0\u5efa\u72b6\u6001\uff08New\uff09\uff1a\u5f53\u7ebf\u7a0b\u5bf9\u8c61\u88ab\u521b\u5efa\u65f6\uff0c\u5b83\u5904\u4e8e\u65b0\u5efa\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u8fd8\u6ca1\u6709\u5f00\u59cb\u6267\u884c\uff0c\u4e5f\u6ca1\u6709\u5206\u914d\u4efb\u4f55\u8d44\u6e90\u3002</li> <li>\u5c31\u7eea\u72b6\u6001\uff08Runnable\uff09\uff1a\u5f53\u7ebf\u7a0b\u5bf9\u8c61\u8c03\u7528\u4e86start()\u65b9\u6cd5\u540e\uff0c\u5b83\u8fdb\u5165\u5c31\u7eea\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u5df2\u7ecf\u505a\u597d\u4e86\u6267\u884c\u7684\u51c6\u5907\uff0c\u7b49\u5f85\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u6267\u884c\u3002</li> <li>\u8fd0\u884c\u72b6\u6001\uff08Running\uff09\uff1a\u5f53\u7ebf\u7a0b\u83b7\u5f97CPU\u65f6\u95f4\u7247\u65f6\uff0c\u5b83\u8fdb\u5165\u8fd0\u884c\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u5f00\u59cb\u6267\u884c\u5176\u4efb\u52a1\uff0c\u76f4\u5230\u4efb\u52a1\u5b8c\u6210\u6216\u9047\u5230\u963b\u585e\u6761\u4ef6\u3002</li> <li>\u963b\u585e\u72b6\u6001\uff08Blocked\uff09\uff1a\u5f53\u7ebf\u7a0b\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u9047\u5230\u67d0\u4e9b\u963b\u585e\u6761\u4ef6\uff08\u5982\u7b49\u5f85I/O\u64cd\u4f5c\u5b8c\u6210\u3001\u7b49\u5f85\u83b7\u53d6\u67d0\u4e2a\u9501\u7b49\uff09\u65f6\uff0c\u5b83\u8fdb\u5165\u963b\u585e\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u6682\u505c\u6267\u884c\uff0c\u5e76\u91ca\u653eCPU\u8d44\u6e90\uff0c\u76f4\u5230\u963b\u585e\u6761\u4ef6\u6d88\u5931\u5e76\u91cd\u65b0\u83b7\u5f97CPU\u65f6\u95f4\u7247\u3002</li> <li>\u6b7b\u4ea1\u72b6\u6001\uff08Dead\uff09\uff1a\u5f53\u7ebf\u7a0b\u6267\u884c\u5b8c\u5176\u4efb\u52a1\u6216\u9047\u5230\u5f02\u5e38\u5bfc\u81f4\u9000\u51fa\u65f6\uff0c\u5b83\u8fdb\u5165\u6b7b\u4ea1\u72b6\u6001\u3002\u6b64\u65f6\uff0c\u7ebf\u7a0b\u7684\u8d44\u6e90\u88ab\u56de\u6536\uff0c\u751f\u547d\u5468\u671f\u7ed3\u675f\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/","title":"\u301002\u3011\u521b\u5efa\u591a\u7ebf\u7a0b","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#1-c","title":"1. C++\u4e2d\u7684\u591a\u7ebf\u7a0b","text":"<p>\u4f20\u7edf\u7684C++\uff08C++11\u6807\u51c6\u4e4b\u524d\uff09\u4e2d\u5e76\u6ca1\u6709\u5f15\u5165\u7ebf\u7a0b\u8fd9\u4e2a\u6982\u5ff5\uff0c\u5728C++11\u51fa\u6765\u4e4b\u524d\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728C++\u4e2d\u5b9e\u73b0\u591a\u7ebf\u7a0b\uff0c\u9700\u8981\u501f\u52a9\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\u63d0\u4f9b\u7684API\uff0c\u6bd4\u5982Linux\u7684\uff0c\u6216\u8005windows\u4e0b\u7684 \u3002</p> <p>\u7ebf\u7a0b\u76f8\u5173\u77e5\u8bc6\u56fe\u8c31</p> <p></p> <ol> <li> <p>std::thread \u7c7b\uff1a</p> <ul> <li>std::thread \u662fC++\u4e2d\u7528\u4e8e\u8868\u793a\u548c\u63a7\u5236\u7ebf\u7a0b\u7684\u4e3b\u8981\u7c7b\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001\u51fd\u6570\u5bf9\u8c61\u3001lambda\u8868\u8fbe\u5f0f\u6216\u6210\u5458\u51fd\u6570\u6307\u9488\u53ca\u5176\u5bf9\u8c61\uff09\u7ed9\u5176\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\u3002</li> <li>\u6210\u5458\u51fd\u6570\u5305\u62ec join()\uff08\u7b49\u5f85\u7ebf\u7a0b\u5b8c\u6210\uff09\u3001detach()\uff08\u5206\u79bb\u7ebf\u7a0b\uff0c\u5141\u8bb8\u5176\u72ec\u7acb\u8fd0\u884c\uff09\u3001joinable()\uff08\u68c0\u67e5\u7ebf\u7a0b\u662f\u5426\u53ef\u8fde\u63a5\uff09\u7b49\u3002</li> </ul> </li> <li> <p>\u4e92\u65a5\u91cf\u548c\u9501\uff1a</p> <ul> <li>std::mutex\uff1a\u4e92\u65a5\u91cf\uff08mutex\uff09\uff0c\u7528\u4e8e\u4fdd\u62a4\u5171\u4eab\u6570\u636e\u514d\u53d7\u591a\u4e2a\u7ebf\u7a0b\u7684\u540c\u65f6\u8bbf\u95ee\u3002</li> <li>std::lock_guard \u548c std::unique_lock\uff1a\u8fd9\u4e9b\u662f\u57fa\u4e8eRAII\uff08Resource Acquisition Is Initialization\uff09\u7684\u5c01\u88c5\u5668\uff0c\u7528\u4e8e\u81ea\u52a8\u7ba1\u7406\u4e92\u65a5\u91cf\u7684\u9501\u5b9a\u548c\u89e3\u9501\u3002</li> <li>std::timed_mutex\u3001std::recursive_mutex\u3001std::recursive_timed_mutex\uff1a\u8fd9\u4e9b\u662fstd::mutex\u7684\u53d8\u79cd\uff0c\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u529f\u80fd\uff08\u5982\u5b9a\u65f6\u9501\u5b9a\u6216\u9012\u5f52\u9501\u5b9a\uff09\u3002</li> </ul> </li> <li> <p>\u6761\u4ef6\u53d8\u91cf\uff1a</p> <ul> <li>std::condition_variable \u548c std::condition_variable_any\uff1a\u8fd9\u4e9b\u7c7b\u5141\u8bb8\u7ebf\u7a0b\u57fa\u4e8e\u67d0\u4e2a\u6761\u4ef6\u7b49\u5f85\u3002\u901a\u5e38\u4e0e\u4e92\u65a5\u91cf\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5b9e\u73b0\u540c\u6b65\u3002</li> </ul> </li> <li> <p>\u672a\u6765\u548c\u627f\u8bfa\uff08C++11\u4e2d\u5f15\u5165\uff0c\u4f46\u66f4\u5e38\u7528\u4e8e\u5f02\u6b65\u7f16\u7a0b\uff09\uff1a</p> <ul> <li>std::future\u3001std::promise\u3001std::packaged_task\uff1a\u8fd9\u4e9b\u7c7b\u548c\u51fd\u6570\u5141\u8bb8\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u5728\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u4f20\u9012\u3002</li> </ul> </li> <li> <p>\u539f\u5b50\u64cd\u4f5c\uff1a</p> <ul> <li>std::atomic\uff1a\u8fd9\u4e2a\u6a21\u677f\u7c7b\u63d0\u4f9b\u4e86\u5bf9\u7279\u5b9a\u7c7b\u578b\u7684\u539f\u5b50\u64cd\u4f5c\uff08\u5373\u4e0d\u53ef\u4e2d\u65ad\u7684\u64cd\u4f5c\uff09\u7684\u652f\u6301\u3002\u8fd9\u5bf9\u4e8e\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u5b89\u5168\u5730\u8bfb\u5199\u5171\u4eab\u6570\u636e\u7279\u522b\u6709\u7528\u3002</li> </ul> </li> <li> <p>\u5176\u4ed6\u540c\u6b65\u539f\u8bed\uff1a</p> <ul> <li>std::barrier\uff1a\u5141\u8bb8\u4e00\u7ec4\u7ebf\u7a0b\u5728\u67d0\u4e2a\u70b9\u4e0a\u540c\u6b65\u3002</li> <li>std::latch\uff1a\u5141\u8bb8\u4e00\u7ec4\u7ebf\u7a0b\u7b49\u5f85\u76f4\u5230\u67d0\u4e2a\u6570\u91cf\u7684\u4e8b\u4ef6\u53d1\u751f\u3002</li> <li>std::call_once\uff1a\u786e\u4fdd\u7ed9\u5b9a\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u5728\u5176\u751f\u547d\u5468\u671f\u5185\u53ea\u88ab\u8c03\u7528\u4e00\u6b21\u3002</li> </ul> </li> <li> <p>\u7ebf\u7a0b\u5c40\u90e8\u5b58\u50a8\uff1a</p> <ul> <li>thread_local \u5173\u952e\u5b57\uff1a\u5141\u8bb8\u53d8\u91cf\u5728\u6bcf\u4e2a\u7ebf\u7a0b\u4e2d\u90fd\u6709\u81ea\u5df1\u7684\u5b58\u50a8\u526f\u672c\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#2","title":"2. \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b","text":"<p>\u4f7f\u7528std::thread\u7c7b\uff1a \u8fd9\u662fC++11\u53ca\u4ee5\u540e\u7248\u672c\u63a8\u8350\u7684\u65b9\u5f0f\u3002\u4f60\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u4e00\u4e2astd::thread\u5bf9\u8c61\u6765\u542f\u52a8\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\uff0c\u5e76\u4f20\u9012\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001\u51fd\u6570\u5bf9\u8c61\u3001Lambda\u8868\u8fbe\u5f0f\u7b49\uff09\u4f5c\u4e3a\u7ebf\u7a0b\u7684\u6267\u884c\u4f53\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid thread_function() {  \n    std::cout &lt;&lt; \"Hello from thread!\\n\";  \n}  \n\nint main() {  \n    std::thread my_thread(thread_function);  \n    my_thread.join(); // \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#3","title":"3. \u7ebf\u7a0b\u7684\u53ef\u8c03\u7528\u5bf9\u8c61","text":"<p>\u5728C++\u4e2d\uff0c\u7ebf\u7a0b\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\uff08callable object\uff09\u53ef\u4ee5\u662f\u591a\u79cd\u7c7b\u578b\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u51fd\u6570\u6307\u9488\u3001\u6210\u5458\u51fd\u6570\u6307\u9488\u3001lambda\u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u5bf9\u8c61\uff08\u4e5f\u79f0\u4e3a\u4eff\u51fd\u6570\u6216functor\uff09\u4ee5\u53ca\u7ed1\u5b9a\u5bf9\u8c61\uff08\u901a\u8fc7std::bind\u521b\u5efa\uff09\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u793a\u4f8b\u4ee3\u7801\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#31","title":"3.1. \u51fd\u6570\u6307\u9488","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid functionPointerTask() {  \n    std::cout &lt;&lt; \"Function pointer task executed.\\n\";  \n}  \n\nint main() {  \n    std::thread t(functionPointerTask);  \n    t.join();  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#32","title":"3.2. \u6210\u5458\u51fd\u6570\u6307\u9488","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nclass MyClass {  \npublic:  \n    void memberFunctionTask() {  \n        std::cout &lt;&lt; \"Member function task executed.\\n\";  \n    }  \n};  \n\nint main() {  \n    MyClass obj;  \n    std::thread t(&amp;MyClass::memberFunctionTask, &amp;obj); // \u6ce8\u610f\uff1a\u9700\u8981\u4f20\u9012\u5bf9\u8c61\u6307\u9488  \n    t.join();  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#33-lambda","title":"3.3. Lambda\u8868\u8fbe\u5f0f","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nint main() {  \n    std::thread t([]() {  \n        std::cout &lt;&lt; \"Lambda task executed.\\n\";  \n    });  \n    t.join();  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#34","title":"3.4. \u51fd\u6570\u5bf9\u8c61\uff08\u4eff\u51fd\u6570\uff09","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nstruct Functor {  \n    void operator()() {  \n        std::cout &lt;&lt; \"Functor task executed.\\n\";  \n    }  \n};  \n\nint main() {  \n    Functor f;  \n    std::thread t(f);  \n    t.join();  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#35-stdbind","title":"3.5. \u7ed1\u5b9a\u5bf9\u8c61\uff08\u901a\u8fc7std::bind\uff09","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;functional&gt;  \n\nvoid functionWithArgs(int a, int b) {  \n    std::cout &lt;&lt; \"Function with args: \" &lt;&lt; a &lt;&lt; \", \" &lt;&lt; b &lt;&lt; \".\\n\";  \n}  \n\nint main() {  \n    auto boundFunc = std::bind(functionWithArgs, 1, 2);  \n    std::thread t(boundFunc);  \n    t.join();  \n    return 0;  \n}\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u4eceC++11\u5f00\u59cb\uff0c<code>&lt;thread&gt;</code>\u5e93\u662fC++\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u5904\u7406\u7ebf\u7a0b\u3002\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\uff0c\u4f60\u9700\u8981\u4f20\u9012\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u7ed9std::thread\u7684\u6784\u9020\u51fd\u6570\u3002\u53ef\u8c03\u7528\u5bf9\u8c61\u53ef\u4ee5\u662f\u4e0a\u8ff0\u4efb\u4f55\u4e00\u79cd\u7c7b\u578b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#4","title":"4. \u5982\u4f55\u4f20\u53c2\u6570","text":"<p>\u5728C++\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u5f53\u4f60\u60f3\u8981\u5728\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\u4e2d\u6267\u884c\u4e00\u4e2a\u53ef\u8c03\u51fd\u6570\uff08\u901a\u5e38\u901a\u8fc7std::thread\u6216\u7c7b\u4f3c\u7684\u673a\u5236\uff09\uff0c\u5e76\u4e14\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u53c2\u6570\u65f6\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5c06\u53c2\u6570\u4f20\u9012\u7ed9std::thread\u7684\u6784\u9020\u51fd\u6570\u3002\u8fd9\u91cc\u6709\u4e24\u79cd\u4e3b\u8981\u7684\u4f20\u9012\u65b9\u5f0f\uff1a\u901a\u8fc7\u503c\uff08by value\uff09\u6216\u901a\u8fc7\u5f15\u7528\uff08by reference\uff09\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#41","title":"4.1. \u901a\u8fc7\u503c\u4f20\u9012","text":"<p>\u5f53\u4f60\u901a\u8fc7\u503c\u4f20\u9012\u53c2\u6570\u65f6\uff0c\u4f60\u5b9e\u9645\u4e0a\u662f\u5728\u4f20\u9012\u53c2\u6570\u7684\u526f\u672c\u3002\u8fd9\u610f\u5473\u7740\u539f\u59cb\u6570\u636e\u548c\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u7684\u6570\u636e\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u5b9e\u4f53\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid print_sum(int a, int b) {  \n    std::cout &lt;&lt; \"Sum: \" &lt;&lt; a + b &lt;&lt; std::endl;  \n}  \n\nint main() {  \n    int x = 5;  \n    int y = 10;  \n    std::thread t(print_sum, x, y);  \n    t.join();  \n    return 0;  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cx\u548cy\u7684\u503c\u88ab\u590d\u5236\u5e76\u4f20\u9012\u7ed9\u65b0\u7ebf\u7a0b\u4e2d\u7684print_sum\u51fd\u6570\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#42","title":"4.2. \u901a\u8fc7\u5f15\u7528\u4f20\u9012","text":"<p>\u5f53\u4f60\u901a\u8fc7\u5f15\u7528\u4f20\u9012\u53c2\u6570\u65f6\uff0c\u4f60\u5b9e\u9645\u4e0a\u662f\u5728\u4f20\u9012\u5bf9\u539f\u59cb\u6570\u636e\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u6570\u636e\u7684\u526f\u672c\u3002\u8fd9\u610f\u5473\u7740\u539f\u59cb\u6570\u636e\u548c\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u7684\u6570\u636e\u662f\u540c\u4e00\u4e2a\u5b9e\u4f53\u3002\u4f46\u662f\uff0c\u8fd9\u9700\u8981\u5c0f\u5fc3\u5904\u7406\uff0c\u56e0\u4e3a\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u4fee\u6539\u4e86\u6570\u636e\uff0c\u8fd9\u4e9b\u4fee\u6539\u5c06\u5728\u6240\u6709\u5f15\u7528\u8be5\u6570\u636e\u7684\u7ebf\u7a0b\u4e2d\u53ef\u89c1\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid modify_and_print(int&amp; a, int&amp; b) {  \n    a += 5;  \n    b += 10;  \n    std::cout &lt;&lt; \"Modified values: \" &lt;&lt; a &lt;&lt; \", \" &lt;&lt; b &lt;&lt; std::endl;  \n}  \n\nint main() {  \n    int x = 5;  \n    int y = 10;  \n    std::thread t(modify_and_print, std::ref(x), std::ref(y));  \n    t.join();  \n    std::cout &lt;&lt; \"Values in main thread: \" &lt;&lt; x &lt;&lt; \", \" &lt;&lt; y &lt;&lt; std::endl; // Will print 10, 20  \n    return 0;  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86std::ref\u6765\u5305\u88c5x\u548cy\u7684\u5f15\u7528\uff0c\u5e76\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9\u65b0\u7ebf\u7a0b\u4e2d\u7684modify_and_print\u51fd\u6570\u3002\u7531\u4e8e\u6211\u4eec\u4fee\u6539\u4e86\u8fd9\u4e9b\u503c\uff0c\u6240\u4ee5\u539f\u59cb\u53d8\u91cfx\u548cy\u5728main\u7ebf\u7a0b\u4e2d\u7684\u503c\u4e5f\u88ab\u6539\u53d8\u4e86\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#43","title":"4.3. \u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u7ebf\u7a0b\u5b89\u5168\u6027\uff1a\u5f53\u901a\u8fc7\u5f15\u7528\u4f20\u9012\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u786e\u4fdd\u5bf9\u8fd9\u4e9b\u6570\u636e\u7684\u8bbf\u95ee\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002\u5426\u5219\uff0c\u4f60\u53ef\u80fd\u4f1a\u9047\u5230\u6570\u636e\u7ade\u4e89\u548c\u5176\u4ed6\u5e76\u53d1\u95ee\u9898\u3002</li> <li>\u8d44\u6e90\u7ba1\u7406\uff1a\u786e\u4fdd\u4f60\u6b63\u786e\u5730\u7ba1\u7406\u4e86\u6240\u6709\u5728\u65b0\u7ebf\u7a0b\u4e2d\u521b\u5efa\u6216\u4f7f\u7528\u7684\u8d44\u6e90\u3002\u7279\u522b\u662f\uff0c\u5982\u679c\u65b0\u7ebf\u7a0b\u4f7f\u7528\u4e86\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u6216\u5176\u4ed6\u8d44\u6e90\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u8fd9\u4e9b\u8d44\u6e90\u5728\u4e0d\u518d\u9700\u8981\u65f6\u88ab\u6b63\u786e\u91ca\u653e\u3002</li> <li>\u5f02\u5e38\u5904\u7406\uff1a\u65b0\u7ebf\u7a0b\u4e2d\u629b\u51fa\u7684\u5f02\u5e38\u4e0d\u4f1a\u81ea\u52a8\u4f20\u64ad\u5230\u521b\u5efa\u8be5\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u3002\u56e0\u6b64\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u5728\u65b0\u7ebf\u7a0b\u4e2d\u6b63\u786e\u5730\u5904\u7406\u6240\u6709\u53ef\u80fd\u7684\u5f02\u5e38\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#5-joindetach","title":"5. join\u4e0e\u7684detach\u7684\u533a\u522b","text":"<ol> <li> <p>join\u65b9\u6cd5\uff1a</p> <ul> <li>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528join\u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff08\u8c03\u7528join\u7684\u7ebf\u7a0b\uff09\uff0c\u76f4\u5230\u88ab\u8c03\u7528\u7684\u7ebf\u7a0b\uff08\u5373join\u7684\u53c2\u6570\u6240\u6307\u5b9a\u7684\u7ebf\u7a0b\uff09\u6267\u884c\u5b8c\u6210\u3002</li> <li>\u8fd9\u53ef\u4ee5\u786e\u4fdd\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u5b50\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u4e4b\u524d\u4e0d\u4f1a\u7ed3\u675f\u4e3b\u7ebf\u7a0b\u7684\u6267\u884c\u3002</li> <li>\u4f7f\u7528join\u53ef\u4ee5\u786e\u4fdd\u7ebf\u7a0b\u7684\u8d44\u6e90\u88ab\u6b63\u786e\u5730\u56de\u6536\u548c\u6e05\u7406\uff0c\u56e0\u4e3a\u5f53join\u8fd4\u56de\u65f6\uff0c\u7ebf\u7a0b\u5bf9\u8c61\u6240\u4ee3\u8868\u7684\u7ebf\u7a0b\u5df2\u7ecf\u5b8c\u6210\u4e86\u6267\u884c\u3002</li> <li>\u5982\u679c\u5728\u5b50\u7ebf\u7a0b\u672a\u6267\u884c\u5b8c\u6bd5\u7684\u60c5\u51b5\u4e0b\u5c1d\u8bd5\u9500\u6bc1\u5176\u5bf9\u5e94\u7684std::thread\u5bf9\u8c61\uff0c\u800c\u8be5\u5bf9\u8c61\u53c8\u672a\u88abjoin\u6216detach\uff0c\u5219\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u7ec8\u6b62\u3002</li> </ul> </li> <li> <p>detach\u65b9\u6cd5\uff1a</p> <ul> <li>\u5f53\u8c03\u7528detach\u65b9\u6cd5\u65f6\uff0c\u7ebf\u7a0b\u5c06\u4e0e\u5176\u6240\u5c5e\u7684\u7ebf\u7a0b\uff08\u5373\u8c03\u7528detach\u7684\u7ebf\u7a0b\uff09\u5206\u79bb\uff0c\u5e76\u5728\u540e\u53f0\u72ec\u7acb\u8fd0\u884c\u3002</li> <li>\u4e00\u65e6\u7ebf\u7a0b\u88ab\u5206\u79bb\uff0c\u5b83\u5c06\u4e0d\u518d\u53d7\u5230\u4e3b\u7ebf\u7a0b\u7684\u63a7\u5236\uff0c\u4e3b\u7ebf\u7a0b\u4e5f\u4e0d\u518d\u9700\u8981\u8c03\u7528join\u6765\u7b49\u5f85\u5b83\u7684\u7ed3\u675f\u3002</li> <li>\u5206\u79bb\u7684\u7ebf\u7a0b\u4f1a\u81ea\u52a8\u56de\u6536\u5176\u8d44\u6e90\uff0c\u5f53\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5176\u8d44\u6e90\u4f1a\u88ab\u7cfb\u7edf\u56de\u6536\u3002</li> <li>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e00\u65e6\u7ebf\u7a0b\u88ab\u5206\u79bb\uff0c\u5c31\u65e0\u6cd5\u518d\u5bf9\u5176\u8fdb\u884cjoin\u64cd\u4f5c\uff0c\u56e0\u4e3a\u6b64\u65f6\u7ebf\u7a0b\u5df2\u7ecf\u8131\u79bb\u4e86\u4e3b\u7ebf\u7a0b\u7684\u63a7\u5236\u3002</li> </ul> </li> </ol> <p>join\u548cdetach\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u5bf9\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\u540e\u7684\u5904\u7406\u65b9\u5f0f\u4e0d\u540c\u3002join\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\u5e76\u7b49\u5f85\u5b50\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\uff0c\u800cdetach\u5219\u4f1a\u4f7f\u7ebf\u7a0b\u5728\u540e\u53f0\u72ec\u7acb\u8fd0\u884c\u5e76\u81ea\u52a8\u56de\u6536\u8d44\u6e90\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#6","title":"6. \u4e00\u4e2a\u7ebf\u7a0b\u5305\u542b\u4ec0\u4e48\u4e1c\u897f","text":"<p>\u4e00\u4e2a\u7ebf\u7a0b\u901a\u5e38\u5305\u542b\u4ee5\u4e0b\u7ec4\u6210\u90e8\u5206\uff1a</p> <ol> <li>\u7ebf\u7a0bID\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u7cfb\u7edf\u4e2d\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\uff0c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u7684\u7ebf\u7a0b\u3002</li> <li>\u7ebf\u7a0b\u6808\uff08Thread Stack\uff09\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u81ea\u5df1\u79c1\u6709\u7684\u6808\u7a7a\u95f4\uff0c\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u8c03\u7528\u65f6\u7684\u53c2\u6570\u548c\u8fd4\u56de\u5730\u5740\u7b49\u4fe1\u606f\u3002\u7ebf\u7a0b\u6808\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u5206\u914d\uff0c\u5e76\u5728\u7ebf\u7a0b\u7ed3\u675f\u65f6\u91ca\u653e\u3002</li> <li>\u7ebf\u7a0b\u72b6\u6001\uff1a\u7ebf\u7a0b\u7684\u72b6\u6001\u63cf\u8ff0\u4e86\u7ebf\u7a0b\u5f53\u524d\u7684\u751f\u547d\u5468\u671f\u9636\u6bb5\uff0c\u4f8b\u5982\u65b0\u5efa\uff08New\uff09\u3001\u5c31\u7eea\uff08Ready\uff09\u3001\u8fd0\u884c\uff08Running\uff09\u3001\u963b\u585e\uff08Blocked\uff09\u548c\u7ec8\u6b62\uff08Terminated\uff09\u7b49\u3002</li> <li>\u7ebf\u7a0b\u4e0a\u4e0b\u6587\uff08Thread Context\uff09\uff1a\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5305\u542b\u4e86\u7ebf\u7a0b\u6267\u884c\u65f6\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5982CPU\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u7684\u503c\u3001\u6808\u6307\u9488\u3001\u4fe1\u53f7\u63a9\u7801\u7b49\u3002\u5f53\u7ebf\u7a0b\u88ab\u5207\u6362\u65f6\uff0c\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u4f1a\u88ab\u4fdd\u5b58\uff0c\u4ee5\u4fbf\u5728\u4e4b\u540e\u6062\u590d\u6267\u884c\u65f6\u80fd\u591f\u7ee7\u7eed\u6267\u884c\u3002</li> <li>\u7ebf\u7a0b\u51fd\u6570\uff08Thread Function\uff09\uff1a\u7ebf\u7a0b\u51fd\u6570\u662f\u7ebf\u7a0b\u6267\u884c\u7684\u5177\u4f53\u903b\u8f91\uff0c\u5b83\u5305\u542b\u4e86\u7ebf\u7a0b\u9700\u8981\u6267\u884c\u7684\u4ee3\u7801\u3002\u7ebf\u7a0b\u51fd\u6570\u901a\u5e38\u662f\u7531\u7528\u6237\u5b9a\u4e49\u7684\uff0c\u5e76\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u7ebf\u7a0b\u521b\u5efa\u51fd\u6570\u3002</li> <li>\u7ebf\u7a0b\u4f18\u5148\u7ea7\uff1a\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u6839\u636e\u7ebf\u7a0b\u4f18\u5148\u7ea7\u6765\u51b3\u5b9a\u8c03\u5ea6\u54ea\u4e2a\u7ebf\u7a0b\u6267\u884c\u3002\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u7ebf\u7a0b\u4f1a\u83b7\u5f97\u66f4\u591a\u7684\u5904\u7406\u5668\u65f6\u95f4\u3002</li> <li>\u7ebf\u7a0b\u5c5e\u6027\uff1a\u7ebf\u7a0b\u5c5e\u6027\u7528\u4e8e\u8bbe\u7f6e\u7ebf\u7a0b\u7684\u4e00\u4e9b\u7279\u6027\uff0c\u5982\u6808\u5927\u5c0f\u3001\u5b89\u5168\u5c5e\u6027\u7b49\u3002\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u8bbe\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5176\u4ed6\u7ebf\u7a0b\u7ba1\u7406\u51fd\u6570\u8fdb\u884c\u4fee\u6539\u3002</li> <li>\u7ebf\u7a0b\u540c\u6b65\u539f\u8bed\uff1a\u4e3a\u4e86\u534f\u8c03\u591a\u4e2a\u7ebf\u7a0b\u7684\u6267\u884c\uff0cC++\u63d0\u4f9b\u4e86\u591a\u79cd\u7ebf\u7a0b\u540c\u6b65\u539f\u8bed\uff0c\u5982\u4e92\u65a5\u9501\uff08Mutex\uff09\u3001\u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09\u3001\u4fe1\u53f7\u91cf\uff08Semaphore\uff09\u7b49\u3002\u8fd9\u4e9b\u539f\u8bed\u53ef\u4ee5\u5e2e\u52a9\u7ebf\u7a0b\u5728\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\u907f\u514d\u51b2\u7a81\u548c\u7ade\u6001\u6761\u4ef6\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#7-this_thread","title":"7. this_thread","text":"<p>td::this_thread \u662f C++ \u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e0e\u5f53\u524d\u7ebf\u7a0b\u76f8\u5173\u7684\u51fd\u6570\u548c\u5de5\u5177\u3002\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0cstd::this_thread \u547d\u540d\u7a7a\u95f4\u4e0b\u7684\u51fd\u6570\u5141\u8bb8\u6211\u4eec\u83b7\u53d6\u548c\u64cd\u4f5c\u5f53\u524d\u7ebf\u7a0b\u7684\u7279\u5b9a\u5c5e\u6027\uff0c\u5982\u83b7\u53d6\u7ebf\u7a0bID\u3001\u4f7f\u5f53\u524d\u7ebf\u7a0b\u4f11\u7720\u7b49\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b std::this_thread \u547d\u540d\u7a7a\u95f4\u4e0b\u5e38\u7528\u7684\u51fd\u6570\u53ca\u5176\u4f7f\u7528\u65b9\u6cd5\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#1-id","title":"1. \u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684ID\uff1a","text":"<p>\u4f7f\u7528 std::this_thread::get_id() \u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684ID\u3002\u8fd9\u4e2aID\u662f\u4e00\u4e2a std::thread::id \u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u7ebf\u7a0b\u662f\u5426\u662f\u540c\u4e00\u4e2a\u7ebf\u7a0b\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid thread_function() {  \n    std::thread::id id = std::this_thread::get_id();  \n    std::cout &lt;&lt; \"Thread ID: \" &lt;&lt; id &lt;&lt; std::endl;  \n}  \n\nint main() {  \n    std::thread t(thread_function);  \n    t.join();  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/02-%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B/#2_1","title":"2.\u4f7f\u5f53\u524d\u7ebf\u7a0b\u4f11\u7720\uff1a","text":"<p>std::this_thread::sleep_for() \u548c std::this_thread::sleep_until() \u51fd\u6570\u53ef\u4ee5\u4f7f\u5f53\u524d\u7ebf\u7a0b\u4f11\u7720\u4e00\u6bb5\u65f6\u95f4\u3002\u524d\u8005\u4f7f\u7ebf\u7a0b\u4f11\u7720\u6307\u5b9a\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u5982\u6beb\u79d2\u3001\u79d2\u7b49\uff09\uff0c\u540e\u8005\u5219\u4f7f\u7ebf\u7a0b\u4f11\u7720\u5230\u6307\u5b9a\u7684\u65f6\u95f4\u70b9\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;chrono&gt;  \n\nint main() {  \n    std::this_thread::sleep_for(std::chrono::seconds(1)); // \u4f11\u77201\u79d2  \n    std::cout &lt;&lt; \"Woke up after 1 second!\" &lt;&lt; std::endl;  \n\n    // \u4f11\u7720\u5230\u67d0\u4e2a\u65f6\u95f4\u70b9  \n    auto wakeup_time = std::chrono::system_clock::now() + std::chrono::seconds(2);  \n    std::this_thread::sleep_until(wakeup_time);  \n    std::cout &lt;&lt; \"Woke up at the specified time!\" &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/","title":"\u301003\u3011\u7ebf\u7a0b\u540c\u6b65\u4e0emutex","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#1","title":"1. \u4ec0\u4e48\u7ebf\u7a0b\u540c\u6b65\uff1f","text":"<p>\u7ebf\u7a0b\u540c\u6b65\uff08Thread Synchronization\uff09\u662f\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u5b83\u6307\u7684\u662f\u901a\u8fc7\u4e00\u5b9a\u7684\u673a\u5236\u6765\u63a7\u5236\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6267\u884c\u987a\u5e8f\uff0c\u4ee5\u786e\u4fdd\u5b83\u4eec\u80fd\u591f\u6b63\u786e\u5730\u8bbf\u95ee\u548c\u4fee\u6539\u5171\u4eab\u8d44\u6e90\uff0c\u4ece\u800c\u907f\u514d\u6570\u636e\u7ade\u4e89\u548c\u4e0d\u4e00\u81f4\u6027\u7684\u95ee\u9898\u3002</p> <p>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\u8bbf\u95ee\u548c\u4fee\u6539\u5171\u4eab\u8d44\u6e90\uff08\u5982\u53d8\u91cf\u3001\u6570\u636e\u7ed3\u6784\u6216\u6587\u4ef6\u7b49\uff09\u3002\u5982\u679c\u6ca1\u6709\u9002\u5f53\u7684\u540c\u6b65\u673a\u5236\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u4ee5\u4e0d\u53ef\u9884\u6d4b\u7684\u987a\u5e8f\u6267\u884c\uff0c\u5bfc\u81f4\u6570\u636e\u7ade\u4e89\u3001\u810f\u8bfb\u3001\u810f\u5199\u6216\u5176\u4ed6\u4e0d\u53ef\u9884\u671f\u7684\u884c\u4e3a\u3002\u7ebf\u7a0b\u540c\u6b65\u7684\u76ee\u6807\u5c31\u662f\u786e\u4fdd\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6709\u5e8f\u6267\u884c\uff0c\u4ee5\u7ef4\u62a4\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u5b8c\u6574\u6027\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u540c\u6b65\u5462\uff1f</p> <p>Note</p> <p>\u5982\u679c\uff0c\u5728\u540c\u4e00\u4e2a\u65f6\u523b\uff0c\u4ec5\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u67d0\u4e2a\u53d8\u91cf\uff08\u4e34\u754c\u8d44\u6e90\uff09\uff0c\u4e0d\u4f1a\u5b58\u5728\u810f\u6570\u636e\u7684\u95ee\u9898\uff0c\u4f46\u662f \uff0c\u5982\u679c\u540c\u4e00\u65f6\u523b\u6709\u591a\u4e2a\u7ebf\u7a0b\uff0c\u540c\u65f6\u8bbf\u95ee\u540c\u4e00\u4e2a\u4e34\u754c\u8d44\u6e90\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5b58\u5728\u95ee\u9898\u3002\u5982\u4f55\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u8fd9\u5c31\u63d0\u51fa\u4e86\u201c\u7ebf\u7a0b\u540c\u6b65\u201d\u8fd9\u4e2a\u6982\u5ff5\u3002  </p> <p>\u6211\u4eec\u6709\u6ca1\u6709\u4ec0\u4e48\u529e\u6cd5\uff0c\u63a7\u5236\u8fd9\u4e9b\u7ebf\u7a0b\u5bf9\u4e34\u754c\u8d44\u6e90\u7684\u8bbf\u95ee\u5462\uff1f\u60f3\u4e2a\u4ec0\u4e48\u529e\u6cd5\u624d\u80fd\u4fdd\u969c\u4ed6\u4eec\u4e4b\u95f4\u4e0d\u4e71\u5957\u5462\uff1f\uff0c\u8fd9\u5c31\u8be5\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\u767b\u573a\u4e86</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#2","title":"2. \u7ebf\u7a0b\u540c\u6b65\u673a\u5236","text":"<p>C++\u4e2d\u63d0\u4f9b\u4e86\u591a\u79cd\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\uff0c\u5e38\u7528\u7684\u65b9\u6cd5\u5305\u62ec\uff1a</p> <ol> <li>\u4e92\u65a5\u9501\uff08Mutex\uff09\uff1a\u4e92\u65a5\u9501\u662f\u6700\u5e38\u7528\u7684\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\u4e4b\u4e00\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u60f3\u8981\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u5b83\u9996\u5148\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u4e0e\u8be5\u8d44\u6e90\u5173\u8054\u7684\u4e92\u65a5\u9501\u3002\u5982\u679c\u9501\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u5219\u8be5\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff0c\u76f4\u5230\u9501\u88ab\u91ca\u653e\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u5728\u4efb\u4f55\u65f6\u5019\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u3002</li> <li>\u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09\uff1a\u6761\u4ef6\u53d8\u91cf\u7528\u4e8e\u4f7f\u7ebf\u7a0b\u5728\u6ee1\u8db3\u67d0\u4e2a\u6761\u4ef6\u4e4b\u524d\u7b49\u5f85\u3002\u5b83\u901a\u5e38\u4e0e\u4e92\u65a5\u9501\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u4fbf\u5728\u7b49\u5f85\u6761\u4ef6\u6210\u7acb\u65f6\u91ca\u653e\u9501\uff0c\u5e76\u5728\u6761\u4ef6\u6210\u7acb\u65f6\u91cd\u65b0\u83b7\u53d6\u9501\u3002\u8fd9\u5141\u8bb8\u7ebf\u7a0b\u5728\u7b49\u5f85\u671f\u95f4\u4e0d\u5360\u7528\u9501\uff0c\u4ece\u800c\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd\u3002</li> <li>\u4fe1\u53f7\u91cf\uff08Semaphore\uff09\uff1a\u4fe1\u53f7\u91cf\u662f\u4e00\u79cd\u901a\u7528\u7684\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\uff0c\u5b83\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u4f46\u9650\u5236\u540c\u65f6\u8bbf\u95ee\u7684\u7ebf\u7a0b\u6570\u91cf\u3002\u4fe1\u53f7\u91cf\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u7528\u4e8e\u8868\u793a\u53ef\u7528\u8d44\u6e90\u7684\u6570\u91cf\u3002\u5f53\u7ebf\u7a0b\u9700\u8981\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5b83\u4f1a\u5c1d\u8bd5\u51cf\u5c11\u8ba1\u6570\u5668\u7684\u503c\uff1b\u5f53\u7ebf\u7a0b\u91ca\u653e\u8d44\u6e90\u65f6\uff0c\u5b83\u4f1a\u589e\u52a0\u8ba1\u6570\u5668\u7684\u503c\u3002\u5f53\u8ba1\u6570\u5668\u7684\u503c\u5c0f\u4e8e\u96f6\u65f6\uff0c\u5c1d\u8bd5\u83b7\u53d6\u8d44\u6e90\u7684\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\u3002</li> <li>\u539f\u5b50\u64cd\u4f5c\uff08Atomic Operations\uff09\uff1a\u539f\u5b50\u64cd\u4f5c\u662f\u4e0d\u53ef\u4e2d\u65ad\u7684\u64cd\u4f5c\uff0c\u5373\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6253\u65ad\u3002C++11\u53ca\u4ee5\u540e\u7684\u7248\u672c\u63d0\u4f9b\u4e86<code>&lt;atomic&gt;</code>\u5934\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u7cfb\u5217\u539f\u5b50\u64cd\u4f5c\u7684\u51fd\u6570\u548c\u7c7b\u3002\u8fd9\u4e9b\u539f\u5b50\u64cd\u4f5c\u53ef\u4ee5\u7528\u4e8e\u5b89\u5168\u5730\u66f4\u65b0\u5171\u4eab\u6570\u636e\uff0c\u800c\u65e0\u9700\u4f7f\u7528\u4e92\u65a5\u9501\u7b49\u540c\u6b65\u673a\u5236\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#3-mutex","title":"3. \u4e92\u65a5\u9501mutex","text":"<p>\u4e92\u65a5\uff08Mutex\uff09\u662f\u4e00\u79cd\u540c\u6b65\u673a\u5236\uff0c\u7528\u4e8e\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\uff0c\u9632\u6b62\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u548c\u4fee\u6539\u540c\u4e00\u8d44\u6e90\uff0c\u4ece\u800c\u5f15\u53d1\u6570\u636e\u7ade\u4e89\uff08data race\uff09\u548c\u4e0d\u4e00\u81f4\u6027\u3002</p> <p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u60f3\u8981\u8bbf\u95ee\u67d0\u4e2a\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u5b83\u9996\u5148\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u4e0e\u8be5\u8d44\u6e90\u5173\u8054\u7684\u4e92\u65a5\u9501\uff08mutex\uff09\u3002\u5982\u679c\u4e92\u65a5\u9501\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff08\u5373\u88ab\u9501\u5b9a\uff09\uff0c\u5219\u8be5\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff0c\u76f4\u5230\u4e92\u65a5\u9501\u88ab\u91ca\u653e\uff08\u5373\u88ab\u89e3\u9501\uff09\u3002\u4e00\u65e6\u7ebf\u7a0b\u6210\u529f\u83b7\u53d6\u5230\u4e92\u65a5\u9501\uff0c\u5b83\u5c31\u53ef\u4ee5\u5b89\u5168\u5730\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u5e76\u5728\u8bbf\u95ee\u5b8c\u6210\u540e\u91ca\u653e\u4e92\u65a5\u9501\uff0c\u4ee5\u4fbf\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u53d6\u8be5\u9501\u5e76\u8bbf\u95ee\u8d44\u6e90\u3002 </p> <pre><code>                   \u60f3\u60f3\u94f6\u884c\u7684ATM\u53d6\u6b3e\u673a\u989d\u5ea6\u6d41\u7a0b\u3002\n</code></pre> <p>\u4e92\u65a5\u9501\u901a\u5e38\u5177\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7279\u6027\uff1a</p> <ol> <li>\u4e92\u65a5\u6027\uff1a\u4efb\u610f\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6301\u6709\u67d0\u4e2a\u4e92\u65a5\u9501\u3002</li> <li>\u539f\u5b50\u6027\uff1a\u5bf9\u4e92\u65a5\u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e\u64cd\u4f5c\u662f\u539f\u5b50\u7684\uff0c\u5373\u5728\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u65f6\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6253\u65ad\u3002</li> <li>\u53ef\u91cd\u5165\u6027\uff1a\u67d0\u4e9b\u4e92\u65a5\u9501\u7c7b\u578b\uff08\u5982\u9012\u5f52\u9501\uff09\u5141\u8bb8\u540c\u4e00\u7ebf\u7a0b\u591a\u6b21\u83b7\u53d6\u540c\u4e00\u4e2a\u9501\uff0c\u4f46\u901a\u5e38\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5b83\u4f1a\u589e\u52a0\u6b7b\u9501\u7684\u98ce\u9669\u3002</li> <li>\u975e\u963b\u585e\u6027\uff1a\u867d\u7136\u4e92\u65a5\u9501\u672c\u8eab\u662f\u4e00\u79cd\u963b\u585e\u6027\u540c\u6b65\u673a\u5236\uff0c\u4f46\u67d0\u4e9b\u9ad8\u7ea7\u5b9e\u73b0\uff08\u5982\u5c1d\u8bd5\u9501\uff09\u5141\u8bb8\u7ebf\u7a0b\u5728\u65e0\u6cd5\u7acb\u5373\u83b7\u53d6\u9501\u65f6\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u88ab\u963b\u585e\u3002</li> </ol> <p>\u54b1\u4eec\u5148\u6765\u770b\u4e00\u6bb5\u4ee3\u7801</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\n// \u5171\u4eab\u53d8\u91cf\uff0c\u6ca1\u6709\u4f7f\u7528\u4e92\u65a5\u9501\u6216\u539f\u5b50\u64cd\u4f5c  \nint counter = 0;\n\n// \u7ebf\u7a0b\u51fd\u6570\uff0c\u5bf9counter\u8fdb\u884c\u9012\u589e\u64cd\u4f5c  \nvoid increment_counter(int times) {\n    for (int i = 0; i &lt; times; ++i) {\n        // \u8fd9\u662f\u4e00\u4e2a\u6570\u636e\u7ade\u4e89\uff0c\u56e0\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\u6267\u884c\u8fd9\u884c\u4ee3\u7801  \n        counter++;\n    }\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9counter\u9012\u589e10000\u6b21  \n    std::thread t1(increment_counter, 100000);\n    std::thread t2(increment_counter, 100000);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u5b8c\u6210  \n    t1.join();\n    t2.join();\n\n    // \u8f93\u51fa\u7ed3\u679c\uff0c\u53ef\u80fd\u4e0d\u662f20000  \n    std::cout &lt;&lt; \"\u6700\u7ec8\u7684\u7ed3\u679c: \" &lt;&lt; counter &lt;&lt; std::endl;\n\n    // \u91cd\u7f6ecounter\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b21\u53ef\u80fd\u7684\u5b9e\u9a8c  \n    counter = 0;\n\n    return 0;\n}\n</code></pre> <p>\u518d\u6765\u770b\u770b\u4f7f\u7528mutex\u7684\u60c5\u51b5(\u5bf9\u4e0a\u9762\u7684\u4f8b\u5b50\u8fdb\u884c\u6539\u8fdb)</p> <p>\u5728C++\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>&lt;mutex&gt;</code>\u5934\u6587\u4ef6\u4e2d\u7684std::mutex\u7c7b\u6765\u521b\u5efa\u548c\u7ba1\u7406\u4e92\u65a5\u9501\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;\n\nusing namespace std;\n\n// \u5171\u4eab\u53d8\u91cf\nint counter = 0;\nmutex mymutex; //\u5b9a\u4e49\u4e00\u4e2a\u4e92\u65a5\u9501\n\n// \u7ebf\u7a0b\u51fd\u6570\uff0c\u5bf9counter\u8fdb\u884c\u9012\u589e\u64cd\u4f5c  \nvoid increment_counter(int times) {\n    for (int i = 0; i &lt; times; ++i) {\n\n        mymutex.lock();//\u5728\u8bbf\u95ee\u4e34\u754c\u53d8\u91cf\u4e4b\u524d\u5148\u52a0\u9501\n        counter++;\n        mymutex.unlock();//\u8bbf\u95ee\u5b8c\u4e86\u89e3\u9501\uff0c\u628a\u9501\u4ea4\u51fa\n    }\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9counter\u9012\u589e10000\u6b21  \n    std::thread t1(increment_counter, 100000);\n    std::thread t2(increment_counter, 100000);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u5b8c\u6210  \n    t1.join();\n    t2.join();\n\n    // \u8f93\u51fa\u7ed3\u679c \n    std::cout &lt;&lt; \"\u6700\u7ec8\u7684\u7ed3\u679c: \" &lt;&lt; counter &lt;&lt; std::endl;\n\n\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#4-lockunlock","title":"4. lock\u4e0eunlock","text":"<p>\u5728C++\u4e2d\uff0c\u4f7f\u7528std::mutex\u7684lock()\u548cunlock()\u51fd\u6570\u6765\u7ba1\u7406\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u786e\u4fdd\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u8d44\u6e90\u7684\u540c\u6b65\u8bbf\u95ee\u3002</p> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u4ee5\u53ca\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#41","title":"4.1. \u5982\u4f55\u4f7f\u7528","text":"<p>1 .\u521b\u5efa\u4e92\u65a5\u91cf\uff1a     \u9996\u5148\uff0c\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2astd::mutex\u5bf9\u8c61\u3002</p> <p><pre><code>std::mutex mtx;\n</code></pre> 2.\u9501\u5b9a\u4e92\u65a5\u91cf\uff1a     \u5728\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u4e4b\u524d\uff0c\u4f7f\u7528lock()\u51fd\u6570\u9501\u5b9a\u4e92\u65a5\u91cf\u3002</p> <pre><code>mtx.lock();  \n// \u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\n</code></pre> <p>3.\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff1a     \u5728\u4e92\u65a5\u91cf\u88ab\u9501\u5b9a\u7684\u671f\u95f4\uff0c\u4f60\u53ef\u4ee5\u5b89\u5168\u5730\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u56e0\u4e3a\u5176\u4ed6\u8bd5\u56fe\u9501\u5b9a\u8be5\u4e92\u65a5\u91cf\u7684\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\u3002</p> <p>4.\u89e3\u9501\u4e92\u65a5\u91cf\uff1a     \u4e00\u65e6\u5b8c\u6210\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u4f7f\u7528unlock()\u51fd\u6570\u89e3\u9501\u4e92\u65a5\u91cf\u3002</p> <pre><code>// \u5b8c\u6210\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee  \nmtx.unlock();\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#42","title":"4.2. \u6ce8\u610f\u4e8b\u9879","text":"<p>1 .\u6b7b\u9501\uff1a     \u5982\u679c\u7ebf\u7a0b\u5728\u6301\u6709\u4e92\u65a5\u91cf\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\u4e86\u4e00\u4e2a\u963b\u585e\u64cd\u4f5c\uff08\u5982\u53e6\u4e00\u4e2a\u4e92\u65a5\u91cf\u7684lock()\uff09\uff0c\u5e76\u4e14\u8fd9\u4e2a\u963b\u585e\u64cd\u4f5c\u6c38\u8fdc\u4e0d\u4f1a\u5b8c\u6210\uff08\u56e0\u4e3a\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u5b83\u9700\u8981\u7684\u8d44\u6e90\uff09\uff0c\u90a3\u4e48\u5c31\u4f1a\u53d1\u751f\u6b7b\u9501\u3002\u907f\u514d\u6b7b\u9501\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u59cb\u7ec8\u6309\u7167\u76f8\u540c\u7684\u987a\u5e8f\u9501\u5b9a\u4e92\u65a5\u91cf\uff0c\u6216\u8005\u4f7f\u7528\u66f4\u9ad8\u7ea7\u7684\u540c\u6b65\u539f\u8bed\uff0c\u5982std::lock_guard\u6216std::unique_lock\uff0c\u5b83\u4eec\u53ef\u4ee5\u81ea\u52a8\u7ba1\u7406\u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e\u3002</p> <p>2.\u5f02\u5e38\u5b89\u5168\uff1a     \u5982\u679c\u5728\u9501\u5b9a\u4e92\u65a5\u91cf\u540e\u629b\u51fa\u5f02\u5e38\uff0c\u90a3\u4e48\u5fc5\u987b\u786e\u4fdd\u4e92\u65a5\u91cf\u88ab\u6b63\u786e\u89e3\u9501\u3002\u4f7f\u7528std::lock_guard\u6216std::unique_lock\u53ef\u4ee5\u81ea\u52a8\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u6790\u6784\u65f6\u4f1a\u91ca\u653e\u9501\u3002</p> <p>\u50cf\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;  \n\nstd::mutex mtx; // \u5168\u5c40\u4e92\u65a5\u91cf  \n\nvoid safe_function() {  \n    std::lock_guard&lt;std::mutex&gt; lock(mtx); // \u9501\u5b9a\u4e92\u65a5\u91cf  \n    // \u5728\u8fd9\u91cc\u6267\u884c\u9700\u8981\u4e92\u65a5\u8bbf\u95ee\u7684\u4ee3\u7801  \n    // \u5982\u679c\u629b\u51fa\u5f02\u5e38\uff0clock_guard \u4f1a\u5728\u6790\u6784\u65f6\u81ea\u52a8\u89e3\u9501 mtx  \n    try {  \n        // \u6a21\u62df\u4e00\u4e9b\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\u7684\u4ee3\u7801  \n        if (/* some condition that might cause an exception */) {  \n            throw std::runtime_error(\"An error occurred!\");  \n        }  \n        // ... \u5176\u4ed6\u4ee3\u7801 ...  \n    } catch (const std::exception&amp; e) {  \n        // \u5904\u7406\u5f02\u5e38\uff0c\u4f46\u4e0d\u9700\u8981\u62c5\u5fc3\u89e3\u9501\uff0c\u56e0\u4e3a lock_guard \u4f1a\u81ea\u52a8\u5904\u7406  \n        std::cerr &lt;&lt; \"Caught exception: \" &lt;&lt; e.what() &lt;&lt; std::endl;  \n    }  \n    // lock_guard \u5728\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u81ea\u52a8\u89e3\u9501 mtx  \n}  \n\nint main() {  \n    // \u5047\u8bbe\u8fd9\u91cc\u6709\u4e00\u4e9b\u7ebf\u7a0b\u8c03\u7528 safe_function()  \n    // \u7531\u4e8e\u4f7f\u7528\u4e86 lock_guard\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u5426\u629b\u51fa\u5f02\u5e38\uff0cmtx \u90fd\u4f1a\u88ab\u6b63\u786e\u89e3\u9501  \n    // ...  \n\n    return 0;  \n}\n</code></pre> <p>3..\u4e0d\u8981\u624b\u52a8\u89e3\u9501\u672a\u9501\u5b9a\u7684\u4e92\u65a5\u91cf\uff1a     \u5728\u8c03\u7528unlock()\u4e4b\u524d\uff0c\u5fc5\u987b\u786e\u4fdd\u4e92\u65a5\u91cf\u5df2\u7ecf\u88ablock()\u9501\u5b9a\u3002\u5426\u5219\uff0c\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002</p> <p>4..\u4e0d\u8981\u591a\u6b21\u9501\u5b9a\u540c\u4e00\u4e92\u65a5\u91cf\uff1a     \u5bf9\u4e8e\u975e\u9012\u5f52\u4e92\u65a5\u91cf\uff08\u5982std::mutex\uff09\uff0c\u4e0d\u8981\u5728\u540c\u4e00\u7ebf\u7a0b\u4e2d\u591a\u6b21\u9501\u5b9a\u5b83\u3002\u8fd9\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u3002\u5982\u679c\u9700\u8981\u9012\u5f52\u9501\u5b9a\uff0c\u8bf7\u4f7f\u7528std::recursive_mutex\u3002</p> <p>5..\u4f7f\u7528RAII\u7ba1\u7406\u9501\uff1a     \u4f7f\u7528RAII\uff08\u8d44\u6e90\u83b7\u53d6\u5373\u521d\u59cb\u5316\uff09\u539f\u5219\u6765\u7ba1\u7406\u9501\u7684\u751f\u547d\u5468\u671f\uff0c\u901a\u8fc7std::lock_guard\u6216std::unique_lock\u6765\u786e\u4fdd\u9501\u5728\u4e0d\u9700\u8981\u65f6\u81ea\u52a8\u91ca\u653e\u3002</p> <p>6..\u907f\u514d\u957f\u65f6\u95f4\u6301\u6709\u9501\uff1a     \u5c3d\u91cf\u7f29\u77ed\u6301\u6709\u9501\u7684\u65f6\u95f4\uff0c\u4ee5\u51cf\u5c11\u7ebf\u7a0b\u4e4b\u95f4\u7684\u4e89\u7528\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u5e76\u53d1\u6027\u80fd\u3002</p> <p>7..\u8003\u8651\u4f7f\u7528\u66f4\u9ad8\u7ea7\u7684\u540c\u6b65\u539f\u8bed\uff1a     \u9664\u4e86std::mutex\u4e4b\u5916\uff0cC++\u6807\u51c6\u5e93\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u66f4\u9ad8\u7ea7\u7684\u540c\u6b65\u539f\u8bed\uff0c\u5982\u6761\u4ef6\u53d8\u91cf\uff08std::condition_variable\uff09\u3001\u8bfb\u5199\u9501\uff08std::shared_mutex\uff09\u7b49\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u7279\u5b9a\u573a\u666f\u4e0b\u63d0\u4f9b\u66f4\u9ad8\u6548\u7684\u540c\u6b65\u673a\u5236\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8Emutex/#5-mutex4","title":"5. mutex\u76844\u79cd\u7c7b\u578b","text":"<p>\u5728C++\u4e2d\uff0c\u7279\u522b\u662f\u4eceC++11\u5f00\u59cb\uff0cstd::mutex\uff08\u4e92\u65a5\u91cf\uff09\u53ca\u5176\u76f8\u5173\u7c7b\u578b\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7528\u4e8e\u540c\u6b65\u591a\u7ebf\u7a0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u673a\u5236\u3002\u4ee5\u4e0b\u662fstd::mutex\u7684\u56db\u79cd\u4e3b\u8981\u7c7b\u578b\u53ca\u5176\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li> <p>std::mutex\uff1a</p> <ul> <li>\u8fd9\u662f\u6700\u57fa\u672c\u7684\u4e92\u65a5\u91cf\u7c7b\u578b\u3002</li> <li>\u5b83\u4e0d\u5141\u8bb8\u9012\u5f52\u9501\u5b9a\uff0c\u5373\u540c\u4e00\u7ebf\u7a0b\u4e0d\u80fd\u591a\u6b21\u9501\u5b9a\u540c\u4e00\u4e2astd::mutex\u3002\u5982\u679c\u5c1d\u8bd5\u8fd9\u6837\u505a\uff0c\u7a0b\u5e8f\u7684\u884c\u4e3a\u5c06\u662f\u672a\u5b9a\u4e49\u7684\uff0c\u901a\u5e38\u4f1a\u5bfc\u81f4\u6b7b\u9501\u3002</li> <li>\u5b83\u63d0\u4f9b\u4e86\u57fa\u672c\u7684\u9501\u5b9a\uff08lock()\uff09\u548c\u89e3\u9501\uff08unlock()\uff09\u64cd\u4f5c\u3002</li> <li>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u9501\u5b9a\u4e86\u4e00\u4e2astd::mutex\u65f6\uff0c\u4efb\u4f55\u5176\u4ed6\u5c1d\u8bd5\u9501\u5b9a\u8be5\u4e92\u65a5\u91cf\u7684\u7ebf\u7a0b\u90fd\u5c06\u88ab\u963b\u585e\uff0c\u76f4\u5230\u539f\u59cb\u7ebf\u7a0b\u8c03\u7528unlock()\u91ca\u653e\u5b83\u3002</li> </ul> </li> <li> <p>std::recursive_mutex\uff1a</p> <ul> <li>\u8fd9\u662f\u4e00\u4e2a\u9012\u5f52\uff08\u6216\u53ef\u91cd\u5165\uff09\u4e92\u65a5\u91cf\u3002</li> <li>\u4e0estd::mutex\u4e0d\u540c\uff0c\u5b83\u5141\u8bb8\u540c\u4e00\u7ebf\u7a0b\u591a\u6b21\u9501\u5b9a\u540c\u4e00\u4e2a\u4e92\u65a5\u91cf\u3002\u8fd9\u53ef\u4ee5\u7528\u4e8e\u9700\u8981\u9012\u5f52\u8bbf\u95ee\u53d7\u4fdd\u62a4\u8d44\u6e90\u7684\u573a\u666f\u3002</li> <li>\u7ebf\u7a0b\u5728\u6bcf\u6b21\u9501\u5b9a\u65f6\u90fd\u9700\u8981\u5bf9\u5e94\u5730\u89e3\u9501\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u7684\u540c\u6b65\u3002</li> <li>\u5982\u679c\u7ebf\u7a0b\u6ca1\u6709\u6b63\u786e\u5339\u914d\u5176\u9501\u5b9a\u548c\u89e3\u9501\u64cd\u4f5c\uff08\u5373\u89e3\u9501\u6b21\u6570\u5c11\u4e8e\u9501\u5b9a\u6b21\u6570\uff09\uff0c\u5219\u5176\u4ed6\u7ebf\u7a0b\u4ecd\u7136\u4f1a\u88ab\u963b\u585e\u3002</li> </ul> </li> </ol> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;  \n\nstd::recursive_mutex mtx;  \n\nvoid recursive_function() {  \n    mtx.lock(); // \u7b2c\u4e00\u6b21\u9501\u5b9a  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" locked mutex.\\n\";  \n\n    // \u9012\u5f52\u9501\u5b9a  \n    mtx.lock(); // \u540c\u4e00\u7ebf\u7a0b\u53ef\u4ee5\u591a\u6b21\u9501\u5b9a  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" locked mutex recursively.\\n\";  \n\n    mtx.unlock(); // \u89e3\u9501\u4e00\u6b21  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" unlocked mutex once.\\n\";  \n\n    mtx.unlock(); // \u518d\u6b21\u89e3\u9501  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" unlocked mutex again.\\n\";  \n}  \n\nint main() {  \n    std::thread t1(recursive_function);  \n    t1.join();  \n\n    return 0;  \n}\n</code></pre> <p>3.std::timed_mutex\uff1a</p> <ul> <li>\u8fd9\u662f\u4e00\u4e2a\u5e26\u65f6\u9650\u7684\u4e92\u65a5\u91cf\u3002</li> <li>\u9664\u4e86\u63d0\u4f9b\u57fa\u672c\u7684\u9501\u5b9a\u548c\u89e3\u9501\u64cd\u4f5c\u5916\uff0c\u5b83\u8fd8\u5141\u8bb8\u7ebf\u7a0b\u5c1d\u8bd5\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u9501\u5b9a\u4e92\u65a5\u91cf\u3002</li> <li>\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u65e0\u6cd5\u83b7\u53d6\u9501\uff0ctry_lock_for()\u6216try_lock_until()\u51fd\u6570\u5c06\u8fd4\u56de\u5931\u8d25\uff0c\u800c\u7ebf\u7a0b\u5219\u4e0d\u4f1a\u88ab\u963b\u585e\u3002</li> <li>\u8fd9\u5bf9\u4e8e\u5b9e\u73b0\u6709\u8d85\u65f6\u673a\u5236\u7684\u8d44\u6e90\u8bbf\u95ee\u975e\u5e38\u6709\u7528\u3002bokerface</li> </ul> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;chrono&gt;  \n#include &lt;mutex&gt;  \n\nstd::timed_mutex mtx;  \n\nvoid timed_lock_function() {  \n    auto start = std::chrono::high_resolution_clock::now();  //\u9ad8\u7cbe\u5ea6\u7684\u65f6\u95f4\n\n    // \u5c1d\u8bd5\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\u83b7\u53d6\u9501  \n    if (mtx.try_lock_for(std::chrono::seconds(2))) {  \n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" locked mutex.\\n\";  \n        std::this_thread::sleep_for(std::chrono::seconds(3));  \n        mtx.unlock();  \n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" unlocked mutex.\\n\";  \n    } else {  \n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" failed to lock mutex within 2 seconds.\\n\";  \n    }  \n\n    auto end = std::chrono::high_resolution_clock::now();  \n    std::chrono::duration&lt;double&gt; diff = end - start;  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" took \" &lt;&lt; diff.count() &lt;&lt; \" s.\\n\";  \n}  \n\nint main() {  \n    std::thread t1(timed_lock_function);  \n    std::thread t2(timed_lock_function);  \n\n    t1.join();  \n    t2.join();  \n\n    return 0;  \n}\n</code></pre> <p>try_lock_until()\u7684\u7528\u6cd5\u793a\u4f8b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n\nstd::timed_mutex mtx;\n\nvoid try_lock_until_function() {\n    auto now = std::chrono::steady_clock::now();\n    auto deadline = now + std::chrono::seconds(2);\n\n    // \u5c1d\u8bd5\u5728\u622a\u6b62\u65f6\u95f4\u4e4b\u524d\u83b7\u53d6\u9501\n    if (mtx.try_lock_until(deadline)) {\n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" locked mutex.\\n\";\n        std::this_thread::sleep_for(std::chrono::seconds(3));\n        mtx.unlock();\n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" unlocked mutex.\\n\";\n    } else {\n        std::cout &lt;&lt; \"Thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" failed to lock mutex before deadline.\\n\";\n    }\n}\n\nint main() {\n    std::thread t1(try_lock_until_function);\n    std::thread t2(try_lock_until_function);\n\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre> <p>4.std::recursive_timed_mutex\uff1a</p> <ul> <li>\u8fd9\u662f\u4e00\u4e2a\u9012\u5f52\u4e14\u5e26\u65f6\u9650\u7684\u4e92\u65a5\u91cf\u3002</li> <li>\u5b83\u7ed3\u5408\u4e86std::recursive_mutex\u548cstd::timed_mutex\u7684\u7279\u6027\u3002</li> <li>\u5b83\u5141\u8bb8\u540c\u4e00\u7ebf\u7a0b\u591a\u6b21\u9501\u5b9a\u540c\u4e00\u4e2a\u4e92\u65a5\u91cf\uff0c\u5e76\u63d0\u4f9b\u4e86\u5e26\u65f6\u9650\u7684\u9501\u5b9a\u5c1d\u8bd5\u529f\u80fd\u3002</li> <li>\u8fd9\u4f7f\u5f97\u7ebf\u7a0b\u5728\u9700\u8981\u9012\u5f52\u8bbf\u95ee\u8d44\u6e90\u4e14\u5e0c\u671b\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u83b7\u5f97\u9501\u7684\u573a\u666f\u4e2d\u66f4\u52a0\u7075\u6d3b\u3002</li> </ul> <p>\u5728\u4f7f\u7528\u8fd9\u4e9b\u4e92\u65a5\u91cf\u7c7b\u578b\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u6b63\u786e\u5730\u7ba1\u7406\u9501\u5b9a\u548c\u89e3\u9501\u64cd\u4f5c\uff0c\u4ee5\u907f\u514d\u6b7b\u9501\u548c\u5176\u4ed6\u540c\u6b65\u95ee\u9898\u3002\u540c\u65f6\uff0c\u6839\u636e\u5177\u4f53\u7684\u5e94\u7528\u573a\u666f\u548c\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u4e92\u65a5\u91cf\u7c7b\u578b\u4e5f\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/04-lock_guard/","title":"\u301004\u3011lock_guard","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/04-lock_guard/#1-lock_guard","title":"1. \u5565\u662flock_guard?","text":"<pre><code>mutex mymutex\nRAII \u667a\u80fd\u6307\u9488\n</code></pre> <p>lock_guard \u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c \u4f4d\u4e8e<code>&lt;mutex&gt;</code> \u5934\u6587\u4ef6\u4e2d \u3002 \u5b83\u7b26\u5408 RAII\u98ce\u683c\uff0c\u5b83\u4e3b\u8981\u7528\u4e8e\u7ba1\u7406 mutex \u7684\u751f\u547d\u5468\u671f\uff0c\u786e\u4fdd mutex \u5728\u9501\u5b9a\u7684\u4f5c\u7528\u57df\u5185\u88ab\u6b63\u786e\u5730\u4e0a\u9501\u548c\u89e3\u9501\u3002\u5b83\u4e3b\u8981\u89e3\u51b3\u4e86\u624b\u52a8\u7ba1\u7406 mutex \u9501\u5b9a\u548c\u89e3\u9501\u65f6\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u5982\uff1a\u5fd8\u8bb0\u89e3\u9501\u3001\u5f02\u5e38\u60c5\u51b5\u4e0b\u672a\u89e3\u9501\u7b49\u95ee\u9898\u3002</p> <p>\u4f60\u53ef\u4ee5\u7b80\u5355\u628a\u8fd9\u4e2a\u4e1c\u897f\uff0c\u770b\u6210\u662f\u5bf9mutex\u7684\u4e00\u79cd\u7ba1\u7406\u5c01\u88c5\uff0c\u5c31\u662f\u8bf4\u7528\u539f\u751f\u7684mutex\uff0c\u6709\u4e9b\u65f6\u5019\u4e0d\u987a\u624b\uff0c\u6709\u7455\u75b5\u3002\u4f7f\u7528lock_guard \u6bd4\u8f83\u7701\u5fc3\uff0c\u5b83\u6765\u66f4\u597d\u5730\u7ba1\u7406\u4f60\u7684mutex\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/04-lock_guard/#2-lock_guard","title":"2. \u4e3a\u4ec0\u4e48\u9700\u8981lock_guard?","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/04-lock_guard/#3-lock_guard","title":"3. \u600e\u4e48\u5f00\u5b9a\u4e49lock_guard\uff1f","text":"<p>\u54b1\u4eec\u5728VS\u4e2d\u4e00\u6b65\u4e00\u6b65\u6765\u4f53\u9a8c\u4e00\u4e0b lock_guard\u7684\u4f7f\u7528</p> <pre><code>#include &lt;iostream&gt;\n#include&lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;mutex&gt;\n\nusing namespace std;\n\nint mycount = 0;\nmutex mymutex;\n\nvoid sum()\n{\n    lock_guard&lt;mutex&gt; lock(mymutex); //\u6211\u4fdd\u62a4\u7684\u662fmutex\u7c7b\u578b\u7684\u9501\uff0c\u5b83\u662fmymutex\n    for (size_t i = 0; i &lt; 10000; i++)\n    {\n        mycount++;\n    }\n    //\u8d85\u51fa\u751f\u547d\u5468\u671f \u81ea\u52a8\u8fdb\u884c\u89e3\u9501\n\n}\n\nint main()\n{\n    vector&lt;thread&gt; mybox;\n    for (size_t i = 0; i &lt; 10; i++)\n    {\n        mybox.emplace_back(sum);\n    }\n\n    for (thread&amp; t:mybox)\n    {\n        t.join();\n    }\n\n    //\u6700\u7ec8\u7ed3\u679c\n    cout &lt;&lt; mycount &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre> <pre><code>#include &lt;mutex&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nstd::mutex mtx;\n\nvoid print_thread_id(int id) {\n    std::lock_guard&lt;std::mutex&gt; lock(mtx); // \u5728\u6784\u9020\u51fd\u6570\u4e2d\u9501\u5b9amutex\n    std::cout &lt;&lt; \"Thread #\" &lt;&lt; id &lt;&lt; '\\n';\n} // \u5728\u6790\u6784\u51fd\u6570\u4e2d\u81ea\u52a8\u89e3\u9501mutex\n\nint main() {\n    std::thread threads[10];\n    for (int i = 0; i &lt; 10; ++i) {\n        threads[i] = std::thread(print_thread_id, i + 1);\n    }\n\n    for (auto&amp; th : threads) {\n        th.join();\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/04-lock_guard/#4-lock_guard","title":"4. lock_guard\u7684\u7279\u6027","text":"<ol> <li> <p>RAII\uff08Resource Acquisition Is Initialization\uff09\uff1a</p> <ul> <li>std::lock_guard \u5728\u6784\u9020\u65f6\u9501\u5b9a mutex\uff0c\u5728\u6790\u6784\u65f6\u89e3\u9501 mutex\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff08\u5305\u62ec\u5f02\u5e38\uff09 mutex \u90fd\u80fd\u88ab\u6b63\u786e\u89e3\u9501\u3002</li> </ul> </li> <li> <p>\u7b80\u5355\u6613\u7528\uff1a</p> <ul> <li>\u4f7f\u7528 std::lock_guard \u53ef\u4ee5\u7b80\u5316\u4ee3\u7801\uff0c\u53ea\u9700\u5728\u9700\u8981\u9501\u5b9a\u7684\u4ee3\u7801\u5757\u5185\u521b\u5efa\u4e00\u4e2a std::lock_guard \u5bf9\u8c61\u5373\u53ef\uff0c\u65e0\u9700\u624b\u52a8\u8c03\u7528 lock() \u548c unlock()\u3002</li> </ul> </li> <li> <p>\u5f02\u5e38\u5b89\u5168\uff1a</p> <ul> <li>\u7531\u4e8e std::lock_guard \u7684\u6790\u6784\u51fd\u6570\u81ea\u52a8\u89e3\u9501 mutex\uff0c\u6240\u4ee5\u5373\u4f7f\u5728\u9501\u5b9a\u671f\u95f4\u629b\u51fa\u5f02\u5e38\uff0cmutex \u4e5f\u80fd\u88ab\u6b63\u786e\u89e3\u9501\u3002</li> </ul> </li> <li> <p>\u4e0d\u53ef\u590d\u5236\u548c\u4e0d\u53ef\u79fb\u52a8\uff1a</p> <ul> <li>std::lock_guard \u662f\u4e0d\u53ef\u590d\u5236\u548c\u4e0d\u53ef\u79fb\u52a8\u7684\u3002\u8fd9\u786e\u4fdd\u4e86 mutex \u9501\u7684\u72ec\u5360\u6027\uff0c\u9632\u6b62\u9501\u88ab\u610f\u5916\u590d\u5236\u6216\u79fb\u52a8\u5bfc\u81f4\u7684\u9501\u5b9a\u72b6\u6001\u4e0d\u4e00\u81f4\u3002</li> </ul> </li> </ol> <pre><code>std::lock_guard&lt;std::mutex&gt; lock1(mtx);\n// std::lock_guard&lt;std::mutex&gt; lock2 = lock1; // \u7f16\u8bd1\u9519\u8bef\uff0c\u7981\u6b62\u590d\u5236\n// std::lock_guard&lt;std::mutex&gt; lock3(std::move(lock1)); // \u7f16\u8bd1\u9519\u8bef\uff0c\u7981\u6b62\u79fb\u52a8\n</code></pre> <p>lock_guard\u7c7b\u6a21\u677f</p> <pre><code>// lock_guard\u7c7b\u6a21\u677f\uff0c\u7528\u4e8e\u7ba1\u7406\u4e92\u65a5\u9501\u7684\u52a0\u9501\u548c\u89e3\u9501\u64cd\u4f5c\ntemplate&lt;class _Mutex&gt;\nclass lock_guard\n{\npublic:\n    // \u6784\u9020\u51fd\u6570\uff0c\u5728\u521b\u5efalock_guard\u5bf9\u8c61\u65f6\u81ea\u52a8\u4e0a\u9501\u4e92\u65a5\u9501_Mtx\n    explicit lock_guard(_Mutex&amp; _Mtx)\n        : _MyMutex(_Mtx)\n    {\n        _MyMutex.lock(); // \u4f7f\u7528\u4e92\u65a5\u9501\u7684lock()\u6210\u5458\u51fd\u6570\u8fdb\u884c\u4e0a\u9501\u64cd\u4f5c\n    }\n\n    // \u6784\u9020\u51fd\u6570\uff0c\u5728\u5df2\u7ecf\u4e0a\u9501\u7684\u60c5\u51b5\u4e0b\u521b\u5efalock_guard\u5bf9\u8c61\n    // \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u9700\u8981\u518d\u6b21\u4e0a\u9501\u4e92\u65a5\u9501\uff0c\u56e0\u6b64\u8be5\u6784\u9020\u51fd\u6570\u7a7a\u5b9e\u73b0\n    lock_guard(_Mutex&amp; _Mtx, adopt_lock_t)\n        : _MyMutex(_Mtx)\n    {}\n\n    // \u6790\u6784\u51fd\u6570\uff0c\u5728lock_guard\u5bf9\u8c61\u9500\u6bc1\u65f6\u81ea\u52a8\u89e3\u9501\u4e92\u65a5\u9501_Mtx\n    // \u4f7f\u7528\u4e92\u65a5\u9501\u7684unlock()\u6210\u5458\u51fd\u6570\u8fdb\u884c\u89e3\u9501\u64cd\u4f5c\n    ~lock_guard() _NOEXCEPT\n    {\n        _MyMutex.unlock();\n    }\n\n    // \u7981\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u548c\u62f7\u8d1d\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u786e\u4fddlock_guard\u5bf9\u8c61\u4e0d\u53ef\u62f7\u8d1d\n    lock_guard(const lock_guard&amp;) = delete;\n    lock_guard&amp; operator=(const lock_guard&amp;) = delete;\n\nprivate:\n    _Mutex&amp; _MyMutex; // \u5f15\u7528\u7c7b\u578b\u6210\u5458\u53d8\u91cf\uff0c\u7528\u4e8e\u4fdd\u5b58\u4e92\u65a5\u9501\u7684\u5f15\u7528\n};\n</code></pre> <p>Warn</p> <ul> <li>\u6ce8\u610f\uff1alock_guard\u7981\u7528\u4e86\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u548c\u62f7\u8d1d\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u610f\u5473\u7740\u5b83\u4e0d\u652f\u6301\u62f7\u8d1d\u8bed\u4e49\uff0c\u53ea\u80fd\u901a\u8fc7\u76f4\u63a5\u521b\u5efa\u5bf9\u8c61\u6765\u4f7f\u7528\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u591a\u4e2alock_guard\u5bf9\u8c61\u540c\u65f6\u7ba1\u7406\u540c\u4e00\u4e2a\u4e92\u65a5\u9501\u800c\u5bfc\u81f4\u7684\u9519\u8bef\u884c\u4e3a\u3002</li> </ul> <p>5.\u5355\u4e00\u8d23\u4efb\uff1a</p> <ul> <li>std::lock_guard \u4ec5\u7528\u4e8e\u7ba1\u7406 mutex \u7684\u9501\u5b9a\u548c\u89e3\u9501\uff0c\u4e0d\u652f\u6301\u5176\u4ed6\u590d\u6742\u7684\u9501\u5b9a\u7b56\u7565\u3002\u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u9501\u5b9a\u9700\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528 std::unique_lock\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/","title":"\u301005\u3011unique_lock","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#1-unique_lock","title":"1. \u4e3a\u4ec0\u4e48\u4f1a\u6709unique_lock?","text":"<p>\u56e0\u4e3amutex \u5728\u7ba1\u7406\u65b9\u9762\u6709\u7455\u75b5\uff0c\u56e0\u6b64\u51fa\u73b0\u4e86\u4e00\u4e2a\u4e92\u65a5\u91cf\u5c01\u88c5\u5668lock_guard\u6765\u667a\u80fd\u5730\u7ba1\u7406mutex\u3002\u800clock_guard\u53ea\u662f\u7b80\u5355\u7684\u7ba1\u7406\uff0c\u529f\u80fd\u6bd4\u8f83\u5f31\uff0c\u6709\u7455\u75b5\u3002\u56e0\u6b64\u9700\u8981\u641e\u51fa\u6765\u4e00\u4e2a\u529f\u80fd\u66f4\u5f3a\u5927\u7684\u4e1c\u897f\u51fa\u6765\u3002\u800c\u8fd9\u4e2a\u4e1c\u897f\u5c31\u662funique_lock \u3002</p> <p>\u672c\u8d28\u4e0a\u6765\u8bf4lock_guard \u548cunique_lock\u90fd\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u4f7f\u7528\u5404\u79cd\u9501\u800c\u8bde\u751f\u7684\u3002\u4f46\u662funique_lock\u66f4\u4e3a\u7075\u6d3b\uff0c\u529f\u80fd\u66f4\u5f3a\u5927\uff0c\u53ef\u505a\u7684\u64cd\u4f5c\u6bd4\u8f83\u591a\u3002</p> <p>unique_lock \u6709\u4e9b\u65f6\u5019\u4e5f\u88ab\u79f0\u4e3a\uff1a\u201c\u7075\u6d3b\u9501\u201d\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#2-lock_guard","title":"2. lock_guard\u6709\u5565\u95ee\u9898\uff1f","text":"<p>std::lock_guard\u53ef\u80fd\u5b58\u5728\u7684\u95ee\u9898\uff1a</p> \u5e8f\u53f7 \u95ee\u9898\u63cf\u8ff0 \u7ec6\u8282 1 \u9501\u7684\u7c92\u5ea6\u95ee\u9898 std::lock_guard\u7684\u9501\u4f5c\u7528\u57df\u4e0e\u5bf9\u8c61\u7684\u4f5c\u7528\u57df\u76f8\u540c\uff0c\u53ef\u80fd\u5bfc\u81f4\u9501\u7684\u7c92\u5ea6\u8fc7\u5927\uff0c\u5f71\u54cd\u5e76\u53d1\u6027\u80fd\u3002 2 \u65e0\u6cd5\u4e2d\u9014\u89e3\u9501 \u4e00\u65e6std::lock_guard\u5bf9\u8c61\u6784\u9020\uff0c\u9501\u5c06\u88ab\u81ea\u52a8\u83b7\u53d6\uff0c\u5e76\u5728\u5bf9\u8c61\u6790\u6784\u65f6\u81ea\u52a8\u91ca\u653e\uff0c\u65e0\u6cd5\u4e2d\u9014\u624b\u52a8\u89e3\u9501\u3002 3 \u4e0d\u652f\u6301\u6761\u4ef6\u53d8\u91cf std::lock_guard\u901a\u5e38\u4e0e\u4e92\u65a5\u9501\u4e00\u8d77\u4f7f\u7528\uff0c\u4f46\u4e0d\u652f\u6301\u4e0e\u6761\u4ef6\u53d8\u91cf\uff08\u5982std::condition_variable\uff09\u914d\u5408\u4f7f\u7528\u3002 4 \u4e0d\u652f\u6301\u9012\u5f52\u9501 \u867d\u7136\u53ef\u4ee5\u4e0estd::recursive_mutex\u4e00\u8d77\u4f7f\u7528\uff0c\u4f46std::lock_guard\u672c\u8eab\u4e0d\u63d0\u4f9b\u5bf9\u9012\u5f52\u9501\u7684\u7279\u6b8a\u652f\u6301\u3002 5 \u65e0\u6cd5\u6307\u5b9a\u9501\u7684\u5c1d\u8bd5\u83b7\u53d6 std::lock_guard\u603b\u662f\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u4e0d\u652f\u6301\u975e\u963b\u585e\uff08\u5c1d\u8bd5\uff09\u83b7\u53d6\u9501\u3002 6 \u65e0\u6cd5\u4e0e\u8d85\u65f6\u673a\u5236\u7ed3\u5408 std::lock_guard\u4e0d\u63d0\u4f9b\u8d85\u65f6\u673a\u5236\uff0c\u65e0\u6cd5\u8bbe\u7f6e\u83b7\u53d6\u9501\u7684\u7b49\u5f85\u65f6\u95f4\u3002 <p>\u5c31\u662f\u8bf4\uff0c\u7b80\u5355\u7684\u573a\u666f\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5b83\uff0c\u590d\u6742\u7684\u573a\u666f\u4e0b\u5b83\u5c31\u529b\u4e0d\u4ece\u5fc3\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include&lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;mutex&gt;\n\nusing namespace std;\n\nint mycount = 0;\nint mycount1 = 0;\nint mycount2 = 0;\nmutex mymutex;\n\nvoid sum()\n{\n    for (size_t i = 0; i &lt; 10000; i++)\n    {\n        mycount2++; \n    }\n\n    lock_guard&lt;mutex&gt; lock(mymutex); //\u6211\u4fdd\u62a4\u7684\u662fmutex\u7c7b\u578b\u7684\u9501\uff0c\u5b83\u662fmymutex\n    for (size_t i = 0; i &lt; 10000; i++)\n    {\n        mycount++;\n    }\n    //\u6211\u60f3\u5728\u8fd9\u91cc\u89e3\u9501\uff0c\u4f46\u662flock_guard\u5bf9\u8c61\u505a\u4e0d\u5230\n\n    for (size_t i = 0; i &lt; 10000; i++)\n    {\n        mycount1++; //\u6211\u4e0d\u60f3\u53d7lock\u7684\u9501\u5b9a\uff0c\u4f46\u662f\u6ca1\u6709\u529e\u6cd5  \u56e0\u4e3a\u5b83\u662flock_guard\n    }\n\n    //lock_guard\u662f\u7c97\u7c92\u5ea6\u7684\uff0c\u5b83\u4e00\u6746\u5b50\u63d2\u5230\u5e95\u4e86\n\n\n\n}\n\nint main()\n{\n    vector&lt;thread&gt; mybox;\n    for (size_t i = 0; i &lt; 10; i++)\n    {\n        mybox.emplace_back(sum);\n    }\n\n    for (thread&amp; t : mybox)\n    {\n        t.join();\n    }\n\n    //\u6700\u7ec8\u7ed3\u679c\n    cout &lt;&lt; mycount &lt;&lt; endl;\n    cout &lt;&lt; mycount1 &lt;&lt; endl;\n    cout &lt;&lt; mycount2 &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#3-unique_lock","title":"3. \u4ec0\u4e48\u662funique_lock\uff1f","text":"<p>unique_lock\u662f\u4e00\u4e2a\u66f4\u7075\u6d3b\u7684\u4e92\u65a5\u91cf\u5c01\u88c5\u5668\uff0c\u5b83\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u63a7\u5236\u9009\u9879\uff0c\u6bd4\u5982\u5ef6\u8fdf\u9501\u5b9a\u3001\u5c1d\u8bd5\u9501\u5b9a\u3001\u9012\u5f52\u9501\u5b9a\u3001\u5b9a\u65f6\u9501\u5b9a\u7b49\u3002\u4e0estd::lock_guard\u76f8\u6bd4\uff0cstd::unique_lock\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd\uff0c\u4f46\u4e5f\u9700\u8981\u66f4\u591a\u7684\u7ba1\u7406\u8d23\u4efb\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#4-unique_lock","title":"4. \u5982\u4f55\u5b9a\u4e49\u4f7f\u7528unique_lock","text":"<p>unique_lock\u7684\u6784\u9020\u3002</p> <pre><code>std::mutex mtx;\nstd::unique_lock&lt;std::mutex&gt; lk1(mtx);  //\u5c31\u81ea\u52a8\u4e0a\u9501 \n// \u81ea\u52a8\u9501\u5b9a\nstd::unique_lock&lt;std::mutex&gt; lk2(mtx, std::defer_lock);  // \u5ef6\u8fdf\u9501\u5b9a \u4e0d\u8981\u81ea\u52a8\u4e0a\u9501\nstd::unique_lock&lt;std::mutex&gt; lk3(mtx, std::try_to_lock); // \u5c1d\u8bd5\u9501\u5b9a\nstd::unique_lock&lt;std::mutex&gt; lk4(mtx, std::adopt_lock);  // \u63a5\u53d7\u5df2\u9501\u5b9a\u7684 mutex\n</code></pre> <p>std::defer_lock \u7684\u5177\u4f53\u542b\u4e49\u662f\u544a\u8bc9 std::unique_lock \u5728\u6784\u9020\u65f6\u4e0d\u8981\u81ea\u52a8\u9501\u5b9a\u4e92\u65a5\u9501\uff0c\u800c\u662f\u5ef6\u8fdf\u9501\u5b9a\u64cd\u4f5c</p> <p>std::unique_lock \u63d0\u4f9b\u4e86\u4e00\u4e9b\u6210\u5458\u51fd\u6570\uff0c\u7528\u4e8e\u7ba1\u7406\u9501\u5b9a\u72b6\u6001\uff1a</p> <ul> <li>lock()\uff1a\u9501\u5b9a\u5173\u8054\u7684 mutex\u3002</li> <li>unlock()\uff1a\u89e3\u9501\u5173\u8054\u7684 mutex\u3002</li> <li>try_lock()\uff1a\u5c1d\u8bd5\u9501\u5b9a mutex\uff0c\u5982\u679c\u9501\u5b9a\u6210\u529f\uff0c\u8fd4\u56de true\uff1b\u5426\u5219\u8fd4\u56de false\u3002</li> <li>owns_lock()\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u6307\u793a unique_lock \u662f\u5426\u62e5\u6709 mutex \u7684\u6240\u6709\u6743\u3002</li> </ul> <p>\u4ee3\u7801\u6837\u4f8b\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;  \n#include &lt;chrono&gt;  \n\nstd::mutex mtx;  \n\nvoid print_block(int n, char c) {  \n    // \u5c1d\u8bd5\u57282\u79d2\u5185\u9501\u5b9a\u4e92\u65a5\u91cf  \n    if (std::unique_lock&lt;std::mutex&gt; lock(mtx, std::try_to_lock_t()); \n        lock.owns_lock()) {  \n        for (int i = 0; i &lt; n; ++i) {  \n            std::cout &lt;&lt; c;  \n        }  \n        std::cout &lt;&lt; '\\n';  \n    } else {  \n        std::cout &lt;&lt; \"Failed to lock mutex!\\n\";  \n    }  \n}  \n\nint main() {  \n    std::thread th1(print_block, 50, '*');  \n    std::thread th2(print_block, 50, '$');  \n\n    th1.join();  \n    th2.join();  \n\n    return 0;  \n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cstd::unique_lock lock(mtx, std::try_to_lock_t());\u5c1d\u8bd5\u5728\u6784\u9020\u65f6\u9501\u5b9a\u4e92\u65a5\u91cfmtx\uff0c\u4f46\u4e0d\u4f1a\u963b\u585e\u3002\u5982\u679c\u4e92\u65a5\u91cf\u5df2\u7ecf\u88ab\u9501\u5b9a\uff0c\u5219lock.owns_lock()\u5c06\u8fd4\u56defalse\uff0c\u8868\u793a\u6ca1\u6709\u6210\u529f\u9501\u5b9a\u4e92\u65a5\u91cf\u3002 <p>\u9664\u4e86std::try_to_lock_t()\u4e4b\u5916\uff0cstd::unique_lock\u8fd8\u63a5\u53d7\u5176\u4ed6\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982std::defer_lock_t()\uff08\u5ef6\u8fdf\u9501\u5b9a\uff09\u3001std::adopt_lock_t()\uff08\u5047\u8bbe\u5df2\u7ecf\u9501\u5b9a\uff09\u7b49\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u9700\u6c42\u3002\u6b64\u5916\uff0cstd::unique_lock\u8fd8\u63d0\u4f9b\u4e86lock()\u3001unlock()\u3001try_lock()\u7b49\u6210\u5458\u51fd\u6570\u6765\u624b\u52a8\u7ba1\u7406\u9501\u7684\u83b7\u53d6\u548c\u91ca\u653e\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#5-unique_lock","title":"5. unique_lock\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570","text":"<p><code>std::unique_lock</code> \u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\uff0c\u5176\u4e2d\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7528\u4e8e\u6307\u5b9a\u5982\u4f55\u7ba1\u7406\u9501\u7684\u884c\u4e3a\u3002\u5e38\u89c1\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li><code>std::defer_lock</code></li> <li><code>std::try_to_lock</code></li> <li><code>std::adopt_lock</code></li> <li>\u8d85\u65f6\u76f8\u5173\u53c2\u6570\uff08\u5982<code>std::chrono</code>\u7684\u65f6\u95f4\u6bb5\uff09</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#51-stddefer_lock","title":"5.1. <code>std::defer_lock</code>","text":"<p><code>std::defer_lock</code> \u8868\u793a\u5ef6\u8fdf\u9501\u5b9a\u3002\u5373\u5728\u521b\u5efa <code>std::unique_lock</code> \u5bf9\u8c61\u65f6\uff0c\u4e0d\u4f1a\u7acb\u5373\u5bf9\u4e92\u65a5\u9501\u8fdb\u884c\u9501\u5b9a\u64cd\u4f5c\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n\nstd::mutex mtx;\n\nvoid example_defer_lock() {\n    std::unique_lock&lt;std::mutex&gt; lock(mtx, std::defer_lock); // \u4e0d\u4f1a\u7acb\u5373\u9501\u5b9a\n    // ... \u6267\u884c\u4e00\u4e9b\u64cd\u4f5c ...\n    lock.lock(); // \u5728\u9700\u8981\u65f6\u663e\u5f0f\u9501\u5b9a\n    std::cout &lt;&lt; \"Locked with defer_lock\" &lt;&lt; std::endl;\n    lock.unlock(); // \u663e\u5f0f\u89e3\u9501\n}\n\nint main() {\n    std::thread t1(example_defer_lock);\n    t1.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#52-stdtry_to_lock","title":"5.2. <code>std::try_to_lock</code>","text":"<p><code>std::try_to_lock</code> \u8868\u793a\u5c1d\u8bd5\u9501\u5b9a\u3002\u5728\u521b\u5efa <code>std::unique_lock</code> \u5bf9\u8c61\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u9501\u5b9a\u4e92\u65a5\u9501\u3002\u5982\u679c\u9501\u5b9a\u5931\u8d25\uff0c\u4e0d\u4f1a\u963b\u585e\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n\nstd::mutex mtx;\n\nvoid example_try_to_lock() {\n    std::unique_lock&lt;std::mutex&gt; lock(mtx, std::try_to_lock); // \u5c1d\u8bd5\u9501\u5b9a\n    if (lock.owns_lock()) {\n        std::cout &lt;&lt; \"Locked with try_to_lock\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"Failed to lock with try_to_lock\" &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    std::thread t1(example_try_to_lock);\n    t1.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#53-stdadopt_lock","title":"5.3. <code>std::adopt_lock</code>","text":"<p><code>std::adopt_lock</code> \u8868\u793a\u63a5\u7ba1\u5df2\u7ecf\u9501\u5b9a\u7684\u4e92\u65a5\u9501\u3002\u6b64\u53c2\u6570\u5047\u8bbe\u4e92\u65a5\u9501\u5df2\u7ecf\u5728\u5176\u4ed6\u5730\u65b9\u88ab\u9501\u5b9a\uff0c<code>std::unique_lock</code> \u5bf9\u8c61\u4f1a\u63a5\u7ba1\u8fd9\u4e2a\u9501\u7684\u6240\u6709\u6743\u3002 \u4f7f\u7528\u4e86 std::adopt_lock\uff0c\u8fd9\u610f\u5473\u7740\u4e92\u65a5\u9501\u5df2\u7ecf\u88ab\u9501\u5b9a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n\nstd::mutex mtx;\n\nvoid example_adopt_lock() {\n    mtx.lock(); // \u5148\u9501\u5b9a\u4e92\u65a5\u9501\n    std::unique_lock&lt;std::mutex&gt; lock(mtx, std::adopt_lock); // \u63a5\u7ba1\u5df2\u9501\u5b9a\u7684\u4e92\u65a5\u9501\n    std::cout &lt;&lt; \"Locked with adopt_lock\" &lt;&lt; std::endl;\n    // lock goes out of scope and unlocks mtx\n}\n\nint main() {\n    std::thread t1(example_adopt_lock);\n    t1.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#54-mutex","title":"5.4. \u8d85\u65f6\u76f8\u5173\u53c2\u6570 mutex","text":"<p><code>std::unique_lock</code> \u8fd8\u652f\u6301\u57fa\u4e8e\u65f6\u95f4\u7684\u9501\u5b9a\u64cd\u4f5c\uff0c\u5141\u8bb8\u4f7f\u7528\u8d85\u65f6\u53c2\u6570\u3002\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u662f <code>std::chrono</code> \u65f6\u95f4\u70b9\u6216\u65f6\u95f4\u6bb5\uff0c\u4e3b\u8981\u7528\u4e8e <code>std::timed_mutex</code> \u7c7b\u578b\u7684\u4e92\u65a5\u9501\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#55","title":"5.5. \u57fa\u4e8e\u65f6\u95f4\u70b9\u7684\u8d85\u65f6\u9501\u5b9a","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nstd::timed_mutex mtx;\n\nvoid example_timed_lock() {\n    auto now = std::chrono::system_clock::now();\n    std::unique_lock&lt;std::timed_mutex&gt; lock(mtx, now + std::chrono::seconds(1)); // \u5c1d\u8bd5\u9501\u5b9a\u76f4\u5230\u6307\u5b9a\u65f6\u95f4\u70b9\n    if (lock.owns_lock()) {\n        std::cout &lt;&lt; \"Locked with timed lock (time_point)\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"Failed to lock with timed lock (time_point)\" &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    std::thread t1(example_timed_lock);\n    t1.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#56","title":"5.6. \u57fa\u4e8e\u65f6\u95f4\u6bb5\u7684\u8d85\u65f6\u9501\u5b9a","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nstd::timed_mutex mtx;\n\nvoid example_timed_lock_duration() {\n    std::unique_lock&lt;std::timed_mutex&gt; lock(mtx, std::chrono::seconds(1)); // \u5c1d\u8bd5\u9501\u5b9a\u6307\u5b9a\u65f6\u95f4\u6bb5\n    if (lock.owns_lock()) {\n        std::cout &lt;&lt; \"Locked with timed lock (duration)\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"Failed to lock with timed lock (duration)\" &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    std::thread t1(example_timed_lock_duration);\n    t1.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/05-unique_lock/#6-unique_lock","title":"6. unique_lock\u7684\u7279\u70b9","text":"<ul> <li>\u7075\u6d3b\u6027\uff1aunique_lock\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u63a7\u5236\u9009\u9879\uff0c\u6bd4\u5982\u5ef6\u8fdf\u9501\u5b9a\u3001\u5c1d\u8bd5\u9501\u5b9a\u3001\u9012\u5f52\u9501\u5b9a\u3001\u5b9a\u65f6\u9501\u5b9a\u7b49\u3002\u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\u6765\u7cbe\u786e\u63a7\u5236\u9501\u7684\u52a0\u9501\u548c\u89e3\u9501\u65f6\u673a\u3002</li> <li>\u53ef\u79fb\u52a8\u6027\uff1aunique_lock\u662f\u53ef\u79fb\u52a8\u7684\uff0c\u53ef\u4ee5\u62f7\u8d1d\u3001\u8d4b\u503c\u6216\u79fb\u52a8\u3002\u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u8f7b\u677e\u5730\u5c06\u9501\u7684\u6240\u6709\u6743\u4ece\u4e00\u4e2a\u5bf9\u8c61\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>\u624b\u52a8\u63a7\u5236\uff1aunique_lock\u652f\u6301\u624b\u52a8\u89e3\u9501\uff0c\u800clock_guard\u4e0d\u652f\u6301\u3002\u8fd9\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u7075\u6d3b\u6027\uff0c\u4f46\u4e5f\u9700\u8981\u5f00\u53d1\u8005\u81ea\u884c\u7ba1\u7406\u9501\u7684\u52a0\u9501\u548c\u89e3\u9501\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/","title":"\u301006\u3011\u7ebf\u7a0b\u95f4\u540c\u6b65\u65b9\u5f0f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#1","title":"1. \u7ebf\u7a0b\u540c\u6b65\u7684\u65b9\u5f0f","text":"<p>\u4e00\u822c\u6765\u8bf4 \uff0c\u6211\u4eec\u8981\u5b8c\u6210\u7ebf\u7a0b\u4e4b\u95f4\u7684\u540c\u6b65\u548c\u534f\u4f5c\uff08\u4e5f\u5c31\u662f\u63a7\u5236\u7ebf\u7a0b\u4e0e\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6267\u884c\u987a\u5e8f\u6216\u8005\u8d44\u6e90\u6323\u7528\uff09\uff0c\u5f80\u5f80\u4f1a\u6709\u4e0b\u9762\u51e0\u79cd\u65b9\u5f0f\u3002 \u987a\u5e8f \u8d44\u6e90\u6323\u7528\uff0c\u73b0\u6210\u4e4b\u95f4\u4e0d\u591f\u540c\u6b65 </p> <p>\u8fd9\u4e9b\u65b9\u5f0f\uff0c\u732b\u6709\u732b\u62db\uff0c\u864e\u6709\u864e\u9053\uff0c\u8fd9\u4e9b\u673a\u5236\u5404\u6709\u5404\u7684\u4f7f\u7528\u573a\u666f\u3002\u6211\u4eec\u5728\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u6839\u636e\u81ea\u5df1\u7684\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u4e0d\u540c\u7684\u673a\u5236\u6765\u4f7f\u7528\u5373\u53ef\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#2","title":"2. \u57fa\u672c\u7528\u6cd5","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#21-mutex","title":"2.1. \u4e92\u65a5\u9501\uff08Mutex\uff09","text":"<p>\u4e92\u65a5\u9501\u662f\u4e00\u79cd\u6700\u57fa\u672c\u7684\u540c\u6b65\u673a\u5236\uff0c\u7528\u4e8e\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\uff0c\u9632\u6b62\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u540c\u4e00\u4e2a\u8d44\u6e90\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\n// \u521b\u5efa\u4e00\u4e2a\u4e92\u65a5\u9501\u5bf9\u8c61\nstd::mutex mtx;\n\n// \u6253\u5370\u7ebf\u7a0bID\u7684\u51fd\u6570\nvoid print_thread_id(int id) {\n    // \u4f7f\u7528lock_guard\u81ea\u52a8\u7ba1\u7406\u9501\u7684\u751f\u547d\u5468\u671f\n    std::lock_guard&lt;std::mutex&gt; guard(mtx);\n    std::cout &lt;&lt; \"Thread ID: \" &lt;&lt; id &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\n    std::thread t1(print_thread_id, 1);\n    std::thread t2(print_thread_id, 2);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#22-read-write-lock","title":"2.2. \u8bfb\u5199\u9501\uff08Read-Write Lock\uff09","text":"<p>\u8bfb\u5199\u9501\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u53d6\uff0c\u4f46\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u5199\u5165\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;shared_mutex&gt;\n#include &lt;thread&gt;\n\n// \u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u4e92\u65a5\u9501\u5bf9\u8c61\nstd::shared_mutex rw_mtx;\n\n// \u8bfb\u53d6\u51fd\u6570\nvoid read_function() {\n    // \u4f7f\u7528shared_lock\u6765\u5171\u4eab\u8bfb\u53d6\u9501\n    std::shared_lock&lt;std::shared_mutex&gt; lock(rw_mtx);\n    std::cout &lt;&lt; \"Reading...\" &lt;&lt; std::endl;\n}\n\n// \u5199\u5165\u51fd\u6570\nvoid write_function() {\n    // \u4f7f\u7528unique_lock\u6765\u72ec\u5360\u5199\u5165\u9501\n    std::unique_lock&lt;std::shared_mutex&gt; lock(rw_mtx);\n    std::cout &lt;&lt; \"Writing...\" &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u4e00\u4e2a\u7528\u4e8e\u8bfb\u53d6\uff0c\u4e00\u4e2a\u7528\u4e8e\u5199\u5165\n    std::thread t1(read_function);\n    std::thread t2(write_function);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#23-condition-variable","title":"2.3. \u6761\u4ef6\u53d8\u91cf\uff08Condition Variable\uff09","text":"<p>\u6761\u4ef6\u53d8\u91cf\u7528\u4e8e\u963b\u585e\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\uff0c\u76f4\u5230\u67d0\u4e2a\u6761\u4ef6\u4e3a\u771f\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n\n// \u521b\u5efa\u4e92\u65a5\u9501\u548c\u6761\u4ef6\u53d8\u91cf\u5bf9\u8c61\nstd::mutex cv_mtx;\nstd::condition_variable cv;\nbool ready = false;\n\n// \u6253\u5370\u7ebf\u7a0bID\u7684\u51fd\u6570\nvoid print_id(int id) {\n    // \u83b7\u53d6\u9501\n    std::unique_lock&lt;std::mutex&gt; lock(cv_mtx);\n    // \u7b49\u5f85\u6761\u4ef6\u53d8\u91cfready\u53d8\u4e3atrue\n    cv.wait(lock, []{ return ready; });\n    std::cout &lt;&lt; \"Thread ID: \" &lt;&lt; id &lt;&lt; std::endl;\n}\n\n// \u8bbe\u7f6eready\u4e3atrue\u5e76\u901a\u77e5\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\nvoid set_ready() {\n    // \u6a21\u62df\u4e00\u4e9b\u5de5\u4f5c\uff0c\u7b49\u5f851\u79d2\u949f\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    {\n        // \u83b7\u53d6\u9501\u5e76\u8bbe\u7f6eready\u4e3atrue\n        std::lock_guard&lt;std::mutex&gt; lock(cv_mtx);\n        ready = true;\n    }\n    // \u901a\u77e5\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\n    cv.notify_all();\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\u7528\u4e8e\u6253\u5370ID\n    std::thread t1(print_id, 1);\n    std::thread t2(print_id, 2);\n\n    // \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u7528\u4e8e\u8bbe\u7f6eready\u5e76\u901a\u77e5\n    std::thread t3(set_ready);\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n    t3.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#24-semaphore","title":"2.4. \u4fe1\u53f7\u91cf\uff08Semaphore\uff09","text":"<p>\u4fe1\u53f7\u91cf\u662f\u4e00\u79cd\u66f4\u9ad8\u7ea7\u7684\u540c\u6b65\u673a\u5236\uff0c\u63a7\u5236\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\u3002</p> <p>\u5728C++20\u4e4b\u524d\uff0c\u6807\u51c6\u5e93\u6ca1\u6709\u63d0\u4f9b\u4fe1\u53f7\u91cf\u5b9e\u73b0\uff0c\u9700\u8981\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u6216\u8005\u81ea\u884c\u5b9e\u73b0\u3002\u5728C++20\u4e2d\uff0c<code>std::counting_semaphore</code>\u88ab\u5f15\u5165\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;semaphore&gt;\n\n// \u521b\u5efa\u4e00\u4e2a\u8ba1\u6570\u4fe1\u53f7\u91cf\u5bf9\u8c61\uff0c\u521d\u59cb\u503c\u4e3a1\nstd::counting_semaphore&lt;1&gt; sem(1);\n\n// \u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u51fd\u6570\nvoid access_resource(int id) {\n    // \u83b7\u53d6\u4fe1\u53f7\u91cf\n    sem.acquire();\n    std::cout &lt;&lt; \"Thread \" &lt;&lt; id &lt;&lt; \" is accessing the resource\" &lt;&lt; std::endl;\n    // \u6a21\u62df\u4e00\u4e9b\u5de5\u4f5c\uff0c\u7b49\u5f851\u79d2\u949f\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    // \u91ca\u653e\u4fe1\u53f7\u91cf\n    sem.release();\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\n    std::thread t1(access_resource, 1);\n    std::thread t2(access_resource, 2);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#25-atomic-operation","title":"2.5. \u539f\u5b50\u64cd\u4f5c\uff08Atomic Operation\uff09","text":"<p>\u539f\u5b50\u64cd\u4f5c\u7528\u4e8e\u5bf9\u5355\u4e2a\u53d8\u91cf\u7684\u65e0\u9501\u4fdd\u62a4\uff0c\u5e38\u7528\u4e8e\u8ba1\u6570\u5668\u7b49\u7b80\u5355\u7684\u6570\u636e\u540c\u6b65\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;atomic&gt;\n\n// \u521b\u5efa\u4e00\u4e2a\u539f\u5b50\u6574\u578b\u53d8\u91cf\uff0c\u521d\u59cb\u503c\u4e3a0\nstd::atomic&lt;int&gt; counter(0);\n\n// \u9012\u589e\u51fd\u6570\nvoid increment() {\n    for (int i = 0; i &lt; 1000; ++i) {\n        ++counter; // \u539f\u5b50\u9012\u589e\n    }\n}\n\nint main() {\n    // \u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\n    std::thread t1(increment);\n    std::thread t2(increment);\n\n    // \u7b49\u5f85\u4e24\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n\n    // \u6253\u5370\u8ba1\u6570\u5668\u7684\u503c\n    std::cout &lt;&lt; \"Counter: \" &lt;&lt; counter.load() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/06-%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/#26-6-barrier","title":"2.6. 6. \u6805\u680f\uff08Barrier\uff09","text":"<p>\u6805\u680f\u7528\u4e8e\u534f\u8c03\u591a\u4e2a\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u4f7f\u5f97\u5b83\u4eec\u5728\u67d0\u4e2a\u540c\u6b65\u70b9\u7b49\u5f85\uff0c\u76f4\u5230\u6240\u6709\u7ebf\u7a0b\u90fd\u5230\u8fbe\u8be5\u70b9\u3002</p> <p>\u5728C++20\u4e4b\u524d\uff0c\u6807\u51c6\u5e93\u6ca1\u6709\u63d0\u4f9b\u6805\u680f\u5b9e\u73b0\uff0c\u9700\u8981\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u6216\u8005\u81ea\u884c\u5b9e\u73b0\u3002\u5728C++20\u4e2d\uff0c<code>std::barrier</code>\u88ab\u5f15\u5165\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;barrier&gt;\n\n// \u521b\u5efa\u4e00\u4e2a\u6805\u680f\u5bf9\u8c61\uff0c\u53c2\u4e0e\u7ebf\u7a0b\u6570\u91cf\u4e3a3\nstd::barrier sync_point(3);\n\n// \u4efb\u52a1\u51fd\u6570\nvoid task(int id) {\n    std::cout &lt;&lt; \"Thread \" &lt;&lt; id &lt;&lt; \" is at the barrier.\" &lt;&lt; std::endl;\n    // \u7ebf\u7a0b\u5230\u8fbe\u6805\u680f\u5e76\u7b49\u5f85\n    sync_point.arrive_and_wait();\n    std::cout &lt;&lt; \"Thread \" &lt;&lt; id &lt;&lt; \" passed the barrier.\" &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u521b\u5efa\u4e09\u4e2a\u7ebf\u7a0b\n    std::thread t1(task, 1);\n    std::thread t2(task, 2);\n    std::thread t3(task, 3);\n\n    // \u7b49\u5f85\u4e09\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n    t1.join();\n    t2.join();\n    t3.join();\n    return 0;\n}\n</code></pre> <p>\u901a\u8fc7\u8fd9\u4e9b\u540c\u6b65\u673a\u5236\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6709\u6548\u5730\u7ba1\u7406\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\u7684\u6570\u636e\u4e00\u81f4\u6027\u548c\u540c\u6b65\u95ee\u9898\uff0c\u6839\u636e\u5177\u4f53\u7684\u5e94\u7528\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u540c\u6b65\u5de5\u5177\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/","title":"\u301007\u3011\u6761\u4ef6\u53d8\u91cfcondition_variable","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#1","title":"1. \u5565\u662f\u6761\u4ef6\u53d8\u91cf","text":"<p>\u6761\u4ef6\u53d8\u91cf\u662f\u4e00\u79cd\u540c\u6b65\u539f\u8bed\uff0c\u7528\u4e8e\u5728\u7ebf\u7a0b\u4e4b\u95f4\u534f\u8c03\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5b83\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u7279\u5b9a\u6761\u4ef6\u7684\u6ee1\u8db3\uff08\u5982\u67d0\u4e2a\u503c\u7684\u53d8\u5316\uff09\uff0c\u800c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u5728\u6761\u4ef6\u6ee1\u8db3\u65f6\u901a\u77e5\uff08\u6216\u5524\u9192\uff09\u7b49\u5f85\u7684\u7ebf\u7a0b\u3002\u8fd9\u79cd\u673a\u5236\u53ef\u4ee5\u9632\u6b62\u7ebf\u7a0b\u5fd9\u7b49\u5f85\uff0c\u4ece\u800c\u63d0\u9ad8\u7cfb\u7edf\u6548\u7387\u3002</p> <p></p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <p>Note</p> <p>\u5728\u53e4\u4ee3\uff0c\u8fb9\u7586\u6709\u654c\u4eba\u5165\u4fb5\u65f6\uff0c\u5b88\u536b\u4f1a\u70b9\u71c3\u70fd\u706b\u53f0\uff0c\u4ea7\u751f\u72fc\u70df\u3002\u770b\u5230\u72fc\u70df\u7684\u5c06\u58eb\u4eec\u4f1a\u7acb\u5373\u96c6\u7ed3\uff0c\u51c6\u5907\u8fce\u654c\u3002\u8fd9\u76f8\u5f53\u4e8e\u4e00\u79cd\u6761\u4ef6\u89e6\u53d1\u7684\u901a\u4fe1\u673a\u5236\uff1a\u53ea\u6709\u5728\u7279\u5b9a\u6761\u4ef6\uff08\u654c\u4eba\u5165\u4fb5\uff09\u4e0b\uff0c\u624d\u4f1a\u89e6\u53d1\u4fe1\u53f7\uff08\u70b9\u71c3\u70fd\u706b\uff09\uff0c\u8ba9\u7b49\u5f85\u7684\u5c06\u58eb\u4eec\u91c7\u53d6\u884c\u52a8\u3002</p> <p>\u518d\u4e3e\u4e2a\u4f8b\uff1a</p> <p>Note</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u4f60\u548c\u4f60\u7684\u5ba4\u53cb\u5728\u7b49\u4e00\u4e2a\u91cd\u8981\u7684\u5305\u88f9\uff0c\u4f46\u662f\u4e0d\u77e5\u9053\u5305\u88f9\u5177\u4f53\u4ec0\u4e48\u65f6\u5019\u4f1a\u5230\u8fbe\u3002\u4e3a\u4e86\u4e0d\u4e00\u76f4\u5b88\u5728\u95e8\u53e3\u7b49\u5305\u88f9\uff0c\u4f60\u4eec\u51b3\u5b9a\u5206\u5de5\uff1a\u4f60\u53bb\u505a\u5176\u4ed6\u4e8b\u60c5\uff0c\u4f46\u4f60\u7684\u5ba4\u53cb\u4f1a\u4e00\u76f4\u76ef\u7740\u95e8\u53e3\u3002\u5f53\u5305\u88f9\u5230\u8fbe\u65f6\uff0c\u4f60\u7684\u5ba4\u53cb\u4f1a\u901a\u77e5\u4f60\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u7ee7\u7eed\u505a\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u76f4\u5230\u5305\u88f9\u5230\u8fbe\u518d\u53bb\u5904\u7406\u3002</p> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff1a</p> <ul> <li>\u4f60 \u662f\u7b49\u5f85\u5305\u88f9\u7684\u7ebf\u7a0b\u3002</li> <li>\u4f60\u7684\u5ba4\u53cb \u662f\u68c0\u6d4b\u5305\u88f9\u5230\u8fbe\u7684\u7ebf\u7a0b\u3002</li> <li>\u5305\u88f9\u5230\u8fbe \u662f\u4e00\u4e2a\u6761\u4ef6\u53d8\u91cf\u3002</li> <li>\u901a\u77e5\u4f60 \u662f\u6761\u4ef6\u53d8\u91cf\u7684\u901a\u77e5\u64cd\u4f5c\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#_1","title":"\u7c7b\u6bd4\u6761\u4ef6\u53d8\u91cf","text":"<p>\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u6761\u4ef6\u53d8\u91cf\u7c7b\u4f3c\u4e8e\u70fd\u706b\u53f0\u548c\u72fc\u70df\u7684\u673a\u5236\uff1a</p> <ul> <li>\u5b88\u536b \u76f8\u5f53\u4e8e\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5b83\u5728\u76d1\u89c6\u67d0\u4e2a\u6761\u4ef6\u3002</li> <li>\u5c06\u58eb\u4eec \u76f8\u5f53\u4e8e\u5176\u4ed6\u7ebf\u7a0b\uff0c\u5b83\u4eec\u5728\u7b49\u5f85\u8fd9\u4e2a\u6761\u4ef6\u7684\u6ee1\u8db3\u3002</li> <li>\u70fd\u706b\u53f0\u548c\u72fc\u70df \u76f8\u5f53\u4e8e\u6761\u4ef6\u53d8\u91cf\uff0c\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5b88\u536b\u70b9\u71c3\u70fd\u706b\uff0c\u901a\u77e5\u5c06\u58eb\u4eec\u654c\u4eba\u6765\u4e86\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#2","title":"2. \u6761\u4ef6\u53d8\u91cf\u7684\u4f5c\u7528","text":"<p>1.\u51cf\u5c11\u8f6e\u8be2\u4ece\u800c\u63d0\u9ad8\u6548\u7387</p> <p>\u6ca1\u6709\u6761\u4ef6\u53d8\u91cf\uff0cCPU\u4f1a\u6d6a\u8d39\u65f6\u95f4\u53cd\u590d\u8f6e\u8be2\u67d0\u4e00\u4e2a\u6761\u4ef6\u3002\u6761\u4ef6\u53d8\u91cf\u51fa\u73b0\u4f7f\u5f97\u7ebf\u7a0b\u53ef\u4ee5\u5728\u4e0d\u6ee1\u8db3\u6761\u4ef6\u8fdb\u884c\u4f11\u7720\uff0c\u5c06\u8d44\u6e90\u8ba9\u7ed9\u6709\u9700\u8981\u7684\u5176\u4ed6\u7ebf\u7a0b\uff1b</p> <p>2.\u7ebf\u7a0b\u4e4b\u95f4\u7684\u534f\u8c03</p> <p>\u4e24\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u6267\u884c\u53ef\u4ee5\u53d8\u5f97\u6709\u5e8f\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53e6\u5916\u4e00\u4e2a\u7ebf\u7a0b\u624d\u4f1a\u6267\u884c\uff1b</p> <p>3.\u590d\u6742\u540c\u6b65\u6761\u4ef6</p> <p>\u6709\u65f6\u5019\u4e00\u4e2a\u7ebf\u7a0b\u4e0d\u4ec5\u9700\u8981\u77e5\u9053\u8d44\u6e90\u53ef\u8fbe\uff0c\u8fd8\u9700\u8981\u77e5\u9053\u4e00\u4e9b\u989d\u5916\u4fe1\u606f\uff0c\u6bd4\u5982\u8bf4\u751f\u4ea7\u6d88\u8d39\u8005\u4e2d\uff0c\u7f13\u51b2\u961f\u5217\u662f\u5426\u6ee1\u4e4b\u7c7b\u7684\u64cd\u4f5c\uff1b</p> <p>Note</p> <p>\u7ebf\u7a0b\u8fdb\u5165\u963b\u585e\u53ef\u4ee5\u662fsleep\uff0c\u4e5f\u53ef\u4ee5\u662fwait\u3002sleep\u671f\u95f4\u6240\u6301\u6709\u7684\u9501\u4e0d\u4f1a\u91ca\u653e\uff0c\u5230\u65f6\u89c1\u4f1a\u81ea\u52a8\u5524\u9192\uff0c\u800cwait\u671f\u95f4\u5c06\u4f1a\u91ca\u653e\u9501\uff0c\u5524\u9192\u8fd8\u9700\u8981\u989d\u5916\u7684\u6761\u4ef6\u3002\u524d\u8005\u66f4\u591a\u7684\u7528\u5728\u6a21\u62df\u64cd\u4f5c\u5ef6\u8fdf\uff0c\u540e\u8005\u7528\u4e8e\u591a\u7ebf\u7a0b\u534f\u4f5c\u573a\u666f\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#3","title":"3. \u5982\u4f55\u5b9a\u4e49\u6761\u4ef6\u53d8\u91cf","text":"<p>\u5728C++\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528std::condition_variable\u6765\u5b9a\u4e49\u548c\u4f7f\u7528\u6761\u4ef6\u53d8\u91cf\u3002\u6761\u4ef6\u53d8\u91cf\u901a\u5e38\u4e0e\u4e92\u65a5\u9501\uff08\u5982std::mutex\uff09\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u786e\u4fdd\u5728\u68c0\u67e5\u548c\u4fee\u6539\u5171\u4eab\u6570\u636e\u65f6\u7ebf\u7a0b\u95f4\u7684\u540c\u6b65\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5b9a\u4e49\u548c\u4f7f\u7528\u6761\u4ef6\u53d8\u91cf\uff1a</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;  \n#include &lt;condition_variable&gt;  \n\nstd::mutex mtx; // \u4e92\u65a5\u9501  \nstd::condition_variable cv; // \u6761\u4ef6\u53d8\u91cf  \nbool ready = false; // \u5171\u4eab\u53d8\u91cf\uff0c\u7528\u4e8e\u68c0\u67e5\u6761\u4ef6\u662f\u5426\u6ee1\u8db3  \n\nvoid print_number(int id) {\n    std::unique_lock&lt;std::mutex&gt; lck(mtx); // \u9501\u5b9a\u4e92\u65a5\u9501  \n    while (!ready) { // \u68c0\u67e5\u6761\u4ef6\u662f\u5426\u6ee1\u8db3  \n        cv.wait(lck); // \u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u5219\u7b49\u5f85\uff08\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u5e76\u91ca\u653e\u9501\uff09  \n    }\n    // \u6761\u4ef6\u6ee1\u8db3\uff0c\u6267\u884c\u76f8\u5e94\u64cd\u4f5c  \n    std::cout &lt;&lt; \"Thread \" &lt;&lt; id &lt;&lt; \" is running.\\n\";\n    // ... \u5176\u4ed6\u7ebf\u7a0b\u903b\u8f91 ...  \n}\n\nvoid go() {\n    std::this_thread::sleep_for(std::chrono::seconds(1)); // \u6a21\u62df\u5ef6\u8fdf  \n    std::unique_lock&lt;std::mutex&gt; lck(mtx); // \u9501\u5b9a\u4e92\u65a5\u9501  \n    ready = true; // \u8bbe\u7f6e\u6761\u4ef6\u53d8\u91cf  \n    std::cout &lt;&lt; \"wo yijing xiugai la  na 10 ge jiahuo keyi zhixing l \";\n    std::this_thread::sleep_for(std::chrono::seconds(3)); // \u6a21\u62df\u5ef6\u8fdf  \n    cv.notify_all(); // \u5524\u9192\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b  \n}\n\nint main() {\n    std::thread threads[10];\n    for (int i = 0; i &lt; 10; ++i) {\n        threads[i] = std::thread(print_number, i);\n    }\n\n    std::cout &lt;&lt; \"10 threads ready to race...\\n\";\n    go(); // \u89e6\u53d1\u6761\u4ef6\u53d8\u91cf  \n\n    for (auto&amp; th : threads) {\n        th.join(); // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210  \n    }\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff1a</p> <ul> <li>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2astd::mutex\u5bf9\u8c61mtx\u6765\u4fdd\u62a4\u5171\u4eab\u53d8\u91cfready\u3002</li> <li>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2astd::condition_variable\u5bf9\u8c61cv\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u7b49\u5f85\u548c\u901a\u77e5\u3002</li> <li>print_number\u51fd\u6570\u4e2d\u7684\u7ebf\u7a0b\u4f1a\u68c0\u67e5ready\u53d8\u91cf\uff0c\u5982\u679c\u5b83\u4e0d\u4e3atrue\uff0c\u5219\u8c03\u7528cv.wait(lck)\u6765\u7b49\u5f85\u3002\u5728\u7b49\u5f85\u671f\u95f4\uff0c\u7ebf\u7a0b\u4f1a\u91ca\u653e\u9501\uff08\u7531std::unique_lock\u7ba1\u7406\uff09\uff0c\u5e76\u963b\u585e\u76f4\u5230\u5176\u4ed6\u7ebf\u7a0b\u901a\u8fc7\u8c03\u7528cv.notify_all()\u6216cv.notify_one()\u6765\u5524\u9192\u5b83\u3002</li> <li>go\u51fd\u6570\u6a21\u62df\u4e86\u4e00\u4e2a\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u8bbe\u7f6eready\u4e3atrue\uff0c\u5e76\u901a\u77e5\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\u3002</li> <li>\u5728main\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e8610\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u8c03\u7528print_number\u51fd\u6570\u3002\u7136\u540e\uff0c\u6211\u4eec\u8c03\u7528go\u51fd\u6570\u6765\u89e6\u53d1\u6761\u4ef6\u53d8\u91cf\uff0c\u6700\u540e\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u3002</li> </ul> <p>Note</p> <p>\u8bf7\u6ce8\u610f\uff0c\u6761\u4ef6\u53d8\u91cf\u5fc5\u987b\u4e0e\u4e92\u65a5\u9501\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u786e\u4fdd\u5728\u68c0\u67e5\u6761\u4ef6\uff08while (!ready)\uff09\u548c\u4fee\u6539\u5171\u4eab\u6570\u636e\uff08ready = true;\uff09\u65f6\u7684\u7ebf\u7a0b\u5b89\u5168\u3002\u5982\u679c\u7701\u7565\u4e86\u4e92\u65a5\u9501\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u7ade\u4e89\u548c\u5176\u4ed6\u5e76\u53d1\u95ee\u9898\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#4-wait-wait_for","title":"4. wait \u548c wait_for","text":"<p>\u5728 C++ \u7684\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0cstd::condition_variable \u7c7b\u63d0\u4f9b\u4e86 wait \u548c wait_for \u65b9\u6cd5\uff0c\u7528\u4e8e\u8ba9\u7ebf\u7a0b\u5728\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\u4e4b\u524d\u7b49\u5f85\u3002\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u4e0e\u4e92\u65a5\u9501\uff08std::mutex \u6216 std::unique_lock\uff09\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u5730\u8bbf\u95ee\u5171\u4eab\u6570\u636e\u3002</p> <p>wait\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u5b83\u662f\u6761\u4ef6\u53d8\u91cf\u7684\u91cd\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#a-wait","title":"a. wait \u65b9\u6cd5","text":"<p>std::condition_variable::wait \u65b9\u6cd5\u7528\u4e8e\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u540c\u4e00\u4e2a std::condition_variable \u5b9e\u4f8b\u7684 notify_one \u6216 notify_all \u65b9\u6cd5\uff0c\u6216\u8005\u76f4\u5230\u6307\u5b9a\u7684\u8c13\u8bcd\u51fd\u6570\uff08\u5373\u6761\u4ef6\uff09\u8fd4\u56de true\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u4f60\u6ca1\u6709\u901a\u77e5\uff0c\u5373\u4f7f\u6761\u4ef6\u4e3aTRUE \uff0c\u5b83\u4e5f\u4e0d\u4f1a\u88ab\u6267\u884c\u3002\u5982\u679c\uff0c\u4f60\u901a\u77e5\u4e86\uff0c\u4f46\u662f\u6761\u4ef6\u4e0d\u6210\u7acb\uff0c\u5b83\u4ecd\u7136\u88ab\u963b\u585e\uff0c\u4e0d\u4f1a\u6267\u884c\u3002\u5b83\u7684\u6267\u884c\u987a\u5e8f\u662f \u5148\u901a\u77e5 \u518d\u68c0\u6d4b\u6761\u4ef6\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#i","title":"\u2170. \u53c2\u6570","text":"<ul> <li>std::unique_lock&amp; lock\uff1a\u4e00\u4e2a\u4e0e\u4e92\u65a5\u9501\u76f8\u5173\u8054\u7684 std::unique_lock \u5bf9\u8c61\u3002\u8c03\u7528 wait \u65f6\uff0c\u8fd9\u4e2a\u9501\u4f1a\u88ab\u81ea\u52a8\u91ca\u653e\uff0c\u5141\u8bb8\u5176\u4ed6\u7ebf\u7a0b\u83b7\u53d6\u8be5\u9501\u5e76\u6267\u884c\u3002\u5f53 wait \u8fd4\u56de\u65f6\uff0c\u9501\u4f1a\u88ab\u91cd\u65b0\u83b7\u53d6\u3002 <li>Predicate pred\uff1a\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001lambda \u8868\u8fbe\u5f0f\u7b49\uff09\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7ebf\u7a0b\u662f\u5426\u5e94\u8be5\u7ee7\u7eed\u7b49\u5f85\u3002</li> <p>wait(lck); wait(lck,pred);</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#ii","title":"\u2171. \u5de5\u4f5c\u539f\u7406","text":"<ol> <li>\u91ca\u653e\u9501\uff1a\u5f53\u7ebf\u7a0b\u8c03\u7528 wait \u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u9996\u5148\u91ca\u653e\u4e0e std::unique_lock \u5173\u8054\u7684\u4e92\u65a5\u9501\u3002\u8fd9\u662f\u4e3a\u4e86\u5141\u8bb8\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u548c\u4fee\u6539\u4e0e\u6761\u4ef6\u53d8\u91cf\u76f8\u5173\u7684\u5171\u4eab\u6570\u636e\u3002</li> <li>\u8fdb\u5165\u7b49\u5f85\u961f\u5217\uff1a\u91ca\u653e\u9501\u540e\uff0c\u7ebf\u7a0b\u4f1a\u8fdb\u5165\u6761\u4ef6\u53d8\u91cf\u7684\u7b49\u5f85\u961f\u5217\u4e2d\uff0c\u8fdb\u5165\u963b\u585e\u72b6\u6001\u3002\u6b64\u65f6\u7ebf\u7a0b\u4e0d\u518d\u6d88\u8017 CPU \u65f6\u95f4\uff0c\u76f4\u5230\u88ab\u5524\u9192\u3002</li> <li> <p>\u7b49\u5f85\u6761\u4ef6\u6216\u901a\u77e5\uff1a\u7ebf\u7a0b\u5728\u7b49\u5f85\u961f\u5217\u4e2d\u7b49\u5f85\uff0c\u76f4\u5230\u4e24\u4e2a\u6761\u4ef6\u4e4b\u4e00\u53d1\u751f\uff1a</p> <ul> <li>\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u4e86\u540c\u4e00\u4e2a\u6761\u4ef6\u53d8\u91cf\u7684 notify_one \u6216 notify_all \u65b9\u6cd5\uff0c\u5e76\u4e14\u8be5\u7ebf\u7a0b\u662f\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\uff08\u5bf9\u4e8e notify_one\uff09\u6216\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u6240\u6709\u7ebf\u7a0b\uff08\u5bf9\u4e8e notify_all\uff09\u3002</li> <li>\u8c13\u8bcd\u51fd\u6570 pred \u8fd4\u56de true\u3002</li> </ul> </li> <li> <p>\u91cd\u65b0\u83b7\u53d6\u9501\uff1a\u5f53\u7ebf\u7a0b\u88ab\u5524\u9192\u540e\uff08\u65e0\u8bba\u662f\u7531\u4e8e\u6536\u5230\u901a\u77e5\u8fd8\u662f\u6761\u4ef6\u6210\u7acb\uff09\uff0c\u5b83\u4f1a\u5c1d\u8bd5\u91cd\u65b0\u83b7\u53d6\u4e4b\u524d\u91ca\u653e\u7684\u4e92\u65a5\u9501\u3002\u5982\u679c\u6b64\u65f6\u9501\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u5219\u8be5\u7ebf\u7a0b\u4f1a\u963b\u585e\u5728\u4e92\u65a5\u9501\u4e0a\uff0c\u76f4\u5230\u83b7\u5f97\u9501\u3002</p> </li> <li>\u68c0\u67e5\u6761\u4ef6\uff1a\u83b7\u5f97\u9501\u540e\uff0c\u7ebf\u7a0b\u4f1a\u518d\u6b21\u8c03\u7528\u8c13\u8bcd\u51fd\u6570 pred \u6765\u68c0\u67e5\u6761\u4ef6\u662f\u5426\u6210\u7acb\u3002\u5982\u679c\u6761\u4ef6\u4e0d\u6210\u7acb\uff08\u5373 pred \u8fd4\u56de false\uff09\uff0c\u5219\u7ebf\u7a0b\u4f1a\u91cd\u65b0\u8fdb\u5165\u7b49\u5f85\u961f\u5217\uff0c\u5e76\u91ca\u653e\u9501\uff0c\u7ee7\u7eed\u7b49\u5f85\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u4e0d\u65ad\u91cd\u590d\uff0c\u76f4\u5230\u6761\u4ef6\u6210\u7acb\u3002</li> <li>\u7ee7\u7eed\u6267\u884c\uff1a\u5982\u679c\u6761\u4ef6\u6210\u7acb\uff08\u5373 pred \u8fd4\u56de true\uff09\uff0c\u5219\u7ebf\u7a0b\u4f1a\u9000\u51fa wait \u65b9\u6cd5\uff0c\u5e76\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u7684\u4ee3\u7801\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#iii","title":"\u2172. \u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>wait \u65b9\u6cd5\u5fc5\u987b\u5728\u5df2\u7ecf\u9501\u5b9a\u4e92\u65a5\u9501\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u629b\u51fa std::system_error \u5f02\u5e38\u3002</li> <li>\u5728\u8c03\u7528 wait \u65b9\u6cd5\u4e4b\u524d\uff0c\u5e94\u8be5\u786e\u4fdd\u4e0e\u6761\u4ef6\u53d8\u91cf\u76f8\u5173\u7684\u5171\u4eab\u6570\u636e\u5df2\u7ecf\u88ab\u6b63\u786e\u521d\u59cb\u5316\uff0c\u5e76\u4e14\u5df2\u7ecf\u8bbe\u7f6e\u4e86\u9002\u5f53\u7684\u6761\u4ef6\u3002</li> <li>\u7531\u4e8e wait \u65b9\u6cd5\u4f1a\u91ca\u653e\u548c\u91cd\u65b0\u83b7\u53d6\u9501\uff0c\u56e0\u6b64\u5728\u4f7f\u7528 wait \u65b9\u6cd5\u65f6\u5e94\u8be5\u786e\u4fdd\u6ca1\u6709\u5176\u4ed6\u7ebf\u7a0b\u4f1a\u5728\u7b49\u5f85\u671f\u95f4\u4fee\u6539\u4e0e\u6761\u4ef6\u53d8\u91cf\u76f8\u5173\u7684\u5171\u4eab\u6570\u636e\uff0c\u4ee5\u907f\u514d\u7ade\u6001\u6761\u4ef6\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#b-wait","title":"b. wait \u65b9\u6cd5","text":"<p>wait \u65b9\u6cd5\u4f7f\u7ebf\u7a0b\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528 notify_one \u6216 notify_all \u65b9\u6cd5\u6765\u5524\u9192\u5b83\u3002\u5728\u7b49\u5f85\u671f\u95f4\uff0c\u7ebf\u7a0b\u4f1a\u91ca\u653e\u4e0e\u4e4b\u5173\u8054\u7684\u4e92\u65a5\u9501\uff0c\u5141\u8bb8\u5176\u4ed6\u7ebf\u7a0b\u8bbf\u95ee\u5171\u4eab\u6570\u636e\u3002\u5f53\u7ebf\u7a0b\u88ab\u5524\u9192\u65f6\uff0c\u5b83\u4f1a\u91cd\u65b0\u83b7\u53d6\u4e92\u65a5\u9501\uff0c\u5e76\u7ee7\u7eed\u6267\u884c\u3002</p> <p>wait \u65b9\u6cd5\u901a\u5e38\u653e\u5728\u4e00\u4e2a\u5faa\u73af\u4e2d\uff0c\u4ee5\u68c0\u67e5\u6761\u4ef6\u662f\u5426\u771f\u6b63\u6ee1\u8db3\u3002\u8fd9\u662f\u56e0\u4e3a notify_one \u6216 notify_all \u53ea\u662f\u53d1\u9001\u4e86\u5524\u9192\u4fe1\u53f7\uff0c\u4f46\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6761\u4ef6\u5df2\u7ecf\u6ee1\u8db3\u3002\u4f8b\u5982\uff1a</p> <pre><code>std::unique_lock&lt;std::mutex&gt; lck(mtx);  \nwhile (!condition) { // \u68c0\u67e5\u6761\u4ef6\u662f\u5426\u6ee1\u8db3  \n    cv.wait(lck); // \u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u5219\u7b49\u5f85\uff08\u91ca\u653e\u9501\u5e76\u963b\u585e\uff09  \n}  \n// \u6761\u4ef6\u6ee1\u8db3\uff0c\u6267\u884c\u540e\u7eed\u64cd\u4f5c\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#c-wait_for","title":"c. wait_for \u65b9\u6cd5","text":"<p>wait_for \u65b9\u6cd5\u4e0e wait \u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4f46\u5b83\u5141\u8bb8\u4f60\u6307\u5b9a\u4e00\u4e2a\u8d85\u65f6\u65f6\u95f4\u3002\u5982\u679c\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u6761\u4ef6\u6ca1\u6709\u6ee1\u8db3\uff0c\u5e76\u4e14\u6ca1\u6709\u6536\u5230\u5524\u9192\u4fe1\u53f7\uff0c\u90a3\u4e48 wait_for \u4f1a\u8fd4\u56de\uff0c\u5e76\u4e14\u7ebf\u7a0b\u4f1a\u91cd\u65b0\u83b7\u53d6\u4e92\u65a5\u9501\u3002</p> <p>wait_for \u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u65f6\u95f4\u95f4\u9694\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u7ebf\u7a0b\u613f\u610f\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\u3002\u8fd9\u4e2a\u65f6\u95f4\u95f4\u9694\u53ef\u4ee5\u662f std::chrono \u5e93\u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u65f6\u95f4\u5355\u4f4d\u3002</p> <p>wait_for \u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a std::cv_status \u679a\u4e3e\u503c\uff0c\u8868\u793a\u7b49\u5f85\u64cd\u4f5c\u7684\u7ed3\u679c\u3002</p> <p>\u53ef\u80fd\u7684\u8fd4\u56de\u503c\u5305\u62ec\uff1a</p> <ul> <li>std::cv_status::no_timeout\uff1a\u8868\u793a\u7b49\u5f85\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff0c\u5373\u5728\u8d85\u65f6\u65f6\u95f4\u5185\u6761\u4ef6\u88ab\u6ee1\u8db3\u6216\u6536\u5230\u4e86\u5524\u9192\u4fe1\u53f7\u3002</li> <li>std::cv_status::timeout\uff1a\u8868\u793a\u7b49\u5f85\u64cd\u4f5c\u56e0\u8d85\u65f6\u800c\u7ed3\u675f\uff0c\u6761\u4ef6\u6ca1\u6709\u88ab\u6ee1\u8db3\u4e14\u6ca1\u6709\u6536\u5230\u5524\u9192\u4fe1\u53f7\u3002</li> </ul> <p>\u4f7f\u7528 wait_for \u7684\u793a\u4f8b\uff1a</p> <pre><code>std::unique_lock&lt;std::mutex&gt; lck(mtx);  \nif (cv.wait_for(lck, std::chrono::seconds(1), [](){ return condition; }) == std::cv_status::no_timeout) {  \n    // \u6761\u4ef6\u57281\u79d2\u5185\u88ab\u6ee1\u8db3\uff0c\u6267\u884c\u540e\u7eed\u64cd\u4f5c  \n} else {  \n    // \u7b49\u5f85\u8d85\u65f6\uff0c\u5904\u7406\u8d85\u65f6\u60c5\u51b5  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 lambda \u8868\u8fbe\u5f0f\u4f5c\u4e3a wait_for \u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u3002\u8fd9\u4e2a lambda \u8868\u8fbe\u5f0f\u5b9a\u4e49\u4e86\u7b49\u5f85\u7684\u6761\u4ef6\u3002\u5982\u679c\u6761\u4ef6\u57281\u79d2\u5185\u88ab\u6ee1\u8db3\uff0c\u6216\u8005\u7ebf\u7a0b\u57281\u79d2\u5185\u6536\u5230\u4e86\u5524\u9192\u4fe1\u53f7\uff0c\u90a3\u4e48 wait_for \u4f1a\u8fd4\u56de std::cv_status::no_timeout\uff0c\u5e76\u6267\u884c\u540e\u7eed\u64cd\u4f5c\u3002\u5426\u5219\uff0cwait_for \u4f1a\u8fd4\u56de std::cv_status::timeout\uff0c\u5e76\u5904\u7406\u8d85\u65f6\u60c5\u51b5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#notify_all-notify_one","title":"notify_all \u548c notify_one","text":"<p>notify_all() \u548c notify_one() \u662f\u6761\u4ef6\u53d8\u91cf\uff08std::condition_variable\uff09\u7684\u4e24\u4e2a\u6210\u5458\u51fd\u6570\uff0c\u7528\u4e8e\u5524\u9192\u7b49\u5f85\u6761\u4ef6\u53d8\u91cf\u7684\u7ebf\u7a0b\u3002  </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#a-notify_all","title":"a. notify_all()","text":"<ul> <li>\u4f5c\u7528\uff1a\u5524\u9192\u6240\u6709\u7b49\u5f85\u8be5\u6761\u4ef6\u53d8\u91cf\u7684\u7ebf\u7a0b\u3002  </li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u9002\u7528\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u9700\u8981\u540c\u65f6\u68c0\u67e5\u6761\u4ef6\u7684\u60c5\u51b5\u3002\u901a\u5e38\u7528\u4e8e\u5e7f\u64ad\u901a\u77e5\uff0c\u8ba9\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\u90fd\u91cd\u65b0\u68c0\u67e5\u6761\u4ef6\u3002  </li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#b-notify_one","title":"b. notify_one()","text":"<ul> <li>\u4f5c\u7528\uff1a\u5524\u9192\u4e00\u4e2a\u7b49\u5f85\u8be5\u6761\u4ef6\u53d8\u91cf\u7684\u7ebf\u7a0b\u3002  </li> <li>\u4f7f\u7528\u573a\u666f\uff1a\u9002\u7528\u4e8e\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u9700\u8981\u5904\u7406\u6761\u4ef6\u7684\u60c5\u51b5\u3002\u901a\u5e38\u7528\u4e8e\u4f18\u5148\u7ea7\u8c03\u5ea6\u6216\u961f\u5217\u5904\u7406\uff0c\u8ba9\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u6267\u884c\u6743\u3002  </li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/07-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable/#6","title":"6. \u6848\u4f8b\uff1a\u4e24\u4e2a\u7ebf\u7a0b\u4ea4\u66ff\u6267\u884c","text":"<p>\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u7684\u4f5c\u7528\u662f\u8ba9\u4e24\u4e2a\u7ebf\u7a0b\u4ea4\u66ff\u9012\u589e\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf myvalue\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u4e0d\u4f1a\u540c\u65f6\u4fee\u6539 myvalue\u3002\u901a\u8fc7\u4f7f\u7528\u4e92\u65a5\u91cf mtx \u6765\u4fdd\u62a4\u5171\u4eab\u53d8\u91cf\uff0c\u5e76\u4f7f\u7528\u6761\u4ef6\u53d8\u91cf cv \u6765\u534f\u8c03\u7ebf\u7a0b\u7684\u6267\u884c\u987a\u5e8f\uff0c\u786e\u4fdd\u7ebf\u7a0b1\u548c\u7ebf\u7a0b2\u4ea4\u66ff\u6267\u884c\u9012\u589e\u64cd\u4f5c\u3002</p> <pre><code>#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n#include &lt;mutex&gt;  \n#include &lt;condition_variable&gt;  \n\nstd::mutex mtx;             // \u7528\u4e8e\u4fdd\u62a4myvalue\u548cturn\u7684\u4e92\u65a5\u91cf  \nstd::condition_variable cv; // \u6761\u4ef6\u53d8\u91cf  \nint myvalue = 0;           // \u5171\u4eab\u7684myvalue\u53d8\u91cf  \nbool turn = false;         // \u63a7\u5236\u54ea\u4e2a\u7ebf\u7a0b\u5e94\u8be5\u6267\u884c  \n\nvoid increment(int thread_id) {\n    for (int i = 0; i &lt; 10; ++i) { // \u4f8b\u5982\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u6267\u884c10\u6b21  \n        std::unique_lock&lt;std::mutex&gt; lock(mtx);\n\n        // \u7b49\u5f85\u8f6e\u5230\u81ea\u5df1\u6267\u884c  \n        cv.wait(lock, [&amp;] { return (thread_id == 1) ? !turn : turn; });\n\n        // \u6267\u884cmyvalue++  \n        ++myvalue;\n        std::cout &lt;&lt; \"Thread \" &lt;&lt; thread_id &lt;&lt; \" incremented myvalue to \" &lt;&lt; myvalue &lt;&lt; std::endl;\n\n        // \u5207\u6362turn\u6807\u5fd7\u5e76\u901a\u77e5\u53e6\u4e00\u4e2a\u7ebf\u7a0b  \n        turn = !turn;\n        cv.notify_all(); // \u901a\u77e5\u6240\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\uff0c\u6761\u4ef6\u53ef\u80fd\u5df2\u6539\u53d8\uff08\u5c3d\u7ba1\u8fd9\u91cc\u53ea\u9700\u8981notify_one\uff09  \n    }\n}\n\nint main() {\n    std::thread t1(increment, 1);\n    std::thread t2(increment, 2);\n\n    t1.join();\n    t2.join();\n\n    std::cout &lt;&lt; \"Final value of myvalue: \" &lt;&lt; myvalue &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/","title":"\u301008\u3011\u8bfb\u5199\u9501","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/#1","title":"1. \u8bfb\u5199\u9501","text":"<p> C++\u4e2d\u7684\u8bfb\u5199\u9501\uff08\u4e5f\u79f0\u4e3a\u5171\u4eab\u9501\u548c\u72ec\u5360\u9501\uff09\u662f\u4e00\u79cd\u540c\u6b65\u673a\u5236\uff0c\u7528\u4e8e\u63a7\u5236\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u53d6\u8d44\u6e90\uff0c\u4f46\u5728\u5199\u5165\u8d44\u6e90\u65f6\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u72ec\u5360\u8bbf\u95ee\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/#2","title":"2. \u8bfb\u5199\u9501\u57fa\u672c\u7279\u5f81","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/#3-shared_mutex","title":"3. shared_mutex","text":"<p><code>std::shared_mutex</code> \u662f C++17 \u6807\u51c6\u5f15\u5165\u7684\u4e00\u79cd\u4e92\u65a5\u9501\uff0c\u7528\u4e8e\u652f\u6301\u591a\u8bfb\u5355\u5199\u7684\u5e76\u53d1\u8bbf\u95ee\u6a21\u5f0f\u3002</p> <p>\u5b83\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6301\u6709\u5171\u4eab\u9501\uff08\u8bfb\u9501\uff09\uff0c\u4f46\u5728\u6301\u6709\u72ec\u5360\u9501\uff08\u5199\u9501\uff09\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4e0d\u80fd\u518d\u6301\u6709\u4efb\u4f55\u7c7b\u578b\u7684\u9501\u3002 </p> <p>\u4e3b\u8981\u6210\u5458\u51fd\u6570\u529f\u80fd\u89e3\u91ca\uff1a</p> <ul> <li><code>lock()</code>: \u83b7\u53d6\u72ec\u5360\u9501\u3002\u5982\u679c\u5f53\u524d\u6709\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u5171\u4eab\u9501\u6216\u72ec\u5360\u9501\uff0c\u5219\u5f53\u524d\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\u3002</li> <li><code>try_lock()</code>: \u5c1d\u8bd5\u83b7\u53d6\u72ec\u5360\u9501\u3002\u5982\u679c\u9501\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u5219\u8fd4\u56de <code>false</code>\uff0c\u5426\u5219\u83b7\u53d6\u9501\u5e76\u8fd4\u56de <code>true</code>\u3002</li> <li><code>unlock()</code>: \u91ca\u653e\u72ec\u5360\u9501\u3002</li> <li><code>lock_shared()</code>: \u83b7\u53d6\u5171\u4eab\u9501\u3002\u5982\u679c\u5f53\u524d\u6709\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u72ec\u5360\u9501\uff0c\u5219\u5f53\u524d\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\u3002</li> <li><code>try_lock_shared()</code>: \u5c1d\u8bd5\u83b7\u53d6\u5171\u4eab\u9501\u3002\u5982\u679c\u9501\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\u72ec\u5360\u9501\uff0c\u5219\u8fd4\u56de <code>false</code>\uff0c\u5426\u5219\u83b7\u53d6\u9501\u5e76\u8fd4\u56de <code>true</code>\u3002</li> <li><code>unlock_shared()</code>: \u91ca\u653e\u5171\u4eab\u9501\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/#4-shared_lock","title":"4. shared_lock","text":"<p><code>std::shared_lock</code> \u662f C++17 \u6807\u51c6\u5f15\u5165\u7684\u4e00\u79cd\u9501\u7ba1\u7406\u5668\uff0c\u7528\u4e8e\u7ba1\u7406 <code>std::shared_mutex</code> \u7684\u5171\u4eab\u9501\u3002\u5b83\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u548c\u91ca\u653e\u5171\u4eab\u9501\uff0c\u7b80\u5316\u4e86\u9501\u7684\u7ba1\u7406\u3002 </p> <p>\u4e3b\u8981\u6210\u5458\u51fd\u6570\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u6784\u9020\u51fd\u6570\uff1a\u6784\u9020\u65f6\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u5171\u4eab\u9501\u3002</p> <ul> <li><code>std::shared_lock(mutex_type&amp; m)</code>: \u6784\u9020\u65f6\u83b7\u53d6\u5171\u4eab\u9501\u3002</li> <li><code>std::shared_lock(mutex_type&amp; m, std::defer_lock_t)</code>: \u6784\u9020\u65f6\u4e0d\u83b7\u53d6\u9501\u3002</li> <li><code>std::shared_lock(mutex_type&amp; m, std::try_to_lock_t)</code>: \u5c1d\u8bd5\u83b7\u53d6\u5171\u4eab\u9501\u3002</li> <li><code>std::shared_lock(mutex_type&amp; m, std::adopt_lock_t)</code>: \u5047\u8bbe\u8c03\u7528\u8005\u5df2\u7ecf\u6301\u6709\u5171\u4eab\u9501\u3002</li> </ul> </li> <li> <p><code>lock()</code>: \u83b7\u53d6\u5171\u4eab\u9501\u3002</p> </li> <li><code>try_lock()</code>: \u5c1d\u8bd5\u83b7\u53d6\u5171\u4eab\u9501\u3002</li> <li><code>unlock()</code>: \u91ca\u653e\u5171\u4eab\u9501\u3002</li> <li><code>owns_lock()</code>: \u8fd4\u56de\u9501\u662f\u5426\u88ab\u6301\u6709\u3002</li> <li><code>release()</code>: \u91ca\u653e\u9501\u7684\u6240\u6709\u6743\uff0c\u4f46\u4e0d\u89e3\u9501\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/08-%E8%AF%BB%E5%86%99%E9%94%81/#5","title":"5. \u8bfb\u5199\u9501\u7684\u5b9e\u73b0","text":"<p>\u5728C++\u6807\u51c6\u5e93\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>std::shared_mutex</code>\u548c<code>std::shared_lock</code>\u6765\u5b9e\u73b0\u8bfb\u5199\u9501\uff0c\u4f8b\u5982\uff1a</p> <pre><code>#include &lt;shared_mutex&gt;\n#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstd::shared_mutex rw_mutex; // \u8bfb\u5199\u9501\nint shared_data = 0; // \u5171\u4eab\u6570\u636e\n\n// \u8bfb\u7ebf\u7a0b\u51fd\u6570\nvoid reader() {\n    std::shared_lock lock(rw_mutex); // \u7533\u8bf7\u5171\u4eab\u9501\n    std::cout &lt;&lt; \"Reader thread: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" reads value: \" &lt;&lt; shared_data &lt;&lt; std::endl; // \u8f93\u51fa\u8bfb\u53d6\u5230\u7684\u5171\u4eab\u6570\u636e\n}\n\n// \u5199\u7ebf\u7a0b\u51fd\u6570\nvoid writer(int value) {\n    std::unique_lock lock(rw_mutex); // \u7533\u8bf7\u72ec\u5360\u9501\n    shared_data = value; // \u4fee\u6539\u5171\u4eab\u6570\u636e\n    std::cout &lt;&lt; \"Writer thread: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \" writes value: \" &lt;&lt; shared_data &lt;&lt; std::endl; // \u8f93\u51fa\u5199\u5165\u7684\u5171\u4eab\u6570\u636e\n}\n\nint main() {\n    std::vector&lt;std::thread&gt; threads; // \u7528\u4e8e\u5b58\u50a8\u7ebf\u7a0b\u7684\u5411\u91cf\n\n    // \u521b\u5efa\u8bfb\u7ebf\u7a0b\n    for (int i = 0; i &lt; 5; ++i) {\n        threads.emplace_back(reader); // \u542f\u52a8\u8bfb\u7ebf\u7a0b\u5e76\u52a0\u5165\u5411\u91cf\n    }\n\n    // \u521b\u5efa\u5199\u7ebf\u7a0b\n    for (int i = 0; i &lt; 2; ++i) {\n        threads.emplace_back(writer, i); // \u542f\u52a8\u5199\u7ebf\u7a0b\u5e76\u52a0\u5165\u5411\u91cf\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n    for (auto&amp; t : threads) {\n        t.join(); // \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f\n    }\n\n    return 0;\n}\n</code></pre> <p>\u8fd9\u4e2a\u4ee3\u7801\u4e2d\uff0creader\u51fd\u6570\u7528\u4e8e\u8bfb\u53d6\u5171\u4eab\u6570\u636e\uff0cwriter\u51fd\u6570\u7528\u4e8e\u5199\u5165\u5171\u4eab\u6570\u636e\u3002\u5728main\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u591a\u4e2a\u8bfb\u7ebf\u7a0b\u548c\u5199\u7ebf\u7a0b\uff0c\u5e76\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u3002\u8bfb\u7ebf\u7a0b\u53ef\u4ee5\u5e76\u53d1\u5730\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u5199\u7ebf\u7a0b\u9700\u8981\u72ec\u5360\u9501\u624d\u80fd\u4fee\u6539\u6570\u636e\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/","title":"\u301009\u3011\u539f\u5b50\u53d8\u91cf\u548c\u539f\u5b50\u64cd\u4f5c","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#1","title":"1. \u539f\u5b50\u53d8\u91cf","text":"<p>\u539f\u5b50\u53d8\u91cf\u662f\u6307\u4f7f\u7528<code>std::atomic</code>\u6a21\u677f\u7c7b\u5b9a\u4e49\u7684\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u63d0\u4f9b\u4e86\u5bf9\u5176\u6240\u8868\u793a\u7684\u503c\u8fdb\u884c\u539f\u5b50\u64cd\u4f5c\u7684\u80fd\u529b\u3002\u539f\u5b50\u53d8\u91cf\u786e\u4fdd\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u5bf9\u53d8\u91cf\u7684\u8bfb\u5199\u64cd\u4f5c\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u5373\u64cd\u4f5c\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4e2d\u65ad\u6216\u5e72\u6270\u3002 </p> <p>\u5b9a\u4e49\u539f\u5b50\u53d8\u91cf</p> <pre><code>#include &lt;atomic&gt;\n\nstd::atomic&lt;int&gt; atomicInt(0); //\u5b9a\u4e49\u4e00\u4e2a int\u578b\u7684\u539f\u5b50\u53d8\u91cf  \u540d\u79f0\u4ea4 atomicInt \u9ed8\u8ba4\u503c\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#2","title":"2. \u539f\u5b50\u64cd\u4f5c","text":"<p>\u539f\u5b50\u64cd\u4f5c\u662f\u6307\u5bf9\u539f\u5b50\u53d8\u91cf\u8fdb\u884c\u7684\u4e0d\u53ef\u5206\u5272\u7684\u64cd\u4f5c\u3002\u4e0d\u53ef\u5206\u5272\u7684\u610f\u601d\u662f\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5b8c\u5168\u6267\u884c\uff0c\u8981\u4e48\u5b8c\u5168\u4e0d\u6267\u884c\uff0c\u4e0d\u4f1a\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6253\u65ad\u3002\u8fd9\u4e9b\u64cd\u4f5c\u5305\u62ec\u57fa\u672c\u7684\u8bfb\u53d6\u3001\u5199\u5165\u3001\u4ea4\u6362\u3001\u6bd4\u8f83\u5e76\u4ea4\u6362\uff08CAS\uff09\u4ee5\u53ca\u4e00\u4e9b\u7b97\u672f\u548c\u6309\u4f4d\u64cd\u4f5c\u3002  - \u52a0\u8f7d\u548c\u5b58\u50a8\u64cd\u4f5c</p> <pre><code>int value = atomicInt.load(); // \u539f\u5b50\u52a0\u8f7d\natomicInt.store(10);          // \u539f\u5b50\u5b58\u50a8\n</code></pre> <ul> <li>\u8bfb\u5199\u64cd\u4f5c\uff08\u7b49\u4ef7\u4e8e load \u548c store\uff09</li> </ul> <pre><code>int value = atomicInt; // \u539f\u5b50\u8bfb\u53d6\natomicInt = 10;        // \u539f\u5b50\u5199\u5165\n</code></pre> <ul> <li>\u81ea\u589e\u548c\u81ea\u51cf\u64cd\u4f5c</li> </ul> <pre><code>atomicInt++; // \u539f\u5b50\u81ea\u589e\natomicInt--; // \u539f\u5b50\u81ea\u51cf\n++atomicInt; // \u524d\u7f6e\u81ea\u589e\n--atomicInt; // \u524d\u7f6e\u81ea\u51cf\n</code></pre> <ul> <li>\u5176\u4ed6\u4fee\u6539\u64cd\u4f5c</li> </ul> <pre><code>atomicInt += 5; // \u539f\u5b50\u52a0\natomicInt -= 3; // \u539f\u5b50\u51cf\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#_1","title":"\u9ad8\u7ea7\u64cd\u4f5c","text":"<ul> <li>compare_exchange\uff1a\u6bd4\u8f83\u5e76\u4ea4\u6362\u64cd\u4f5c\uff0c\u7528\u4e8e\u5b9e\u73b0\u65e0\u9501\u6570\u636e\u7ed3\u6784\u7b49\u590d\u6742\u540c\u6b65\u673a\u5236\u3002</li> </ul> <pre><code>int expected = 0;\nint desired = 1;\nif (atomicInt.compare_exchange_strong(expected, desired)) {\n    // \u5982\u679catomicInt\u7684\u5f53\u524d\u503c\u7b49\u4e8eexpected\uff0c\u5219\u5c06\u5176\u8bbe\u7f6e\u4e3adesired\n    // \u5e76\u8fd4\u56detrue\uff0c\u5426\u5219\u5c06expected\u66f4\u65b0\u4e3aatomicInt\u7684\u5f53\u524d\u503c\uff0c\u8fd4\u56defalse\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#3","title":"3. \u539f\u5b50\u64cd\u4f5c\u7684\u5185\u5b58\u5e8f\u95ee\u9898","text":"<p>\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u5185\u5b58\u987a\u5e8f\u95ee\u9898\u662f\u7531\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u7684\u4f18\u5316\u884c\u4e3a\u5f15\u8d77\u7684\u3002\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u53ef\u80fd\u4f1a\u5bf9\u5185\u5b58\u64cd\u4f5c\uff08\u5982\u8bfb\u53d6\u548c\u5199\u5165\uff09\u8fdb\u884c\u91cd\u6392\u3002\u8fd9\u79cd\u91cd\u6392\u5728\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\u901a\u5e38\u4e0d\u4f1a\u5f15\u8d77\u95ee\u9898\uff0c\u4f46\u5728\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u4e2d\uff0c\u91cd\u6392\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u95f4\u7684\u6570\u636e\u7ade\u4e89\u548c\u4e0d\u53ef\u9884\u6d4b\u7684\u884c\u4e3a\u3002</p> <p></p> <p></p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#4-atomic","title":"4. atomic\u7684\u6210\u5458\u51fd\u6570","text":"<p>\u5728 C++ \u4e2d\uff0c<code>std::atomic</code> \u7c7b\u6a21\u677f\u63d0\u4f9b\u4e86\u4e00\u4e9b\u64cd\u4f5c\u7b26\u548c\u6210\u5458\u51fd\u6570\uff0c\u7528\u4e8e\u6267\u884c\u539f\u5b50\u64cd\u4f5c\u3002\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u548c\u6210\u5458\u51fd\u6570\u4fdd\u8bc1\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u5bf9\u539f\u5b50\u53d8\u91cf\u7684\u64cd\u4f5c\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002\u4ee5\u4e0b\u662f<code>std::atomic</code> \u652f\u6301\u7684\u4e00\u4e9b\u4e3b\u8981\u539f\u5b50\u64cd\u4f5c\u7b26\u548c\u6210\u5458\u51fd\u6570\uff1a</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#41","title":"4.1. \u539f\u5b50\u64cd\u4f5c\u7b26","text":"<ol> <li> <p>\u8d4b\u503c\u64cd\u4f5c\u7b26 (<code>=</code>)</p> <ul> <li>\u7528\u4e8e\u8d4b\u503c\u64cd\u4f5c\u3002</li> <li>\u4f8b\u5982\uff1a<code>atomicVar = value;</code></li> </ul> </li> <li> <p>\u53d6\u503c\u64cd\u4f5c\u7b26 (<code>T()</code>)</p> <ul> <li>\u7528\u4e8e\u83b7\u53d6\u539f\u5b50\u53d8\u91cf\u7684\u5f53\u524d\u503c\u3002</li> <li>\u4f8b\u5982\uff1a<code>T value = atomicVar;</code></li> </ul> </li> <li> <p>\u524d\u7f6e\u548c\u540e\u7f6e\u9012\u589e\u64cd\u4f5c\u7b26 (<code>++a</code>, <code>a++</code>)</p> <ul> <li>\u7528\u4e8e\u5c06\u539f\u5b50\u53d8\u91cf\u7684\u503c\u9012\u589e\u3002</li> <li>\u4f8b\u5982\uff1a<code>++atomicVar;</code> \u6216 <code>atomicVar++;</code></li> </ul> </li> <li> <p>\u524d\u7f6e\u548c\u540e\u7f6e\u9012\u51cf\u64cd\u4f5c\u7b26 (<code>--a</code>, <code>a--</code>)</p> <ul> <li>\u7528\u4e8e\u5c06\u539f\u5b50\u53d8\u91cf\u7684\u503c\u9012\u51cf\u3002</li> <li>\u4f8b\u5982\uff1a<code>--atomicVar;</code> \u6216 <code>atomicVar--;</code></li> </ul> </li> <li> <p>\u590d\u5408\u8d4b\u503c\u64cd\u4f5c\u7b26 (<code>+=</code>, <code>-=</code>, <code>&amp;=</code>, <code>|=</code>, <code>^=</code>)</p> <ul> <li>\u7528\u4e8e\u5bf9\u539f\u5b50\u53d8\u91cf\u8fdb\u884c\u590d\u5408\u64cd\u4f5c\u3002</li> <li>\u4f8b\u5982\uff1a<code>atomicVar += value;</code></li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#42","title":"4.2. \u539f\u5b50\u6210\u5458\u51fd\u6570","text":"<ol> <li> <p><code>is_lock_free()</code></p> <ul> <li>\u68c0\u67e5\u8be5\u539f\u5b50\u64cd\u4f5c\u662f\u5426\u662f\u65e0\u9501\u7684\u3002</li> <li>\u8fd4\u56de\u503c\uff1a<code>bool</code></li> </ul> </li> <li> <p><code>load(memory_order order = memory_order_seq_cst) const</code></p> <ul> <li>\u539f\u5b50\u5730\u8bfb\u53d6\u5e76\u8fd4\u56de\u5f53\u524d\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u5f53\u524d\u503c</li> </ul> </li> <li> <p><code>store(T desired, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u503c<code>desired</code>\u5b58\u50a8\u5230\u5bf9\u8c61\u4e2d\u3002</li> <li>\u53c2\u6570\uff1a\u5b58\u50a8\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> </ul> </li> <li> <p><code>exchange(T desired, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u503c<code>desired</code>\u5b58\u50a8\u5230\u5bf9\u8c61\u4e2d\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u5b58\u50a8\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> <li> <p><code>compare_exchange_weak(T&amp; expected, T desired, memory_order success, memory_order failure)</code></p> <ul> <li>\u5982\u679c\u5f53\u524d\u503c\u7b49\u4e8e<code>expected</code>\uff0c\u5219\u5c06\u5176\u66ff\u6362\u4e3a<code>desired</code>\uff0c\u5e76\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u5e76\u5c06<code>expected</code>\u66f4\u65b0\u4e3a\u5f53\u524d\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u671f\u671b\u503c\u5f15\u7528\uff0c\u65b0\u7684\u503c\uff0c\u6210\u529f\u548c\u5931\u8d25\u7684\u5185\u5b58\u987a\u5e8f</li> <li>\u8fd4\u56de\u503c\uff1a\u5e03\u5c14\u503c</li> </ul> </li> <li> <p><code>compare_exchange_strong(T&amp; expected, T desired, memory_order success, memory_order failure)</code></p> <ul> <li>\u7c7b\u4f3c\u4e8e<code>compare_exchange_weak</code>\uff0c\u4f46\u5177\u6709\u66f4\u5f3a\u7684\u4fdd\u8bc1\uff0c\u5373\u5b83\u4e0d\u4f1a\u7531\u4e8e\u4f2a\u5931\u8d25\u800c\u8fd4\u56de<code>false</code>\u3002</li> <li>\u53c2\u6570\u548c\u8fd4\u56de\u503c\u540c\u4e0a</li> </ul> </li> <li> <p><code>fetch_add(T arg, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u5f53\u524d\u503c\u589e\u52a0<code>arg</code>\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u589e\u52a0\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> <li> <p><code>fetch_sub(T arg, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u5f53\u524d\u503c\u51cf\u5c11<code>arg</code>\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u51cf\u5c11\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> <li> <p><code>fetch_and(T arg, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u5f53\u524d\u503c\u4e0e<code>arg</code>\u8fdb\u884c\u6309\u4f4d\u4e0e\u8fd0\u7b97\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u6309\u4f4d\u4e0e\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> <li> <p><code>fetch_or(T arg, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u5f53\u524d\u503c\u4e0e<code>arg</code>\u8fdb\u884c\u6309\u4f4d\u6216\u8fd0\u7b97\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u6309\u4f4d\u6216\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> <li> <p><code>fetch_xor(T arg, memory_order order = memory_order_seq_cst)</code></p> <ul> <li>\u539f\u5b50\u5730\u5c06\u5f53\u524d\u503c\u4e0e<code>arg</code>\u8fdb\u884c\u6309\u4f4d\u5f02\u6216\u8fd0\u7b97\uff0c\u5e76\u8fd4\u56de\u4e4b\u524d\u7684\u503c\u3002</li> <li>\u53c2\u6570\uff1a\u6309\u4f4d\u5f02\u6216\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u4e4b\u524d\u7684\u503c</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/09-%E5%8E%9F%E5%AD%90%E5%8F%98%E9%87%8F%E5%92%8C%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/#43","title":"4.3. \u8868\u683c\u6574\u7406","text":"\u6210\u5458\u51fd\u6570/\u64cd\u4f5c\u7b26 \u63cf\u8ff0 \u53c2\u6570 \u8fd4\u56de\u503c \u793a\u4f8b <code>atomic()</code> \u9ed8\u8ba4\u6784\u9020\u51fd\u6570 \u65e0 \u65e0 <code>std::atomic&lt;int&gt; atomicInt;</code> <code>atomic(T desired)</code> \u5e26\u521d\u59cb\u503c\u7684\u6784\u9020\u51fd\u6570 \u521d\u59cb\u503c \u65e0 <code>std::atomic&lt;int&gt; atomicInt(10);</code> <code>is_lock_free()</code> \u68c0\u67e5\u539f\u5b50\u64cd\u4f5c\u662f\u5426\u65e0\u9501 \u65e0 <code>bool</code> <code>bool lockFree = atomicInt.is_lock_free();</code> <code>load(memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u8bfb\u53d6\u5f53\u524d\u503c \u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u5f53\u524d\u503c <code>int value = atomicInt.load();</code> <code>store(T desired, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u5b58\u50a8\u503c \u5b58\u50a8\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u65e0 <code>atomicInt.store(10);</code> <code>exchange(T desired, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u4ea4\u6362\u503c \u5b58\u50a8\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.exchange(20);</code> <code>compare_exchange_weak(T&amp; expected, T desired, memory_order success, memory_order failure)</code> \u5f31\u6bd4\u8f83\u5e76\u4ea4\u6362 \u671f\u671b\u503c\u5f15\u7528\uff0c\u65b0\u7684\u503c\uff0c\u6210\u529f\u548c\u5931\u8d25\u7684\u5185\u5b58\u987a\u5e8f <code>bool</code> <code>int expected = 10; bool result = atomicInt.compare_exchange_weak(expected, 20);</code> <code>compare_exchange_strong(T&amp; expected, T desired, memory_order success, memory_order failure)</code> \u5f3a\u6bd4\u8f83\u5e76\u4ea4\u6362 \u671f\u671b\u503c\u5f15\u7528\uff0c\u65b0\u7684\u503c\uff0c\u6210\u529f\u548c\u5931\u8d25\u7684\u5185\u5b58\u987a\u5e8f <code>bool</code> <code>int expected = 10; bool result = atomicInt.compare_exchange_strong(expected, 20);</code> <code>fetch_add(T arg, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u589e\u52a0 \u589e\u52a0\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.fetch_add(1);</code> <code>fetch_sub(T arg, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u51cf\u5c11 \u51cf\u5c11\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.fetch_sub(1);</code> <code>fetch_and(T arg, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u6309\u4f4d\u4e0e \u6309\u4f4d\u4e0e\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.fetch_and(0xF);</code> <code>fetch_or(T arg, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u6309\u4f4d\u6216 \u6309\u4f4d\u6216\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.fetch_or(0xF);</code> <code>fetch_xor(T arg, memory_order order = memory_order_seq_cst)</code> \u539f\u5b50\u5730\u6309\u4f4d\u5f02\u6216 \u6309\u4f4d\u5f02\u6216\u7684\u503c\u548c\u5185\u5b58\u987a\u5e8f\uff08\u53ef\u9009\uff09 \u4e4b\u524d\u7684\u503c <code>int oldValue = atomicInt.fetch_xor(0xF);</code> <code>=</code> \u8d4b\u503c\u64cd\u4f5c \u503c \u65e0 <code>atomicInt = value;</code> <code>T()</code> \u53d6\u503c\u64cd\u4f5c \u65e0 \u5f53\u524d\u503c <code>T value = atomicInt;</code> <code>++a</code>, <code>a++</code> \u524d\u7f6e/\u540e\u7f6e\u9012\u589e \u65e0 \u4e4b\u524d\u7684\u503c\uff08\u540e\u7f6e\uff09\uff0c\u5f53\u524d\u503c\uff08\u524d\u7f6e\uff09 <code>++atomicInt;</code> \u6216 <code>atomicInt++;</code> <code>--a</code>, <code>a--</code> \u524d\u7f6e/\u540e\u7f6e\u9012\u51cf \u65e0 \u4e4b\u524d\u7684\u503c\uff08\u540e\u7f6e\uff09\uff0c\u5f53\u524d\u503c\uff08\u524d\u7f6e\uff09 <code>--atomicInt;</code> \u6216 <code>atomicInt--;</code> <code>+=</code>, <code>-=</code>, <code>&amp;=</code>, <code>| =</code>, <code>^=</code> \u590d\u5408\u8d4b\u503c\u64cd\u4f5c \u503c \u4e4b\u524d\u7684\u503c <p>\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u548c\u6210\u5458\u51fd\u6570\u4f7f\u5f97 <code>std::atomic</code> \u53d8\u91cf\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u8fdb\u884c\u5b89\u5168\u7684\u8bfb\u5199\u64cd\u4f5c\u6210\u4e3a\u53ef\u80fd\uff0c\u4ece\u800c\u907f\u514d\u6570\u636e\u7ade\u4e89\u548c\u4e0d\u786e\u5b9a\u7684\u884c\u4e3a\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/","title":"\u301010\u3011\u4fe1\u53f7\u91cf\u548ccounting_semaphore","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#1","title":"1. \u4fe1\u53f7\u91cf\u6982\u5ff5","text":"<p>\u4fe1\u53f7\u91cf\uff08Semaphore\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u548c\u534f\u8c03\u591a\u7ebf\u7a0b\u6216\u591a\u8fdb\u7a0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u540c\u6b65\u673a\u5236\u3002\u5b83\u901a\u8fc7\u8ba1\u6570\u5668\u6765\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\u6570\u91cf\uff0c\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u6216\u8fdb\u7a0b\u80fd\u591f\u5b89\u5168\u5730\u4f7f\u7528\u5171\u4eab\u8d44\u6e90\u800c\u4e0d\u4f1a\u53d1\u751f\u6570\u636e\u7ade\u4e89\u6216\u6b7b\u9501\u3002\u4f20\u7edf\u7684\u9501\uff08\u5982\u4e92\u65a5\u9501\uff09\u53ef\u4ee5\u7528\u6765\u4fdd\u62a4\u5171\u4eab\u8d44\u6e90\uff0c\u4f46\u5bf9\u4e8e\u67d0\u4e9b\u573a\u666f\uff08\u5982\u8d44\u6e90\u7684\u8ba1\u6570\u7ba1\u7406\uff09\uff0c\u4fe1\u53f7\u91cf\u63d0\u4f9b\u4e86\u66f4\u7075\u6d3b\u548c\u9ad8\u6548\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#11","title":"1.1. \u4fe1\u53f7\u91cf\u7684\u7c7b\u578b","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#12","title":"1.2. \u4fe1\u53f7\u91cf\u7684\u4f5c\u7528","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#2","title":"2. \u4fe1\u53f7\u91cf\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#21","title":"2.1. \u4fe1\u53f7\u91cf\u64cd\u4f5c\u7684\u5de5\u4f5c\u539f\u7406","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#22","title":"2.2. \u591a\u7ebf\u7a0b\u4e2d\u7684\u5e94\u7528\uff08\u5178\u578b\u5e94\u7528\uff09","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#counting_semaphore","title":"counting_semaphore","text":"<p>std::counting_semaphore\u662fC++20\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u7c7b\u6a21\u677f\uff0c\u5b83\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8ba1\u6570\u4fe1\u53f7\u91cf\u3002  </p> <p>std::counting_semaphore\u7684\u4e3b\u8981\u65b9\u6cd5\u5305\u62ec\uff1a  </p> \u6210\u5458\u51fd\u6570 \u8bf4\u660e explicit counting_semaphore(ptrdiff_t desired) \u6784\u9020\u51fd\u6570\uff0c\u521d\u59cb\u5316\u4fe1\u53f7\u91cf\u7684\u8ba1\u6570\u503c\u4e3a desired\u3002 counting_semaphore(const counting_semaphore&amp;) = delete \u7981\u6b62\u590d\u5236\u6784\u9020\uff0c\u4fe1\u53f7\u91cf\u4e0d\u652f\u6301\u590d\u5236\u3002 counting_semaphore&amp; operator=(const counting_semaphore&amp;) = delete \u7981\u6b62\u590d\u5236\u8d4b\u503c\u64cd\u4f5c\u3002 void acquire() P \u64cd\u4f5c\uff0c\u7b49\u5f85\u4fe1\u53f7\u91cf\u7684\u8ba1\u6570\u503c\u5927\u4e8e0\u5e76\u51cf1\uff0c\u5426\u5219\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\u3002 bool try_acquire() \u5c1d\u8bd5 P \u64cd\u4f5c\uff0c\u5982\u679c\u4fe1\u53f7\u91cf\u7684\u8ba1\u6570\u503c\u5927\u4e8e0\u5219\u51cf1\u5e76\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 bool try_acquire_for(std::chrono::duration) \u5c1d\u8bd5 P \u64cd\u4f5c\uff0c\u7b49\u5f85\u6307\u5b9a\u7684\u65f6\u95f4\uff0c\u5982\u679c\u6210\u529f\u83b7\u53d6\u4fe1\u53f7\u91cf\u5219\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 bool try_acquire_until(std::chrono::time_point) \u5c1d\u8bd5 P \u64cd\u4f5c\uff0c\u76f4\u5230\u6307\u5b9a\u7684\u65f6\u95f4\u70b9\uff0c\u5982\u679c\u6210\u529f\u83b7\u53d6\u4fe1\u53f7\u91cf\u5219\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002 void release(ptrdiff_t update = 1) V \u64cd\u4f5c\uff0c\u5c06\u4fe1\u53f7\u91cf\u7684\u8ba1\u6570\u503c\u589e\u52a0 update\uff0c\u5982\u679c\u6709\u7b49\u5f85\u7684\u7ebf\u7a0b\uff0c\u5219\u5524\u9192\u76f8\u5e94\u6570\u91cf\u7684\u7ebf\u7a0b\u3002 ptrdiff_t max() const \u8fd4\u56de\u4fe1\u53f7\u91cf\u7684\u6700\u5927\u8ba1\u6570\u503c\u3002"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#31counting_semaphore","title":"3.1counting_semaphore\u5b9e\u73b0\u4e92\u65a5","text":"<p>\u4ee5\u4e0b\u662f\u4f7f\u7528std::counting_semaphore\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u4fe1\u53f7\u91cf\u793a\u4f8b\uff1a  </p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;semaphore&gt;\n#include &lt;vector&gt;\n\nstd::counting_semaphore&lt;1&gt; sem(1); // \u521d\u59cb\u503c\u4e3a1\u7684\u8ba1\u6570\u4fe1\u53f7\u91cf\n/*\n\u7b2c\u4e00\u4e2a1\uff1a\u7c7b\u6a21\u677f\u7684\u975e\u7c7b\u578b\u6a21\u677f\u53c2\u6570\uff0c\u6307\u5b9a\u4e86\u4fe1\u53f7\u91cf\u7684\u6700\u5927\u8ba1\u6570\u503c\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u540c\u65f6\u5141\u8bb8\u591a\u5c11\u4e2a\u8d44\u6e90\u88ab\u8bbf\u95ee\u3002\n\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c&lt;1&gt; \u8868\u793a\u4fe1\u53f7\u91cf\u7684\u6700\u5927\u503c\u662f 1\uff0c\u8fd9\u610f\u5473\u7740\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90\n\n\u7b2c\u4e8c\u4e2a1\uff1a\u8fd9\u662f\u4fe1\u53f7\u91cf\u7684\u521d\u59cb\u8ba1\u6570\u503c\uff0c\u8868\u793a\u5f53\u524d\u6709\u591a\u5c11\u8d44\u6e90\u53ef\u4f9b\u8bbf\u95ee\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c1 \u8868\u793a\u4fe1\u53f7\u91cf\u521d\u59cb\u5316\u65f6\u8ba1\u6570\u503c\u4e3a 1\uff0c\n\u610f\u5473\u7740\u6700\u5f00\u59cb\u65f6\u6709\u4e00\u4e2a\u8d44\u6e90\u53ef\u4f9b\u8bbf\u95ee\n*/\n\nvoid worker(int id) {\n    sem.acquire(); // P\u64cd\u4f5c\uff0c\u7b49\u5f85\u4fe1\u53f7\u91cf\u5927\u4e8e0\u5e76\u5c06\u5176\u51cf1\n    std::cout &lt;&lt; \"Worker \" &lt;&lt; id &lt;&lt; \" is working\\n\";\n    std::this_thread::sleep_for(std::chrono::seconds(1)); // \u6a21\u62df\u5de5\u4f5c\n    std::cout &lt;&lt; \"Worker \" &lt;&lt; id &lt;&lt; \" is done\\n\";\n    sem.release(); // V\u64cd\u4f5c\uff0c\u5c06\u4fe1\u53f7\u91cf\u52a01\n}\n\nint main() {\n    std::vector&lt;std::thread&gt; threads;\n    for (int i = 0; i &lt; 5; ++i) {\n        threads.emplace_back(worker, i);\n    }\n\n    for (auto&amp; t : threads) {\n        t.join();\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/10-%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%92%8Ccounting_semaphore/#32-counting_semaphore","title":"3.2. counting_semaphore\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;semaphore&gt;\n\n// \u4fe1\u53f7\u91cf\uff0c\u7528\u4e8e\u7ebf\u7a0b\u540c\u6b65\uff0c\u521d\u59cb\u8ba1\u6570\u503c\u4e3a0\uff0c\u7528\u4e8e\u63a7\u5236 work \u7ebf\u7a0b\u7684\u6267\u884c\nstd::counting_semaphore&lt;1&gt; ready(0);\n\n// \u4fe1\u53f7\u91cf\uff0c\u7528\u4e8e\u7ebf\u7a0b\u540c\u6b65\uff0c\u521d\u59cb\u8ba1\u6570\u503c\u4e3a1\uff0c\u7528\u4e8e\u63a7\u5236 prepare \u7ebf\u7a0b\u7684\u6267\u884c\nstd::counting_semaphore&lt;1&gt; done(1);\n\nvoid prepare() {\n    done.acquire(); // \u51cf\u5c11\u4fe1\u53f7\u91cf done \u7684\u8ba1\u6570\u503c\uff0c\u786e\u4fdd prepare \u5728 work \u5b8c\u6210\u4e4b\u524d\u4e0d\u518d\u6267\u884c\n    std::cout &lt;&lt; \"Preparing...\\n\";\n    std::this_thread::sleep_for(std::chrono::seconds(2)); // \u6a21\u62df\u51c6\u5907\u5de5\u4f5c\u7684\u8017\u65f6\n    std::cout &lt;&lt; \"Preparation done.\\n\";\n    ready.release(); // \u589e\u52a0\u4fe1\u53f7\u91cf ready \u7684\u8ba1\u6570\u503c\uff0c\u901a\u77e5 work \u7ebf\u7a0b\u53ef\u4ee5\u5f00\u59cb\u5de5\u4f5c\n}\n\nvoid work() {\n    ready.acquire(); // \u7b49\u5f85 ready \u4fe1\u53f7\u91cf\uff0c\u786e\u4fdd\u51c6\u5907\u5de5\u4f5c\u5b8c\u6210\u540e\u518d\u6267\u884c\n    std::cout &lt;&lt; \"Working...\\n\";\n    std::this_thread::sleep_for(std::chrono::seconds(2)); // \u6a21\u62df\u5de5\u4f5c\u7684\u8017\u65f6\n    std::cout &lt;&lt; \"Work done.\\n\";\n    done.release(); // \u589e\u52a0\u4fe1\u53f7\u91cf done \u7684\u8ba1\u6570\u503c\uff0c\u901a\u77e5 prepare \u7ebf\u7a0b\u53ef\u4ee5\u91cd\u65b0\u8fdb\u5165\u51c6\u5907\u9636\u6bb5\n}\n\nint main() {\n    std::thread t1(prepare); // \u521b\u5efa prepare \u7ebf\u7a0b\uff0c\u6267\u884c\u51c6\u5907\u5de5\u4f5c\n    std::thread t2(work);    // \u521b\u5efa work \u7ebf\u7a0b\uff0c\u6267\u884c\u4e3b\u8981\u5de5\u4f5c\n\n    t1.join(); // \u7b49\u5f85 prepare \u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\n    t2.join(); // \u7b49\u5f85 work \u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\n\n    std::cout &lt;&lt; \"All tasks completed.\\n\"; // \u6240\u6709\u5de5\u4f5c\u5b8c\u6210\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/11-%E6%A0%85%E6%A0%8F%EF%BC%88barrier%EF%BC%89/","title":"\u301011\u3011\u6805\u680f\uff08barrier\uff09","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/11-%E6%A0%85%E6%A0%8F%EF%BC%88barrier%EF%BC%89/#1","title":"1. \u5565\u662f\u6805\u680f","text":"<p>\u6805\u680f\uff08barrier\uff09\u5bf9\u8c61\u662f\u4e00\u79cd\u540c\u6b65\u539f\u8bed\uff0c\u7528\u4e8e\u534f\u8c03\u591a\u4e2a\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u5728\u67d0\u4e2a\u7279\u5b9a\u7684\u70b9\uff08\u5373\u6805\u680f\uff09\u7b49\u5f85\uff0c\u76f4\u5230\u6240\u6709\u7ebf\u7a0b\u90fd\u5230\u8fbe\u8fd9\u4e00\u70b9\uff0c\u7136\u540e\u5b83\u4eec\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u3002\u6805\u680f\u53ef\u4ee5\u786e\u4fdd\u5e76\u53d1\u4efb\u52a1\u5728\u67d0\u4e9b\u5173\u952e\u65f6\u523b\u540c\u6b65\uff0c\u6bd4\u5982\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u67d0\u4e2a\u9636\u6bb5\u7684\u5de5\u4f5c\uff0c\u7136\u540e\u518d\u8fdb\u5165\u4e0b\u4e00\u9636\u6bb5\u3002</p> <p>Tip</p> <p>\u5047\u8bbe\u6709\u4e00\u573a\u5b66\u751f\u7b54\u9898\u6bd4\u8d5b\uff0c\u6bd4\u8d5b\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>\u7b2c\u4e00\u9636\u6bb5\uff0c\u6240\u6709\u5b66\u751f\u9700\u8981\u5b8c\u6210\u4e00\u9053\u9898\u3002</li> <li>\u7b2c\u4e8c\u9636\u6bb5\uff0c\u6240\u6709\u5b66\u751f\u90fd\u5fc5\u987b\u7b49\u5f85\uff0c\u76f4\u5230\u6bcf\u4e2a\u4eba\u90fd\u5b8c\u6210\u7b2c\u4e00\u9636\u6bb5\u7684\u9898\u76ee\uff0c\u7136\u540e\u624d\u80fd\u7ee7\u7eed\u56de\u7b54\u7b2c\u4e8c\u9636\u6bb5\u7684\u9898\u76ee\u3002</li> </ol> <p>\u6211\u4eec\u53ef\u4ee5\u628a\u6805\u680f\uff08barrier\uff09\u60f3\u8c61\u6210\u4e00\u4e2a\u6bd4\u8d5b\u4e2d\u7684\u4fe1\u53f7\u5458\uff0c\u53ea\u6709\u5f53\u6240\u6709\u5b66\u751f\u90fd\u5b8c\u6210\u4e86\u7b2c\u4e00\u9636\u6bb5\u7684\u9898\u76ee\uff0c\u4fe1\u53f7\u5458\u624d\u4f1a\u6325\u52a8\u65d7\u5e1c\uff0c\u8868\u793a\u53ef\u4ee5\u5f00\u59cb\u7b2c\u4e8c\u9636\u6bb5\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/11-%E6%A0%85%E6%A0%8F%EF%BC%88barrier%EF%BC%89/#2","title":"2. \u6805\u680f\u7684\u4f5c\u7528\u548c\u7279\u70b9","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/11-%E6%A0%85%E6%A0%8F%EF%BC%88barrier%EF%BC%89/#3-c20-stdbarrier","title":"3. \u5b9a\u4e49\u4f7f\u7528 C++20 \u4e2d\u7684 <code>std::barrier</code>","text":"<p>C++20 \u5f15\u5165\u4e86 <code>std::barrier</code>\uff0c\u5b83\u63d0\u4f9b\u4e86\u6805\u680f\u7684\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528 <code>std::barrier</code> \u6765\u540c\u6b65\u591a\u4e2a\u7ebf\u7a0b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;barrier&gt;\n#include &lt;vector&gt;\n\nvoid worker(int id, std::barrier&lt;&gt;&amp; sync_point) {\n    std::cout &lt;&lt; \"Worker \" &lt;&lt; id &lt;&lt; \" is doing phase 1 work\\n\";\n    std::this_thread::sleep_for(std::chrono::milliseconds(100 * id)); // \u6a21\u62df\u4e0d\u540c\u7684\u5de5\u4f5c\u65f6\u95f4\n\n    // \u5230\u8fbe\u6805\u680f\uff0c\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\n    sync_point.arrive_and_wait();\n    std::cout &lt;&lt; \"Worker \" &lt;&lt; id &lt;&lt; \" has completed phase 1 and is doing phase 2 work\\n\";\n\n    std::this_thread::sleep_for(std::chrono::milliseconds(100 * id)); // \u6a21\u62df\u4e0d\u540c\u7684\u5de5\u4f5c\u65f6\u95f4\n}\n\nint main() {\n    const int num_threads = 5;\n    std::barrier sync_point(num_threads); // \u521b\u5efa\u4e00\u4e2a\u6805\u680f\uff0c\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5230\u8fbe\n\n    std::vector&lt;std::thread&gt; threads;\n    for (int i = 0; i &lt; num_threads; ++i) {\n        threads.emplace_back(worker, i + 1, std::ref(sync_point));\n    }\n\n    for (auto&amp; t : threads) {\n        t.join();\n    }\n\n    std::cout &lt;&lt; \"All workers have completed their tasks.\\n\";\n\n    return 0;\n}\n</code></pre> <p>1.\u6805\u680f\u521d\u59cb\u5316\uff1a</p> <pre><code>std::barrier sync_point(num_threads); // \u521b\u5efa\u4e00\u4e2a\u6805\u680f\uff0c\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5230\u8fbe\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u6805\u680f\u5bf9\u8c61 <code>sync_point</code>\uff0c\u5b83\u9700\u8981 <code>num_threads</code> \u4e2a\u7ebf\u7a0b\u5230\u8fbe\u6805\u680f\u540e\u624d\u7ee7\u7eed\u6267\u884c\u3002</p> <p>2.worker \u51fd\u6570\uff1a</p> <pre><code>- \u6bcf\u4e2a\u7ebf\u7a0b\u5148\u6267\u884c\u4e00\u4e9b\u201c\u7b2c\u4e00\u9636\u6bb5\u201d\u7684\u5de5\u4f5c\u3002\n- \u7136\u540e\u8c03\u7528 `sync_point.arrive_and_wait();`\uff0c\u8868\u793a\u5230\u8fbe\u6805\u680f\u5e76\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u4e5f\u5230\u8fbe\u3002\n- \u6240\u6709\u7ebf\u7a0b\u90fd\u5230\u8fbe\u6805\u680f\u540e\uff0c\u7ee7\u7eed\u6267\u884c\u201c\u7b2c\u4e8c\u9636\u6bb5\u201d\u7684\u5de5\u4f5c\u3002\n</code></pre> <p>3.\u4e3b\u7ebf\u7a0b\uff1a</p> <pre><code>- \u521b\u5efa\u5e76\u542f\u52a8\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6267\u884c `worker` \u51fd\u6570\u3002\n- \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u5de5\u4f5c\u3002\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/","title":"\u301012\u3011\u6b7b\u9501","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/#_1","title":"\u6b7b\u9501\u662f\u4ec0\u4e48\uff1f","text":"<p>\u6b7b\u9501\uff08Deadlock\uff09\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u56e0\u4e89\u593a\u8d44\u6e90\u800c\u9020\u6210\u7684\u4e00\u79cd\u4e92\u76f8\u7b49\u5f85\u7684\u73b0\u8c61\u3002\u5982\u679c\u6ca1\u6709\u5916\u529b\u5e72\u6d89\uff0c\u5b83\u4eec\u5c06\u6c38\u8fdc\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u3002\u6b7b\u9501\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u6216\u7cfb\u7edf\u7684\u4e25\u91cd\u6027\u80fd\u95ee\u9898\uff0c\u751a\u81f3\u4f7f\u6574\u4e2a\u7cfb\u7edf\u9677\u5165\u505c\u6ede\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/#_2","title":"\u6b7b\u9501\u5982\u4f55\u4ea7\u751f\u7684\uff1f","text":"<p>\u6b7b\u9501\u901a\u5e38\u7531\u4ee5\u4e0b\u56db\u4e2a\u5fc5\u8981\u6761\u4ef6\u5f15\u8d77\uff0c\u8fd9\u56db\u4e2a\u6761\u4ef6\u540c\u65f6\u6ee1\u8db3\u65f6\uff0c\u7cfb\u7edf\u5c31\u4f1a\u4ea7\u751f\u6b7b\u9501\uff1a</p> <ol> <li> <p>\u4e92\u65a5\u6761\u4ef6\uff08Mutual Exclusion\uff09\uff1a</p> <ul> <li>\u8d44\u6e90\u4e00\u6b21\u53ea\u80fd\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u5360\u7528\u3002</li> </ul> </li> <li> <p>\u8bf7\u6c42\u548c\u4fdd\u6301\u6761\u4ef6\uff08Hold and Wait\uff09\uff1a</p> <ul> <li>\u7ebf\u7a0b\u5df2\u7ecf\u6301\u6709\u81f3\u5c11\u4e00\u4e2a\u8d44\u6e90\uff0c\u540c\u65f6\u53c8\u7533\u8bf7\u65b0\u7684\u8d44\u6e90\uff0c\u800c\u65b0\u8d44\u6e90\u88ab\u5176\u4ed6\u7ebf\u7a0b\u5360\u6709\u3002</li> </ul> </li> <li> <p>\u4e0d\u5265\u593a\u6761\u4ef6\uff08No Preemption\uff09\uff1a</p> <ul> <li>\u5df2\u83b7\u5f97\u7684\u8d44\u6e90\u5728\u672a\u4f7f\u7528\u5b8c\u4e4b\u524d\uff0c\u4e0d\u80fd\u88ab\u5f3a\u884c\u5265\u593a\uff0c\u53ea\u80fd\u5728\u4f7f\u7528\u5b8c\u6bd5\u540e\u7531\u7ebf\u7a0b\u81ea\u5df1\u91ca\u653e\u3002</li> </ul> </li> <li> <p>\u5faa\u73af\u7b49\u5f85\u6761\u4ef6\uff08Circular Wait\uff09\uff1a</p> <ul> <li>\u5b58\u5728\u4e00\u4e2a\u7ebf\u7a0b\u5faa\u73af\u7b49\u5f85\u7684\u94fe\uff0c\u94fe\u4e2d\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6301\u6709\u4e0b\u4e00\u4e2a\u7ebf\u7a0b\u9700\u8981\u7684\u8d44\u6e90\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/#_3","title":"\u6b7b\u9501\u7684\u5e38\u89c1\u4f8b\u5b50","text":"<p>\u5047\u8bbe\u6709\u4e24\u4e2a\u7ebf\u7a0b <code>T1</code> \u548c <code>T2</code>\uff0c\u4e24\u4e2a\u8d44\u6e90 <code>R1</code> \u548c <code>R2</code>\u3002<code>T1</code> \u5148\u83b7\u53d6 <code>R1</code>\uff0c\u7136\u540e\u7533\u8bf7 <code>R2</code>\uff1b<code>T2</code> \u5148\u83b7\u53d6 <code>R2</code>\uff0c\u7136\u540e\u7533\u8bf7 <code>R1</code>\u3002\u5982\u679c <code>T1</code> \u548c <code>T2</code> \u90fd\u6301\u6709\u5404\u81ea\u7684\u8d44\u6e90\u5e76\u7b49\u5f85\u5bf9\u65b9\u7684\u8d44\u6e90\uff0c\u90a3\u4e48\u5c31\u4f1a\u4ea7\u751f\u6b7b\u9501\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nstd::mutex mutex1;\nstd::mutex mutex2;\n\nvoid task1() {\n    std::lock_guard&lt;std::mutex&gt; lock1(mutex1);\n    std::this_thread::sleep_for(std::chrono::milliseconds(100)); // \u6a21\u62df\u5de5\u4f5c\n    std::lock_guard&lt;std::mutex&gt; lock2(mutex2);\n    std::cout &lt;&lt; \"Task 1 finished\\n\";\n}\n\nvoid task2() {\n    std::lock_guard&lt;std::mutex&gt; lock2(mutex2);\n    std::this_thread::sleep_for(std::chrono::milliseconds(100)); // \u6a21\u62df\u5de5\u4f5c\n    std::lock_guard&lt;std::mutex&gt; lock1(mutex1);\n    std::cout &lt;&lt; \"Task 2 finished\\n\";\n}\n\nint main() {\n    std::thread t1(task1);\n    std::thread t2(task2);\n\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/#_4","title":"\u5982\u4f55\u89e3\u51b3\u6b7b\u9501\uff1f","text":"<p>\u89e3\u51b3\u6b7b\u9501\u7684\u65b9\u6cd5\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li> <p>\u907f\u514d\u5faa\u73af\u7b49\u5f85\u6761\u4ef6\uff1a</p> <ul> <li>\u907f\u514d\u5f62\u6210\u8d44\u6e90\u5faa\u73af\u7b49\u5f85\u94fe\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bf9\u6240\u6709\u8d44\u6e90\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u6309\u987a\u5e8f\u7533\u8bf7\u8d44\u6e90\uff0c\u786e\u4fdd\u4e0d\u4f1a\u5f62\u6210\u5faa\u73af\u7b49\u5f85\u3002</li> </ul> </li> <li> <p>\u7834\u574f\u8bf7\u6c42\u548c\u4fdd\u6301\u6761\u4ef6\uff1a</p> <ul> <li>\u5728\u4e00\u4e2a\u7ebf\u7a0b\u7533\u8bf7\u8d44\u6e90\u65f6\uff0c\u4e0d\u5141\u8bb8\u5b83\u540c\u65f6\u6301\u6709\u5176\u4ed6\u8d44\u6e90\u3002\u53ef\u4ee5\u4f7f\u7528\u4e00\u6b21\u6027\u5206\u914d\u6240\u6709\u8d44\u6e90\u7684\u65b9\u6cd5\uff0c\u5373\u7ebf\u7a0b\u4e00\u6b21\u6027\u7533\u8bf7\u5b83\u6240\u9700\u8981\u7684\u6240\u6709\u8d44\u6e90\uff0c\u53ea\u6709\u5728\u6240\u6709\u8d44\u6e90\u90fd\u6ee1\u8db3\u7684\u60c5\u51b5\u4e0b\u624d\u5f00\u59cb\u6267\u884c\uff0c\u5426\u5219\u5c31\u91ca\u653e\u5df2\u7ecf\u83b7\u5f97\u7684\u8d44\u6e90\u91cd\u65b0\u7533\u8bf7\u3002</li> </ul> </li> <li> <p>\u7834\u574f\u4e0d\u5265\u593a\u6761\u4ef6\uff1a</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u7533\u8bf7\u65b0\u7684\u8d44\u6e90\u65f6\u5df2\u6301\u6709\u7684\u8d44\u6e90\u88ab\u5360\u7528\uff0c\u53ef\u4ee5\u5f3a\u5236\u91ca\u653e\u5b83\u5df2\u5360\u6709\u7684\u8d44\u6e90\u3002\u5c3d\u7ba1\u8fd9\u79cd\u65b9\u6cd5\u5728\u5b9e\u9645\u7cfb\u7edf\u4e2d\u96be\u4ee5\u5b9e\u73b0\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u662f\u53ef\u884c\u7684\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u6b7b\u9501\u68c0\u6d4b\u548c\u6062\u590d\uff1a</p> <ul> <li>\u7cfb\u7edf\u53ef\u4ee5\u5b9a\u671f\u68c0\u6d4b\u662f\u5426\u5b58\u5728\u6b7b\u9501\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u6b7b\u9501\uff0c\u5219\u91c7\u53d6\u6062\u590d\u63aa\u65bd\uff0c\u4f8b\u5982\u7ec8\u6b62\u67d0\u4e9b\u7ebf\u7a0b\u5e76\u91ca\u653e\u5b83\u4eec\u5360\u6709\u7684\u8d44\u6e90\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u9ad8\u7ea7\u540c\u6b65\u5de5\u5177\uff1a</p> <ul> <li>\u4f7f\u7528 <code>std::lock</code> \u548c <code>std::unique_lock</code> \u7b49\u9ad8\u7ea7\u540c\u6b65\u5de5\u5177\u6765\u907f\u514d\u6b7b\u9501\u3002<code>std::lock</code> \u53ef\u4ee5\u540c\u65f6\u9501\u5b9a\u591a\u4e2a\u4e92\u65a5\u9501\uff0c\u907f\u514d\u5faa\u73af\u7b49\u5f85\u3002</li> </ul> </li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/12-%E6%AD%BB%E9%94%81/#stdlock","title":"\u4f7f\u7528 <code>std::lock</code> \u89e3\u51b3\u6b7b\u9501","text":"<p>\u4f7f\u7528 <code>std::lock</code> \u540c\u65f6\u9501\u5b9a\u4e24\u4e2a\u4e92\u65a5\u9501\uff0c\u907f\u514d\u6b7b\u9501\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nstd::mutex mutex1;\nstd::mutex mutex2;\n\nvoid task1() {\n    std::lock(mutex1, mutex2); // \u540c\u65f6\u9501\u5b9a\u4e24\u4e2a\u4e92\u65a5\u9501\n    std::lock_guard&lt;std::mutex&gt; lock1(mutex1, std::adopt_lock);\n    std::lock_guard&lt;std::mutex&gt; lock2(mutex2, std::adopt_lock);\n    std::cout &lt;&lt; \"Task 1 finished\\n\";\n}\n\nvoid task2() {\n    std::lock(mutex1, mutex2); // \u540c\u65f6\u9501\u5b9a\u4e24\u4e2a\u4e92\u65a5\u9501\n    std::lock_guard&lt;std::mutex&gt; lock2(mutex2, std::adopt_lock);\n    std::lock_guard&lt;std::mutex&gt; lock1(mutex1, std::adopt_lock);\n    std::cout &lt;&lt; \"Task 2 finished\\n\";\n}\n\nint main() {\n    std::thread t1(task1);\n    std::thread t2(task2);\n\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>std::lock</code> \u540c\u65f6\u9501\u5b9a <code>mutex1</code> \u548c <code>mutex2</code>\uff0c\u5e76\u4e14\u4f7f\u7528 <code>std::adopt_lock</code> \u6765\u544a\u8bc9 <code>std::lock_guard</code> \u4e92\u65a5\u9501\u5df2\u7ecf\u88ab\u9501\u5b9a\uff0c\u4ece\u800c\u907f\u514d\u6b7b\u9501\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/","title":"\u301013\u3011\u5f02\u6b65\u7f16\u7a0b future\u548casync","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#1","title":"1. \u4ec0\u4e48\u662f\u5f02\u6b65\uff1f","text":"<p>\u5f02\u6b65\u7f16\u7a0b\u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u5141\u8bb8\u7a0b\u5e8f\u5728\u7b49\u5f85\u67d0\u4e9b\u64cd\u4f5c\u5b8c\u6210\u65f6\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u963b\u585e\u6216\u7b49\u5f85\u8fd9\u4e9b\u64cd\u4f5c\u5b8c\u6210 \u3002</p> <p>\u5728\u4f20\u7edf\u7684\u540c\u6b65\u7f16\u7a0b\u4e2d\uff0c\u4ee3\u7801\u662f\u6309\u987a\u5e8f\u6267\u884c\u7684\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u5fc5\u987b\u7b49\u5f85\u524d\u4e00\u4e2a\u64cd\u4f5c\u5b8c\u6210\u3002\u8fd9\u79cd\u65b9\u5f0f\u5728\u5904\u7406 I/O \u64cd\u4f5c\u3001\u7f51\u7edc\u8bf7\u6c42\u6216\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u65f6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u7684\u6027\u80fd\u74f6\u9888\u3002\u4f8b\u5982\uff0c\u5f53\u7a0b\u5e8f\u9700\u8981\u4ece\u7f51\u7edc\u4e0a\u83b7\u53d6\u6570\u636e\u65f6\uff0c\u5b83\u4f1a\u7b49\u5f85\u6570\u636e\u8fd4\u56de\u540e\u518d\u7ee7\u7eed\u6267\u884c\uff0c\u8fd9\u671f\u95f4 CPU \u53ef\u80fd\u4f1a\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u6d6a\u8d39\u4e86\u8d44\u6e90\u3002</p> <p>\u5f02\u6b65\u7f16\u7a0b\u5219\u4e0d\u540c\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u7684\u540c\u65f6\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\u3002\u4f8b\u5982\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u53d1\u8d77\u4e00\u4e2a\u7f51\u7edc\u8bf7\u6c42\uff0c\u7136\u540e\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\uff0c\u800c\u4e0d\u5fc5\u7b49\u5f85\u7f51\u7edc\u8bf7\u6c42\u5b8c\u6210\u3002\u7b49\u5230\u7f51\u7edc\u8bf7\u6c42\u5b8c\u6210\u65f6\uff0c\u7a0b\u5e8f\u518d\u5904\u7406\u8fd4\u56de\u7684\u6570\u636e\u3002</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#2-c","title":"2. C++\u4e2d\u7684\u5f02\u6b65\u7f16\u7a0b \u76f8\u5173\u77e5\u8bc6\u70b9","text":"<p>C++11 \u5f15\u5165\u4e86\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e9b\u5f02\u6b65\u7f16\u7a0b\u5de5\u5177\uff0c\u4f8b\u5982 <code>std::async</code>\u3001<code>std::future</code> \u548c <code>std::promise</code>\u3002 </p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#3-asyncfuture","title":"3. async\u548cfuture\u7684\u4f7f\u7528","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#31-async","title":"3.1. \u4ec0\u4e48\u662fasync\uff1f","text":"<p>std::async\uff1a\u662f\u4e00\u4e2a\u51fd\u6570\u6a21\u677f\uff0c\u7528\u4e8e\u542f\u52a8\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001Lambda\u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u5bf9\u8c61\u7b49\uff09\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\u4e0a\u5f02\u6b65\u6267\u884c\u8be5\u5bf9\u8c61\u3002std::async\u81ea\u52a8\u7ba1\u7406\u5f02\u6b65\u4efb\u52a1\u7684\u751f\u547d\u5468\u671f\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2astd::future\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u7528\u4e8e\u83b7\u53d6\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#32-future","title":"3.2. \u4ec0\u4e48\u662ffuture\uff1f","text":"<p>std::future\uff1a\u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u7528\u4e8e\u8868\u793a\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u5b83\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u5c06\u6765\u7684\u67d0\u4e2a\u65f6\u523b\u67e5\u8be2\u5f02\u6b65\u64cd\u4f5c\u7684\u72b6\u6001\u3001\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210\u6216\u83b7\u53d6\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u901a\u5e38\uff0cstd::future\u5bf9\u8c61\u4e0d\u662f\u76f4\u63a5\u521b\u5efa\u7684\uff0c\u800c\u662f\u4e0estd::async\u3001std::packaged_task\u6216std::promise\u914d\u5408\u4f7f\u7528\u3002</p> <p>\u5b83\u7684\u4e3b\u8981\u6210\u5458\u51fd\u6570</p> <ol> <li>get()     \u4f5c\u7528\uff1a\u7b49\u5f85\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u5e76\u83b7\u53d6\u5176\u7ed3\u679c\u3002\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u5c1a\u672a\u5b8c\u6210\uff0c\u8c03\u7528 get() \u7684\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff0c\u76f4\u5230\u64cd\u4f5c\u5b8c\u6210\u3002\u4e00\u65e6\u8c03\u7528 get()\uff0c\u5b83\u5c06\u8fd4\u56de\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u5e76\u4e14 std::future \u5bf9\u8c61\u5c06\u4e0d\u518d\u4e0e\u4efb\u4f55\u5171\u4eab\u72b6\u6001\u76f8\u5173\u8054\uff08\u5373\uff0c\u5b83\u53d8\u4e3a\u65e0\u6548\u72b6\u6001\uff09\u3002     \u6ce8\u610f\uff1aget() \u65b9\u6cd5\u53ea\u80fd\u88ab\u8c03\u7528\u4e00\u6b21\u3002\u5982\u679c\u5c1d\u8bd5\u591a\u6b21\u8c03\u7528 get()\uff0c\u5c06\u629b\u51fa std::future_error \u5f02\u5e38\u3002</li> <li>wait()     \u4f5c\u7528\uff1a\u7b49\u5f85\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u4f46\u4e0d\u83b7\u53d6\u7ed3\u679c\u3002\u8c03\u7528 wait() \u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u76f4\u5230\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u3002\u4e0e get() \u4e0d\u540c\uff0c\u8c03\u7528 wait() \u540e\uff0cstd::future \u5bf9\u8c61\u4ecd\u7136\u6709\u6548\uff0c\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 get() \u6765\u83b7\u53d6\u7ed3\u679c\u3002</li> <li>wait_for()     \u4f5c\u7528\uff1a\u7b49\u5f85\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u4f46\u53ea\u7b49\u5f85\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u3002\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u5728\u8be5\u65f6\u95f4\u6bb5\u5185\u5b8c\u6210\uff0cwait_for() \u5c06\u8fd4\u56de std::future_status::ready\u3002\u5982\u679c\u64cd\u4f5c\u672a\u5b8c\u6210\u4f46\u65f6\u95f4\u5df2\u8fc7\uff0c\u5c06\u8fd4\u56de std::future_status::timeout\u3002\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u5c1a\u672a\u542f\u52a8\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 std::launch::deferred \u7b56\u7565\uff09\uff0c\u5219\u8fd4\u56de std::future_status::deferred\u3002     \u53c2\u6570\uff1a\u63a5\u53d7\u4e00\u4e2a\u8868\u793a\u7b49\u5f85\u65f6\u95f4\u7684\u65f6\u95f4\u6bb5\uff08\u5982 std::chrono::seconds\u3001std::chrono::milliseconds \u7b49\uff09\u3002</li> <li>wait_until()     \u4f5c\u7528\uff1a\u4e0e wait_for() \u7c7b\u4f3c\uff0c\u4f46\u5b83\u662f\u7b49\u5f85\u5230\u6307\u5b9a\u7684\u65f6\u95f4\u70b9\u800c\u4e0d\u662f\u65f6\u95f4\u6bb5\u3002\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u5728\u8be5\u65f6\u95f4\u70b9\u4e4b\u524d\u5b8c\u6210\uff0cwait_until() \u5c06\u8fd4\u56de std::future_status::ready\u3002\u5982\u679c\u64cd\u4f5c\u672a\u5b8c\u6210\u4f46\u65f6\u95f4\u5df2\u5230\uff0c\u5c06\u8fd4\u56de std::future_status::timeout\u3002     \u53c2\u6570\uff1a\u63a5\u53d7\u4e00\u4e2a\u8868\u793a\u7b49\u5f85\u7ed3\u675f\u7684\u65f6\u95f4\u70b9\uff08\u5982 std::chrono::system_clock::now() + std::chrono::seconds(10)\uff09\u3002</li> <li>valid()     \u4f5c\u7528\uff1a\u68c0\u67e5 std::future \u5bf9\u8c61\u662f\u5426\u4e0e\u6709\u6548\u7684\u5171\u4eab\u72b6\u6001\u76f8\u5173\u8054\u3002\u5982\u679c std::future \u5bf9\u8c61\u4e0e\u67d0\u4e2a\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u76f8\u5173\u8054\uff0c\u5219\u8fd4\u56de true\uff1b\u5982\u679c std::future \u5bf9\u8c61\u5df2\u88ab get() \u8c03\u7528\u8fc7\u6216\u4ece\u672a\u4e0e\u4efb\u4f55\u5171\u4eab\u72b6\u6001\u76f8\u5173\u8054\uff0c\u5219\u8fd4\u56de false\u3002</li> </ol> <p>Note</p> <ul> <li><code>std::future::get()</code> \u65b9\u6cd5\u53ea\u80fd\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u56e0\u4e3a\u5b83\u4f1a\u79fb\u52a8\u5b58\u50a8\u5728 <code>std::future</code> \u5bf9\u8c61\u4e2d\u7684\u7ed3\u679c\u3002\u5982\u679c\u5c1d\u8bd5\u591a\u6b21\u8c03\u7528 <code>get()</code>\uff0c\u5c06\u629b\u51fa <code>std::future_error</code> \u5f02\u5e38\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/13-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20future%E5%92%8Casync/#33","title":"3.3. \u5982\u4f55\u5b9a\u4e49\u4f7f\u7528\uff1f","text":"<pre><code>#include &lt;iostream&gt;  \n#include &lt;future&gt;  \n#include &lt;chrono&gt;  \n#include &lt;thread&gt;  \n\n// \u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\uff0c\u6a21\u62df\u8017\u65f6\u7684\u8ba1\u7b97  \nint do_some_work(int x) {  \n    // \u5047\u8bbe\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u6765\u5b8c\u6210  \n    std::this_thread::sleep_for(std::chrono::seconds(1)); // \u4f11\u77201\u79d2  \n    return x * x; // \u8fd4\u56dex\u7684\u5e73\u65b9  \n}  \n\nint main() {  \n    // \u4f7f\u7528 std::async \u542f\u52a8\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1  \n    // std::async \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u542f\u52a8\u7b56\u7565\uff0c\u8fd9\u91cc\u4f7f\u7528 std::launch::async \u8868\u793a\u5f02\u6b65\u6267\u884c  \n    // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u8981\u5f02\u6b65\u6267\u884c\u7684\u51fd\u6570\u53ca\u5176\u53c2\u6570  \n    std::future&lt;int&gt; result = std::async(std::launch::async, do_some_work, 42);  \n\n    // \u5728\u8fd9\u91cc\uff0c\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u800c do_some_work \u51fd\u6570\u5c06\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u5f02\u6b65\u6267\u884c  \n\n    // \u5047\u8bbe\u4e3b\u7ebf\u7a0b\u5728\u8fd9\u91cc\u505a\u4e00\u4e9b\u5176\u4ed6\u5de5\u4f5c...  \n    std::cout &lt;&lt; \"Waiting for async task to complete...\\n\";  \n\n    // \u4f7f\u7528 std::future::get() \u65b9\u6cd5\u7b49\u5f85\u5f02\u6b65\u4efb\u52a1\u5b8c\u6210\u5e76\u83b7\u53d6\u7ed3\u679c  \n    // \u6ce8\u610f\uff1aget() \u65b9\u6cd5\u4f1a\u963b\u585e\u8c03\u7528\u7ebf\u7a0b\uff0c\u76f4\u5230\u5f02\u6b65\u4efb\u52a1\u5b8c\u6210  \n    int value = result.get();  \n\n    // \u73b0\u5728\uff0c\u5f02\u6b65\u4efb\u52a1\u5df2\u7ecf\u5b8c\u6210\uff0c\u6211\u4eec\u53ef\u4ee5\u5b89\u5168\u5730\u4f7f\u7528\u7ed3\u679c  \n    std::cout &lt;&lt; \"The result of do_some_work(42) is \" &lt;&lt; value &lt;&lt; std::endl;  \n\n    return 0;  \n}\n</code></pre> <p>\u4e09\u79cd\u542f\u52a8\u7b56\u7565\u7684\u533a\u522b</p> <p></p> <p>\u597d\uff0c\u8fd9\u4e00\u5c0f\u8282\uff0c\u54b1\u4eec\u5c31\u638c\u63e1\u8fd9\u4e9b\uff0c \u80fd\u77e5\u9053 \u5f02\u6b65\u7684\u57fa\u672c\u6982\u5ff5 \uff0c \u80fd\u591f\u638c\u63e1async\u548cfuture\u7684\u7528\u6cd5\u5373\u53ef</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/","title":"\u301014\u3011\u5f02\u6b65\u7f16\u7a0b promise\u7684\u7528\u6cd5","text":"<p><code>std::promise</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u7ed3\u679c\u7684\u673a\u5236\u3002\u5b83\u5141\u8bb8\u4f60\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u8bbe\u7f6e\u503c\u6216\u5f02\u5e38\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u901a\u8fc7 <code>std::future</code> \u5bf9\u8c61\u68c0\u7d22\u8fd9\u4e9b\u503c\u6216\u5f02\u5e38\u3002<code>std::promise</code> \u901a\u5e38\u4e0e <code>std::async</code>\u3001<code>std::packaged_task</code> \u6216 <code>std::thread</code> \u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u5728\u5f02\u6b65\u64cd\u4f5c\u4e2d\u4f20\u9012\u7ed3\u679c\u3002</p> <p>\u4e00\u4e2aPromise\u5bf9\u8c61\u662f\u4e3a\u4e86\u4fdd\u5b58\u67d0\u4e2a\u7279\u5b9a\u7684\u7ed3\u679c\u503c\u5206\u914d\u7684\uff0c\u8fd9\u4e2a\u7ed3\u679c\u503c\u662f\u5728\u672a\u6765\u7684\u67d0\u4e2a\u65f6\u95f4\u70b9\u8ba1\u7b97\u5f97\u5230\u7684\u3002\u7ed3\u679c\u503c\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\u7684\u503c\uff08void\u7c7b\u578b\u9664\u5916\uff09\uff1b\u4e5f\u53ef\u4ee5\u662f\u6307\u5411\u5e38\u91cf\u548c\u975e\u5e38\u91cf\uff08\u5bf9\u8c61\u6307\u9488\u3001\u51fd\u6570\u6216\u8005\u6210\u5458\u51fd\u6570\uff09\u7684\u6307\u9488\uff1b\u751a\u81f3\u662f\u5f15\u7528\u7c7b\u578b\u7684\u201c\u5b9e\u503c\u201d\u3002</p> <p>\u4e00\u4e2aPromise\u5bf9\u8c61\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6216\u591a\u4e2astd::future\u5bf9\u8c61\uff0c\u7528\u6765\u627f\u8f7d\u8be5Promise\u5bf9\u8c61\u6240\u4fdd\u5b58\u7684\u7ed3\u679c\u503c\u3002\u53ea\u6709\u5f53set_value()\u6216\u8005set_exception()\u88ab\u8c03\u7528\uff0c\u8fd9\u4e9b\u7ed3\u679c\u503c\u624d\u80fd\u88ab\u6267\u884c\u3002\u4e00\u65e6\u88ab\u6267\u884c\uff0c\u8fd9\u4e9b\u7ed3\u679c\u503c\u5c31\u53ef\u4ee5\u901a\u8fc7std::future::get\u51fd\u6570\u6dfb\u52a0\u5230std::future\u5bf9\u8c61\u4e2d\u3002</p> <p></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/#_1","title":"\u5b9a\u4e49\u4e0e\u4f7f\u7528","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/#stdpromise","title":"\u5b9a\u4e49 <code>std::promise</code>","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5305\u542b <code>&lt;future&gt;</code> \u5934\u6587\u4ef6\u6765\u4f7f\u7528 <code>std::promise</code>\u3002\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a <code>std::promise</code> \u7684\u5b9e\u4f8b\uff0c\u5e76\u6307\u5b9a\u5b83\u5c06\u8981\u6301\u6709\u7684\u503c\u7684\u7c7b\u578b\u3002</p> <pre><code>#include &lt;future&gt;  \n#include &lt;iostream&gt;  \n\nint main() {  \n    std::promise&lt;int&gt; prom;  \n    // ...  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/#stdpromise_1","title":"\u4f7f\u7528 <code>std::promise</code>","text":"<p><code>std::promise</code> \u63d0\u4f9b\u4e86 <code>set_value</code> \u548c <code>set_exception</code> \u65b9\u6cd5\u6765\u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u6216\u5f02\u5e38\u3002\u540c\u65f6\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>get_future</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u4e00\u4e2a\u4e0e <code>std::promise</code> \u5173\u8054\u7684 <code>std::future</code> \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7528\u4e8e\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u68c0\u7d22\u7ed3\u679c\u3002</p> <pre><code>#include &lt;future&gt;  \n#include &lt;iostream&gt;  \n#include &lt;thread&gt;  \n\nvoid async_task(std::promise&lt;int&gt; prom) {  \n    // \u6a21\u62df\u5f02\u6b65\u64cd\u4f5c  \n    std::this_thread::sleep_for(std::chrono::seconds(1));  \n    prom.set_value(42); // \u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c  \n}  \n\nint main() {  \n    std::promise&lt;int&gt; prom;  \n    std::future&lt;int&gt; fut = prom.get_future(); // \u83b7\u53d6\u4e0e promise \u5173\u8054\u7684 future  \n\n    std::thread t(async_task, std::move(prom)); // \u542f\u52a8\u5f02\u6b65\u4efb\u52a1\uff0c\u5e76\u5c06 promise \u4f20\u9012\u7ed9\u5b83  \n\n    // \u5728\u4e3b\u7ebf\u7a0b\u4e2d\u7b49\u5f85\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u5e76\u83b7\u53d6\u7ed3\u679c  \n    std::cout &lt;&lt; \"The result is \" &lt;&lt; fut.get() &lt;&lt; std::endl;  \n\n    t.join(); // \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f  \n    return 0;  \n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/#_2","title":"\u6210\u5458\u51fd\u6570","text":"<ul> <li><code>get_future()</code>\uff1a\u8fd4\u56de\u4e00\u4e2a <code>std::future</code> \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u4e0e <code>std::promise</code> \u5bf9\u8c61\u5171\u4eab\u72b6\u6001\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a <code>std::future</code> \u5bf9\u8c61\u6765\u68c0\u7d22\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u3002</li> <li><code>set_value(T value)</code>\uff1a\u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u8c03\u7528\u6b64\u65b9\u6cd5\u540e\uff0c\u4e0e <code>std::promise</code> \u5173\u8054\u7684 <code>std::future</code> \u5bf9\u8c61\u5c06\u53d8\u4e3a fulfilled \u72b6\u6001\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>std::future::get()</code> \u6765\u68c0\u7d22\u7ed3\u679c\u3002</li> <li><code>set_exception(std::exception_ptr p)</code>\uff1a\u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u4e2d\u629b\u51fa\u7684\u5f02\u5e38\u3002\u8c03\u7528\u6b64\u65b9\u6cd5\u540e\uff0c\u4e0e <code>std::promise</code> \u5173\u8054\u7684 <code>std::future</code> \u5bf9\u8c61\u5c06\u53d8\u4e3a rejected \u72b6\u6001\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>std::future::get()</code> \u6765\u91cd\u65b0\u629b\u51fa\u5f02\u5e38\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/14-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20promise%E7%9A%84%E7%94%A8%E6%B3%95/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>std::promise \u7684\u751f\u547d\u5468\u671f\uff1a\u786e\u4fdd <code>std::promise</code> \u5bf9\u8c61\u5728 <code>std::future</code> \u5bf9\u8c61\u9700\u8981\u5b83\u4e4b\u524d\u4fdd\u6301\u6709\u6548\u3002\u4e00\u65e6 <code>std::promise</code> \u5bf9\u8c61\u88ab\u9500\u6bc1\uff0c\u4efb\u4f55\u5c1d\u8bd5\u901a\u8fc7 <code>std::future</code> \u5bf9\u8c61\u8bbf\u95ee\u5176\u7ed3\u679c\u7684\u64cd\u4f5c\u90fd\u5c06\u5931\u8d25\u3002</li> <li>\u7ebf\u7a0b\u5b89\u5168\uff1a<code>std::promise</code> \u7684 <code>set_value</code> \u548c <code>set_exception</code> \u65b9\u6cd5\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f46\u4f60\u5e94\u8be5\u907f\u514d\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e2d\u540c\u65f6\u8c03\u7528\u5b83\u4eec\uff0c\u56e0\u4e3a\u8fd9\u901a\u5e38\u610f\u5473\u7740\u4f60\u7684\u8bbe\u8ba1\u5b58\u5728\u95ee\u9898\u3002</li> <li>\u5f02\u5e38\u5904\u7406\uff1a\u5f53\u4f7f\u7528 <code>std::promise</code> \u65f6\uff0c\u8981\u7279\u522b\u6ce8\u610f\u5f02\u5e38\u5904\u7406\u3002\u5982\u679c <code>std::promise</code> \u7684 <code>set_exception</code> \u65b9\u6cd5\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u4f46\u5f02\u6b65\u64cd\u4f5c\u4e2d\u786e\u5b9e\u53d1\u751f\u4e86\u5f02\u5e38\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5f02\u5e38\u5c06\u4e0d\u4f1a\u88ab\u6355\u83b7\uff0c\u5e76\u53ef\u80fd\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002</li> <li>\u6027\u80fd\u8003\u8651\uff1a\u867d\u7136 <code>std::promise</code> \u548c <code>std::future</code> \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5f02\u6b65\u7f16\u7a0b\u80fd\u529b\uff0c\u4f46\u5b83\u4eec\u4e5f\u5f15\u5165\u4e86\u989d\u5916\u7684\u5f00\u9500\u3002\u5728\u6027\u80fd\u654f\u611f\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8981\u4ed4\u7ec6\u8003\u8651\u662f\u5426\u771f\u7684\u9700\u8981\u5b83\u4eec\u3002</li> <li>std::move \u7684\u4f7f\u7528\uff1a\u5728\u5c06 <code>std::promise</code> \u5bf9\u8c61\u4f20\u9012\u7ed9\u7ebf\u7a0b\u51fd\u6570\u65f6\uff0c\u901a\u5e38\u9700\u8981\u4f7f\u7528 <code>std::move</code> \u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u590d\u5236\u3002\u8fd9\u662f\u56e0\u4e3a <code>std::promise</code> \u5bf9\u8c61\u901a\u5e38\u5305\u542b\u975e\u6258\u7ba1\u8d44\u6e90\uff08\u5982\u5171\u4eab\u72b6\u6001\uff09\uff0c\u590d\u5236\u5b83\u4eec\u53ef\u80fd\u662f\u6602\u8d35\u7684\u6216\u4e0d\u5fc5\u8981\u7684\u3002</li> </ol>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"\u301015\u3011\u5f02\u6b65\u7f16\u7a0b packaged_task\u7684\u4f7f\u7528","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#1-packaged_task","title":"1. packaged_task","text":"<p><code>packaged_task</code> \u662f\u4e00\u4e2a\u6a21\u677f\u7c7b\uff0c\u4e3b\u8981\u7528\u4e8e\u5c06\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001lambda \u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u5bf9\u8c61\u7b49\uff09\u5305\u88c5\u8d77\u6765\uff0c\u4ee5\u4fbf\u5f02\u6b65\u5730\u6267\u884c\uff0c\u5e76\u80fd\u591f\u83b7\u53d6\u5176\u8fd4\u56de\u7ed3\u679c\u3002\u5b83\u548c <code>std::future</code> \u4ee5\u53ca <code>std::thread</code> \u7d27\u5bc6\u76f8\u5173\uff0c\u7ecf\u5e38\u7528\u4e8e\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#2-packaged_task","title":"2. packaged_task\u57fa\u672c\u4f7f\u7528","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#21","title":"2.1. \u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#22","title":"2.2. \u5b9a\u4e49\u548c\u4f7f\u7528","text":"<p>\u5c01\u88c5lambda\u8868\u8fbe\u5f0f</p> <pre><code>#include &lt;future&gt;  \n#include &lt;iostream&gt;  \nusing namespace std;\n\nint main() {\n    std::packaged_task&lt;int(int, int)&gt; task([](int a, int b) {\n        return a + b;\n        });\n\n    future&lt;int&gt; myfuture=task.get_future();\n    task(12, 23);\n    cout &lt;&lt; myfuture.get() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre> <p>\u5c01\u88c5\u51fd\u6570</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;future&gt;\n#include &lt;functional&gt;\n\n// \u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\uff0c\u7528\u4e8e\u6f14\u793a\nint multiply(int a, int b) {\n    return a * b;\n}\n\nint main() {\n    // \u521b\u5efa\u4e00\u4e2a packaged_task\uff0c\u5305\u88c5\u51fd\u6570 multiply\n    std::packaged_task&lt;int(int, int)&gt; task(multiply);\n\n    // \u83b7\u53d6\u4e0e task \u76f8\u5173\u8054\u7684 future\n    std::future&lt;int&gt; result = task.get_future();\n\n    // \u5c06\u4efb\u52a1\u4ea4\u7ed9\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u6267\u884c\n    std::thread t(move(task), 5, 6);\n\n    // \u7b49\u5f85\u4efb\u52a1\u5b8c\u6210\u5e76\u83b7\u53d6\u7ed3\u679c\n    int value = result.get();\n\n    std::cout &lt;&lt; \"Result: \" &lt;&lt; value &lt;&lt; std::endl; // \u8f93\u51fa \"Result: 30\"\n\n    // \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f\n    t.join();\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#23","title":"2.3. \u4e3b\u8981\u7279\u6027","text":"<ul> <li>\u4e0d\u53ef\u590d\u5236\u6027\uff1a<code>packaged_task</code> \u5bf9\u8c61\u662f\u4e0d\u53ef\u590d\u5236\u7684\uff0c\u4f46\u53ef\u4ee5\u79fb\u52a8\u3002</li> <li>\u4e0e <code>**future**</code> \u534f\u4f5c\uff1a<code>packaged_task</code> \u548c <code>std::future</code> \u534f\u540c\u5de5\u4f5c\uff0c\u5141\u8bb8\u5f02\u6b65\u4efb\u52a1\u7684\u7ed3\u679c\u5728\u7a0d\u540e\u67d0\u4e2a\u65f6\u95f4\u70b9\u88ab\u83b7\u53d6\u3002</li> <li>\u9002\u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\uff1a<code>packaged_task</code> \u7684\u8bbe\u8ba1\u4f7f\u5f97\u5b83\u975e\u5e38\u9002\u5408\u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\uff0c\u5c24\u5176\u662f\u9700\u8981\u5c06\u4efb\u52a1\u5206\u53d1\u7ed9\u4e0d\u540c\u7ebf\u7a0b\u6267\u884c\u7684\u573a\u666f\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/15-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%20packaged_task%E7%9A%84%E4%BD%BF%E7%94%A8/#24","title":"2.4. \u5e94\u7528\u573a\u666f","text":"<ul> <li>\u5f02\u6b65\u4efb\u52a1\u6267\u884c\uff1a\u5f53\u4f60\u9700\u8981\u5c06\u4e00\u4e2a\u4efb\u52a1\u5206\u53d1\u7ed9\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u6267\u884c\uff0c\u5e76\u5e0c\u671b\u5728\u4efb\u52a1\u5b8c\u6210\u540e\u83b7\u53d6\u7ed3\u679c\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>packaged_task</code>\u3002</li> <li>\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\uff1a\u5728\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u65f6\uff0c<code>packaged_task</code> \u53ef\u4ee5\u7528\u4e8e\u5c06\u4efb\u52a1\u5c01\u88c5\uff0c\u5e76\u5c06\u5176\u5206\u53d1\u7ed9\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u6267\u884c\u3002</li> </ul>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/","title":"\u301016\u3011\u4e09\u79cd\u5f02\u6b65\u5de5\u5177\u7684\u6bd4\u8f83","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/#1","title":"1. \u4e09\u79cd\u5f02\u6b65\u5de5\u5177\u6bd4\u8f83","text":"<p><code>async</code>\u3001<code>promise</code> \u548c <code>packaged_task</code> \u90fd\u662f C++ \u4e2d\u7528\u4e8e\u5904\u7406\u5f02\u6b65\u4efb\u52a1\u7684\u5de5\u5177\uff0c\u4f46\u5b83\u4eec\u5728\u8bbe\u8ba1\u76ee\u6807\u3001\u7075\u6d3b\u6027\u548c\u4f7f\u7528\u573a\u666f\u4e0a\u5404\u6709\u4e0d\u540c\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/#11-stdasync","title":"1.1. <code>std::async</code>","text":"<ul> <li>\u81ea\u52a8\u4efb\u52a1\u8c03\u5ea6: <code>std::async</code> \u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u4e14\u65b9\u4fbf\u7684\u65b9\u5f0f\u6765\u521b\u5efa\u5f02\u6b65\u4efb\u52a1\u3002\u4f60\u53ea\u9700\u8981\u8c03\u7528 <code>std::async</code>\uff0c\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\u548c\u53c2\u6570\uff0c\u5f02\u6b65\u4efb\u52a1\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u4e14\u4f1a\u8fd4\u56de\u4e00\u4e2a <code>std::future</code> \u5bf9\u8c61\u6765\u83b7\u53d6\u7ed3\u679c\u3002</li> <li>\u7075\u6d3b\u6027\u6709\u9650: \u867d\u7136\u7b80\u5355\uff0c\u4f46 <code>std::async</code> \u7684\u7075\u6d3b\u6027\u6709\u9650\uff0c\u4f60\u65e0\u6cd5\u5b8c\u5168\u63a7\u5236\u4efb\u52a1\u7684\u8c03\u5ea6\u65b9\u5f0f\uff08\u5982\u4efb\u52a1\u5728\u54ea\u4e2a\u7ebf\u7a0b\u4e2d\u8fd0\u884c\uff09\u3002</li> <li>\u9002\u7528\u573a\u666f: \u9002\u5408\u4e8e\u7b80\u5355\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u4e0d\u9700\u8981\u590d\u6742\u7684\u4efb\u52a1\u8c03\u5ea6\u6216\u7ba1\u7406\u3002</li> </ul> <p>\u793a\u4f8b:</p> <pre><code>std::future&lt;int&gt; result = std::async(std::launch::async, []{ return 42; });\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/#12-stdpromise","title":"1.2. <code>std::promise</code>","text":"<ul> <li>\u624b\u52a8\u8bbe\u7f6e\u7ed3\u679c: <code>std::promise</code> \u662f\u4e00\u79cd\u66f4\u5e95\u5c42\u7684\u673a\u5236\uff0c\u5b83\u5141\u8bb8\u4f60\u624b\u52a8\u8bbe\u7f6e\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u8be5\u7ed3\u679c\u4f20\u9012\u7ed9\u4e0e\u4e4b\u5173\u8054\u7684 <code>std::future</code>\u3002\u4f60\u9700\u8981\u5c06 <code>std::promise</code> \u548c\u5f02\u6b65\u4efb\u52a1\u7684\u903b\u8f91\u7ed3\u5408\u5728\u4e00\u8d77\u3002</li> <li>\u9700\u8981\u66f4\u591a\u4ee3\u7801\u7ba1\u7406: \u4f7f\u7528 <code>std::promise</code> \u9700\u8981\u4f60\u624b\u52a8\u7ba1\u7406\u4efb\u52a1\u7684\u6267\u884c\u548c\u7ed3\u679c\u4f20\u9012\uff0c\u56e0\u6b64\u6bd4 <code>std::async</code> \u66f4\u52a0\u7075\u6d3b\uff0c\u4f46\u4e5f\u66f4\u590d\u6742\u3002</li> <li>\u9002\u7528\u573a\u666f: \u9002\u7528\u4e8e\u9700\u8981\u624b\u52a8\u63a7\u5236\u4efb\u52a1\u7ed3\u679c\u4f20\u9012\u7684\u573a\u666f\uff0c\u6216\u8005\u5f02\u6b65\u4efb\u52a1\u7684\u7ed3\u679c\u662f\u7531\u591a\u4e2a\u6b65\u9aa4\u6216\u591a\u4e2a\u7ebf\u7a0b\u51b3\u5b9a\u7684\u3002</li> </ul> <p>\u793a\u4f8b: <pre><code>std::promise&lt;int&gt; promise;\nstd::future&lt;int&gt; result = promise.get_future();\nstd::thread([&amp;promise]{\n    promise.set_value(42);\n}).detach();\n</code></pre></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/#13-stdpackaged_task","title":"1.3. <code>std::packaged_task</code>","text":"<ul> <li>\u5c01\u88c5\u53ef\u8c03\u7528\u5bf9\u8c61: <code>std::packaged_task</code> \u53ef\u4ee5\u5c06\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff08\u5982\u51fd\u6570\u3001lambda\u3001\u51fd\u6570\u5bf9\u8c61\u7b49\uff09\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u5c06\u5176\u7ed3\u679c\u901a\u8fc7 <code>std::future</code> \u4f20\u9012\u3002\u8fd9\u4f7f\u5f97\u5b83\u53ef\u4ee5\u7528\u4e8e\u590d\u6742\u7684\u5f02\u6b65\u4efb\u52a1\u8c03\u5ea6\u3002</li> <li>\u4e0e\u5176\u4ed6\u5de5\u5177\u7ed3\u5408\u4f7f\u7528: <code>std::packaged_task</code> \u7684\u8bbe\u8ba1\u4f7f\u5f97\u5b83\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u4e0e <code>std::thread</code>\u3001\u81ea\u5b9a\u4e49\u7684\u7ebf\u7a0b\u6c60\u3001\u4efb\u52a1\u961f\u5217\u7b49\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u4fbf\u7075\u6d3b\u5730\u7ba1\u7406\u4efb\u52a1\u7684\u6267\u884c\u3002</li> <li>\u9002\u7528\u573a\u666f: \u9002\u5408\u9700\u8981\u9ad8\u5ea6\u7075\u6d3b\u7684\u4efb\u52a1\u7ba1\u7406\u3001\u5c01\u88c5\u4efb\u52a1\u5e76\u624b\u52a8\u63a7\u5236\u4efb\u52a1\u6267\u884c\u7684\u573a\u666f\u3002\u7279\u522b\u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u6216\u4efb\u52a1\u961f\u5217\u7684\u5b9e\u73b0\u3002</li> </ul> <p>\u793a\u4f8b: <pre><code>std::packaged_task&lt;int()&gt; task([]{ return 42; });\nstd::future&lt;int&gt; result = task.get_future();\nstd::thread(std::move(task)).detach();\n</code></pre></p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/16-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E6%AF%94%E8%BE%83/#2","title":"2. \u5f02\u6b65\u4f7f\u7528\u7684\u573a\u666f\uff08\u4e09\u79cd\u5f02\u6b65\u5de5\u5177\u7684\u4f7f\u7528\u6837\u4f8b\uff09","text":"<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;future&gt;\nusing namespace std;\n\nint  getsum(int a,int b) {\n    int vl = a+b;\n    for (int i = 0; i &lt; 10000; i++)\n    {\n        vl++;\n    }\n    return vl;\n}\n\n/// &lt;summary&gt;\n///  \u4f7f\u7528promise\n/// &lt;/summary&gt;\n/// &lt;param name=\"int_promise\"&gt;&lt;/param&gt;\nvoid async_task(std::promise&lt;int&gt; int_promise) {\n    // \u6a21\u62df\u4e00\u4e9b\u5de5\u4f5c  \n    std::this_thread::sleep_for(std::chrono::seconds(1));\n\n    // \u5b58\u50a8\u7ed3\u679c  \n    int_promise.set_value(42);\n}\n\nint main() {\n\n    //\u7b2c\u4e00\u79cd\u73a9\u6cd5\uff1a\u6309\u7167future+async\u7684\u65b9\u5f0f\u5f00\u8f9f\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\n    future&lt;int&gt; myyibu = async(launch::async,getsum,20,30);\n    cout &lt;&lt; \"this is yibu\" &lt;&lt; myyibu.get() &lt;&lt; endl;\n    cout &lt;&lt; \"xia mian shi tongbu\" &lt;&lt; endl;\n    cout &lt;&lt;\"zhijiediaoyong:\"&lt;&lt; getsum(10,20) &lt;&lt; endl;\n\n    //\u7b2c\u4e8c\u79cd\u73a9\u6cd5\uff1a\u6309\u7167package_task\u7684\u65b9\u5f0f\u8fdb\u884c\u5f02\u6b65\u8c03\u7528\n    packaged_task&lt;decltype(getsum)&gt; mytsak(getsum); // \u4e5f\u53ef\u4ee5\u6309\u7167\u5199\u6cd5\u6765\u8c03\u7528\uff0c\u4f7f\u7528decltype \u83b7\u5f97\u51fd\u6570\u7684\u5b9a\u4e49\u7c7b\u578b\n    //packaged_task&lt;int(int,int)&gt; mytsak(getsum); //\u8fd9\u79cd\u662f\u539f\u59cb\u7684\u65b9\u6cd5\n    mytsak(30, 30);\n    auto myf = mytsak.get_future().get();\n    cout &lt;&lt; \"task result\" &lt;&lt; myf &lt;&lt; endl;\n\n\n    //\u7b2c\u4e09\u79cd\uff1apromise\n    promise&lt;int&gt; mypromise; //\u521b\u5efapromise\u5bf9\u8c61\n    future&lt;int&gt; myfuture3 = mypromise.get_future(); // \u4ecepromise\u5bf9\u8c61\u83b7\u53d6future\u5bf9\u8c61  \n    std::thread t(async_task, std::move(mypromise)); // \u5728\u65b0\u7ebf\u7a0b\u4e2d\u6267\u884c\u5f02\u6b65\u4efb\u52a1 \n    // \u5728\u4e3b\u7ebf\u7a0b\u4e2d\u7b49\u5f85\u5e76\u68c0\u7d22\u7ed3\u679c  \n    int value = myfuture3.get();  // \u8fd9\u91cc\u4f1a\u963b\u585e\uff0c\u76f4\u5230async_task\u8c03\u7528set_value()  \n    // \u8f93\u51fa\u7ed3\u679c  \n    std::cout &lt;&lt; \"Value received: \" &lt;&lt; value &lt;&lt; std::endl;\n    // \u7b49\u5f85\u7ebf\u7a0b\u7ed3\u675f  \n    t.join();\n    /*\u5728\u5c06std::promise\u5bf9\u8c61\u4f20\u9012\u7ed9\u7ebf\u7a0b\u65f6\uff0c\u6211\u4eec\u4f7f\u7528std::move\u6765\u79fb\u52a8\u5b83\uff0c\u56e0\u4e3astd::promise\u662f\u4e0d\u53ef\u590d\u5236\u7684\u3002\n        \u8c03\u7528std::future::get()\u4f1a\u963b\u585e\uff0c\u76f4\u5230\u76f8\u5e94\u7684std::promise\u5bf9\u8c61\u8c03\u7528set_value()\u6216set_exception()\u3002\n        \u4f60\u53ef\u4ee5\u4f7f\u7528std::future::wait_for()\u6216std::future::wait_until()\u6765\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u65e0\u9650\u671f\u5730\u7b49\u5f85\u3002\n        \u5f53std::future\u5bf9\u8c61\u88ab\u9500\u6bc1\u5e76\u4e14\u5b83\u7684\u503c\u8fd8\u6ca1\u6709\u88ab\u68c0\u7d22\u65f6\uff0c\u5982\u679cstd::promise\u5bf9\u8c61\u8fd8\u6ca1\u6709\u88ab\u9500\u6bc1\uff0c\u5219\u5b58\u50a8\u7684\u503c\u4f1a\u88ab\u4e22\u5f03\u3002\n        \u5982\u679cstd::promise\u5bf9\u8c61\u5148\u88ab\u9500\u6bc1\uff0c\u5219\u5c1d\u8bd5\u4ecestd::future\u5bf9\u8c61\u68c0\u7d22\u503c\u4f1a\u5bfc\u81f4std::future_error\u5f02\u5e38\u3002*/\n\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/","title":"\u301017\u3011\u7ebf\u7a0b\u6c60","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/#1","title":"1. \u4f55\u4e3a\u7ebf\u7a0b\u6c60\uff1f\u6709\u4ec0\u4e48\u7528\u5904\uff1f","text":"<p>\u7ebf\u7a0b\u6c60\u662f\u6307\u4e00\u79cd\u9884\u5148\u521b\u5efa\u4e00\u7ec4\u7ebf\u7a0b\u7684\u673a\u5236\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u5728\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u65f6\u5c31\u5df2\u7ecf\u521b\u5efa\u597d\uff0c\u7b49\u5f85\u6267\u884c\u4efb\u52a1\u3002\u5f53\u6709\u65b0\u7684\u4efb\u52a1\u9700\u8981\u6267\u884c\u65f6\uff0c\u7ebf\u7a0b\u6c60\u4f1a\u4ece\u7ebf\u7a0b\u96c6\u5408\u4e2d\u5206\u914d\u4e00\u4e2a\u7a7a\u95f2\u7ebf\u7a0b\u6765\u6267\u884c\u8be5\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u91cd\u65b0\u521b\u5efa\u548c\u9500\u6bc1\u7ebf\u7a0b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/#2","title":"2. \u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u7ebf\u7a0b\u6c60\uff1f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/#3","title":"3. \u4e00\u4e2a\u7ebf\u7a0b\u6c60\u5e94\u8be5\u5305\u542b\u4ec0\u4e48\uff1f","text":""},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/#4-c","title":"4. \u5982\u4f55\u4f7f\u7528C++\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u6c60","text":"<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;future&gt;\n#include &lt;condition_variable&gt;\n#include &lt;functional&gt;\n#include &lt;queue&gt;\n\n/// &lt;summary&gt;\n/// \u7ebf\u7a0b\u6c60\n/// &lt;/summary&gt;\nclass ThreadPool {\n\npublic:\n    //\u6784\u9020\u51fd\u6570\n    ThreadPool(int threadnums); \n\n    //\u6dfb\u52a0\u4efb\u52a1\u5230\u961f\u5217\n    template &lt;typename F,typename ...Arg&gt;\n    auto enques(F&amp;&amp; f,Arg&amp;&amp;... arg)-&gt;std::future&lt;typename std::result_of&lt;F(Arg...)&gt;::type&gt;;\n\n    //\u6790\u6784\u51fd\u6570\n    ~ThreadPool();\n\nprivate:\n    void worker();\n    bool isstop;\n    std::condition_variable  cv;\n    std::mutex mtx;\n    std::vector&lt;std::thread&gt;  workers;\n    std::queue&lt;std::function&lt;void()&gt;&gt; myque;\n};\n\n//\u6784\u9020\u51fd\u6570\nThreadPool::ThreadPool(int threadnums):isstop(false) {\n\n    for (size_t i = 0; i &lt; threadnums; i++)\n    {\n        workers.emplace_back([this]() {\n            this-&gt;worker();\n            });\n    }\n}\n\n//\u6790\u6784\u51fd\u6570\nThreadPool::~ThreadPool() {\n    //\u66f4\u6539\u505c\u6b62\u6807\u8bc6\n    {\n        std::unique_lock&lt;std::mutex&gt;(mtx);\n        isstop = true;\n    }\n\n    //\u901a\u77e5\u6240\u6709\u6240\u6709\u963b\u585e\u4e2d\u7684\u7ebf\u7a0b\n    cv.notify_all(); \n\n    //\u786e\u4fdd\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\n    for (std::thread&amp; onethread : workers)\n    {\n        onethread.join();\n    }\n}\n\n//\u6dfb\u52a0\u4efb\u52a1\ntemplate &lt;typename F, typename ...Arg&gt;\nauto ThreadPool::enques(F&amp;&amp; f, Arg&amp;&amp;... arg)-&gt;std::future&lt;typename std::result_of&lt;F(Arg...)&gt;::type&gt; \n{\n    //\u83b7\u5f97f\u6267\u884c\u540e\u7684\u7c7b\u578b\n    using functype = typename std::result_of&lt;F(Arg...)&gt;::type;\n\n    //\u83b7\u5f97\u4e00\u4e2a\u667a\u80fd\u6307\u9488 \u6307\u5411\u4e00\u4e2a\u88ab\u5305\u88c5\u4e3afunctype()\u7684task\n    auto task = std::make_shared&lt;std::packaged_task&lt;functype()&gt;&gt;(\n            std::bind(std::forward&lt;F&gt;(f),std::forward&lt;Arg&gt;(arg)...)\n        );\n\n    //\u83b7\u5f97future\n    std::future&lt;functype&gt; rsfuture = task-&gt;get_future();\n\n    //\u5c06\u4efb\u52a1\u6dfb\u52a0\u5230\u961f\u5217\n    {\n        std::lock_guard&lt;std::mutex&gt; lockguard(this-&gt;mtx);\n        if (isstop)\n            throw std::runtime_error(\"\u51fa\u9519\uff1a\u7ebf\u7a0b\u6c60\u5df2\u7ecf\u505c\u6b62\u4e86\");\n\n        //\u5c06\u4efb\u52a1\u6dfb\u52a0\u5230\u961f\u5217\n        myque.emplace([task]() {\n            (*task)();\n            });\n    }\n\n    //\u901a\u77e5\u7ebf\u7a0b\u53bb\u6267\u884c\u4efb\u52a1\n    cv.notify_one();\n\n    //\u8fd4\u56defuture\n    return rsfuture;\n}\n\n\n//\u6bcf\u4e2a\u5177\u4f53\u7684\u5de5\u4f5c\u4efb\u52a1\nvoid ThreadPool::worker() {\n\n    while (true) {\n\n        //\u5b9a\u4e49\u4efb\u52a1\n        std::function&lt;void()&gt; task;\n\n\n        //\u4ece\u961f\u5217\u4e2d\u53d6\u5f97\u4e00\u4e2a\u4efb\u52a1\n        {\n            std::unique_lock&lt;std::mutex&gt; lock(mtx);\n            cv.wait(lock, [this] { return this-&gt;isstop || !this-&gt;myque.empty(); });\n            if (isstop &amp;&amp; myque.empty()) return;\n            task = std::move(this-&gt;myque.front());\n            this-&gt;myque.pop();\n        }\n\n        //\u6267\u884c\u4efb\u52a1\n        task(); \n\n    }\n\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/17-%E7%BA%BF%E7%A8%8B%E6%B1%A0/#5","title":"5. \u4f7f\u7528\u7ebf\u7a0b","text":"<pre><code>//\u901a\u8fc7\u4ee3\u7801\u6f14\u793a\u4e00\u4e0b \u7ebf\u7a0b\u6c60\u7684\u4f7f\u7528\n#include &lt;iostream&gt;\n#include \"ThreadPool.hpp\"\n\nint main() {\n    ThreadPool mypool(4);\n    for (size_t i = 0; i &lt; 20; i++)\n    {\n        auto rsfuture0 = mypool.enques([](int a, int b)-&gt;int {\n            std::cout &lt;&lt; \"\u5f53\u5148\u7ebf\u7a0b\uff1a\" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n        return a + b; }, 10*i, 10*i);\n        std::cout &lt;&lt; \"thread rs:\" &lt;&lt; rsfuture0.get() &lt;&lt; std::endl;\n\n    }\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E8%BF%9B%E9%98%B6/05-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/18-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B0%8F%E7%BB%93/","title":"\u301018\u3011\u591a\u7ebf\u7a0b\u5c0f\u7ed3","text":""},{"location":"opencv4/01-OpenCV4%E6%A6%82%E8%BF%B0/","title":"\u301001\u3011OpenCV4\u6982\u8ff0","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/00-%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%A2%8E%E5%BF%B5/","title":"\u301000\u3011\u77e5\u8bc6\u788e\u788e\u5ff5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/00-%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%A2%8E%E5%BF%B5/#1compile_commandsjson","title":"1.compile_commands.json","text":"<p><code>compile_commands.json</code> \u6587\u4ef6\u5305\u542b\u4e86\u7f16\u8bd1\u6bcf\u4e2a\u6e90\u6587\u4ef6\u6240\u9700\u7684\u7cbe\u786e\u547d\u4ee4\uff0c\u5305\u62ec\u6240\u6709\u7684\u7f16\u8bd1\u5668\u6807\u5fd7\u548c\u5305\u542b\u8def\u5f84\u3002\u8bb8\u591a\u4ee3\u7801\u5206\u6790\u5de5\u5177\uff08\u5982 Clang-Tidy\u3001Clang Static Analyzer\uff09\u548c IDE\uff08\u5982 VSCode\u3001CLion\uff09\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u6587\u4ef6\u6765\u51c6\u786e\u7406\u89e3\u9879\u76ee\u7684\u6784\u5efa\u914d\u7f6e\u3002</p> <p>\u4f7f\u7528\u8f6f\u94fe\u63a5\u7684\u597d\u5904\uff1a</p> <ol> <li>\u5b9e\u9645\u7684 <code>compile_commands.json</code> \u6587\u4ef6\u4ecd\u7136\u4f4d\u4e8e\u6784\u5efa\u76ee\u5f55\u4e2d\uff0c\u4fdd\u6301\u4e86\u6e90\u4ee3\u7801\u76ee\u5f55\u7684\u6574\u6d01</li> <li>\u7b26\u53f7\u94fe\u63a5\u63d0\u4f9b\u4e86\u4fbf\u5229\uff0c\u540c\u65f6\u4e0d\u4f1a\u5728\u6e90\u4ee3\u7801\u76ee\u5f55\u4e2d\u5f15\u5165\u989d\u5916\u7684\u751f\u6210\u6587\u4ef6</li> <li>\u6bcf\u6b21 CMake \u91cd\u65b0\u914d\u7f6e\u6216\u6784\u5efa\u9879\u76ee\u65f6\uff0c<code>compile_commands.json</code> \u6587\u4ef6\u90fd\u4f1a\u81ea\u52a8\u66f4\u65b0</li> </ol> <pre><code>#\u751f\u6210\u5e76\u94fe\u63a5 compile_commands.json \u6587\u4ef6\uff0c\u8fd9\u5bf9\u4e8e\u4ee3\u7801\u5206\u6790\u5de5\u5177\u548c IDE \u975e\u5e38\u6709\u7528\nset(CMAKE_EXPORT_COMPILE_COMMANDS ON)\n\n# \u5728\u914d\u7f6e\u9636\u6bb5\u521b\u5efa\u8f6f\u94fe\u63a5\nfile(CREATE_LINK\n    \"${CMAKE_BINARY_DIR}/compile_commands.json\"\n    \"${CMAKE_SOURCE_DIR}/compile_commands.json\"\n    SYMBOLIC\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/","title":"\u301001\u3011\u5b89\u88c5\u4e0e\u57fa\u672c\u4ecb\u7ecd","text":"<p>\u5728\u5b89\u88c5\u67d0\u4e9b\u5f00\u6e90\u5e93\u7684\u65f6\u5019\uff0c\u5982\u679c\u6d89\u53ca\u5230\u6e90\u7801\u7f16\u8bd1\uff0c\u7ecf\u5e38\u4f1a\u4f7f\u7528 CMake \u5b8c\u6210\u6784\u5efa\u3001\u5b89\u88c5\uff0c\u521d\u6b21\u63a5\u89e6 CMake \u65f6\uff0c\u6211\u4eec\u5148\u56de\u7b54</p> <ul> <li>CMake \u662f\u4ec0\u4e48</li> <li>\u4e3a\u4ec0\u4e48\u7528 CMake</li> <li>\u600e\u4e48\u7528 CMake</li> </ul> <p>\u8fd9\u4e09\u4e2a\u95ee\u9898\u3002\u5728\u5bf9 CMake \u6709\u4e2a\u5927\u6982\u5370\u8c61\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ee7\u7eed\u63a2\u7d22\u66f4\u9ad8\u7ea7\u3001\u66f4\u73b0\u4ee3\u7684\u7528\u6cd5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#1-cmake","title":"1. CMake \u662f\u4ec0\u4e48","text":"<p>\u4e0b\u6587\u662f\u4e00\u53e5\u6765\u81ea\u767e\u5ea6\u767e\u79d1\u7684\u5b9a\u4e49\uff0c\u6211\u4eec\u7b80\u5355\u505a\u4e2a\u5206\u6bb5\uff0c\u5e76\u6682\u65f6\u5220\u9664\u4e0d\u5fc5\u8981\u7684\u5185\u5bb9\u3002</p> <ul> <li>CMake \u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684\u5b89\u88c5\uff08\u7f16\u8bd1\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u7b80\u5355\u7684\u8bed\u53e5\u6765\u63cf\u8ff0\u6240\u6709\u5e73\u53f0\u7684\u5b89\u88c5(\u7f16\u8bd1\u8fc7\u7a0b)</li> <li>\u4ed6\u80fd\u591f\u8f93\u51fa\u5404\u79cd\u5404\u6837\u7684 makefile \u6216\u8005 project \u6587\u4ef6</li> <li>CMake \u5e76\u4e0d\u76f4\u63a5\u5efa\u6784\u51fa\u6700\u7ec8\u7684\u8f6f\u4ef6\uff0c\u800c\u662f\u4ea7\u751f\u6807\u51c6\u7684\u5efa\u6784\u6863\uff08\u5982 Unix \u7684 Makefile \u6216 Windows Visual C++ \u7684 projects/workspaces\uff09\uff0c\u7136\u540e\u518d\u4f9d\u4e00\u822c\u7684\u5efa\u6784\u65b9\u5f0f\u4f7f\u7528</li> </ul> <p>\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u660e\u786e\uff0cCMake \u662f\u4e00\u4e2a==\u8de8\u5e73\u53f0\u5de5\u5177==\u3002\u7b80\u5355\u7684\u3001\u72ed\u9698\u7684\u8bf4\uff0c\u8de8\u5e73\u53f0\u5c31\u662f\u53ef\u4ee5\u5728 Windows\u3001Linux \u53d1\u884c\u7248\u4e43\u81f3 MacOS \u7b49\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u4f7f\u7528\u3002</p> <p>\u5176\u6b21\uff0cCMake \u4f7f\u7528\u4e0e Python \u6027\u8d28\u7b49\u540c\u7684\u811a\u672c\u8bed\u8a00\u3002Python \u4e00\u822c\u5728\u6267\u884c\u67d0\u4e2a <code>py</code> \u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u7528</p> <pre><code>python3 main.py\n</code></pre> <p>\u8fd9\u79cd\u8bed\u53e5\uff0c\u5b8c\u6210\u5bf9 <code>main.py</code> \u7684\u9010\u884c\u89e3\u6790\uff0cCMake \u540c\u6837\uff0c\u5728\u8fd0\u884c</p> <pre><code>cmake .. # .. \u5c31\u8868\u793a\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939\n</code></pre> <p>\u540e\uff0c\u53ef\u4ee5\u89e3\u6790\u6765\u81ea\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939\u4e2d <code>CMakeLists.txt</code> \u91cc\u7684\u5185\u5bb9\uff0c\u5e76\u5c06\u4ea7\u7269\u8f93\u51fa\u5230\u5f53\u524d\u6587\u4ef6\u5939\u3002\u56e0\u6b64\uff0cCMake \u89e3\u6790\u7684\u6587\u4ef6\u4e00\u822c\u90fd\u662f\u540d\u4e3a <code>CMakeLists.txt</code> \u7684\u6587\u4ef6\uff0c\u5f53\u7136\u8fd8\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5728\u540e\u6587\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p> <p>\u6700\u540e\uff0c\u9700\u8981\u5f3a\u8c03\u4e00\u70b9\uff0cCMake \u5e76\u4e0d\u662f\u4e00\u4e2a\u7f16\u8bd1\u5668\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u7f16\u8bd1\u5de5\u5177\uff0c\u6b63\u5982\u767e\u5ea6\u767e\u79d1\u6240\u8bf4\uff0cCMake \u4e0d\u76f4\u63a5\u5efa\u6784\u51fa\u6700\u7ec8\u7684\u8f6f\u4ef6\uff0cCMake \u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u80fd\u591f\u4f7f\u7528\u7edf\u4e00\u7684\u8bed\u6cd5\uff0c\u5728\u7279\u5b9a\u5e73\u53f0\u4e0b\uff0c\u751f\u6210\u80fd\u591f\u6307\u5bfc\u7f16\u8bd1\u5668\u5b8c\u6210\u7f16\u8bd1\u5de5\u4f5c\u7684\u6587\u4ef6\uff0c\u8fd9\u4e00\u6587\u4ef6\u6211\u4eec\u79f0\u4e4b\u4e3a==\u5efa\u6784\u6863==\uff0c\u7528\u4e8e\u751f\u6210\u5efa\u6784\u6863\u7684\u7edf\u4e00\u8bed\u6cd5\u7684\u6587\u4ef6\uff0c\u5373 <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a==\u7ec4\u6001\u6863==\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#2-cmake","title":"2. \u4e3a\u4ec0\u4e48\u7528 CMake","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#21","title":"2.1 \u8bed\u6cd5\u7edf\u4e00","text":"<p>\u4e0d\u540c\u7684\u5e73\u53f0\u7f16\u8bd1\u5668\u3001\u7cfb\u7edf\u73af\u5883\u3001\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\u90fd\u4e0d\u76f8\u540c\uff0c\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u65b9\u5f0f\u4e5f\u4e0d\u5c3d\u76f8\u540c\uff0c\u4f8b\u5982\uff0c\u5bf9\u4e8e\u540c\u6837\u7684\u4e00\u4e2a <code>main.cpp</code></p> <ul> <li>\u5728 Ubuntu \u4e0a\uff0c\u4e00\u822c\u4f1a\u4f7f\u7528 gcc/g++ \u7f16\u8bd1\u5668\u5b8c\u6210 C/C++ \u6587\u4ef6\u7684\u7f16\u8bd1\uff0c\u6267\u884c   <pre><code>g++ main.cpp -o demo\n</code></pre>   \u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u7684\u53ef\u6267\u884c\u7a0b\u5e8f <code>demo</code></li> <li>\u5728 Windows \u4e0a\uff0c\u5f97\u76ca\u4e8e Visual Studio \u5f3a\u5927\u7684 IDE\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5728\u8be5 IDE \u4e0a\u96c6\u6210\u597d\u7f16\u8bd1\u5668\uff08MSVC\uff09\u5b8c\u6210\u6e90\u6587\u4ef6\u7684\u7f16\u8bd1\uff0c\u4e00\u822c\u70b9\u51fb Visual Studio \u7684\u751f\u6210\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u7684\u6587\u4ef6\u5939\u4e0b\u751f\u6210\u4e00\u4e2a <code>.exe</code> \u6587\u4ef6\uff0c\u8fd9\u5c31\u662f\u5728 Windows \u4e0a\u6700\u7ec8\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u7a0b\u5e8f</li> </ul> <p>\u4f46\u4f7f\u7528 CMake \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7edf\u4e00\u7684\u8bed\u53e5\u751f\u6210\u5efa\u6784\u6863\u3002</p> <ul> <li>\u5728 Ubuntu \u4e0a\uff0c\u751f\u6210\u80fd\u591f\u88ab Unix makefile \u89e3\u6790\u7684 <code>Makefile</code> \u6587\u4ef6\uff0c\u8fd9\u4e00\u6587\u4ef6\u53ef\u4ee5\u6307\u5bfc gcc/g++ \u7f16\u8bd1\u5668\u5b8c\u6210\u6784\u5efa\uff08\u7f16\u8bd1\uff09\u5de5\u4f5c\uff0c<code>Makefile</code> \u6587\u4ef6\u5c31\u662f\u5efa\u6784\u6863\u3002</li> <li>\u5728 Windows \u4e0a\uff0c\u751f\u6210\u80fd\u591f\u88ab Visual Studio MSBuild \u89e3\u6790\u7684 <code>*.sln</code> \u89e3\u51b3\u65b9\u6848\u6587\u4ef6\uff0c\u8fd9\u4e00\u6587\u4ef6\u53ef\u4ee5\u6307\u5bfc MSVC \u7f16\u8bd1\u5668\u5b8c\u6210\u6784\u5efa\uff08\u7f16\u8bd1\uff09\u5de5\u4f5c\uff0c<code>*.sln</code> \u6587\u4ef6\u5c31\u662f\u5efa\u6784\u6863\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#22","title":"2.2 \u529f\u80fd\u5f3a\u5927","text":"<p>\u8fc4\u4eca\u4e3a\u6b62\uff0cCMake <code>3.x</code> \u7cfb\u5217\u5df2\u7ecf\u53d1\u5e03\u4e86\u8d85\u8fc7 30 \u4e2a\u7248\u672c\uff0c\u622a\u81f3 <code>2024/11/29</code> \u7684\u6700\u65b0\u7248\u672c\u662f <code>3.31.1</code>\uff0c\u540e\u7eed\u7684\u4ecb\u7ecd\u5747\u4ee5 <code>3.16</code> \u4e3a\u6700\u5c0f\u7248\u672c\u3002\u901a\u8fc7 CMake \u53ef\u4ee5\u5728\u751f\u6210\u5efa\u6784\u6863\u4e4b\u524d\u5b9e\u73b0</p> <ul> <li>\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93\u7684\u4e0b\u8f7d\u3001\u5305\u542b</li> <li>\u6587\u4ef6\u89e3\u6790\u3001\u751f\u6210</li> <li>C/C++ \u5b8f\u7684\u751f\u6210</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#3-cmake","title":"3. \u600e\u4e48\u7528 CMake","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#31","title":"3.1 \u5b89\u88c5","text":"<p>\u9996\u5148\u5b89\u88c5 CMake\uff0c\u8fd9\u91cc\u7ed9\u51fa\u4e24\u79cd\u5b89\u88c5\u65b9\u5f0f</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#311","title":"3.1.1 \u8f6f\u4ef6\u6e90\u5b89\u88c5","text":"<p>\u8fd9\u79cd\u5b89\u88c5\u65b9\u5f0f\u6700\u5feb\uff0c\u4f46\u7248\u672c\u6bd4\u8f83\u53d7\u9650\uff0c\u5728\u8f83\u65b0\u7684 Linux \u53d1\u884c\u7248\u4e0a\u7248\u672c\u4f1a\u65b0\u4e00\u70b9\u3002\u8fd9\u91cc\u4ee5 Debian \u7cfb\u53d1\u884c\u7248\u4e3a\u4f8b\uff0c\u53ef\u4f7f\u7528 APT \u5305\u7ba1\u7406\u5de5\u5177\u8fdb\u884c\u5b89\u88c5</p> <pre><code>sudo apt install cmake cmake-qt-gui cmake-curses-gui\n</code></pre> <p>\u6765\u5b89\u88c5 CMake \u5de5\u5177\uff0c\u4f8b\u5982\uff0c\u5728 Ubuntu</p> <ul> <li>18.04 \u4e0b\uff0c\u5bf9\u5e94\u7684\u7248\u672c\u4e3a <code>3.10</code></li> <li>20.04 \u4e0b\uff0c\u5bf9\u5e94\u7684\u7248\u672c\u4e3a <code>3.16</code></li> <li>22.04 \u4e0b\uff0c\u5bf9\u5e94\u7684\u7248\u672c\u4e3a <code>3.22</code></li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#312","title":"3.1.2 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305","text":"<p>\u53ef\u76f4\u63a5\u5728 Github \u4e2d\u6253\u5f00 CMake Release\uff0c\u627e\u5230\u4f60\u60f3\u4e0b\u8f7d\u7684\u7248\u672c\uff0c\u70b9\u51fb\u5bf9\u5e94\u7684\u538b\u7f29\u5305\uff0c\u4f8b\u5982\u5728 x64 \u73af\u5883\u4e0b\u7684 Linux \u53ef\u9009\u62e9 <code>cmake-x.xx.x-linux-x86_64.tar.gz</code>\uff0c\u4e0b\u8f7d\u540e\u8fdb\u884c\u89e3\u538b\uff0c\u5c31\u5f97\u5230\u4e86\u6240\u6709 CMake \u5de5\u5177\u3002\u6b64\u5916\uff0c\u53ef\u81ea\u884c\u5b89\u88c5\u5230\u7cfb\u7edf\u8def\u5f84\u4e0b\uff0c\u4ee5 <code>cmake-3.29.0-linux-x86_64.tar.gz</code> \u4e3a\u4f8b\uff0c\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>tar xf cmake-3.29.0-linux-x86_64.tar.gz # \u89e3\u538b\ncd cmake-3.29.0-linux-x86_64\nsudo cp -r * /usr/local                 # \u5b89\u88c5\u81f3 /usr/local\n</code></pre> <p>Tip</p> <p>Windows \u7528\u6237\u53ef\u5728 CMake \u5b98\u7f51 \u4e0b\u8f7d\u5bf9\u5e94\u7684 <code>*.msi</code> \u5b89\u88c5\u5305\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528 <code>cmake</code> \u547d\u4ee4\u4e86\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/01-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/#32-cmake","title":"3.2 CMake \u751f\u6210\u5efa\u6784\u6863\u7684\u6b65\u9aa4","text":"<p>\u7136\u540e\u6211\u4eec\u518d\u5bf9\u4e0a\u6587\u901a\u8fc7<code>main.cpp</code>\u751f\u6210\u5efa\u6784\u6863\u7684\u8fc7\u7a0b\u505a\u4e2a\u4ecb\u7ecd\uff0c\u4e86\u89e3 CMake \u751f\u6210\u5efa\u6784\u6863\u7684\u57fa\u672c\u6b65\u9aa4\u3002</p> <p>\u9996\u5148\u5728<code>main.cpp</code>\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efa<code>CMakeLists.txt</code>\u6587\u4ef6\uff0c\u8fd9\u5c31\u662f CMake \u751f\u6210\u5efa\u6784\u6863\u6240\u53c2\u8003\uff08\u89e3\u6790\uff09\u7684\u6587\u4ef6\uff0c\u5e76\u5728\u5176\u4e2d\u5199\u5165</p> <pre><code># \u6307\u5b9a CMake \u7684\u6700\u5c0f\u7248\u672c\u53f7\uff0c\u4f4e\u4e8e\u6b64\u7248\u672c\u7684 CMake \u5c06\u7ec8\u6b62\u5efa\u6784\u6863\u7684\u751f\u6210\u8fc7\u7a0b\ncmake_minimum_required(VERSION 3.16)\n\n# \u521b\u5efa\u9879\u76ee\nproject(\n  Demo          # \u8bbe\u7f6e\u9879\u76ee\u540d\n  LANGUAGES CXX # \u6307\u5b9a\u8bed\u8a00\uff0c\u672a\u6307\u5b9a\u7684\u8bed\u8a00\u5c06\u4e0d\u53c2\u4e0e\u6784\u5efa\uff0c\u4f8b\u5982 test.c \u6587\u4ef6\n)\n\n# \u521b\u5efa\u53ef\u6267\u884c\u6587\u4ef6\nadd_executable(\n  demo     # \u76ee\u6807\u540d\n  main.cpp # \u7528\u5230\u7684\u6e90\u6587\u4ef6\n)\n</code></pre> <p>\u521b\u5efa\u597d\u540e\uff0c\u5728\u9879\u76ee\u4e0b\u521b\u5efa<code>build</code>\u6587\u4ef6\u5939\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u6253\u5f00\u7ec8\u7aef\uff08Windows \u4e0b\u53ef\u4ee5\u662f PowerShell\uff09\uff0c\u8f93\u5165</p> <pre><code>cmake ..\n</code></pre> <p>\u5373\u53ef\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u751f\u6210\u5bf9\u5e94\u7684\u5efa\u6784\u6863\u3002</p> <p>\u4ee5\u4e0a\u5c31\u662f\u5229\u7528 CMake \u751f\u6210\u5efa\u6784\u6863\u7684\u57fa\u672c\u6d41\u7a0b\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u5728<code>add_executable</code>\u4e2d\u6211\u4eec\u6d89\u53ca\u5230\u4e86\u4e00\u4e2a\u65b0\u7684\u540d\u8bcd\uff1a\u76ee\u6807\uff08target\uff09\uff0c\u76ee\u6807\u662f CMake \u62bd\u8c61\u51fa\u6765\u7684\u4e00\u4e2a\u6982\u5ff5\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u5177\u6709</p> <ul> <li>\u540d\u79f0</li> <li>\u5305\u542b\u7684\u6587\u4ef6\u5939</li> <li>\u5176\u4f59\u7f16\u8bd1\u5c5e\u6027</li> <li>\u4f9d\u8d56\u7684\u5176\u4ed6\u76ee\u6807</li> </ul> <p>\u7684\u4e00\u4e2a\u7c7b\uff0c\u53ef\u4ee5\u4f7f\u7528C++\u7684\u7c7b\u6765\u63cf\u8ff0\u76ee\u6807\u8fd9\u4e00\u6982\u5ff5</p> <pre><code>// CMake \u76ee\u6807\nstruct Target\n{\n    string name;                        // \u540d\u79f0\n    vector&lt;string&gt; include_directories; // \u5305\u542b\u7684\u6587\u4ef6\u5939\n    vector&lt;string&gt; properties;          // \u5176\u4f59\u7f16\u8bd1\u5c5e\u6027\n    vector&lt;Target *&gt; targets;           // \u4f9d\u8d56\u7684\u5176\u4ed6\u76ee\u6807\n};\n</code></pre> <p>\u901a\u8fc7\u4e0a\u6587\u53ef\u4ee5\u5f97\u77e5\uff0c\u76ee\u6807\u5177\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u56e0\u6b64\u76ee\u6807\u4e0d\u4ec5\u53ea\u6709\u53ef\u6267\u884c\u6587\u4ef6\u8fd9\u4e00\u5f62\u5f0f\uff0c\u8fd8\u5177\u6709\u522b\u7684\u5f62\u5f0f\uff0c\u5728\u301005\u3011\u76ee\u6807\u6784\u5efa\u4f1a\u8be6\u7ec6\u7ed9\u51fa\u76ee\u6807\u5305\u542b\u7684\u5185\u5bb9\u3002</p> <p>Tip</p> <p>CMake \u751f\u6210\u5efa\u6784\u6863\u7684\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u5355\u6982\u62ec\u6210</p> <ol> <li>\u521b\u5efa\u9879\u76ee</li> <li>\u76ee\u6807\u6784\u5efa</li> <li>\u5bfc\u51fa\u914d\u7f6e\uff08\u5982\u679c\u6709\u5b89\u88c5\u7684\u9700\u6c42\uff0c\u5219\u9700\u8981\u505a\uff09</li> </ol> <p>\u8be6\u7ec6\u7684\u5185\u5bb9\u4f1a\u5728\u540e\u6587\u4ecb\u7ecd\u3002</p> <p>\u00b7\u00b7\u00b7</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/","title":"\u301002\u3011CMake \u7684\u6587\u4ef6\u5206\u5e03","text":"<p>\u5728\u6b63\u5f0f\u5f00\u59cb\u5b66\u4e60 CMake \u4e4b\u524d\uff0c\u9700\u8981\u6e05\u695a CMake \u6587\u4ef6\u4e00\u822c\u5728\u9879\u76ee\u4e2d\u662f\u5982\u4f55\u5206\u5e03\u7684\uff0c\u53ea\u6709\u6e05\u695a\u5404\u4e2a\u6587\u4ef6\u662f\u5982\u4f55\u5206\u5e03\u7684\uff0c\u624d\u80fd\u6b63\u786e\u4e14\u5408\u7406\u7684\u4e66\u5199 <code>CMakeLists.txt</code> \u6587\u4ef6\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/#1-cmakeliststxt","title":"1. \u6309\u6a21\u5757\u5206\u5c42\u7684 CMakeLists.txt","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u81ea\u5df1\u5728\u4f7f\u7528 CMake \u7684\u65f6\u5019\uff0c\u5982\u679c\u9879\u76ee\u4e0d\u5927\uff0c\u5f80\u5f80\u90fd\u559c\u6b22\u4ec5\u4f7f\u7528\u4e00\u4e2a <code>CMakeLists.txt</code> \u6765\u7ba1\u7406\u6240\u6709\u7684\u5c5e\u6027\u914d\u7f6e\u3002\u4f46\u968f\u7740\u9879\u76ee\u8d8a\u505a\u8d8a\u5927\uff0c\u4e00\u4e2a <code>CMakeLists.txt</code> \u5728\u53ef\u8bfb\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u4e0a\u90fd\u4f1a\u6709\u6240\u964d\u4f4e\u3002\u4e3a\u6b64\u9700\u8981\u5bf9\u6bcf\u4e2a\u7279\u5b9a\u7684\u6a21\u5757\u7f16\u5199 <code>CMakeLists.txt</code>\u3002\u53ef\u4ee5\u53c2\u8003 OpenCV \u7684 <code>CMakeLists.txt</code> \u5e03\u5c40\u3002</p> <pre><code>.\n\u251c\u2500\u2500 cmake\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include\n\u2502   \u251c\u2500\u2500 CMakeLists.txt (\u7528\u4e8e\u5168\u5c40\u5305\u542b\u7684 opencv.hpp \u7684\u5bfc\u51fa)\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 modules\n\u2502   \u2514\u2500\u2500 core\n\u2502       \u251c\u2500\u2500 CMakeLists.txt\n\u2502       \u251c\u2500\u2500 include\n\u2502       \u2502   \u2514\u2500\u2500 ...\n\u2502       \u251c\u2500\u2500 src\n\u2502       \u2502   \u2514\u2500\u2500 ...\n\u2502       \u2514\u2500\u2500 test\n\u2502           \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 samples\n</code></pre> <p>\u5f88\u663e\u7136\uff0c\u6bcf\u7ea7\u6a21\u5757\uff08\u76ee\u5f55\uff09\u7684\u6587\u4ef6\u5939\u4e0b\u90fd\u4f1a\u5b58\u5728\u4e00\u4e2a <code>CMakeLists.txt</code>\u3002</p> <ul> <li>\u6700\u5e95\u5c42\u7684 <code>CMakeLists.txt</code> \u662f\u4e3a\u4e86\u7ba1\u7406\u8be5\u6a21\u5757\u529f\u80fd\u7684\u7f16\u8bd1\u3001\u6d4b\u8bd5\u6587\u4ef6\u7f16\u8bd1\uff0c\u4ee5\u53ca\u63d0\u4f9b\u6307\u5b9a\u7684\u63a5\u53e3\uff08\u53ef\u4ee5\u662f\u5e93\uff0c\u4e5f\u53ef\u4ee5\u662f\u82e5\u5e72 CMake \u53d8\u91cf\uff09\u7ed9\u5916\u90e8\u3002OpenCV \u4e2d\u4f7f\u7528\u8bed\u53e5 <code>ocv_add_module()</code> \u6765\u6dfb\u52a0\u6a21\u5757\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/modules/core/CMakeLists.txt \u4e2d\u7684\u5185\u5bb9\nocv_add_module(core\n               OPTIONAL opencv_cudev\n               WRAP java objc python js)\n</code></pre> <p>\u8fd9\u4e2a\u8bed\u53e5\u5e76\u4e0d\u662f CMake \u539f\u751f\u8bed\u6cd5\u4e2d\u81ea\u5e26\u7684\uff0c\u800c\u662f\u9879\u76ee\u81ea\u884c\u8bbe\u8ba1\u7684\u5b8f\u3002CMake \u4e2d\u7684\u5b8f\u4e0eC/C++\u4e2d\u4f7f\u7528 <code>#define</code> \u521b\u5efa\u7684\u5b8f\u539f\u7406\u7c7b\u4f3c\uff0c\u90fd\u662f\u8d77\u5230\u4e86\u6587\u672c\u66ff\u6362\u7684\u4f5c\u7528\u3002\u6839\u636e\u8fd9\u4e2a\u5b8f\u4ee5\u53ca\u6b64 <code>CMakeLists.txt</code> \u7684\u5176\u4f59\u529f\u80fd\uff0c\u53ef\u4ee5\u521b\u5efa\u8be5 <code>core</code> \u6a21\u5757\u7684\u76ee\u6807\uff1a<code>opencv_core</code>\uff0c\u5e76\u4e3a\u6b64\u6dfb\u52a0\u5408\u9002\u7684\u4f9d\u8d56\u9879\u3002</p> <ul> <li>OpenCV 4.x \u7cfb\u5217\u7248\u672c\u8bbe\u7f6e\u4e24\u7ea7\u76ee\u5f55\u7684 <code>CMakeList.txt</code>\u3002\u6839\u76ee\u5f55\u4e0b\u5373\u6700\u9ad8\u7ea7\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u4e00\u822c\u662f\u5bf9\u4e8e\u6574\u4e2a\u9879\u76ee\u6709\u5173\u7f16\u8bd1\u9009\u9879\u7684\u8bbe\u7f6e\uff0c\u4ee5\u53ca\u5bf9\u7cfb\u7edf\u3001\u5e73\u53f0\u3001\u7f16\u8bd1\u5668\u7b49\u7f16\u8bd1\u73af\u5883\u4fe1\u606f\u7684\u517c\u5bb9\u5904\u7406\u3002OpenCV \u9879\u76ee\u6839\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u524d\u4e00\u5927\u6bb5\u90fd\u662f\u5728\u5bf9\u5f53\u524d\u5e73\u53f0\u3001\u7f16\u8bd1\u914d\u7f6e\u7684\u4fe1\u606f\u505a\u5904\u7406\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/CMakeLists.txt \u4e2d\u7684\u5185\u5bb9\nif(CMAKE_SYSTEM_NAME MATCHES WindowsPhone OR CMAKE_SYSTEM_NAME MATCHES WindowsStore)\n  cmake_minimum_required(VERSION 3.1 FATAL_ERROR)\n  cmake_policy(VERSION 2.8)\nelse()\n  cmake_minimum_required(VERSION \"${MIN_VER_CMAKE}\" FATAL_ERROR)\nendif()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/#2-cmake","title":"2. \u5176\u4f59 CMake \u6587\u4ef6","text":"<p>CMake \u4e2d\u9664\u4e86\u89e3\u6790 CMakeLists.txt \u6587\u4ef6\uff0c\u8fd8\u5141\u8bb8\u89e3\u6790\u6269\u5c55\u540d\u4e3a <code>.cmake</code> \u7684\u6587\u4ef6\u3002\u4e00\u822c\u6709\u4e24\u79cd\u64cd\u4f5c\u53ef\u4ee5\u5bf9\u8fd9\u7c7b\u6587\u4ef6\u8fdb\u884c\u8bbf\u95ee\uff0c\u5206\u522b\u662f</p> <ol> <li><code>find_package()</code>\uff0c\u7528\u4e8e\u53d1\u73b0\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93</li> <li><code>include()</code>\uff0c\u7528\u4e8e\u5305\u542b\u672c\u5730\u7684\u6216 CMake \u6807\u51c6\u4e2d\u63d0\u4f9b\u7684 <code>*.cmake</code> \u6587\u4ef6\uff0c\u4e00\u822c\u8fd9\u7c7b\u6587\u4ef6\u4f1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u5b8f\u6216\u51fd\u6570\u6765\u8f85\u52a9\u6211\u4eec\u5b8c\u6210\u5efa\u6784\u6863\u7684\u751f\u6210\u3002</li> </ol> <p>\u5176\u4e2d\u7b2c\u4e00\u79cd\u65b9\u6848\u4f1a\u5728\u301008\u3011find_package \u8be6\u89e3\u4e2d\u4ecb\u7ecd\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/#21-cmake","title":"2.1 <code>*.cmake</code> \u6587\u4ef6","text":"<p>OpenCV \u4e2d\uff0c\u81ea\u5b9a\u4e49\u7684<code>*.cmake</code>\u6587\u4ef6\u5168\u90e8\u5b58\u653e\u5728<code>&lt;opencv-path&gt;/cmake</code>\u6587\u4ef6\u5939\u4e0b\uff0c\u5e38\u89c1\u7684\u540d\u79f0\u6709</p> <ul> <li><code>Findxxx.cmake</code></li> <li><code>OpenCVxxx.cmake</code></li> </ul> <p>\u7b2c\u4e00\u79cd\u662f\u672c\u5730\u9879\u76ee\u4e2d\u7528\u4e8e <code>find_package()</code> \u7684\uff0c\u4f8b\u5982 FindONNX.cmake \u7b49\u6587\u4ef6\u3002\u7b2c\u4e8c\u79cd\u5219\u662f\u6dfb\u52a0\u4e86\u5404\u79cd\u5404\u6837\u7684\u80fd\u591f\u51cf\u5c11\u91cd\u590d\u64cd\u4f5c\u7684\u5b8f\u4e0e\u51fd\u6570\uff0c<code>ocv_add_module()</code> \u5c31\u662f\u5176\u4e2d\u4e4b\u4e00\uff0c\u4ed6\u88ab\u5b9a\u4e49\u5728 <code>OpenCVModule.cmake</code> \u4e2d\uff0c\u8fd9\u79cd\u4e00\u822c\u9700\u8981\u6267\u884c <code>include()</code> \u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/CMakeLists.txt \u4e2d\u7684\u5185\u5bb9\n# --- OpenCL ---\nif(WITH_OPENCL)\n  include(cmake/OpenCVDetectOpenCL.cmake)\nendif()\n\n# --- Halide ---\nif(WITH_HALIDE)\n  include(cmake/OpenCVDetectHalide.cmake)\nendif()\n\n# --- VkCom ---\nif(WITH_VULKAN)\n  include(cmake/OpenCVDetectVulkan.cmake)\nendif()\n\n# --- WebNN ---\nif(WITH_WEBNN)\n  include(cmake/OpenCVDetectWebNN.cmake)\nendif()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/02-CMake%20%E7%9A%84%E6%96%87%E4%BB%B6%E5%88%86%E5%B8%83/#22-in","title":"2.2 <code>*.in</code> \u6587\u4ef6","text":"<p><code>*.in</code> \u6a21\u677f\u6587\u4ef6\u4e00\u822c\u662f\u7528\u4e8e\u5728 cmake \u6267\u884c\u9636\u6bb5\uff08\u51c6\u786e\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\u914d\u7f6e\u9636\u6bb5\uff09\u5c06\u5176\u5d4c\u5165\u7684 CMake \u53d8\u91cf\u3001\u5217\u8868\u5c55\u5f00\uff0c\u5e76\u751f\u6210\u76ee\u6807\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d\u7684\u3002\u8fd9\u4e00\u6b65\u901a\u5e38\u662f\u7531 <code>configure_file()</code> \u5b8c\u6210\uff0c\u4f1a\u5728\u301006\u3011\u53d8\u91cf\u53c2\u4e0e C++ \u7684\u7f16\u8bd1 \u4e2d\u8fdb\u884c\u4ecb\u7ecd\u3002<code>*.in</code> \u7684\u540e\u7f00\u662f\u7ea6\u5b9a\u4fd7\u6210\u7684\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u5f62\u5f0f\u7684\u540e\u7f00\u3002</p> <p>OpenCV\u4e2d\u7684\u6b64\u7c7b\u6587\u4ef6\u4e00\u822c\u653e\u5728 <code>&lt;opencv-path&gt;/cmake/template</code> \u6587\u4ef6\u5939\u4e0b\uff0c\u4e3b\u8981\u662f\u7528\u4e8e\u5728\u6267\u884c</p> <pre><code>cmake ..\n</code></pre> <p>\u7684\u65f6\u5019\u5c06\u6a21\u677f\u6587\u4ef6\u8f6c\u6362\u4e3a\u5177\u4f53\u7684\u6587\u4ef6\u3002\u53e6\u5916\uff0c\u5728</p> <pre><code>cmake --install .\n</code></pre> <p>\u7684\u65f6\u5019\u4f1a\u5c06\u751f\u6210\u7684 <code>OpenCVConfig.cmake</code> \u7b49\u4e00\u7cfb\u5217\u6587\u4ef6\u5b89\u88c5\u81f3\u76ee\u6807\u8def\u5f84\u4e0b\uff0c\u800c <code>OpenCVConfig.cmake</code> \u6587\u4ef6\u7684\u4ea7\u751f\uff0c\u5c31\u9700\u8981 <code>&lt;opencv-path&gt;/cmake/template</code> \u6587\u4ef6\u5939\u4e0b\u7684 <code>OpenCVConfig.cmake.in</code> \u6587\u4ef6\u3002</p> <p>::: important \u603b\u7ed3 1. \u9879\u76ee\u7684\u6839\u76ee\u5f55\u4ee5\u53ca\u5404\u6a21\u5757\u90fd\u4f1a\u7ba1\u7406\u4e00\u4e2a <code>CMakeLists.txt</code> \u6587\u4ef6 2. CMake \u8fd8\u4f1a\u89e3\u6790 <code>*.cmake</code> \u540e\u7f00\u7684\u6587\u4ef6 3. <code>*.in</code> \u6587\u4ef6\u4e00\u822c\u4f5c\u4e3a\u6a21\u677f\u6587\u4ef6\uff0c\u4e00\u822c\u5728 CMake \u89e3\u6790\u671f\u95f4\u8f6c\u6362\u4e3a\u5177\u4f53\u7684\u6587\u4ef6 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/","title":"\u301003\u3011\u53d8\u91cf\u7684\u8bbe\u7f6e\u4e0e\u5f15\u7528","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#1","title":"1. \u524d\u8a00","text":"<p>\u4ece\u6e90\u7801\u7f16\u8bd1 OpenCV \u65f6\u90fd\u4f1a\u7528\u5230 CMake \u4e2d\u7684\u53d8\u91cf\uff0c\u5e76\u4e14\u8fd8\u7ecf\u5e38\u901a\u8fc7\u8fd9\u4e9b\u53d8\u91cf\u6765\u4e3a OpenCV \u9879\u76ee\u7684\u6784\u5efa\u3001\u5b89\u88c5\u8fc7\u7a0b\u8fdb\u884c\u914d\u7f6e\u3002\u914d\u7f6e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4f55\u5411\u7528\u6237\u5c55\u793a\u5fc5\u8981\u7684\u53c2\u6570\u4ee5\u53ca\u5c4f\u853d\u4e00\u4e9b\u5c40\u90e8\u4f7f\u7528\u7684\u53c2\u6570\u663e\u5f97\u5341\u5206\u91cd\u8981\u3002</p> <p>C++ \u4e2d\u7684\u53d8\u91cf\u5177\u5907\u81ea\u52a8\u5b58\u50a8\u671f\u3001\u9759\u6001\u5b58\u50a8\u671f\u3001\u7ebf\u7a0b\u5b58\u50a8\u671f\u4ee5\u53ca\u52a8\u6001\u5b58\u50a8\u671f\uff0cCMake \u4e5f\u5177\u6709\u7c7b\u4f3c\u7684\u6548\u679c\uff0c\u53d8\u91cf\u5728\u5212\u5206\u4e0a\u5177\u6709</p> <ul> <li>\u666e\u901a\u53d8\u91cf</li> <li>\u7f13\u5b58\u53d8\u91cf</li> <li>\u73af\u5883\u53d8\u91cf</li> </ul> <p>3 \u79cd\uff0c\u6b64\u5185\u5bb9\u7684\u8be6\u7ec6\u63cf\u8ff0\u53ef\u53c2\u8003\u53d8\u91cf\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#2","title":"2. \u666e\u901a\u53d8\u91cf","text":"<p>\u6b64\u7c7b\u53d8\u91cf\u5177\u6709\u4e0eC/C++\u8bed\u8a00\u4e2d\u7684\u81ea\u52a8\u5b58\u50a8\u671f\u7c7b\u4f3c\u7684\u6548\u679c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c</p> <ul> <li>\u5728\u51fd\u6570<code>function</code>\u4e2d\u521b\u5efa\u7684\u53d8\u91cf\u4e0d\u4f1a\u5728\u51fd\u6570\u4ee5\u5916\u751f\u6548\u6216\u88ab\u8bbf\u95ee\uff0c\u53ef\u7c7b\u6bd4 C/C++ \u7684\u51fd\u6570\uff1b</li> <li><code>CMakeLists.txt</code>\u53ef\u4ee5\u7ee7\u627f\u7236\u76ee\u5f55\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5728\u5904\u7406<code>CMakeLists.txt</code>\u6587\u4ef6\u4e4b\u524d\uff0cCMake \u4f1a\u590d\u5236\u7236\u76ee\u5f55\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u53d8\u91cf\uff08\u5982\u679c\u6709\uff09\uff0c\u4ee5\u521d\u59cb\u5316\u5f53\u524d\u4f5c\u7528\u57df\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#21","title":"2.1 \u5b9a\u4e49","text":"<p>\u4e00\u822c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u5b9a\u4e49\u4e00\u4e2a\u666e\u901a\u53d8\u91cf</p> <pre><code>set(val1 \"aaa\")    # val1 \u5185\u5bb9\u4e3a 1 \u4e2a\u503c\uff1aaaa\nset(val2 \"bb\" bbb) # val2 \u5185\u5bb9\u4e3a 2 \u4e2a\u503c\uff1abb;bbb\nset(val3 aa;bb)    # val3 \u5185\u5bb9\u4e3a 2 \u4e2a\u503c\uff1aaa;bb\nset(val4 aa;bb cc) # val4 \u5185\u5bb9\u4e3a 3 \u4e2a\u503c\uff1aaa;bb;cc\n</code></pre> <p>::: warning 1. \u5373\u4f7f <code>bbb</code> \u4e0d\u52a0 <code>\"\"</code> \u53f7\uff0c\u4e5f\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u56e0\u4e3a CMake \u7684\u53d8\u91cf\u59cb\u7ec8\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\uff0c\u4f46\u4e0d\u59a8\u788d\u67d0\u4e9b\u547d\u4ee4\u53ef\u4ee5\u5c06\u5176\u89e3\u91ca\u4e3a\u5176\u4ed6\u7c7b\u578b\uff1b 2. \u5efa\u8bae\u53d8\u91cf\u7684\u5185\u5bb9\u8981\u4e48\u90fd\u4f7f\u7528\u5f15\u53f7 <code>\"\"</code>\uff0c\u8981\u4e48\u90fd\u4e0d\u4f7f\u7528\uff0c\u4f8b\u5982 <code>val2</code> \u7684\u5199\u6cd5\u5c31\u4e0d\u597d 3. \u53d8\u91cf\u5185\u5bb9\u53ef\u4ee5\u901a\u8fc7\u7a7a\u683c <code></code> \u6216\u8005\u5206\u53f7 <code>;</code> \u8fdb\u884c\u5206\u9694\uff0c\u4e5f\u53ef\u4ee5\u6df7\u7528\uff0c\u4f8b\u5982 <code>val4</code> :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#22","title":"2.2 \u5f15\u7528","text":"<p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u53d6\u503c\u64cd\u4f5c\uff0c\u57fa\u672c\u7684\u5f62\u5f0f\u4e3a<code>${xxx}</code></p> <pre><code>set(AA xy mn)\nset(BB ${AA} cc) # BB \u5185\u5bb9\u4e3a 3 \u4e2a\u503c\uff1axy;mn;cc\nset(CC \"${BB}\")  # CC \u5185\u5bb9\u4e3a 3 \u4e2a\u503c\uff1axy;mn;cc\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#22_1","title":"2.2 \u89e3\u9664","text":"<p><code>unset()</code>\u8bed\u53e5\u5219\u662f\u89e3\u9664\u5b9a\u4e49\u7684\u529f\u80fd\uff0c\u4f8b\u5982\uff1a</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/CMakeLists.txt \u4e2d\u7684\u5185\u5bb9\nunset(_hal_includes)\n</code></pre> <p>\u5b83\u53ef\u4ee5\u5c06\u53d8\u91cf\u7684\u5185\u5bb9\u6e05\u9664\uff0c\u4e0b\u6b21\u518d\u6b21\u4f7f\u7528\u540c\u540d\u7684\u53d8\u91cf\u9700\u8981\u91cd\u65b0 <code>set</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#23","title":"2.3 \u4f5c\u7528\u57df\u63d0\u5347","text":"<p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5b50\u76ee\u5f55\u7684\u53d8\u91cf\u65e0\u6cd5\u5728\u7236\u76ee\u5f55 <code>CMakeLists.txt</code> \u4e2d\u751f\u6548\uff0c\u4f46\u662f\u7236\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u4e2d\u5b9a\u4e49\u597d\u7684\u53d8\u91cf\u53ef\u4ee5\u88ab\u5b50\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u6240\u7ee7\u627f\uff0c\u4f46\u5f00\u8f9f\u4e86\u65b0\u7684\u4f5c\u7528\u57df\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5728\u5b50\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u4e2d\u8bbe\u7f6e\u53d8\u91cf\uff0c\u5e76\u4e14\u80fd\u591f\u5728\u7236\u76ee\u5f55 <code>CMakeLists.txt</code> \u4e2d\u751f\u6548\uff0c\u6211\u4eec\u9700\u8981\u63d0\u5347\u4f5c\u7528\u57df\uff0c\u8bed\u6cd5\u662f</p> <pre><code>set(xxx PARENT_SCOPE)\n</code></pre> <p>\u4f8b\u5982\uff0c\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684 <code>CMakeLists.txt</code> \u4e2d\u5199\u5165\u4e86\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>message(STATUS \"var1 = ${var1}\")\nmessage(STATUS \"var2 = ${var2}\")\nadd_subdirectory(module)\nmessage(STATUS \"var1 = ${var1}\")\nmessage(STATUS \"var2 = ${var2}\")\n</code></pre> <p>\u800c\u5728 <code>module</code> \u6a21\u5757\u7684\u6587\u4ef6\u5bf9\u5e94\u7684 <code>CMakeLists.txt</code> \u4e2d\u5199\u5165</p> <pre><code>set(var1 \"abc\")\nset(var2 \"def\" PARENT_SCOPE)\n</code></pre> <p>\u5728\u6267\u884c CMake \u540e\uff0c\u8fd0\u884c\u7ed3\u679c\u4e3a</p> <pre><code>-- var1 =\n-- var2 =\n-- var1 =\n-- var2 = def\n</code></pre> <p>\u5728\u4f7f\u7528 <code>PARENT_SCOPE</code> \u540e\uff0c<code>var2</code> \u53d8\u91cf\u5728\u7236\u76ee\u5f55 <code>CMakeLists.txt</code> \u4e2d\u4e5f\u80fd\u751f\u6548\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#3-cmake","title":"3. CMake \u53d8\u91cf","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#31","title":"3.1 \u79cd\u7c7b","text":"<p>\u6b64\u4e3a CMake \u9ed8\u8ba4\u63d0\u4f9b\u7684\u53d8\u91cf\uff0c\u4e5f\u5c06\u8bb0\u8f7d\u5728 <code>CMakeCache.txt</code> \u4e2d\u3002\u5177\u4f53\u5305\u62ec</p> <ul> <li>\u63d0\u4f9b\u4fe1\u606f\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>CMAKE_BINARY_DIR</code>\u3001<code>PROJECT_NAME</code></li> <li>\u6539\u53d8\u884c\u4e3a\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>CMAKE_BUILD_TYPE</code></li> <li>\u63cf\u8ff0\u7cfb\u7edf\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>CMAKE_SYSTEM_PROCESSOR</code></li> <li>\u63a7\u5236\u6784\u5efa\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>LIBRARY_OUTPUT_PATH</code>\u3001<code>CMAKE_RUNTIME_OUTPUT_DIRECTORY</code></li> <li>\u8bed\u8a00\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>CMAKE_CXX_STANDARD</code></li> <li>CTest \u4e0e CPack \u7684\u53d8\u91cf</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#32","title":"3.2 \u5b9a\u4e49","text":"<p>\u8fd9\u79cd\u53d8\u91cf\u5728\u5b9a\u4e49\u65f6\u4e0e\u666e\u901a\u53d8\u91cf\u7684\u5b9a\u4e49\u65b9\u5f0f\u4e00\u81f4\uff0c\u4f46\u6548\u679c\u4e0a\u662f\u7f13\u5b58\u53d8\u91cf\uff0c\u4f8b\u5982\uff1a</p> <pre><code>set(CMAKE_BUILD_TYPE Debug)\n</code></pre> <p>\u5728\u5e95\u5c42 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u88ab\u8bbe\u7f6e\uff0c\u4f46\u80fd\u591f\u5728\u4e4b\u540e\u8bbf\u95ee\u5230\u7684\u5176\u4ed6 <code>CMakeLists.txt</code> \u4e2d\u7ee7\u7eed\u751f\u6548\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#4","title":"4. \u7f13\u5b58\u53d8\u91cf","text":"<p>\u8fd9\u79cd\u53d8\u91cf\u5728\u5b9a\u4e49\u540e\u4fbf\u88ab\u6dfb\u52a0\u81f3\u4e86 <code>CMakeCache.txt</code> \u6587\u4ef6\u4e2d\uff0c\u4e4b\u540e\u8bbf\u95ee\u5b83\u7684\u65f6\u5019\uff0c\u5c06\u4ece <code>CMakeCache.txt</code> \u6587\u4ef6\u4e2d\u8c03\u51fa\uff0c\u56e0\u6b64\u5747\u80fd\u5f97\u5230\u6709\u6548\u8bbf\u95ee\u6570\u636e\u3002</p> <p>::: tip \u8fd9\u7c7b\u53d8\u91cf\u53ef\u4ee5\u7528 C/C++ \u5177\u6709\u52a8\u6001\u5b58\u50a8\u671f\u7684\u53d8\u91cf\u6765\u7c7b\u6bd4 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#41","title":"4.1 \u5b9a\u4e49","text":"<p>\u4e0a\u6587\u63d0\u5230 CMake \u53d8\u91cf\u90fd\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\uff0c\u4f46\u4e0d\u59a8\u788d\u89e3\u91ca\u6210\u5176\u4ed6\u7c7b\u578b\uff0c\u5728\u7f13\u5b58\u53d8\u91cf\u4e2d\uff0c\u53ef\u4ee5\u89e3\u91ca\u6210\u5176\u4ed6\u7c7b\u578b\u53ef\u4f9b <code>cmake-gui</code> \u7b49\u5de5\u5177\u663e\u793a\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#411-option","title":"4.1.1 option","text":"<p>\u5176\u4e2d\uff0c\u4f7f\u7528 <code>option</code> \u547d\u4ee4\u662f\u521b\u5efa <code>BOOL</code> \u578b\u7f13\u5b58\u53d8\u91cf\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u4e00\u822c\u53ef\u4ee5\u4f5c\u4e3a\u7f16\u8bd1\u9009\u9879\uff0c\u5373\u4f7f\u5b98\u7f51\u4e2d\u6ca1\u6709\u5728\u7f13\u5b58\u53d8\u91cf\u4e2d\u4ecb\u7ecd\u8be5\u547d\u4ee4\u3002<code>option</code> \u7684\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>option(ORT_WITH_CUDA \"the library compile with CUDA\" OFF)\n</code></pre> <p>\u5b83\u53ea\u6709\u4e24\u79cd\u72b6\u6001\uff0c<code>TRUE</code>\u3001<code>FALSE</code> \u6216\u7528\u53e6\u4e00\u79cd\u8868\u793a\u65b9\u5f0f\uff1a<code>ON</code>\u3001<code>OFF</code>\uff0c\u6700\u5e38\u89c1\u7684 <code>option</code> \u53d8\u91cf\u5c31\u662f\u5728\u4f7f\u7528 <code>cmake-gui</code> \u5de5\u5177\u7684\u65f6\u5019\uff0c\u53f3\u4fa7\u680f\u4e2d\u53ef\u4ee5\u6253\u52fe\u7684\u65b9\u6846\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#412","title":"4.1.2 \u81ea\u5b9a\u4e49\u7f13\u5b58\u53d8\u91cf","text":"<p>\u5373\u4f7f\u7528\u547d\u4ee4 <code>set(xxx CACHE)</code>\uff0c\u8fd9\u662f\u4e00\u822c\u7684\u8bbe\u7f6e\u7f13\u5b58\u53d8\u91cf\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u53c2\u8003 OpenCV \u4e2d\u7684\u4f8b\u5b50\uff1a</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nset(OPENCV_MODULES_BUILD \"\" CACHE INTERNAL \"List of OpenCV modules included into the build\")\n</code></pre> <p><code>CACHE</code> \u6307\u660e\u4e86\u8fd9\u662f\u4e00\u4e2a\u7f13\u5b58\u53d8\u91cf\uff0c<code>INTERNAL</code> \u7684\u6548\u679c\u4e0e <code>STRING</code> \u6548\u679c\u5927\u81f4\u76f8\u540c\uff0c\u4f46 <code>INTERNAL</code> \u65e0\u6cd5\u5728 CMake \u5de5\u5177\u4e2d\u663e\u793a\uff0c\u7528\u6237\u65e0\u6cd5\u901a\u8fc7 <code>cmake-gui</code> \u7b49\u5de5\u5177\u8fdb\u884c\u4fee\u6539\uff0c\u4f46 <code>STRING</code> \u53ef\u4ee5\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u4ee5\u4e0b\u51e0\u4e2a\u5e38\u7528\u7684\u7c7b\u578b\uff1a<code>BOOL</code>\u3001<code>PATH</code>\u3001<code>FILEPATH</code>\u3002\u5176\u4e2d<code>BOOL</code>\u578b\u7f13\u5b58\u53d8\u91cf\u4e0e\u4f7f\u7528 <code>option</code> \u521b\u5efa\u7684\u53d8\u91cf\u6548\u679c\u7b49\u540c\u3002</p> <p>\u4e4b\u540e\u8ddf\u7684\u5b57\u7b26\u4e32\u5219\u662f\u8fd9\u4e2a\u53d8\u91cf\u7684\u6ce8\u91ca\uff0c\u5728 <code>cmake-gui</code> \u5de5\u5177\u4e2d\uff0c\u628a\u9f20\u6807\u653e\u7f6e\u5728\u5de6\u4fa7\u7684\u53d8\u91cf\u540d\u4e0a\uff0c\u5373\u53ef\u663e\u793a\u51fa\u8be5\u53d8\u91cf\u7684\u6ce8\u91ca\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#413","title":"4.1.3 \u5b98\u7f51\u4ecb\u7ecd","text":"<ul> <li> <p><code>BOOL</code>\uff1a<code>ON/OFF</code> \u503c\u3002<code>cmake-gui</code> \u4f1a\u63d0\u4f9b\u4e00\u4e2a\u5f62\u5982\u7684\u590d\u9009\u6846\uff1b</p> </li> <li> <p><code>FILEPATH</code>\uff1a\u78c1\u76d8\u4e0a\u6587\u4ef6\u7684\u8def\u5f84\u3002<code>cmake-gui</code> \u4f1a\u63d0\u4f9b\u4e00\u4e2a\u5f62\u5982\u7684\u6587\u4ef6\u5bf9\u8bdd\u6846\uff1b</p> </li> <li> <p><code>PATH</code>\uff1a\u78c1\u76d8\u4e0a\u76ee\u5f55\u7684\u8def\u5f84\u3002<code>cmake-gui</code> \u4f1a\u63d0\u4f9b\u4e00\u4e2a\u6587\u4ef6\u5bf9\u8bdd\u6846\uff1b</p> </li> <li> <p><code>STRING</code>\uff1a\u4e00\u884c\u6587\u5b57\u3002<code>cmake-gui</code> \u4f1a\u63d0\u4f9b\u5f62\u5982\u7684\u6587\u672c\u5b57\u6bb5\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86 <code>STRINGS</code> \u5c5e\u6027\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e0b\u62c9\u9009\u9879\uff1b</p> </li> <li> <p><code>INTERNAL</code>\uff1a\u4e00\u884c\u6587\u5b57\u3002<code>cmake-gui</code> \u4f1a\u4e0d\u663e\u793a\u8be5\u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u56e0\u6b64\u5728\u4f7f\u7528\u6b64\u7c7b\u578b\u65f6\u610f\u5473\u7740 <code>FORCE</code></p> </li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#42","title":"4.2 \u5f15\u7528","text":"<p>\u4e0e\u666e\u901a\u53d8\u91cf\u7684\u5f15\u7528\u65b9\u5f0f\u4e00\u81f4\uff0c\u5373 <code>${xxx}</code>\uff0c\u4f46 <code>${xxx}</code> \u4f1a\u5148\u641c\u7d22\u6709\u65e0\u666e\u901a\u53d8\u91cf\uff0c\u82e5\u627e\u4e0d\u5230\u624d\u4f1a\u7ee7\u7eed\u641c\u7d22\u7f13\u5b58\u53d8\u91cf\u3002\u82e5\u5f3a\u5236\u6307\u5b9a\u641c\u7d22\u7f13\u5b58\u53d8\u91cf\uff0c\u5219\u9700\u8981\u4f7f\u7528 <code>$CACHE{xxx}</code>\uff0c\u4f8b\u5982</p> <pre><code>set(val1 \"aaa\")\nset(val2 \"bbb\" CACHE STRING \"Test String\")\n\nmessage(STATUS ${val1})      # -- aaa\nmessage(STATUS ${val2})      # -- bbb\nmessage(STATUS $CACHE{val1}) # --\nmessage(STATUS $CACHE{val2}) # -- bbb\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#43","title":"4.3 \u89e3\u9664","text":"<p>\u540c\u6837\u4e5f\u662f\u4f7f\u7528<code>unset</code>\u8bed\u53e5\u3002\u4f46\u7565\u6709\u4e0d\u540c\u7684\u662f\uff0c\u9700\u8981\u52a0\u4e0a<code>CACHE</code>\uff1a</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nunset(OPENCV_WORLD_MODULES CACHE)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#5","title":"5. \u73af\u5883\u53d8\u91cf","text":"<p>\u4e0e\u7cfb\u7edf\u4e2d\u7684\u73af\u5883\u53d8\u91cf\u662f\u4e00\u4e2a\u6982\u5ff5\uff0c\u6bd4\u5982 <code>LD_LIBRARY_PATH</code>\uff0c\u8981\u5f15\u7528\u8fd9\u79cd\u53d8\u91cf\u6211\u4eec\u9700\u8981\u4f7f\u7528 <code>$ENV{xxx}</code>\uff0c\u4f8b\u5982</p> <pre><code>set(sdk_path \"$ENV{MVCAM_SDK_PATH}\")\nif(sdk_path STREQUAL \"\")\n  return()\nendif()\n</code></pre> <p>\u5176\u4e2d <code>MVCAM_SDK_PATH</code> \u662f\u7cfb\u7edf\u73af\u5883\u4e2d\u7684\u4e00\u4e2a\u53d8\u91cf\uff08\u5b9a\u4e49\u5728 <code>.bashrc</code> \u91cc\u9762\uff09</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#6","title":"6. \u53d8\u91cf\u89c4\u8303","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#61","title":"6.1 \u8bbe\u7f6e\u89c4\u8303","text":"<p>\u6765\u770b OpenCV \u4e2d\u5b8f <code>ocv_add_module</code> \u5185\u90e8\u7684\u4e00\u4e2a\u6761\u4ef6\u63a7\u5236\u8bed\u53e5\u7684\u5199\u6cd5\uff1a</p> <pre><code>if(...)\n  # ...\n  set(__ocv_argn__ ${ADD_MODULE_ARGN})\n  # ...\n  unset(__ocv_argn__)\n  # ...\nendif()\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c<code>${ADD_MODULE_ARGN}</code> \u5728\u6574\u4e2a\u6761\u4ef6\u8fd0\u7b97\u4e2d\u5747\u672a\u5b9a\u4e49\uff0c\u56e0\u6b64\u4ed6\u5bf9\u4e8e\u8fd9\u4e2a\u8bed\u53e5\u6765\u8bf4\u662f\u4e2a\u5916\u90e8\u53d8\u91cf\u3002\u5bf9\u4e8e\u5916\u90e8\u53d8\u91cf\uff0cOpenCV\u7684\u505a\u6cd5\u901a\u5e38\u4e0e\u4e0a\u9762\u7684\u4ee3\u7801\u4e00\u81f4\uff0c\u5373 <code>set()</code> \u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\u6765\u8bb0\u5f55\u8fd9\u4e2a\u53ef\u80fd\u4f1a\u505a\u4fee\u6539\u7684\u503c\uff0c\u5e76\u4e14\u5728\u8fd9\u4e2a\u53d8\u91cf\u7528\u5b8c\u540e <code>unset()</code>\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/03-%E5%8F%98%E9%87%8F%E7%9A%84%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%BC%95%E7%94%A8/#62","title":"6.2 \u547d\u540d\u89c4\u8303","text":"<ol> <li>\u666e\u901a\u53d8\u91cf\u53ef\u4ee5\u4f7f\u7528\u5c0f\u5199 + \u4e0b\u5212\u7ebf\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982    <pre><code>set(my_var \"ABC\")\n</code></pre></li> <li>\u7f13\u5b58\u53d8\u91cf\u4f7f\u7528\u5927\u5199 + \u4e0b\u5212\u7ebf\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982    <pre><code>set(MY_VAR \"ABC\" CACHE STRING \"My variable\")\n</code></pre></li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/","title":"\u301004\u3011\u8fd0\u7b97\u7b26\u4e0e\u6761\u4ef6\u3001\u5faa\u73af\u8bed\u53e5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#1-if","title":"1. \u6761\u4ef6\u63a7\u5236\uff1aif","text":"<p>\u6761\u4ef6\u63a7\u5236\u7684\u57fa\u672c\u5199\u6cd5\u4e3a\uff1a</p> <pre><code>if(aaa)\n  # ...\nelseif(bbb)\n  # ...\nelse()\n  # ...\nendif()\n</code></pre> <p>\u5e76\u4e14\u80fd\u591f\u652f\u6301\u5d4c\u5957\u6761\u4ef6\u63a7\u5236\uff0c\u5373</p> <pre><code>if(aaa)\n  # ...\n  if(ccc)\n    # ...\n  endif()\n  # ...\nelse()\n  # ...\nendif()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#2","title":"2. \u8fd0\u7b97\u7b26","text":"<p>\u5148\u7ed9\u51fa\u4ee5\u4e0b\u4f8b\u5b50</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nif(\" ${ARGV1}\" STREQUAL \" INTERNAL\" OR \" ${ARGV1}\" STREQUAL \" BINDINGS\")\n  set(OPENCV_MODULE_${the_module}_CLASS \"${ARGV1}\" CACHE INTERNAL \"The category of the module\")\n  set(__ocv_argn__ ${ADD_MODULE_ARGN})\n  list(REMOVE_AT __ocv_argn__ 0)\n  ocv_add_dependencies(${the_module} ${__ocv_argn__})\n  unset(__ocv_argn__)\nelse()\n  set(OPENCV_MODULE_${the_module}_CLASS \"PUBLIC\" CACHE INTERNAL \"The category of the module\")\n  ocv_add_dependencies(${the_module} ${ADD_MODULE_ARGN})\n  if(BUILD_${the_module})\n    set(OPENCV_MODULES_PUBLIC ${OPENCV_MODULES_PUBLIC} \"${the_module}\" CACHE INTERNAL \"List of OpenCV modules marked for export\")\n  endif()\nendif()\n</code></pre> <p>\u5728 <code>if()</code> \u7684\u5c0f\u62ec\u53f7\u4e2d\u51fa\u73b0\u4e86 <code>STREQUAL</code> \u4ee5\u53ca <code>OR</code> \u7684\u5185\u5bb9\uff0c\u8fd9\u4e9b\u5c5e\u4e8e\u8fd0\u7b97\u7b26\uff0c\u6211\u4eec\u6709\u5fc5\u8981\u4ecb\u7ecd\u4e00\u4e9b\u80fd\u591f\u4ea7\u751f <code>BOOL</code> \u7c7b\u578b\u53d8\u91cf\u7684\u8fd0\u7b97\u7b26\uff0c\u8fd9\u4e9b\u8fd0\u7b97\u7b26\u4e5f\u5e38\u7528\u4e8e\u6761\u4ef6\u63a7\u5236\u4e2d\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#21","title":"2.1 \u4e00\u5143\u8fd0\u7b97\u7b26","text":"<ul> <li><code>EXISTS</code>\uff1a\u5224\u65ad\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u65f6\u4e3a\u771f\u3002\u9700\u8981\u63d0\u4f9b\u7edd\u5bf9\u8def\u5f84\uff1b\u5982\u679c\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u662f\u7b26\u53f7\u94fe\u63a5\uff08\u4f8b\u5982\u8f6f\u8fde\u63a5\uff09\uff0c\u5219\u53ea\u6709\u5f53\u94fe\u63a5\u7684\u76ee\u6807\u5b58\u5728\u65f6\u8fd4\u56de\u771f\u3002\u683c\u5f0f\u4e3a\uff1a<code>EXISTS xxx</code>\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nif(EXISTS \"${CMAKE_CURRENT_BINARY_DIR}/test\")\n</code></pre> <ul> <li><code>IS_DIRECTORY</code>\uff1a\u5224\u65ad\u6307\u5b9a\u5185\u5bb9\u662f\u5426\u4e3a\u6587\u4ef6\u5939\uff0c\u662f\u5219\u4e3a\u771f\u3002\u9700\u8981\u63d0\u4f9b\u7edd\u5bf9\u8def\u5f84\u3002\u683c\u5f0f\u4e3a\uff1a<code>IS_DIRECTOTY xxx</code>\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code>if(IS_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/${m})\n</code></pre> <ul> <li><code>COMMAND</code>\uff1a\u5982\u679c\u7ed9\u5b9a\u7684\u540d\u79f0\u662f\u547d\u4ee4\u3001\u5b8f\u6216\u8005\u51fd\u6570\u8fd9\u7c7b\u53ef\u88ab\u8c03\u7528\u7684\u5bf9\u8c61\uff0c\u5219\u8fd4\u56de\u771f\u3002\u683c\u5f0f\u4e3a\uff1a<code>COMMAND xxx</code>\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nif(COMMAND ocv_get_module_external_sources)\n</code></pre> <ul> <li><code>DEFINED</code>\uff1a\u5982\u679c\u7ed9\u5b9a\u7684\u53d8\u91cf\uff08\u666e\u901a\u53d8\u91cf\u3001\u7f13\u5b58\u53d8\u91cf\u6216\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff09\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u771f\u3002\u683c\u5f0f\u4e3a\uff1a<code>DEFINED xxx</code>\uff0c\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u524d\u8981\u52a0 <code>ENV</code>\uff0c\u5373 <code>DEFINED ENV xxx</code>\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\nif(DEFINED OPENCV_INITIAL_PASS)\n</code></pre> <ul> <li><code>TARGET</code>\uff1a\u5982\u679c\u7ed9\u5b9a\u7684\u540d\u79f0\u662f\u76ee\u6807\uff08\u5305\u62ec\u4e8c\u8fdb\u5236\u76ee\u6807\u3001\u4f2a\u76ee\u6807\uff0c\u53ef\u53c2\u8003\u301005\u3011\u76ee\u6807\u6784\u5efa\uff09\uff0c\u5219\u8fd4\u56de\u771f\u3002\u683c\u5f0f\u4e3a\uff1a<code>TARGET xxx</code>\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVGenABI.cmake \u4e2d\u7684\u5185\u5bb9\nif(TARGET opencv_${mod}) # opencv_world\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#22","title":"2.2 \u4e8c\u5143\u8fd0\u7b97\u7b26","text":"<ul> <li><code>EQUAL</code>\uff1a\u5de6\u8fb9\u4e24\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u53d8\u91cf\u76f8\u7b49\u65f6\u4e3a\u771f\u3002</li> <li><code>STREQUAL</code>\uff1a\u5de6\u8fb9\u4e0e\u53f3\u8fb9\u7684\u5b57\u5178\u987a\u5e8f\u76f8\u7b49\u65f6\u4e3a\u771f\u3002</li> <li><code>MATCHES</code>\uff1a\u6309\u7167\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u5339\u914d\uff0c\u5de6\u8fb9\u662f\u5f85\u5339\u914d\u7684\u503c\uff0c\u53f3\u8fb9\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u80fd\u5339\u914d\u4e3a\u65f6\u4e3a\u771f\u3002\u4f8b\u5982\uff1a   <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\n# m \u4e3a\u67d0\u4e2a foreach \u4e2d\u7684\u5143\u7d20\nif(NOT m MATCHES \"^opencv_\")\n</code></pre></li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#23","title":"2.3 \u903b\u8f91\u8fd0\u7b97\u7b26","text":"<p>\u4e0e\u5176\u4ed6\u8bed\u8a00\u4e00\u81f4\uff0c\u5305\u542b\u4e0e\u3001\u6216\u3001\u975e\uff1a<code>AND</code>\u3001<code>OR</code>\u3001<code>NOT</code></p> <pre><code>if(BUILD_opencv_world AND m STREQUAL \"opencv_world\"\n    OR NOT BUILD_opencv_world\n    OR NOT OPENCV_MODULE_${m}_IS_PART_OF_WORLD)\n</code></pre> <p>\u903b\u8f91\u64cd\u4f5c\u7b26\u7684\u7ed3\u5408\u4f18\u5148\u7ea7\uff1a</p> <p><code>NOT</code> &gt; <code>AND</code> &gt; <code>OR</code></p> <p>::: tip \u8fd0\u7b97\u7b26\u7ed3\u5408\u987a\u5e8f\u4e3a\uff1a\u4e00\u5143\u8fd0\u7b97\u7b26 &gt; \u4e8c\u5143\u8fd0\u7b97\u7b26 &gt; \u903b\u8f91\u8fd0\u7b97\u7b26 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#3-foreach","title":"3. \u5faa\u73af\u63a7\u5236\uff1aforeach","text":"<p>\u8fd9\u91cc\u4ecb\u7ecd\u6700\u5e38\u7528\u7684 <code>foreach</code>\uff0c<code>while</code> \u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#31","title":"3.1 \u7528\u6cd5","text":"<p>\u5148\u7ed9\u51fa\u4e24\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code># \u4ee5\u4e0b\u5747\u4e3a\u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d\u7684\u5185\u5bb9\n# Example 1\nforeach(subdir ${subdirs})\n  if(EXISTS \"${path}/${subdir}/CMakeLists.txt\")\n    list(APPEND paths \"${path}/${subdir}\")\n    list(APPEND names \"${subdir}\")\n  endif()\nendforeach()\n\n# Example 2\nforeach(mod ${OPENCV_MODULES_BUILD} ${OPENCV_MODULES_DISABLED_USER} ${OPENCV_MODULES_DISABLED_AUTO} ${OPENCV_MODULES_DISABLED_FORCE})\n  if(HAVE_${mod})\n    unset(HAVE_${mod} CACHE)\n  endif()\n  unset(OPENCV_MODULE_${mod}_DEPS CACHE)\n  unset(OPENCV_MODULE_${mod}_DEPS_EXT CACHE)\n  # \u7701\u7565\u4e00\u7cfb\u5217 unset\nendforeach()\n</code></pre> <p>\u53ef\u4ee5\u5f97\u51fa\uff0c\u904d\u5386\u5faa\u73af\u63a7\u5236\u7684\u57fa\u672c\u5199\u6cd5\u4e3a\uff1a</p> <pre><code>foreach(\u6bcf\u4e2a\u5143\u7d20 ${\u5217\u88681} ${\u5217\u88682} ...)\n  \u5faa\u73af\u4f53\nendforeach()\n</code></pre> <p>\u5bf9\u4e8e\u4ee5\u4e0a\u4e24\u4e2a\u4f8b\u5b50 Example 1 \u548c Example 2\uff0c\u6709\u4ee5\u4e0b\u6ce8\u610f\u7684\u5730\u65b9\uff1a</p> <ul> <li> <p>Example 1</p> </li> <li> <p><code>${subdirs}</code> \u4e0d\u53ef\u5199\u6210 <code>\"${subdirs}\"</code>\uff0c\u6211\u4eec\u5047\u8bbe\u6b64\u5904 <code>${subdirs}</code> \u5185\u5bb9\u6709\uff1a<code>a</code>\u3001<code>b</code>\u3001<code>c</code>\uff0c\u90a3\u4e48\u904d\u5386\u7684\u65f6\u5019 <code>subdir</code> \u5219\u5206\u522b\u6307\u4ee3 <code>a</code>\u3001<code>b</code>\u3001<code>c</code>\u3002\u800c\u5982\u679c\u5199\u6210 <code>\"${subdirs}\"</code>\uff0c\u5c55\u5f00\u5219\u8868\u793a <code>\"a;b;c\"</code>\uff0c\u90a3\u4e48 <code>subdir</code> \u5219\u6307\u4ee3 <code>a;b;c</code> \u8fd9\u4e2a\u53d8\u91cf\u3002</p> </li> <li> <p><code>subdir</code> \u662f\u4e2a\u666e\u901a\u53d8\u91cf\uff0c\u56e0\u6b64\u5728\u8bbf\u95ee\uff08\u53d6\u503c\uff09\u65f6\u4e5f\u9700\u8981\u7528 <code>${}</code> \u7684\u5199\u6cd5\u3002</p> </li> <li> <p>Example 2</p> </li> <li> <p>\u5171\u6709 4 \u4e2a\u5f85\u904d\u5386\u7684\u5217\u8868\uff0c\u904d\u5386\u5219\u4f1a\u5c06\u8fd9 4 \u4e2a\u5217\u8868\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u4f9d\u6b21\u8bbf\u95ee\u3002</p> </li> <li> <p><code>mod</code> \u4e3a\u4e00\u4e2a\u53d8\u91cf\uff0c\u4e0d\u4f8b\u5916\u7684\u4e5f\u9700\u8981\u7528 <code>${}</code> \u6765\u8bbf\u95ee\u3002\u540c\u65f6\u6211\u4eec\u8fd8\u80fd\u770b\u5230\u8fd9\u79cd\u5199\u6cd5\uff1a      <pre><code>unset(OPENCV_MODULE_${mod}_DEPS CACHE)\n</code></pre> <code>${mod}</code> \u7528\u5728\u4e86\u4e00\u4e2a\u53d8\u91cf\u7684\u4e2d\u95f4\uff0c\u5047\u8bbe\u6b64\u65f6 <code>${mod}</code> \u6307\u7684\u662f <code>aa</code>\uff0c\u90a3\u4e48\u8fd9\u4e2a\u53d8\u91cf\u5219\u8868\u793a\u4e3a\uff1a<code>OPENCV_MODULE_aa_DEPS</code></p> </li> </ul> <p>::: warning \u6761\u4ef6\u63a7\u5236\u7ed3\u675f\u6807\u5fd7 <code>endif()</code> \u548c\u5faa\u73af\u63a7\u5236\u7ed3\u675f\u6807\u5fd7 <code>endforeach()</code> \u62ec\u53f7\u4e2d\u7684\u5185\u5bb9\u53ef\u4ee5\u4e0d\u5199\uff0c\u4e00\u65e6\u5199\uff0c\u5c31\u5fc5\u987b\u8ddf <code>if()</code> \u548c <code>foreach()</code> \u62ec\u53f7\u4e2d\u7684\u5185\u5bb9\u4e00\u81f4 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#32","title":"3.2 \u5176\u4ed6\u5199\u6cd5","text":"<p><code>foreach</code> \u8fd8\u6709\u5176\u4ed6\u5199\u6cd5\uff0c\u4f8b\u5982\u5bf9\u4e8e</p> <pre><code>foreach(m ${members})\n  # ...\nendforeach()\n</code></pre> <p>\u6709\u66f4\u76f4\u89c2\u7684\u5199\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u6210</p> <pre><code>foreach(m IN LIST members)\n  # ...\nendforeach()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#4","title":"4. \u793a\u4f8b","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u904d\u5386\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5939\u8981\u600e\u4e48\u529e\uff1f\u5728\u7ec8\u7aef\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>ls</code> \u6765\u5217\u51fa\u5f53\u524d\u8def\u5f84\u4e0b\u7684\u6240\u6709\u5185\u5bb9\uff0c\u5305\u62ec\u6587\u4ef6\u5939\uff0c\u5f53\u7136\u4e5f\u5305\u62ec\u4e86\u6587\u4ef6\uff0c\u5728 CMake \u4e2d\u6211\u4eec\u8981\u5982\u4f55\u8c03\u7528\u547d\u4ee4\u884c\u5462\uff1f</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#41","title":"4.1 \u5217\u51fa\u6587\u4ef6\u4e0e\u6587\u4ef6\u5939","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#411-execute_process","title":"4.1.1 \u6267\u884c\u5b50\u8fdb\u7a0b\uff1aexecute_process","text":"<p>\u5148\u5217\u51fa\u5b98\u7f51\u7ed9\u51fa\u7684\u547d\u4ee4\u539f\u578b\uff1a</p> <p>```cmake :collapsed-lines=8 execute_process(COMMAND  []                 [COMMAND  []]...                 [WORKING_DIRECTORY ]                 [TIMEOUT ]                 [RESULT_VARIABLE ]                 [RESULTS_VARIABLE ]                 [OUTPUT_VARIABLE ]                 [ERROR_VARIABLE ]                 [INPUT_FILE ]                 [OUTPUT_FILE ]                 [ERROR_FILE ]                 [OUTPUT_QUIET]                 [ERROR_QUIET]                 [COMMAND_ECHO ]                 [OUTPUT_STRIP_TRAILING_WHITESPACE]                 [ERROR_STRIP_TRAILING_WHITESPACE]                 [ENCODING ]                 [ECHO_OUTPUT_VARIABLE]                 [ECHO_ERROR_VARIABLE]                 [COMMAND_ERROR_IS_FATAL ]) <pre><code>\u8fd9\u91cc\u5217\u51fa\u5e38\u7528\u7684\u51e0\u4e2a\u9009\u9879\uff1a&amp;#x20;\n\n- `COMMAND`\n  - \u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u547d\u4ee4\u884c\u3002\n  - CMake \u76f4\u63a5\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf API \u6267\u884c\u5b50\u8fdb\u7a0b\u3002\u6240\u6709\u53c2\u6570\u90fd\u88ab\u9010\u5b57\u4f20\u9012\u7ed9\u5b50\u8fdb\u7a0b\u3002\u6ca1\u6709\u4f7f\u7528\u4e2d\u95f4 Shell\uff0c\u6240\u4ee5\u50cf `&gt;` \u8fd9\u6837\u7684 Shell \u64cd\u4f5c\u7b26\u88ab\u89c6\u4e3a\u666e\u901a\u53c2\u6570\u3002\n  - \u5982\u679c\u9700\u8981\u8fde\u7eed\u6267\u884c\u591a\u4e2a\u547d\u4ee4\uff0c\u8bf7\u4f7f\u7528\u591a\u4e2a `execute_process()` \u8c03\u7528\uff0c\u5e76\u4f7f\u7528\u5355\u4e2a `COMMAND` \u53c2\u6570\u3002\n- `OUTPUT_VARIABLE`\n  - \u53d8\u91cf\u540d\u5c06\u5206\u522b\u7528\u6807\u51c6\u8f93\u51fa\u7ba1\u9053\u7684\u5185\u5bb9\u8bbe\u7f6e\u3002\n- `ERROR_VARIABLE`\n  - \u53d8\u91cf\u540d\u5c06\u5206\u522b\u7528\u6807\u51c6\u9519\u8bef\u7ba1\u9053\u7684\u5185\u5bb9\u8bbe\u7f6e\u3002\n\n\u56e0\u6b64\uff0c\u5217\u51fa\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u5939\uff0c\u5c31\u53ef\u4ee5\u5199\u4e3a\n\n```cmake\nexecute_process(COMMAND ls ${CMAKE_CURRENT_LIST_DIR} OUTPUT_VARIABLE subs)\n</code></pre> <p>\u5176\u4e2d\uff0c\u8f93\u51fa\u7684\u53d8\u91cf\u4e3a <code>subs</code>\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4ec5\u80fd\u5728\u652f\u6301 <code>ls</code> \u547d\u4ee4\u7684\u7ec8\u7aef\u4e0a\u4f7f\u7528\uff0c\u4f8b\u5982 <code>Shell</code>\u3001<code>Windows PowerShell</code> \u7b49\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#412-file","title":"4.1.2 \u4f7f\u7528 file \u64cd\u4f5c","text":"<p>\u4e3a\u5b9e\u73b0\u540c\u6837\u6548\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u66f4\u52a0\u901a\u7528\u7684 <code>file</code> \u547d\u4ee4</p> <pre><code>set(cur_path \"${CMAKE_CURRENT_LIST_DIR}\")\nfile(GLOB subs RELATIVE \"${cur_path}\" \"${cur_path}/*\")\n</code></pre> <p>\u5176\u4e2d\uff0c\u8f93\u51fa\u7684\u53d8\u91cf\u4e3a <code>subs</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/04-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%9D%A1%E4%BB%B6%E3%80%81%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/#42","title":"4.2 \u7528\u6cd5\u793a\u4f8b","text":"<p>\u4f8b\u5982\uff0c\u5217\u51fa\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u5939\uff0c\u5e76\u6dfb\u52a0\u81f3 <code>dirs</code> \u4e2d</p> <pre><code>set(dirs)\nset(cur_path \"${CMAKE_CURRENT_LIST_DIR}\")\nfile(GLOB subs RELATIVE \"${cur_path}\" \"${cur_path}/*\")\n\nforeach(_sub ${subs})\n  if(IS_DIRECTORY ${_sub})\n    list(APPEND dirs ${_sub})\n  endif()\nendforeach()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/","title":"\u301005\u3011\u76ee\u6807\u6784\u5efa","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#1","title":"1. \u524d\u671f\u51c6\u5907","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e9b\u57fa\u672c\u7684\u77e5\u8bc6\u5e76\u56de\u987e\u301001\u3011\u5b89\u88c5\u4e0e\u57fa\u672c\u4ecb\u7ecd\u7684\u5185\u5bb9\u4f5c\u4e3a\u524d\u671f\u51c6\u5907</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#11-4","title":"1.1 \u7f16\u8bd1\u7684 4 \u4e2a\u6b65\u9aa4","text":"<p>\u7f16\u8bd1\u578b\u8bed\u8a00\u7f16\u8bd1\u4e00\u822c\u90fd\u6709 4 \u4e2a\u6b65\u9aa4\uff0c\u5206\u522b\u662f\uff1a==\u9884\u7f16\u8bd1==\u3001==\u7f16\u8bd1==\u3001==\u6c47\u7f16==\u3001==\u94fe\u63a5==\uff0c\u8fd9\u91cc\u7684\u7f16\u8bd1\u4ec5\u6307\u5c06\u6e90\u4ee3\u7801\u7ffb\u8bd1\u6210\u6c47\u7f16\u4ee3\u7801\u3002\u800c\u6211\u4eec\u5e73\u65f6\u79f0\u7684\u7f16\u8bd1\u5219\u6307\u5c06\u6e90\u4ee3\u7801\u7ffb\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6574\u4e2a\u8fc7\u7a0b\u3002Ubuntu \u4e0b\u5e38\u89c1\u7684\u7f16\u8bd1\u5de5\u5177\u662f Unix Makefiles\uff0c\u6211\u4eec\u5728\u7ec8\u7aef\u8f93\u5165</p> <pre><code>make\n</code></pre> <p>\u7684\u65f6\u5019\uff0c\u7528\u5230\u7684\u5c31\u662f Unix Makefiles\u3002\u800c\u6240\u6709\u7684\u7f16\u8bd1\u5de5\u5177\u5747\u4f1a\u6839\u636e\u6307\u5b9a\u7684\u6216\u8005\u9ed8\u8ba4\u7684\u73af\u5883\u53d8\u91cf\uff0c\u4f8b\u5982\u5728 Makefile \u6587\u4ef6\u4e2d\uff0c\u53ef\u80fd\u53ef\u4ee5\u627e\u5230\u7c7b\u4f3c</p> <pre><code>CC = gcc\nCXX = g++\n</code></pre> <p>\u7684\u5185\u5bb9\uff0c\u4ece\u800c\u9009\u62e9\u6307\u5b9a\u7684\u7f16\u8bd1\u5668\u3002\u7f16\u8bd1\u5668\u5219\u6839\u636e\u7f16\u8bd1\u5de5\u5177\u6240\u5236\u5b9a\u7684\u89c4\u5219\u5bf9\u4e00\u7cfb\u5217\u6e90\u7801\u8fdb\u884c\u89e3\u6790\u3001\u7f16\u8bd1\u3001\u94fe\u63a5\uff0c\u4f8b\u5982\u53ef\u4ee5\u5728 Makefile \u6587\u4ef6\u4e2d\u6307\u5b9a</p> <pre><code>CFLAGS = -g -O2\n</code></pre> <p>\u5e76\u4f7f\u7528\u7c7b\u4f3c</p> <pre><code>$(CC) $(CFLAGS)\n</code></pre> <p>\u7684\u8bed\u53e5\u5b8c\u6210\u5bf9\u7f16\u8bd1\u5668\u76f8\u5173\u7f16\u8bd1\u9009\u9879\u7684\u8bbe\u7f6e\uff0c\u6700\u7ec8\u5728\u7f16\u8bd1\u65f6\u751f\u6210\u5bf9\u5e94\u7684\u7b26\u5408\u8981\u6c42\u7684\u76ee\u6807\uff08\u53ef\u6267\u884c\u6587\u4ef6\u3001\u52a8\u6001\u5e93\u3001\u9759\u6001\u5e93\uff09</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#12-cmake","title":"1.2 \u56de\u987e CMake \u7684\u5730\u4f4d","text":"<p>CMake \u4f5c\u4e3a\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684\u7f16\u8bd1\u5de5\u5177\uff0c\u80fd\u591f\u4f7f\u7528\u901a\u7528\u7684\u8bed\u6cd5\uff08\u7ec4\u6001\u6863\uff09\u751f\u6210\u7f16\u8bd1\u5de5\u5177\u80fd\u591f\u89e3\u6790\u7684\u6587\u4ef6\uff08\u5efa\u6784\u6863\uff09\uff0c\u4ece\u800c\u5b8c\u6210\u5bf9\u9879\u76ee\u7684\u6784\u5efa\uff0c\u4f8b\u5982\u4f1a\u751f\u6210</p> <ul> <li>MSBuild \u80fd\u591f\u89e3\u6790\u7684 <code>.sln</code> \u548c <code>.vcxproj</code> \u6587\u4ef6</li> <li>Unix Makefiles \u80fd\u591f\u89e3\u6790\u7684 <code>Makefile</code> \u6587\u4ef6</li> <li>MinGW Makefiles \u80fd\u591f\u89e3\u6790\u7684 <code>Makefile</code> \u6587\u4ef6</li> <li>Ninja \u80fd\u591f\u89e3\u6790\u7684 <code>build.ninja</code> \u6587\u4ef6</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#13","title":"1.3 \u52a8\u6001\u5e93 / \u9759\u6001\u5e93","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#131","title":"1.3.1 \u662f\u4ec0\u4e48","text":"<p>\u5728 Windows \u4e0b\uff0c\u7ecf\u5e38\u4f1a\u770b\u5230\u6269\u5c55\u540d\u4e3a<code>.dll</code>\u7684\u6587\u4ef6\uff0c\u79f0\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93<code>Dynamic-Link Library</code>\u3002\u540c\u6837\uff0c\u5728Ubuntu\u4e0b<code>/usr/local/lib</code>\u76ee\u5f55\u4e0b\u4e5f\u80fd\u770b\u5230\u4e00\u7cfb\u5217\u540d\u4e3a<code>*.so</code>\u7684\u6587\u4ef6\uff0c\u79f0\u4e3a\u5171\u4eab\u5bf9\u8c61<code>Shared Object</code>\uff0c\u8fd9\u4e00\u7c7b\u90fd\u5c5e\u4e8e\u52a8\u6001\u5e93\u3002</p> <p>\u53e6\u5916\uff0c\u5728 Windows \u4e0b\u4e5f\u6709\u90e8\u5206\u6269\u5c55\u540d\u4e3a<code>*.lib</code>\u7684\u6587\u4ef6\uff0cUbuntu \u4e0b\u4e5f\u8bb8\u80fd\u5728<code>/usr/local/lib</code>\u76ee\u5f55\u4e0b\u770b\u5230\u4e00\u4e9b<code>*.a</code>\u6587\u4ef6\uff0c\u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u9759\u6001\u5e93\u3002</p> <p>::: tip Windows \u4e0b\u7684<code>*.lib</code>\u6587\u4ef6\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u9759\u6001\u5e93\uff0c\u4e00\u79cd\u662fDLL\u5bfc\u5165\u5e93\uff0c\u540e\u8005\u5c45\u591a\uff0c\u4e0d\u8fc7\u5728 CMake \u5f00\u53d1\u4e0a\u7b80\u5355\u5f53\u505a\u9759\u6001\u5e93\u4e5f\u662f\u53ef\u4ee5\u7684\u3002 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#132","title":"1.3.2 \u533a\u522b","text":"<ol> <li> <p>\u9759\u6001\u5e93\u2014\u2014\u8fd9\u79cd\u5e93\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u4f1a\u76f4\u63a5\u6574\u5408\u5230\u76ee\u6807\u7a0b\u5e8f\u4e2d\uff0c\u6240\u4ee5\u5229\u7528\u9759\u6001\u5e93\u7f16\u8bd1\u6210\u7684\u6587\u4ef6\u4f1a\u6bd4\u8f83\u5927\uff0c\u8fd9\u7c7b\u51fd\u6570\u5e93\u6700\u5927\u7684\u4f18\u70b9\u5c31\u662f\u7f16\u8bd1\u6210\u529f\u7684\u53ef\u6267\u884c\u6587\u4ef6\u53ef\u4ee5\u72ec\u7acb\u8fd0\u884c\uff0c\u800c\u4e0d\u518d\u9700\u8981\u5411\u5916\u90e8\u8981\u6c42\u8bfb\u53d6\u51fd\u6570\u5e93\u7684\u5185\u5bb9\uff1b\u4f46\u662f\u4ece\u5347\u7ea7\u96be\u6613\u5ea6\u6765\u770b\u660e\u663e\u6ca1\u6709\u4f18\u52bf\uff0c\u5982\u679c\u51fd\u6570\u5e93\u66f4\u65b0\uff0c\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3002</p> </li> <li> <p>\u52a8\u6001\u5e93\u2014\u2014\u4e0e\u9759\u6001\u51fd\u6570\u5e93\u88ab\u6574\u4e2a\u6355\u6349\u5230\u7a0b\u5e8f\u4e2d\u4e0d\u540c\uff0c\u52a8\u6001\u51fd\u6570\u5e93\u5728\u7f16\u8bd1\u7684\u65f6\u5019\uff0c\u5728\u7a0b\u5e8f\u91cc\u53ea\u6709\u4e00\u4e2a\u7b26\u53f7\u800c\u5df2\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u53ef\u6267\u884c\u6587\u4ef6\u9700\u8981\u4f7f\u7528\u5230\u51fd\u6570\u5e93\u7684\u673a\u5236\u65f6\uff0c\u7a0b\u5e8f\u624d\u4f1a\u53bb\u89e3\u6790\u8fd9\u4e2a\u7b26\u53f7\u5e76\u5b8c\u6210\u52a8\u6001\u5e93\u5730\u5740\u7684\u91cd\u5b9a\u4f4d\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u6267\u884c\u6587\u4ef6\u65e0\u6cd5\u5355\u72ec\u8fd0\u884c\u3002\u8fd9\u6837\u4ece\u4ea7\u54c1\u529f\u80fd\u5347\u7ea7\u7684\u89d2\u5ea6\u6765\u8bf4\u662f\u65b9\u4fbf\u7684\uff0c\u53ea\u8981\u66ff\u6362\u5bf9\u5e94\u52a8\u6001\u5e93\u5373\u53ef\u5b8c\u6210\u5347\u7ea7\uff0c\u4e0d\u5fc5\u91cd\u65b0\u7f16\u8bd1\u6574\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002</p> </li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#2","title":"2. \u76ee\u6807\u6784\u5efa","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#21","title":"2.1 \u56de\u987e\uff1a\u53ef\u6267\u884c\u6587\u4ef6\u6784\u5efa","text":"<p>\u73b0\u7ed9\u5b9a\u4e00\u4e2a\u6587\u4ef6\u67b6\u6784\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt (\u5f85\u521b\u5efa)\n\u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u8fd9\u662f\u6700\u7b80\u5355\u7684\u4e00\u7c7b\u60c5\u51b5\uff0c\u5373\u4ec5\u6709\u4e00\u4e2a <code>*.cpp</code> \u6784\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u6e90\u6587\u4ef6\u3002\u5bf9\u4e8e\u8fd9\u79cd\u67b6\u6784\u7684\u6784\u5efa\u65b9\u5f0f\u5728\u301001\u3011\u5b89\u88c5\u4e0e\u57fa\u672c\u4ecb\u7ecd\u4e2d\u5df2\u7ecf\u505a\u8fc7\u4e86\u6f14\u793a\u3002\u5bf9\u4e8e\u8fd9\u79cd\u901a\u5e38\u53ea\u9700\u8981\u77ed\u77ed\u51e0\u884c CMake \u8bed\u53e5\u5373\u53ef\u5b8c\u6210\uff0c\u9996\u5148\u5728\u5f53\u524d\u76ee\u5f55\u76f4\u63a5\u521b\u5efa CMakeLists.txt\uff0c\u8f93\u5165\uff1a</p> <pre><code>cmake_minimum_required(VERSION 3.16) # \u6307\u5b9a CMake \u6700\u5c0f\u7248\u672c\u53f7\uff0c\u5c0f\u4e8e\u6b64\u7248\u672c\u7684\u65e0\u6cd5\u901a\u8fc7 CMake\nproject(MyProject)                   # \u5b9a\u4e49\u9879\u76ee\u540d\nadd_executable(my_main main.cpp)     # \u4f7f\u7528 main.cpp \u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 my_main\n</code></pre> <p>\u5176\u4e2d<code>my_main</code>\u662f\u76ee\u6807\u540d\uff0c\u5728 CMake \u4e2d\u662f\u5177\u6709<code>TARGET</code>\u5c5e\u6027\u7684\u53d8\u91cf\uff0c\u5373\u76ee\u6807\uff0c\u540c\u65f6\u4e5f\u662f\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u3002CMake \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u4e0e\u76ee\u6807\u94fe\u63a5\u6709\u5173\u7684\u64cd\u4f5c\u65b9\u5f0f\u3002\u5176\u4e2d\u5982\u679c<code>my_main</code>\u76ee\u6807\u4f9d\u8d56\u4e86\u5176\u4ed6\u7684\u76ee\u6807\uff0c\u4f8b\u5982<code>main.cpp</code>\u6587\u4ef6\u4e2d\u4f7f\u7528\u5230\u4e86\u6765\u81ea\u5176\u4ed6<code>*.cpp</code>\u6587\u4ef6\u5b9a\u4e49\u7684\u51fd\u6570\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5728<code>CMakeLists.txt</code>\u4e2d\u8f93\u5165</p> <pre><code>target_link_libraries(\n  my_main\n  PRIVATE xxxx\n)\n</code></pre> <p>\u8fd9\u91cc\u7684<code>xxxx</code>\u5c31\u8868\u793a\u5305\u542b\u4e86\u8fd9\u4e9b\u51fd\u6570\u5b9a\u4e49\u7684\u76ee\u6807\u3002\u8fd9\u91cc\u8868\u793a\u9700\u8981\u5c06<code>my_main</code>\u8fd9\u4e2a\u76ee\u6807\u94fe\u63a5\u81f3<code>xxxx</code>\u4e0a\u3002</p> <p>\u6b64\u5916\uff0c\u6587\u6863\u4e2d\u7ed9\u51fa\u4e86\u8fd9\u6837\u4e00\u53e5\u8bdd\uff1a</p> <p>New in version 3.13: The <code>&lt;target&gt;</code> doesn't have to be defined in the same directory as the <code>target_link_libraries</code> call.</p> <p>\u7ffb\u8bd1\u8fc7\u6765\u5c31\u662f</p> <p>3.13 \u7248\u672c\u7684\u65b0\u5185\u5bb9\uff1a<code>&lt;target&gt;</code>\u4e0d\u9700\u8981\u5728\u4e0e\u8c03\u7528<code>target_link_libraries</code>\u547d\u4ee4\u76f8\u540c\u7684\u76ee\u5f55\u4e2d\u88ab\u5b9a\u4e49\u3002</p> <p>\u8fd9\u53e5\u8bdd\u5f88\u5173\u952e\uff0c\u8868\u793a\u5728\u8f83\u65b0\u7684 CMake \u7248\u672c\u4e2d\uff0c\u5141\u8bb8\u5728\u6574\u4e2a\u9879\u76ee\u4e2d\u8de8<code>CMakeLists.txt</code>\u6587\u4ef6\u8fdb\u884c\u94fe\u63a5\u64cd\u4f5c\uff0c\u4f8b\u5982\uff0c\u5373\u4f7f\u4e0a\u6587\u7684<code>my_main</code>\u5728\u7236\u76ee\u5f55\u7684\u4f5c\u7528\u57df\uff0c<code>xxxx</code>\u5728\u5b50\u76ee\u5f55\u7684\u4f5c\u7528\u57df\uff0c<code>my_main</code>\u6240\u5728\u7684<code>CMakeLists.txt</code>\u4e5f\u80fd\u8bbf\u95ee\u5230<code>xxxx</code>\u8fd9\u4e00\u76ee\u6807\u53d8\u91cf\u3002\u8fd9\u4e00\u70b9\u6709\u522b\u4e8e\u666e\u901a\u7684\u53d8\u91cf\uff0c\u53ef\u4ee5\u5f53\u505a\u662f\u5177\u6709\u76ee\u6807\u5c5e\u6027\u7684\u53d8\u91cf\u7684\u4e13\u5c5e\u529f\u80fd\u3002</p> <p>\u53e6\u5916\u4ee3\u7801\u4e2d\u8fd8\u51fa\u73b0\u4e86<code>PRIVATE</code>\u7684\u6807\u5fd7\uff0c\u8fd9\u4e2a\u5c5e\u4e8e\u76ee\u6807\u7684\u4f20\u64ad\u65b9\u5f0f\uff0c\u5728\u540e\u6587\u4f1a\u8fdb\u884c\u4ecb\u7ecd\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#22","title":"2.2 \u666e\u901a\u5e93\u76ee\u6807\u6784\u5efa","text":"<p>\u5728\u6587\u4ef6\u7ed3\u6784\u590d\u6742\u65f6\uff0c\u6216\u8005\u9700\u8981\u5c06\u529f\u80fd\u6a21\u5757\u9694\u79bb\u3001\u62bd\u8c61\u51fa\u6765\u65f6\uff0c\u7ecf\u5e38\u9700\u8981\u4e3a\u67d0\u4e2a\u6a21\u5757\u6784\u5efa\u4e00\u4e2a\u5e93\uff0c\u6700\u7ec8\u5c06\u8fd9\u4e9b\u5e93\u94fe\u63a5\u81f3\u53ef\u6267\u884c\u6587\u4ef6\u7684\u76ee\u6807\u4e0a\u3002</p> <p>\u8bed\u6cd5\u662f\uff1a<code>add_library(\u76ee\u6807\u540d [SHARED | [STATIC]] \u6e90\u6587\u4ef6)</code></p> <p>\u8fd8\u662f\u521a\u624d\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u5148\u521b\u5efa\u65b0\u7684\u6587\u4ef6\u5939\u53ca\u6587\u4ef6\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 main.cpp\n\u2514\u2500\u2500 MyLib1\n    \u251c\u2500\u2500 CMakeLists.txt (\u5f85\u521b\u5efa)\n    \u251c\u2500\u2500 include\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 MyLib1.h\n    \u2514\u2500\u2500 src\n        \u251c\u2500\u2500 a.cpp\n        \u251c\u2500\u2500 b.cpp\n        \u2514\u2500\u2500 c.cpp\n</code></pre> <p>\u9996\u5148\u9879\u76ee\u6839\u76ee\u5f55\u7684<code>CMakeLists.txt</code>\u9700\u8981\u6dfb\u52a0</p> <pre><code>add_subdirectory(MyLib1)\n</code></pre> <p>\u6765\u8ba9\u8be5\u6a21\u5757\u6dfb\u52a0\u81f3\u8be5\u9879\u76ee\u3002\u6b64\u5916\uff0c\u6bcf\u4e2a\u5e93\u9700\u8981\u6709\u4e00\u4e2a\u5355\u72ec\u7684<code>CMakeLists.txt</code>\u8fdb\u884c\u7ba1\u7406\uff0c\u56e0\u6b64\u9700\u8981\u5728<code>MyLib1</code>\u6587\u4ef6\u5939\u5185\u521b\u5efa\u8be5\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code># \u641c\u7d22 src \u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u81f3\u5c40\u90e8\u53d8\u91cf\uff1amy_lib_dir\n# \u9898\u5916\u8bdd\uff1aaux \u8868\u793a auxiliary \u5373\u8f85\u52a9\u7684\u610f\u601d\uff0c\u8868\u793a\u8fd9\u4e2a\u529f\u80fd\u662f\u4e2a\u8f85\u52a9\u529f\u80fd\naux_source_directory(src my_lib_dir)\n# SHARED \u8868\u793a\u8be5\u76ee\u6807\u4e3a\u52a8\u6001\u5e93\uff0cSTATIC \u5219\u8868\u793a\u9759\u6001\u5e93\nadd_library(MyLib1 SHARED ${my_lib_dir})\n# \u4ee5\u4e0a\u5185\u5bb9\u4e5f\u53ef\u4ee5\u5199\u6210\u4e0b\u4e00\u884c\uff0c\u4f46\u8fd9\u4e48\u957f\u7684\u540d\u5b57\uff0c\u8c01\u4f1a\u8fd9\u4e48\u505a\u5462\uff1f\n# add_library(MyLib1 SHARED src/a.cpp src/b.cpp src/c.cpp)\n</code></pre> <p>\u6ce8\u610f\uff0c\u6b64\u5904\u751f\u6210\u7684\u52a8\u6001\u5e93 <code>libMyLib1.so</code> \u65e0\u6cd5\u505a\u5230\u5185\u5b58\u4e0a\u7684\u590d\u7528\uff0c\u5728\u591a\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u5230\u8be5\u52a8\u6001\u5e93\u65f6\uff0c\u4ecd\u7136\u4f1a\u5f00\u8f9f\u4e00\u5757\u5185\u5b58\u5b58\u50a8\u8be5\u52a8\u6001\u5e93\u5185\u5bb9\u3002\u4e3a\u4e86\u771f\u6b63\u5b9e\u73b0\u5185\u5b58\u4e0a\u7684\u590d\u7528\uff0c\u9700\u8981\u4f7f\u7528\u5730\u5740\u65e0\u5173\u4ee3\u7801\u673a\u5236(position-independent code)\uff1a</p> <pre><code>set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fPIC\")\n</code></pre> <p>\u8bdd\u8bf4\u56de\u6765\uff0c\u672c\u5e93\u5185\u7684\u4e09\u4e2a\u6e90\u6587\u4ef6\u90fd\u4f1a\u5305\u62ec <code>include</code> \u5934\u6587\u4ef6\u5939\u4e2d\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5728\u7f16\u8bd1\u65f6\u9700\u8981\u7ed9\u76ee\u6807\u6dfb\u52a0\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\uff1a</p> <pre><code>target_include_directories(MyLib1 PUBLIC include)\n# \u8fd9\u53e5\u547d\u4ee4\u8868\u793a\uff0c\u4e3a MyLib1 \u76ee\u6807\u6dfb\u52a0\u5f53\u524d CMakeLists.txt \u6240\u5728\u76ee\u5f55\u4e0b include \u6587\u4ef6\u5939\u7684\u641c\u7d22\u8def\u5f84\n# PUBLIC \u89c4\u5b9a MyLib1 \u7684\u5305\u542b\u76ee\u5f55\u641c\u7d22\u8def\u5f84\u4ee5\u516c\u5f00\u65b9\u5f0f\u4f20\u9012\u7ed9\u5176\u4f59\u76ee\u6807\n# \u751f\u6210\u7684\u5efa\u6784\u6863\u4e2d\u4f1a\u5305\u542b\u5f62\u5982\u4ee5\u4e0b\u7684\u5185\u5bb9 gcc mylib1.cpp -I include -o MyLib1\n</code></pre> <p>\u4e0a\u6587\u7684 <code>PUBLIC</code> \u5c5e\u6027\uff0c\u6709\u65f6\u5019\u8fd8\u4f1a\u89c1\u5230 <code>INTERFACE</code>\u3001<code>PRIVATE</code> \u5c5e\u6027\uff0c\u4e00\u5171 3 \u4e2a\u4f20\u9012\u65b9\u5f0f\u3002\u4e0b\u9762\u5bf9\u8fd9\u4e09\u4e2a\u4f20\u9012\u65b9\u5f0f\u505a\u4e2a\u4ecb\u7ecd\uff1a</p> <ul> <li><code>PUBLIC</code>\uff1a\u5728\u7ed1\u5b9a\u5f53\u524d\u76ee\u6807\u65f6\u7ed9\u6307\u5b9a\u7684\u5185\u5bb9\u8bbe\u7f6e\u516c\u6709\u5c5e\u6027\uff0c\u5176\u4ed6\u76ee\u6807\u5728\u94fe\u63a5\u5f53\u524d\u76ee\u6807\u65f6\uff0c\u80fd\u8bbf\u95ee\u8fd9\u4e9b\u6307\u5b9a\u7684\u5185\u5bb9</li> <li><code>PRIVATE</code>\uff1a\u5728\u7ed1\u5b9a\u5f53\u524d\u76ee\u6807\u65f6\u7ed9\u6307\u5b9a\u7684\u5185\u5bb9\u8bbe\u7f6e\u79c1\u6709\u5c5e\u6027\uff0c\u5176\u4ed6\u76ee\u6807\u5728\u94fe\u63a5\u5f53\u524d\u76ee\u6807\u65f6\uff0c\u65e0\u6cd5\u8bbf\u95ee\u8fd9\u4e9b\u5185\u5bb9</li> <li><code>INTERFACE</code>\uff1a\u5728\u7ed1\u5b9a\u5f53\u524d\u76ee\u6807\u65f6\u7ed9\u6307\u5b9a\u7684\u5185\u5bb9\u8bbe\u7f6e\u63a5\u53e3\u5c5e\u6027\uff0c\u901a\u5e38\u5728\u63a5\u53e3\u5e93\u4e2d\u4f7f\u7528\u3002\u5176\u4ed6\u76ee\u6807\u5728\u94fe\u63a5\u5f53\u524d\u76ee\u6807\u65f6\uff0c\u53ea\u5141\u8bb8\u8bbf\u95ee\u5176\u58f0\u660e\uff08\u63a5\u53e3\uff09</li> </ul> <p>\u6700\u540e\uff0c\u5982\u679c\u6b64\u76ee\u6807\u6709\u4f9d\u8d56</p> <ul> <li>\u672c\u9879\u76ee\u4e2d\u5176\u4ed6\u76ee\u6807</li> <li>\u9879\u76ee\u4ee5\u5916\u7b2c\u4e09\u65b9\u76ee\u6807\uff08\u4f8b\u5982 OpenCV\uff09</li> </ul> <p>\u7684\u5185\u5bb9\uff0c\u90a3\u5fc5\u987b\u8981\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>target_link_libraries(\n  MyLib1\n  PUBLIC xxxx\n)\n</code></pre> <p>\u540c\u6837\uff0c\u4e3a\u6307\u5b9a\u76ee\u6807\u94fe\u63a5\u5e93\u7684\u8bed\u53e5\u4e5f\u63d0\u4f9b\u4e86 <code>PUBLIC</code>\u3001<code>PRIVATE</code>\u3001<code>INTERFACE</code> \u4e09\u4e2a\u5c5e\u6027\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p>\u8fd9\u91cc\u6d89\u53ca\u5230\u7684\u4e24\u4e2a\u8bed\u53e5\uff0c\u6211\u4eec\u505a\u4e2a\u6c47\u603b\uff1a</p> <ul> <li><code>target_include_directories</code>\uff1a\u4e3a\u76ee\u6807\u6dfb\u52a0\u9700\u8981\u5305\u542b\u7684\u6587\u4ef6\uff08\u4e00\u822c\u662f\u5934\u6587\u4ef6\uff09\u7684\u641c\u7d22\u8def\u5f84\uff0c\u8be5\u8def\u5f84\u5c06\u7ed1\u5b9a\u81f3\u76ee\u6807\u4e0a</li> <li><code>target_link_libraries</code>\uff1a\u4e3a\u76ee\u6807\u6dfb\u52a0\u4f9d\u8d56\u7684\u5e93\uff0c\u8be5\u5e93\u4e5f\u5c06\u7ed1\u5b9a\u81f3\u76ee\u6807\u4e0a</li> </ul> <p>::: important \u4e0a\u6587\u7684\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u5c5e\u4e8e\u76ee\u6807\u5c5e\u6027\u5f53\u4e2d \u201c\u4f7f\u7528\u8981\u6c42\u201d \u7684\u4e00\u90e8\u5206\uff0c\u6b64\u5916\u8fd8\u6709\u5176\u4ed6\u4e24\u79cd\u4f7f\u7528\u8981\u6c42\uff0c\u4f8b\u5982\u4f7f\u7528</p> <pre><code>add_library(mylib1 SHARED mylib1.cpp)\n\ntarget_compile_options(mylib1 PUBLIC -Wall)\n# \u8fd9\u53e5\u547d\u4ee4\u8868\u793a\uff0c\u5728\u6784\u5efa mylib1 \u76ee\u6807\u65f6\u6dfb\u52a0 -Wall \u9009\u9879\n# PUBLIC \u89c4\u5b9a mylib1 \u7684 -Wall \u7f16\u8bd1\u9009\u9879\u5c06\u4f1a\u4f20\u9012\u7ed9\u5176\u4f59\u76ee\u6807\n# \u751f\u6210\u7684\u5efa\u6784\u6863\u4e2d\u4f1a\u5305\u542b\u5f62\u5982\u4ee5\u4e0b\u7684\u5185\u5bb9 gcc -fPIC -shared main.cpp -o libmylib1.so -Wall \n</code></pre> <p>\u4ee5\u53ca</p> <pre><code>target_compile_definitions(mylib1 PRIVATE HAVE_ABC)\n# \u8fd9\u53e5\u547d\u4ee4\u8868\u793a\uff0c\u5728\u6784\u5efa mylib1 \u76ee\u6807\u65f6\u6dfb\u52a0 -D HAVE_ABC \u9009\u9879\n# PRIVATE \u89c4\u5b9a mylib1 \u7684 HAVE_ABC \u9884\u7f16\u8bd1\u5b8f\u4e0d\u4f20\u9012\u7ed9\u5176\u4f59\u76ee\u6807\n# \u751f\u6210\u7684\u5efa\u6784\u6863\u4e2d\u4f1a\u5305\u542b\u5f62\u5982\u4ee5\u4e0b\u7684\u5185\u5bb9 gcc -fPIC -shared main.cpp -o libmylib1.so -D HAVE_ABC\n</code></pre> <p>\u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u76ee\u6807\u5c5e\u6027\u5f53\u4e2d\u7684\u4f7f\u7528\u8981\u6c42\uff0c\u800c <code>target_link_libraries</code> \u5219\u4fdd\u8bc1\u4e86\u4ee5\u4e0a\u4f7f\u7528\u8981\u6c42\u8be5\u5982\u4f55\u88ab\u4f20\u9012\u3002</p> <p><pre><code>add_executable(demo main.cpp)\n\ntarget_link_libraries(demo PRIVATE mylib1)\n# \u8fd9\u53e5\u547d\u4ee4\u8868\u793a\uff0c\u4e3a demo \u76ee\u6807\u94fe\u63a5 mylib1 \u76ee\u6807\n# PRIVATE \u89c4\u5b9a mylib1 \u7684\u4f7f\u7528\u8981\u6c42\u4e0d\u4f20\u9012\u7ed9\u5176\u4f59\u76ee\u6807\n# \u751f\u6210\u7684\u5efa\u6784\u6863\u4e2d\u4f1a\u5305\u542b\u5f62\u5982\u4ee5\u4e0b\u7684\u5185\u5bb9 gcc main.cpp -o demo -Wall -l mylib1\n</code></pre> :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#23","title":"2.3 \u63a5\u53e3\u5e93\u76ee\u6807\u6784\u5efa","text":"<p>\u5728\u7a0b\u5e8f\u5f00\u53d1\u4e2d\uff0c\u6709\u65f6\u5019\u4f1a\u9047\u5230\u53ea\u6709\u5934\u6587\u4ef6\uff08<code>*.h</code>\u3001<code>*.hpp</code>\uff09\uff0c\u800c\u6ca1\u6709\u6e90\u6587\u4ef6\uff08<code>*.c</code>\u3001<code>*.cpp</code>\uff09\u7684\u60c5\u51b5\uff0c\u800c\u6211\u4eec\u77e5\u9053\uff0c\u4e00\u822c\u5728\u4f7f\u7528 <code>add_library</code> \u7684\u65f6\u5019\u53ea\u80fd\u4e3a\u6e90\u6587\u4ef6\uff08<code>*.h</code>\u4ee5\u53ca<code>*.hpp</code>\u4e4b\u7c7b\u7684\u5934\u6587\u4ef6\u4e0d\u5c5e\u4e8e\u6e90\u6587\u4ef6\uff09\u751f\u6210\u76ee\u6807\u5e93\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5bf9\u53ea\u6709\u5934\u6587\u4ef6\u7684\u5e93\u751f\u6210\u76ee\u6807\uff0c\u5e76\u4e14\u8fdb\u884c\u94fe\u63a5\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u63a5\u53e3\u5e93\u3002\u8fd9\u79cd\u76ee\u6807\u7531\u4e8e\u6ca1\u6709\u6e90\u6587\u4ef6\uff0c\u4e0d\u4f1a\u5b9e\u8d28\u6027\u7684\u53c2\u4e0e\u6784\u5efa\uff08\u7f16\u8bd1\uff09\uff0c\u4f46\u63d0\u4f9b\u4e86\u4e0e\u666e\u901a\u76ee\u6807\u76f8\u540c\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u56e0\u6b64\u63a5\u53e3\u5e93\u5c5e\u4e8e\u4f2a\u76ee\u6807\u3002</p> <p>\u8fd8\u662f\u521a\u624d\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u5148\u521b\u5efa\u53ea\u6709\u5934\u6587\u4ef6\u7684\u6587\u4ef6\u5939\u53ca <code>CMakeLists.txt</code>\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 main.cpp\n\u251c\u2500\u2500 MyLib1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeLists.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 MyLib1.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 a.cpp\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 b.cpp\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 c.cpp\n\u2514\u2500\u2500 MyLib2\n    \u251c\u2500\u2500 CMakeLists.txt (\u5f85\u521b\u5efa)\n    \u2514\u2500\u2500 include\n        \u2514\u2500\u2500 MyLib2.hpp\n</code></pre> <p>\u9996\u5148\u9879\u76ee\u6839\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u9700\u8981\u6dfb\u52a0</p> <pre><code>add_subdirectory(MyLib2)\n</code></pre> <p>\u521b\u5efa\u63a5\u53e3\u5e93\u7684\u8bed\u6cd5\u4e0e\u666e\u901a\u5e93\u7c7b\u4f3c\uff0c\u53ea\u662f\u5c11\u4e86\u6e90\u6587\u4ef6\u7684\u6dfb\u52a0\u7684\u6b65\u9aa4\uff1a</p> <pre><code>add_library(MyLib2 INTERFACE)\ntarget_include_directories(\n  MyLib2\n  INTERFACE include # \u63a5\u53e3\u5e93\u7684\u76ee\u6807\u53ea\u80fd\u4f7f\u7528 INTERFACE \u5c5e\u6027\n)\ntarget_link_libraries(\n  MyLib2\n  INTERFACE xxx\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#24","title":"2.4 \u5bfc\u5165\u76ee\u6807\u6784\u5efa","text":"<p>\u6211\u4eec\u4f1a\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u4ec5\u63d0\u4f9b\u4e86\u82e5\u5e72\u5934\u6587\u4ef6\u548c\u82e5\u5e72\u5e93\u6587\u4ef6\uff08\u4f8b\u5982 <code>*.so</code> \u548c <code>*.a</code>\uff09\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u65e0\u6cd5\u901a\u8fc7\u81ea\u5df1 <code>add_library</code> \u4ece\u6e90\u6587\u4ef6\u521b\u5efa\u76ee\u6807\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165\u5bfc\u5165\u76ee\u6807\u3002</p> <p>\u5047\u8bbe\u67d0\u5bb6\u76f8\u673a\u5382\u5546\u7684 SDK \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5047\u8bbe\u5c06\u5176\u653e\u5728\u4e86\u9879\u76ee\u6587\u4ef6\u5939\u7684 <code>camera</code> \u6587\u4ef6\u5939\u4e0b\uff0c\u8bf7\u6839\u636e\u4ee5\u4e0b\u6587\u4ef6\u7ed3\u6784\u521b\u5efa\u4e00\u4e2a CMake \u76ee\u6807</p> <pre><code>.\n\u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CameraApi.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CameraDefine.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 CameraStatus.h\n\u2514\u2500\u2500 lib\n    \u2514\u2500\u2500 libMVSDK.so\n</code></pre> <p>\u5728 <code>camera</code> \u6587\u4ef6\u5939\u4e2d\u521b\u5efa <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u5199\u5165</p> <pre><code>add_library(camera SHARED IMPORTED)\nset_target_properties(camera PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES \"${CMAKE_CURRENT_LIST_DIR}/include\"\n  IMPORTED_LOCATION \"${CMAKE_CURRENT_LIST_DIR}/lib/libMVSDK.so\"\n)\n</code></pre> <p>\u5bf9\u4e8e <code>INTERFACE_INCLUDE_DIRECTORIES</code> \u7684\u5c5e\u6027\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528\u5e38\u89c4\u7684\u5199\u6cd5\uff0c\u5199\u6210</p> <pre><code>target_include_directories(\n  camera\n  INTERFACE include\n)\n</code></pre> <p>::: warning - \u5728\u8bbe\u7f6e <code>IMPORTED_LOCATION</code> \u5c5e\u6027\u7684\u65f6\u5019\u9700\u8981\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84 - \u5bf9\u4e8e <code>lib</code> \u76ee\u5f55\u4e2d\u5b58\u5728\u591a\u4e2a <code>*.so</code> \u7b49\u52a8\u6001\u5e93\u7684\u60c5\u51b5\u4e0b\uff0c\u8bf7\u627e\u5230\u771f\u6b63\u7684\u52a8\u6001\u5e93\uff08\u5176\u4ed6\u52a8\u6001\u5e93\u4e00\u822c\u662f\u966a\u886c\u7684\uff09 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#3","title":"3. \u8865\u5145\u5185\u5bb9","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#31","title":"3.1 \u5176\u4f59\u76ee\u6807\u5e93","text":"<p>\u6839\u636eCMake\u5b98\u7f51\u5bf9\u76ee\u6807\u5e93\u7684\u5212\u5206\uff0c\u53ef\u7b80\u5355\u5206\u4e3a\u4e24\u7c7b\uff1a\u4e8c\u8fdb\u5236\u76ee\u6807\u3001\u4f2a\u76ee\u6807\uff0c\u5176\u5927\u81f4\u5185\u5bb9\u5982\u4e0b</p> <pre><code>\u251c\u2500\u2500 \u4e8c\u8fdb\u5236\u76ee\u6807\n\u2502   \u251c\u2500\u2500 \u53ef\u6267\u884c\u6587\u4ef6\n\u2502   \u2514\u2500\u2500 \u4e8c\u8fdb\u5236\u5e93\n\u2502       \u251c\u2500\u2500 \u666e\u901a\u5e93\uff08\u52a8\u6001\u5e93\u3001\u9759\u6001\u5e93\uff09\n\u2502       \u2514\u2500\u2500 \u5bf9\u8c61\u5e93\n\u2514\u2500\u2500 \u4f2a\u76ee\u6807\n    \u251c\u2500\u2500 \u5bfc\u5165\u76ee\u6807\n    \u251c\u2500\u2500 \u522b\u540d\u76ee\u6807\n    \u2514\u2500\u2500 \u63a5\u53e3\u5e93\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#311","title":"3.1.1 \u5bf9\u8c61\u5e93","text":"<p>\u5141\u8bb8\u5c06\u591a\u4e2a\u6e90\u6587\u4ef6\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u6807\uff0c\u800c\u4e0d\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u6216\u666e\u901a\u5e93\u3002\u5bf9\u8c61\u5e93\u53ef\u4ee5\u88ab\u5176\u4ed6\u76ee\u6807\uff08\u4f8b\u5982\u53ef\u6267\u884c\u6587\u4ef6\u6216\u666e\u901a\u5e93\uff09\u94fe\u63a5\u548c\u4f7f\u7528\u3002</p> <p>\u8981\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u5e93\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528 <code>add_library</code> \u547d\u4ee4\uff0c\u5e76\u5c06 <code>OBJECT</code> \u5173\u952e\u5b57\u4e0e\u6e90\u6587\u4ef6\u5217\u8868\u4e00\u8d77\u4f7f\u7528\u3002\u4e0b\u9762\u662f\u4e00\u4e2a <code>CMakeLists.txt</code> \u793a\u4f8b\uff1a</p> <pre><code># \u6dfb\u52a0\u5bf9\u8c61\u5e93\nadd_library(\n  my_object_lib\n  OBJECT file1.cpp file2.cpp file3.cpp\n)\n# \u6dfb\u52a0\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u5bf9\u8c61\u5e93\nadd_executable(my_app main.cpp)\ntarget_link_libraries(my_app PRIVATE my_object_lib)\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c<code>add_library</code> \u547d\u4ee4\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a <code>my_object_lib</code> \u7684\u5bf9\u8c61\u5e93\uff0c\u5e76\u5c06 <code>file1.cpp</code>\u3001<code>file2.cpp</code> \u548c <code>file3.cpp</code> \u4f5c\u4e3a\u6e90\u6587\u4ef6\u3002</p> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5bf9\u8c61\u5e93\u4e2d\u7684\u6e90\u6587\u4ef6\u5c06\u4f1a\u88ab\u7f16\u8bd1\u4e3a\u76ee\u6807\u6587\u4ef6\uff0c\u4f46\u4e0d\u4f1a\u751f\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u5171\u4eab\u5e93\u3002\u5176\u4ed6\u76ee\u6807\u53ef\u4ee5\u94fe\u63a5\u5230\u5bf9\u8c61\u5e93\uff0c\u5e76\u5728\u94fe\u63a5\u65f6\u4f7f\u7528\u5176\u4e2d\u7684\u76ee\u6807\u6587\u4ef6\u548c \u201c\u4f7f\u7528\u8981\u6c42\u201d\uff0c\u4f8b\u5982</p> <pre><code># \u6dfb\u52a0\u540d\u4e3a obj \u7684\u5bf9\u8c61\u5e93\nadd_library(obj OBJECT obj.cpp)\n# \u5c06 include \u76ee\u5f55\u6dfb\u52a0\u5230 obj \u7684\u5305\u542b\u76ee\u5f55\u4e2d\ntarget_include_directories(obj PUBLIC include)\n\n# \u6dfb\u52a0\u540d\u4e3a bbb \u7684\u52a8\u6001\u5e93\nadd_library(bbb SHARED bbb.cpp)\n# \u94fe\u63a5 obj \u5bf9\u8c61\u5e93\uff0cobj \u7684\u5305\u542b\u76ee\u5f55\u5c06\u4f1a\u4f20\u9012\u7ed9 bbb\ntarget_link_libraries(bbb PUBLIC obj)\n</code></pre> <p>::: tip \u6b64\u65f6 <code>bbb</code> \u52a8\u6001\u5e93\u5c06\u7531 <code>bbb.cpp.o</code> \u548c <code>obj.cpp.o</code> \u4e24\u4e2a\u76ee\u6807\u6587\u4ef6\u5236\u4f5c\u800c\u6210\uff0c\u5176\u4e2d <code>obj.cpp.o</code> \u7531 <code>obj</code> \u5bf9\u8c61\u5e93\u7f16\u8bd1\u800c\u6765\uff0c<code>bbb.cpp.o</code> \u7531 <code>main.cpp</code> \u7f16\u8bd1\u800c\u6765\u3002==\u8fd9\u91cc\u53ea\u662f\u7f16\u8bd1\uff0c\u6ca1\u6709\u94fe\u63a5\u3002==</p> <p>\u4f46\u8981\u6ce8\u610f\uff0c\u5bf9\u8c61\u5e93\u6240\u6307\u4ee3\u7684\u5bf9\u8c61\u6587\u4ef6\uff08\u4f8b\u5982\u4e0a\u6587\u7684 <code>obj</code> \u5bf9\u8c61\u5e93\u5219\u6307\u4ee3 <code>obj.cpp.o</code>\uff09\u4e0d\u4f1a\u4ece <code>bbb</code> \u4f20\u9012\u5230\u5176\u4ed6\u76ee\u6807\uff0c\u4f8b\u5982\u73b0\u5728\u518d\u5199\u5165\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>add_executable(demo main.cpp)\ntarget_link_libraries(demo PRIVATE bbb)\n</code></pre> <p><code>obj</code> \u5bf9\u8c61\u5e93\u7684 <code>obj.cpp.o</code> \u5bf9\u8c61\u6587\u4ef6\u4e0d\u4f1a\u4f20\u9012\u7ed9 <code>demo</code> \u53ef\u6267\u884c\u6587\u4ef6\u76ee\u6807\uff0c\u53ef\u53c2\u8003 CMake \u5b98\u7f51\u7684\u6587\u6863\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5bf9\u8c61\u5e93\u7684\u5185\u5bb9 - \u5bf9\u8c61\u5e93 - <code>target_link_libraries</code> - \u5bf9\u8c61\u5e93 - <code>add_library</code> :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#312","title":"3.1.2 \u522b\u540d\u76ee\u6807","text":"<p>\u5141\u8bb8\u4e3a\u73b0\u6709\u7684\u76ee\u6807\u521b\u5efa\u4e00\u4e2a\u53ef\u4f9b\u5f15\u7528\u7684\u522b\u540d\u3002\u522b\u540d\u76ee\u6807\u53ef\u4ee5\u7528\u4e8e\u7b80\u5316\u6784\u5efa\u8fc7\u7a0b\u3001\u91cd\u547d\u540d\u76ee\u6807\u6216\u521b\u5efa\u4fbf\u4e8e\u5f15\u7528\u7684\u540d\u79f0\u3002</p> <p>\u8981\u521b\u5efa\u522b\u540d\u76ee\u6807\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>add_library</code>\u3001<code>add_executable</code> \u6216 <code>add_custom_target</code> \u547d\u4ee4\uff0c\u5e76\u5c06 <code>ALIAS</code> \u5173\u952e\u5b57\u4e0e\u76ee\u6807\u540d\u79f0\u4e00\u8d77\u4f7f\u7528\u3002\u4e0b\u9762\u662f\u4e00\u4e2a <code>CMakeLists.txt</code> \u793a\u4f8b\uff1a</p> <pre><code># \u6dfb\u52a0\u4e00\u4e2a\u5e93\nadd_library(my_library STATIC my_source.cpp)\n# \u521b\u5efa\u522b\u540d\u76ee\u6807\nadd_library(lib1 ALIAS my_library)\n# \u6dfb\u52a0\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u522b\u540d\u76ee\u6807\nadd_executable(my_app main.cpp)\ntarget_link_libraries(\n  my_app\n  PRIVATE lib1\n)\n</code></pre> <p>\u4f46\u8981\u6ce8\u610f\uff0c\u522b\u540d\u76ee\u6807\uff08\u4f8b\u5982\u4e0a\u6587\u4e2d\u7684 <code>lib1</code>\uff09\u4e0d\u5f97\u4f5c\u4e3a</p> <ul> <li><code>target_link_libraries</code></li> <li><code>target_include_directories</code></li> </ul> <p>\u7684\u76ee\u6807\u540d\uff0c\u5373\u4e0d\u5f97\u5199\u6210</p> <pre><code>target_include_directories(\n  lib1\n  PUBLIC xxx\n)\n# \u6216\u8005\ntarget_link_libraries(\n  lib1\n  PRIVATE xxx\n)\n</code></pre> <p>\u7684\u5f62\u5f0f</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#32","title":"3.2 \u8bbe\u7f6e\u76ee\u6807\u5c5e\u6027","text":"<p>\u5373\u4f7f\u7528\u547d\u4ee4 <code>set_target_properties</code></p> <p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u76ee\u6807\u5c5e\u6027\u901a\u5e38\u5f88\u5c11\u76f4\u63a5\u4f7f\u7528\uff0c\u4e00\u822c\u662f\u95f4\u63a5\u4f7f\u7528\uff0c\u4f8b\u5982</p> <ul> <li>\u5728\u4f7f\u7528 <code>target_include_directories</code> \u7684\u65f6\u5019\uff0c\u4f1a\u4e3a\u76ee\u6807\u8bbe\u7f6e <code>INTERFACE_INCLUDE_DIRECTORIES</code> \u5c5e\u6027</li> <li>\u5728\u4f7f\u7528 <code>target_link_libraries</code> \u7684\u65f6\u5019\uff0c\u4f1a\u4e3a\u76ee\u6807\u8bbe\u7f6e <code>INTERFACE_LINK_LIBRARIES</code> \u5c5e\u6027</li> </ul> <p>\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u5bfc\u5165\u76ee\u6807\u3001\u63a5\u53e3\u5e93\u76ee\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u901a\u8fc7\u4ee5\u4e0a\u547d\u4ee4\u6765\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd\uff0c\u8b6c\u5982\u8bf4\uff0c\u4e3a\u4e86\u6307\u5b9a\u76ee\u6807\u5305\u542b\u7684\u76ee\u5f55\uff0c\u539f\u5148\u5199\u4e3a</p> <pre><code>target_include_directories(\n  my_target\n  PUBLIC include\n)\n</code></pre> <p>\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528</p> <pre><code>set_target_properties(\n  my_target PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_CURRENT_LIST_DIR}/include\n)\n</code></pre> <p>\u6216\u8005</p> <pre><code>set_property(\n  TARGET my_target PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_CURRENT_LIST_DIR}/include\n)\n</code></pre> <p>\u6765\u5b9e\u73b0\u540c\u6837\u529f\u80fd\uff0c\u6b64\u64cd\u4f5c\u5728\u914d\u7f6e\u5bfc\u5165\u76ee\u6807\u7684\u65f6\u5019\u6bd4\u8f83\u5e38\u89c1\u3002\u6b64\u5916\uff0cCMake \u5b98\u7f51\u63d0\u4f9b\u4e86\u975e\u5e38\u975e\u5e38\u591a\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u70b9\u51fb\u6b64\u5904\u67e5\u9605\u3002</p> <p>::: warning \u5728\u8bbe\u7f6e <code>INTERFACE_INCLUDE_DIRECTORIES</code> \u548c <code>INTERFACE_LINK_LIBRARIES</code> \u5c5e\u6027\u7684\u65f6\u5019\u9700\u8981\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#33","title":"3.3 \u975e\u5fc5\u8981\u4e0d\u4f7f\u7528\u5168\u5c40\u5305\u542b\u3001\u94fe\u63a5","text":"<p>\u975e\u5fc5\u8981\u60c5\u51b5\u4e0b\u4e0d\u8981\u4f7f\u7528</p> <ul> <li><code>link_library</code></li> <li><code>include_directories</code></li> </ul> <p>\u8bed\u53e5\uff0c\u4f1a\u5f71\u54cd\u6240\u6709\u5b50\u76ee\u5f55\u7684\u6784\u5efa\uff0c\u5e26\u6765\u6c61\u67d3\u95ee\u9898\u3002\u4f46\u6709\u4e9b\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u8bed\u53e5\u53ef\u4ee5\u5b9e\u73b0\u5176\u4ed6\u529f\u80fd\u3002\u4f8b\u5982 <code>target_include_directories</code> \u53ef\u4ee5\u5c06\u5185\u5bb9\u7ed1\u5b9a\u5230\u76ee\u6807\u5e76\u4e14\u5728\u5bfc\u51fa\u76ee\u6807\u540e\u4f9d\u8d56\u5173\u7cfb\u4ecd\u7136\u751f\u6548\uff0c\u800c\u4f7f\u7528 <code>include_directories</code> \u53ef\u4ee5\u907f\u514d\u5b89\u88c5\u540e\u4ecd\u7136\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb\u3002\u5177\u4f53\u539f\u56e0\u548c\u5b9e\u73b0\u7ec6\u8282\u53ef\u53c2\u8003\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5 #3.4\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/05-%E7%9B%AE%E6%A0%87%E6%9E%84%E5%BB%BA/#34","title":"3.4 \u8bbf\u95ee\u5e93\u7684\u65b9\u5f0f","text":"<p>\u5f53\u9700\u8981\u8bbf\u95ee\u7b2c\u4e09\u65b9\u5e93\u7684\u65f6\u5019\uff0c\u7b2c\u4e09\u65b9\u5e93\u9700\u8981\u63d0\u4f9b\u5934\u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e <code>*.h</code> \u548c <code>*.hpp</code>\uff09\u548c\u5e93\u6587\u4ef6\uff08\u5305\u62ec\u52a8\u6001\u5e93 <code>*.so</code> \u548c\u9759\u6001\u5e93 <code>*.a</code> \u4e24\u79cd\u5f62\u5f0f\uff09\u3002</p> <p>::: tip Windows \u4e0b\u7684\u5e93\u6587\u4ef6\u6709\u4e24\u79cd\u5f62\u5f0f - \u52a8\u6001\u5e93<code>*.dll</code>\u4ee5\u53ca\u5bfc\u5165\u5e93<code>*.lib</code> - \u9759\u6001\u5e93<code>*.lib</code> :::</p> <ul> <li>\u5728\u8bbf\u95ee\u672c\u9879\u76ee\u7684\u5e93<code>A</code>\u65f6\uff0c\u5982\u679c\u5df2\u7ecf\u4f7f\u7528\u4e86<code>target_include_directories</code>\u7684<code>PUBLIC</code>\u5c5e\u6027\uff0c\u5c06\u5934\u6587\u4ef6\u8def\u5f84\u7ed1\u5b9a\u5728\u4e86\u76ee\u6807<code>A</code>\u4e2d\uff0c\u90a3\u4e48\u76ee\u6807<code>B</code>\u5728\u8bbf\u95ee<code>A</code>\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981</li> </ul> <pre><code>target_link_libraries(B PUBLIC A)\n</code></pre> <p>\u5373\u53ef\u8bbf\u95ee\u5230<code>A</code>\u6240\u5305\u542b\u7684\u5934\u6587\u4ef6\u8def\u5f84\u3002</p> <ul> <li>\u5728\u8bbf\u95ee\u5176\u4ed6\u9879\u76ee\u7684\u7b2c\u4e09\u65b9\u5e93\u65f6\uff0c\u7528\u6237\u9700\u8981\u5355\u72ec\u83b7\u53d6\u5bf9\u5e94\u7684\u5e93\u6587\u4ef6\u4e0e\u5934\u6587\u4ef6\u8def\u5f84\u8fdb\u884c\u94fe\u63a5\uff0c\u4f8b\u5982 OpenCV\uff1a</li> </ul> <pre><code>add_executable(xxx main.cpp)\n\ntarget_include_directories(\n  xxx\n  PUBLIC ${OpenCV_INCLUDE_DIRS}\n)\n\ntarget_link_libraries(\n  xxx\n  PRIVATE ${OpenCV_LIBS}\n)\n</code></pre> <p>\u4f46\u5b9e\u9645\u4e0a\uff0c<code>OpenCV_LIBS</code> \u662f\u5305\u542b\u4e86\u4f17\u591a\u5bfc\u5165\u76ee\u6807\u7684\u5217\u8868\u53d8\u91cf\uff0c\u4f8b\u5982 <code>opencv_core;opencv_highgui</code>\uff0c\u5e76\u4e14\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u53d8\u91cf\u90fd\u8bbe\u7f6e\u4e86 <code>INTERFACE_INCLUDE_DIRECTORIES</code> \u7684\u5c5e\u6027\u3002\u4e0d\u5199 <code>target_include_directories</code> \u547d\u4ee4\u4e5f\u662f\u6b63\u786e\u7684\uff1a</p> <pre><code>add_executable(xxx main.cpp)\n\ntarget_link_libraries(\n  xxx\n  PRIVATE ${OpenCV_LIBS}\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/","title":"\u301006\u3011\u53d8\u91cf\u53c2\u4e0e C++ \u7684\u7f16\u8bd1","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#1","title":"1. \u524d\u8a00","text":"<p>\u5728\u5f00\u53d1\u4e2d\uff0c\u5f80\u5f80\u4f1a\u6709\u4ee5\u4e0b\u9700\u6c42\uff0c\u9700\u8981\u7528\u6237\u6216\u8005\u7a0b\u5e8f\u5458\u6765\u9009\u62e9\u7f16\u8bd1\u67d0\u6bb5\u4ee3\u7801\u3002\u4f8b\u5982\u5728C/C++\u8bed\u8a00\u4e2d\uff0c\u8fd9\u79cd\u901a\u5e38\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u9884\u7f16\u8bd1\u547d\u4ee4<code>#define</code>\uff1a</p> <pre><code>#define HAVE_ABC\n/* code */\n#ifdef HAVE_ABC\nclass ABC\n{\n    /* code */\n};\n#endif // HAVE_ABC\n</code></pre> <p>\u8fd9\u79cd\u9700\u8981\u624b\u52a8\u4fee\u6539\u6e90\u7801\uff0c\u64cd\u4f5c\u4e0a\u4e0d\u5b89\u5168\u4e14\u6bd4\u8f83\u7e41\u7410\u3002\u5982\u679c\u80fd\u5728\u7a0b\u5e8f\u7f16\u8bd1\u671f\u95f4\u4ea7\u751f</p> <ul> <li>\u67d0\u4e9b\u9884\u7f16\u8bd1\u5b8f</li> <li>\u5305\u542b\u5b8f\u3001\u5e38\u91cf\u8868\u8fbe\u5f0f\u7b49\u5185\u5bb9\u7684\u5934\u6587\u4ef6</li> </ul> <p>\u5c06\u5728\u5b89\u5168\u6027\u3001\u64cd\u4f5c\u7684\u4fbf\u6377\u6027\u4e0a\u4f1a\u6709\u663e\u8457\u63d0\u5347\u3002\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6307\u4ee4\uff0c\u53ef\u4ee5\u5728\u7f16\u8bd1\u671f\u95f4\u4ea7\u751f\u9884\u7f16\u8bd1\u5b8f\uff0c\u4f8b\u5982 GCC \u7684 <code>-D</code> \u9009\u9879\uff1a</p> <pre><code>g++ -DXXX main.cpp\n</code></pre> <p>\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u7f16\u8bd1\u671f\u95f4\u4ea7\u751f\u4e00\u4e2a\u9884\u7f16\u8bd1\u5b8f <code>XXX</code>\uff0cCMake \u5219\u63d0\u4f9b\u4e86\u4e00\u7ec4\u529f\u80fd\uff0c\u53ef\u4ee5\u5728 CMake \u914d\u7f6e\u671f\u95f4\u4ea7\u751f\u9884\u7f16\u8bd1\u5b8f\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u7f16\u8bd1\u671f\u95f4\u4ea7\u751f\u9884\u7f16\u8bd1\u5b8f</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#2","title":"2. \u4f7f\u7528\u6a21\u677f\u6587\u4ef6\u751f\u6210\u5934\u6587\u4ef6","text":"<p>\u4e00\u4e2a\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\uff0c\u5219\u662f\u751f\u6210\u5305\u542b\u4e00\u7cfb\u5217\u5b8f\u5b9a\u4e49\u7684\u5934\u6587\u4ef6\uff0c\u518d\u8ba9\u6e90\u6587\u4ef6\u53bb\u5305\u542b\u8fd9\u4e9b\u5934\u6587\u4ef6\uff0c\u8fbe\u5230\u8ba9\u7528\u6237\u81ea\u4e3b\u914d\u7f6e\u7684\u529f\u80fd\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#21-in","title":"2.1 \u914d\u7f6e *.in \u6a21\u677f\u6587\u4ef6","text":"<p>\u5728\u301001\u3011\u5b89\u88c5\u4e0e\u57fa\u672c\u4ecb\u7ecd\u4e2d\u6211\u4eec\u66fe\u4ecb\u7ecd\u8fc7 <code>*.in</code> \u6587\u4ef6\u4e3a\u4e00\u4e2a\u6a21\u677f\u6587\u4ef6\uff0cCMake \u89e3\u6790\u671f\u95f4\u80fd\u591f\u5229\u7528\u8fd9\u4e00\u6a21\u677f\u6587\u4ef6\u751f\u6210\u5b9e\u9645\u7684\u6587\u4ef6\u3002\u6211\u4eec\u770b\u5230 <code>&lt;opencv-path&gt;/cmake/templates/</code> \u6587\u4ef6\u5939\u4e0b\uff0c\u5305\u542b\u4e86\u4e00\u4e2a <code>cvconfig.h.in</code> \u6587\u4ef6\uff0c\u90e8\u5206\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>/* code */\n/* OpenCV compiled as static or dynamic libs */\n#cmakedefine BUILD_SHARED_LIBS\n\n/* OpenCV intrinsics optimized code */\n#cmakedefine CV_ENABLE_INTRINSICS\n\n/* OpenCV additional optimized code */\n#cmakedefine CV_DISABLE_OPTIMIZATION\n\n/* Compile for 'real' NVIDIA GPU architectures */\n#define CUDA_ARCH_BIN \"${OPENCV_CUDA_ARCH_BIN}\"\n/* code */\n</code></pre> <p>\u5982\u679c\u4ece\u6e90\u7801\u7f16\u8bd1\u8fc7 OpenCV\uff0c\u6211\u4eec\u5219\u53ef\u4ee5\u5728<code>&lt;opencv-path&gt;/build/</code>\u6587\u4ef6\u5939\u4e0b\uff0c\u627e\u5230\u4e00\u4e2a\u53eb\u505a<code>cvconfig.h</code>\u7684\u6587\u4ef6\uff0c\u90e8\u5206\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>/* code */\n/* OpenCV compiled as static or dynamic libs */\n#define BUILD_SHARED_LIBS\n\n/* OpenCV intrinsics optimized code */\n#define CV_ENABLE_INTRINSICS\n\n/* OpenCV additional optimized code */\n/* #undef CV_DISABLE_OPTIMIZATION */\n\n/* Compile for 'real' NVIDIA GPU architectures */\n#define CUDA_ARCH_BIN \"\"\n/* code */\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a<code>cvconfig.h.in</code>\u6587\u4ef6\u7684\u5927\u90e8\u5206\u8bed\u6cd5\u4e0e<code>cvconfig.h</code>\u4e00\u81f4\uff0c\u4f46\u5176\u4e2d\u6d89\u53ca\u5230\u4e00\u4e9b CMake \u53d8\u91cf\u7684\u5730\u65b9\uff0c\u8fd9\u4e9b\u5185\u5bb9\u5728<code>cvconfig.h</code>\u4e2d\u53d1\u751f\u4e86\u8f6c\u5316\u3002</p> <p>\u7ecf\u8fc7\u5bfb\u627e\uff0c\u53ef\u4ee5\u770b\u5230\uff1a\u5728<code>&lt;opencv-path/cmake/</code>\u6587\u4ef6\u5939\u4e0b\u7684<code>OpenCVGenHeaders.cmake</code>\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u5305\u542b\u8fd9\u4e48\u4e24\u53e5\u5185\u5bb9\uff1a</p> <pre><code># platform-specific config file\nconfigure_file(\"${OpenCV_SOURCE_DIR}/cmake/templates/cvconfig.h.in\" \"${OPENCV_CONFIG_FILE_INCLUDE_DIR}/cvconfig.h\")\nconfigure_file(\"${OpenCV_SOURCE_DIR}/cmake/templates/cvconfig.h.in\" \"${OPENCV_CONFIG_FILE_INCLUDE_DIR}/opencv2/cvconfig.h\")\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u63a8\u6d4b\uff0c<code>cvconfig.h</code>\u5c31\u662f\u901a\u8fc7<code>cvconfig.h.in</code>\u6587\u4ef6\u800c\u751f\u6210\u7684\uff0c\u5176\u4e2d\u7528\u4e8e\u8f6c\u5316\u7684\u8bed\u53e5\u5c31\u662f<code>configure_file</code>\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#22-configure_file","title":"2.2 configure_file","text":"<p>\u57fa\u672c\u7528\u6cd5\uff1a</p> <pre><code>configure_file(aaa.h.in bbb.h) # \u4f7f\u7528 aaa.h.in \u4e3a\u6a21\u677f\u751f\u6210 bbb.h\n</code></pre> <p>\u5728\u4f7f\u7528<code>configure_file</code>\u4e4b\u524d\u9700\u8981\u521b\u5efa\u4e00\u4e2a<code>aaa.h.in</code>\u6587\u4ef6\uff0c\u7528\u4e8e\u751f\u6210<code>bbb.h</code>\uff0c\u5176\u4e2d<code>aaa.h.in</code>\u6587\u4ef6\u4e0e\u5f85\u751f\u6210\u7684<code>bbb.h</code>\u6587\u4ef6\u57fa\u672c\u4e00\u81f4\uff0c\u5373\u4e0e\u666e\u901a\u7684 C++ \u6587\u4ef6\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u662f\u5728\u9700\u8981\u66ff\u6362\u7684\u5730\u65b9\u4f7f\u7528 CMake \u7684\u76f8\u5173\u6807\u5fd7\uff0c\u4f8b\u5982\uff1a</p> <pre><code>#cmakedefine CONFIG_DIR \"@CONFIG_DIR@\"\n#define CONFIG_DIR_1 \"@CONFIG_DIR@\"\nconstexpr auto CONFIG_DIR_2 = \"@CONFIG_DIR@\";\n#cmakedefine CONFIG_DIR_3 \"@CONFIG_DIR_2@\"\n#define CONFIG_DIR_4 \"@CONFIG_DIR_3@\"\n</code></pre> <p>\u5176\u4e2d<code>#cmakedefine</code>\u5c31\u8868\u793a\u4f1a\u5728 CMake \u6267\u884c\u914d\u7f6e\u65f6\u671f\uff0c\u66ff\u6362\u4e3a\u9884\u5b9a\u4e49\u7684 CMake \u53d8\u91cf\u6216\u7528\u6237\u5b9a\u4e49\u7684\u53d8\u91cf\u3002\u6b64\u5916\uff0c\u4f7f\u7528<code>@xxx@</code>\u7684\u5185\u5bb9\u4e5f\u662f\u6a21\u677f\uff0c\u4e5f\u4f1a\u5728 CMake \u6267\u884c\u914d\u7f6e\u65f6\u671f\u8fdb\u884c\u6587\u672c\u66ff\u6362\u3002</p> <p>\u5728 <code>CMakeLists.txt</code> \u4e2d\u5199\u5165\uff1a</p> <pre><code>set(CONFIG_DIR \"aa/bb/cc\")\nconfigure_file(\n  config.h.in\n  ${CMAKE_SOURCE_DIR}/config.h\n  @ONLY # \u6b64\u9879\u53ef\u9009\uff0c@ONLY \u8868\u793a\u4ec5\u5c06 *.in \u6587\u4ef6\u4e2d\u7684 @xxx@ \u505a\u66ff\u6362\uff0c\u800c ${xxx} \u4e0d\u505a\u66ff\u6362\n)\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230 CMakeLists.txt \u53ea\u5bf9<code>CONFIG_DIR</code>\u8fdb\u884c\u4e86\u5b9a\u4e49\u3002\u800c\u7b2c 4 \u884c\u548c\u7b2c 5 \u884c\u63d0\u5230\u7684<code>CONFIG_DIR_2</code>\u548c<code>CONFIG_DIR_3</code>\u5747\u672a\u88ab\u5b9a\u4e49\u3002</p> <p>\u5728\u7ecf\u8fc7 cmake \u547d\u4ee4\u540e\uff0c\u4f1a\u5728<code>CMakeLists.txt</code>\u5f53\u524d\u8def\u5f84\u4e0b\u751f\u6210 config.h \u6587\u4ef6\uff0c\u5176\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#define CONFIG_DIR \"aa/bb/cc\"\n#define CONFIG_DIR_1 \"aa/bb/cc\"\nconstexpr auto CONFIG_DIR_2 = \"aa/bb/cc\";\n/* #undef CONFIG_DIR_3 */\n#define CONFIG_DIR_4 \"\"\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#23-option","title":"2.3 \u4e0e option \u914d\u5408","text":"<p>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7<code>option()</code>\u9009\u9879\u6765\u5236\u4f5c\u6761\u4ef6\u7f16\u8bd1\u7684\u5b8f\uff0c\u4f8b\u5982\uff1a\u5728 config.h.in \u4e2d\u5199\u5165\uff1a</p> <pre><code>#cmakedefine A\n#cmakedefine B\n</code></pre> <p>\u5728 <code>CMakeLists.txt</code> \u4e2d\u5199\u5165\uff1a</p> <pre><code>option(A \"a\" ON)\noption(B \"b\" OFF)\nconfigure_file(config.h.in ${CMAKE_SOURCE_DIR}/config.h)\n</code></pre> <p>\u751f\u6210\u7684 <code>config.h</code> \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#define A\n/* #undef B */\n</code></pre> <p>\u4f8b\u5982\uff0c\u5728<code>&lt;opencv-path&gt;/CMakeLists.txt</code>\u6587\u4ef6\u4e0b\uff0c\u6709\uff1a</p> <pre><code>OCV_OPTION(OPENCV_ENABLE_NONFREE \"Enable non-free algorithms\" OFF)\n</code></pre> <p>\u5728<code>&lt;opencv-path&gt;/cmake/templates/</code>\u6587\u4ef6\u5939\u4e2d\u7684<code>opencv_modules.hpp.in</code>\u6709\uff1a</p> <pre><code>#cmakedefine OPENCV_ENABLE_NONFREE\n</code></pre> <p></p> <p>\u5982\u679c\u6211\u4eec\u901a\u8fc7<code>cmake-gui</code>\u5c06<code>OPENCV_ENABLE_NONFREE</code>\u4fee\u6539\u4e3a<code>ON</code>\uff0c\u90a3\u4e48\u53ef\u4ee5\u786e\u5b9a\uff0c\u4f1a\u751f\u6210\uff1a</p> <pre><code>#define OPENCV_ENABLE_NONFREE\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#24","title":"2.4 \u4f7f\u7528\u573a\u666f","text":"<p>\u5728\u6279\u91cf\u751f\u6210\u4e00\u7cfb\u5217\u5b8f\u5b9a\u4e49\u53d8\u91cf\uff0c\u6216\u8005\u751f\u6210\u4e0e\u8def\u5f84\u6709\u5173\u7684\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u4f7f\u7528 <code>configure_file</code> \u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4f46\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6216\u51e0\u4e2a\u7684\u5b8f\u5b9a\u4e49\u53d8\u91cf\uff0c\u90a3\u4e48\u4f7f\u7528 <code>configure_file</code> \u6765\u7ef4\u62a4\u4e00\u4e2a <code>*.in</code> \u6587\u4ef6\u5c06\u663e\u5f97\u5341\u5206\u5197\u6742\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#3-cmake","title":"3. CMake \u6dfb\u52a0\u9884\u5b9a\u4e49\u53d8\u91cf","text":"<p>\u6b63\u5982\u4e0a\u8ff0\u4f7f\u7528\u573a\u666f\u6240\u8bf4\uff0c\u5355\u4e2a\u6216\u5c11\u91cf\u7684\u5b8f\u5b9a\u4e49\uff0c\u4f7f\u7528 <code>configure_file</code> \u5e76\u4e0d\u65b9\u4fbf\uff0c\u4e0b\u9762\u63d0\u4f9b\u51e0\u4e2a\u89e3\u51b3\u6b64\u95ee\u9898\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#31-add_definitions","title":"3.1 add_definitions","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#311","title":"3.1.1 \u7528\u6cd5","text":"<pre><code>add_definitions(-DXXX)\n</code></pre> <p>\u5728<code>main.cpp</code>\u4e2d\u5199\u5165</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#ifdef XXX\n    inline void foo() { cout &lt;&lt; \"this is XXX\" &lt;&lt;endl; }\n#endif // XXX\n#ifdef YYY\n    inline void foo() { cout &lt;&lt; \"this is YYY\" &lt;&lt;endl; }\n#endif // YYY\nint main(int argc, char *argv[])\n{\n    foo();\n    return 0;\n}\n</code></pre> <p>\u7f16\u8bd1\u540e\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>this is XXX\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>add_definitions</code> \u751f\u6548\u7684\u6587\u4ef6\u4e3a\u5f53\u524d <code>CMakeLists.txt</code> \u6587\u4ef6\u4ee5\u53ca\u5b50\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u53ef\u7c7b\u6bd4\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u3002\u5e76\u4e14\uff0c\u5bf9\u4e8e\u5176\u4e2d\u4e00\u4e2a <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u5373\u4f7f\u5199\u6210</p> <pre><code>add_executable(demo main.cpp)\nadd_definitions(-DXXX)\n</code></pre> <p>\u5373\uff0c\u5728\u521b\u5efa\u53ef\u6267\u884c\u7a0b\u5e8f\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u76ee\u6807\u4e4b\u540e\u518d\u4e66\u5199 <code>add_definitions</code> \uff0c\u8be5\u9884\u7f16\u8bd1\u5b8f\u5b9a\u4e49\u4ecd\u7136\u80fd\u591f\u751f\u6548\uff0c\u56e0\u4e3a\u8be5\u547d\u4ee4\u4f5c\u7528\u57df\u751f\u6210\u9636\u6bb5\uff0c\u53ef\u53c2\u8003\u301009\u3011\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002\u6211\u4eec\u6682\u65f6\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3</p> <ul> <li>\u8fd9\u4e00\u64cd\u4f5c\u7b49\u540c\u4e8e\u4f7f\u7528 <code>g++ main.cpp -DXXX</code> \u7684\u547d\u4ee4\u884c\u8fdb\u884c\u7f16\u8bd1</li> <li>\u53ea\u8981\u6784\u5efa\u51fa\u7684\u76ee\u6807\uff08\u4e0a\u9762\u7684\u4f8b\u5b50\u662f <code>demo</code>\uff09\u6240\u5728\u7684\u4f5c\u7528\u57df\u4e2d\u5177\u6709\u9884\u7f16\u8bd1\u5b8f\u5b9a\u4e49 <code>XXX</code>\uff0c\u90a3\u4e48\u8be5\u5b8f\u5b9a\u4e49\u90fd\u80fd\u751f\u6548\uff08\u5373\u5168\u5c40\u751f\u6548\uff09\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#312-option","title":"3.1.2 \u4e0e option \u914d\u5408","text":"<p>\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u5168\u5c40\u751f\u6548\u7684 <code>add_definitions</code> \u6211\u4eec\u66f4\u591a\u7684\u662f\u5c06\u5176\u4e0e <code>option</code> \u547d\u4ee4\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\uff0c\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/CMakeLists.txt \u4e2d\u7684\u5185\u5bb9\nOCV_OPTION(ENABLE_IMPL_COLLECTION \"xxx\" OFF )\n# code\nif(ENABLE_IMPL_COLLECTION)\n  add_definitions(-DCV_COLLECT_IMPL_DATA)\nendif()\n</code></pre> <p>\u6211\u4eec\u53ea\u9700\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5373\u53ef\u5b9e\u73b0\u8be5\u7f16\u8bd1\u9009\u9879\u7684\u5f00\u542f\uff0c\u5e76\u6dfb\u52a0\u5bf9\u5e94\u7684\u5b8f</p> <pre><code>cmake -D ENABLE_IMPL_COLLECTION=ON ..\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#313","title":"3.1.3 \u6ce8\u610f\u4e8b\u9879","text":"<p>\u7531\u4e8e\u4e0a\u6587\u4e2d\u63d0\u5230 <code>add_definitions</code> \u7684\u751f\u6548\u673a\u5236\u4e0e CMake \u4e2d\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u57fa\u672c\u4e00\u81f4\uff0c\u56e0\u6b64\u5728\u4e00\u4e2a <code>CMakeLists.txt</code> \u4e2d\u5982\u679c\u521b\u5efa\u591a\u4e2a\u76ee\u6807\uff0c\u90a3\u4e48\u8fd9\u4e9b\u76ee\u6807\u5747\u80fd\u4eab\u6709\u8fd9\u4e2a\u4f5c\u7528\u57df\u4e0b\u7684 <code>add_definitions</code> \u6240\u5e26\u6765\u7684\u6548\u679c\u4f7f\u7528 <code>add_definitions</code> \u6784\u5efa\u7684\u76ee\u6807\u3002\u5177\u4f53\u7684\u8bf4\uff0c\u5c31\u662f\u5728</p> <ul> <li> <p>\u5f53\u524d\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6</p> </li> <li> <p>\u5b50\u76ee\u5f55\uff08\u4f7f\u7528 <code>add_subdirectory</code> \u6240\u6dfb\u52a0\u7684\u6a21\u5757\uff09\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d</p> </li> </ul> <p>\u751f\u6548\uff0c\u4f8b\u5982\u4ee5\u4e0b\u7684\u5e03\u5c40\u3002</p> <pre><code>project: CMakeLists\n    \u2502\n    \u2514\u2500\u2500 A: CMakeLists\n         \u2502\n         \u251c\u2500\u2500 B: CMakeLists\n         \u2502    \u2502\n         \u2502\u00a0\u00a0  \u2514\u2500\u2500 D: CMakeLists\n         \u2502\n         \u2514\u2500\u2500 C: CMakeLists\n</code></pre> <p>\u4f8b\u5982\uff0c\u5728<code>A</code>\u76ee\u5f55\u4e2d\u4f7f\u7528<code>add_definitions</code>\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u5728<code>A</code>\u3001<code>B</code>\u3001<code>C</code>\u3001<code>D</code>\u76ee\u5f55\u4e2d\u5747\u751f\u6548\uff0c\u800c<code>B</code>\u4f7f\u7528<code>add_definitions</code>\u5b9a\u4e49\u7684\u5185\u5bb9\u4ec5\u5728<code>B</code>\u3001<code>D</code>\u76ee\u5f55\u4e2d\u751f\u6548</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/06-%E5%8F%98%E9%87%8F%E5%8F%82%E4%B8%8E%20C%2B%2B%20%E7%9A%84%E7%BC%96%E8%AF%91/#32-target_compile_definitions","title":"3.2 target_compile_definitions","text":"<p>\u5728 \u301005\u3011\u76ee\u6807\u6784\u5efa - \u666e\u901a\u5e93\u76ee\u6807\u6784\u5efa\u4e2d\u63d0\u5230\u4e86 <code>target_compile_definitions</code> \u547d\u4ee4\uff0c\u8fd9\u4e5f\u662f\u76ee\u6807\u5c5e\u6027\u5f53\u4e2d \u201c\u4f7f\u7528\u8981\u6c42\u201d \u7684\u4e00\u90e8\u5206\u3002\u5728\u6dfb\u52a0\u9884\u5b9a\u4e49\u5b8f\u7684\u529f\u80fd\u4e0a\uff0c\u76f8\u6bd4\u4e8e <code>add_definitions</code>\uff0c<code>target_compile_definitions</code> \u5219\u66f4\u5177\u6709\u9488\u5bf9\u6027\uff0c\u5b83\u80fd\u660e\u786e\u7684\u6307\u5b9a\u662f\u54ea\u4e2a\u76ee\u6807\u5728\u6784\u5efa\u7684\u65f6\u5019\u5f15\u5165\u9884\u7f16\u8bd1\u5b8f\u3002\u4e0b\u9762\u9996\u5148\u7ed9\u51fa OpenCV \u4e2d\u7684\u4f8b\u5b50</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;opencv-path&gt;/cmake/OpenCVModule.cmake \u4e2d _ocv_create_module \u5b8f\u4e2d\ntarget_compile_definitions(${the_module} PRIVATE CVAPI_EXPORTS)\n</code></pre> <p>\u5728 <code>&lt;opencv-path&gt;/modules/core/src</code> \u6587\u4ef6\u5939\u4e0b\u7684 <code>system.cpp</code> \u8fd9\u4e00\u6e90\u6587\u4ef6\uff0c\u6709\u5f15\u7528\u5230 <code>CVAPI_EXPORTS</code> \u7684\u5730\u65b9\uff1a</p> <pre><code>#if defined CVAPI_EXPORTS &amp;&amp; defined _WIN32 &amp;&amp; !defined WINCE\n// ...\n#endif\n</code></pre> <p>\u5b83\u4e3a\u6307\u5b9a\u7684\u6a21\u5757\u6dfb\u52a0\u9884\u7f16\u8bd1\u5b8f\uff0c\u4f7f\u5f97\u8be5\u5b8f\u4e0d\u4f1a\u88ab\u66b4\u9732\u7ed9\u975e\u6307\u5b9a\u7684\u76ee\u6807\uff0c\u56e0\u6b64\u4f1a\u5f88\u5b89\u5168\u3002\u5e76\u4e14\uff0c\u4e00\u822c\u8bbe\u7f6e\u4e3a <code>PRIVATE</code> \u7684\u9884\u7f16\u8bd1\u5b8f\u4e0d\u80fd\u88ab\u5176\u4f59\u5305\u542b\u8be5\u76ee\u6807\u7684\u5176\u4ed6\u76ee\u6807\u6240\u5171\u4eab\uff0c\u8fd9\u4e0e CMake \u76ee\u6807\u6784\u5efa\u65f6\u63a5\u89e6\u5230\u7684 <code>target_include_directories</code> \u4ee5\u53ca <code>target_link_libraries</code> \u7684\u7528\u6cd5\u7c7b\u4f3c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code>target_compile_definitions(\n  my_lib\n  PUBLIC xxx\n)\n</code></pre> <p>\u53ef\u4ee5\u5b9e\u73b0\u5176\u4ed6\u76ee\u6807\u5728\u94fe\u63a5 <code>my_lib</code> \u8fd9\u4e2a\u76ee\u6807\u7684\u65f6\u5019\u540c\u6837\u4eab\u6709 <code>xxx</code> \u8fd9\u4e2a\u9884\u7f16\u8bd1\u5b8f\u5b9a\u4e49\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/","title":"\u301007\u3011\u5b8f\u4e0e\u51fd\u6570","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#1","title":"1. \u524d\u8a00","text":"<p>\u6211\u4eec\u5047\u8bbe\u6709\u4ee5\u4e0b\u6587\u4ef6\u67b6\u6784\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 core1\n\u2502   \u251c\u2500\u2500 CMakeLists.txt\n\u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2514\u2500\u2500 core1.hpp\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u251c\u2500\u2500 core1.cpp\n\u2502       \u251c\u2500\u2500 core_cal.cpp\n\u2502       \u2514\u2500\u2500 util.cpp\n\u2514\u2500\u2500 core2\n    \u251c\u2500\u2500 CMakeLists.txt\n    \u251c\u2500\u2500 include\n    \u2502   \u2514\u2500\u2500 core2.hpp\n    \u2514\u2500\u2500 src\n        \u251c\u2500\u2500 core2.cpp\n        \u251c\u2500\u2500 core_cal.cpp\n        \u2514\u2500\u2500 util.cpp\n</code></pre> <p>\u4e24\u4e2a\u6a21\u5757\uff0c\u540c\u6837\u7684\u67b6\u6784\uff0c\u56e0\u6b64\u9700\u8981\u540c\u6837\u7684\u6784\u5efa\u65b9\u5f0f\uff0c\u5047\u8bbe<code>core1</code>\u4f9d\u8d56 OpenCV\uff0c\u5047\u8bbe<code>core2</code>\u4f9d\u8d56 <code>core1</code>\uff1a</p> <pre><code># core1/CMakeLists.txt \u90e8\u5206\u5185\u5bb9\nfind_package(OpenCV REQUIRED)\n\naux_source_directory(src core1_dir)\nadd_library(\n  core1\n  SHARED ${core1_dir}\n)\ntarget_include_directories(\n  core1\n  PUBLIC include\n)\ntarget_link_libraries(\n  core1\n  PUBLIC ${OpenCV_LIBS}\n)\n\n# core2/CMakeLists.txt \u90e8\u5206\u5185\u5bb9\naux_source_directory(src core2_dir)\nadd_library(\n  core2\n  SHARED ${core2_dir}\n)\ntarget_include_directories(\n  core2\n  PUBLIC include\n)\ntarget_link_libraries(\n  core2\n  PUBLIC core1\n)\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u4e0a\u9762\u4e00\u6bb5<code>CMakeLists.txt</code>\u7684\u4ee3\u7801\u91cd\u590d\u7387\u6bd4\u8f83\u9ad8\uff0c\u6bcf\u6b21\u521b\u5efa\u5e93\u76ee\u6807\u90fd\u662f\u51e0\u4e4e\u4e00\u6837\u7684\u64cd\u4f5c\uff0c\u4e3a\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b8f\u3001\u51fd\u6570\u64cd\u4f5c\u3002\u8fd9\u6837\u53ef\u4ee5\u4f7f\u5f97\u6784\u5efa\u64cd\u4f5c\u7f29\u77ed\u81f3\u51e0\u884c\uff0c\u4f8b\u5982 OpenCV \u7684 core \u6a21\u5757\uff1a</p> <pre><code>ocv_add_module(core\n               OPTIONAL opencv_cudev\n               WRAP java objc python js)\n</code></pre> <p>\u5176\u4e2d\uff0c<code>ocv_add_module</code>\u5c31\u662f OpenCV \u5b9a\u4e49\u4e8e<code>OpenCVModule.cmake</code>\u6587\u4ef6\u4e2d\u7684\u5b8f\u3002</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4f8b\u5b50\u6211\u4eec\u5148\u7ed9\u51fa\u7ed3\u679c\uff0c\u5982\u679c\u6211\u4eec\u521b\u5efa\u4e86\u8fd9\u6837\u4e00\u4e2a\u5b8f</p> <pre><code>macro(add_module name)\n  # \u53c2\u6570\u89e3\u6790\n  set(multy_args DEP_LIBS)\n  cmake_parse_arguments(MOD \"\" \"\" \"${multy_args}\" ${ARGN})\n  # \u521b\u5efa target\n  aux_source_directory(src _src_dir)\n  add_library(${name} SHARED ${_src_dir})\n  # \u8bbe\u7f6e target \u5c5e\u6027\n  target_include_directories(${name} PUBLIC include)\n  target_link_libraries(${name} PUBLIC ${MOD_DEP_LIBS})\n  unset(_src_dir)\nendmacro()\n</code></pre> <p>\u6211\u4eec\u5c31\u53ef\u4ee5\u6539\u5199\u6210\u4ee5\u4e0b\u5f62\u5f0f</p> <pre><code># core1/CMakeLists.txt \u90e8\u5206\u5185\u5bb9\nfind_package(OpenCV REQUIRED)\n\nadd_module(\n  core1\n  DEP_LIBS ${OpenCV_LIBS}\n)\n# core2/CMakeLists.txt \u90e8\u5206\u5185\u5bb9\nadd_module(\n  core2\n  DEP_LIBS core1\n)\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0d\u4ec5\u51cf\u5c11\u4e86\u4e66\u5199\u96be\u5ea6\uff0c\u8fd8\u63d0\u9ad8\u4e86\u53ef\u8bfb\u6027\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#2","title":"2. \u5b8f\u3001\u51fd\u6570","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#21","title":"2.1 \u51fd\u6570\u57fa\u672c\u7528\u6cd5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#211","title":"2.1.1 \u5b9a\u4e49","text":"<pre><code>function(my_func)\n  # function\nendfunction()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#212","title":"2.1.2 \u8c03\u7528","text":"<p>\u51fd\u6570\u8c03\u7528\u7684\u51fd\u6570\u540d\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e0d\u8fc7\u901a\u5e38\u5728 CMake \u4e2d\u51fd\u6570\u540d\u5efa\u8bae\u5199\u5c0f\u5199\u3002</p> <pre><code>my_func() # \u53ef\u4ee5\nMY_FUNC() # \u53ef\u4ee5\nmY_fUnC() # \u6709\u4e9b\u9006\u5929\uff0c\u4f46\u4e5f\u53ef\u4ee5\n</code></pre> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4e00\u4e2a\u51fd\u6570\u8fd8\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u4f5c\u7528\u57df\uff0c\u8fd9\u70b9\u4e0eC/C++\u4e00\u81f4\u3002\u540c\u6837\uff0c\u4f7f\u7528<code>set(xxx PARENT_SCOPE)</code>\u53ef\u4ee5\u63d0\u5347\u53d8\u91cf\u4f5c\u7528\u57df\u3002</p> <p>CMake 3.18 \u8d77\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>cmake_language(CALL ...)</code>\u5b50\u547d\u4ee4\u6765\u8c03\u7528\u51fd\u6570\uff0c\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u624b\u518c\uff1a</p> <pre><code>function(my_foo x1 x2)\n  message(STATUS \"x1 = ${x1}, x2 = ${x2}\")\nendfunction()\ncmake_language(CALL my_foo 2 7)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#213","title":"2.1.3 \u53c2\u6570","text":"<p>\u4f7f\u7528\u5f62\u53c2</p> <p>\u5f53\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c\u9996\u5148\u901a\u8fc7\u5b9e\u53c2\u66ff\u6362\u5f62\u53c2 \uff0c\u7136\u540e\u4f5c\u4e3a\u666e\u901a\u547d\u4ee4\u8c03\u7528\u3002</p> <pre><code>function(my_foo x1 x2 x3)\n  message(STATUS \"x1 = ${x1}, x2 = ${x2}, x3 = ${x3}\")\nendfunction()\nmy_foo(2 7 4)\n# \u663e\u793a\u7ed3\u679c\n# -- x1 = 2, x2 = 7, x3 = 4\n</code></pre> <p>\u4f7f\u7528 ARGC\u3001ARGVn</p> <p>\u9664\u4e86\u5f15\u7528\u5f62\u53c2\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u5f15\u7528<code>ARGC</code>\u53d8\u91cf \u548c<code>ARGVn</code>\u53d8\u91cf\u6765\u5f15\u7528\u53c2\u6570\uff0c<code>ARGC</code>\u8868\u793a\u53c2\u6570\u6570\u91cf\uff0c\u4ee5\u53ca<code>ARGV0, ARGV1, ARGV2, ...</code>\u5c06\u5177\u6709\u4f20\u5165\u53c2\u6570\u7684\u503c\uff0c\u6709\u52a9\u4e8e\u521b\u5efa\u5e26\u6709\u53ef\u9009\u53c2\u6570\u7684\u51fd\u6570\u3002\u540c\u65f6<code>ARGV</code>\u4fdd\u5b58\u4e86\u6240\u6709\u7684\u53c2\u6570\u5217\u8868</p> <pre><code>function(my_foo)\n  message(STATUS \"ARGC = ${ARGC}\")\n  message(STATUS \"x1 = ${ARGV0}, x2 = ${ARGV1}, x3 = ${ARGV2}\")\nendfunction()\nmy_foo(2 7 4)\n# \u663e\u793a\u7ed3\u679c\n# -- ARGC = 3\n# -- x1 = 2, x2 = 7, x3 = 4\n</code></pre> <p>\u4f7f\u7528 ARGN</p> <p>\u6b64\u5916\uff0c<code>ARGN</code>\u53d8\u91cf\u4fdd\u5b58\u8d85\u8fc7\u5f62\u53c2\u5217\u8868\u4e4b\u540e\u7684\u53c2\u6570\u3002\u5982\u679c\u5b9e\u53c2\u6570\u91cf\u5927\u4e8e\u5f62\u53c2\u6570\u91cf\uff0c\u7528<code>ARGN</code>\u53d8\u91cf\u5f15\u7528\u9884\u671f\u4e4b\u5916\u7684\u53c2\u6570\u3002</p> <pre><code>function(my_foo x1)\n  message(STATUS \"x1 = ${x1}\")\n  message(STATUS \"ARGN = ${ARGN}\")\nendfunction()\n# \u8c03\u7528\uff0c\u6267\u884c\u4e86 set(x1 2)... \u7684\u64cd\u4f5c\nmy_foo(2 7 4)\n# \u663e\u793a\u7ed3\u679c\n# -- x1 = 2\n# -- ARGN = 7;4\n</code></pre> <p>\u5f62\u53c2\u4e3a\u53d8\u91cf</p> <p>\u4ee5\u4e0a\u7684\u4f8b\u5b50\u4e2d\uff0c\u53c2\u6570\u90fd\u4e3a\u5177\u4f53\u7684\u503c\uff0c\u4f8b\u5982<code>2, 7, 4</code>\uff0c\u90a3\u4e48\u53d8\u91cf\u53d6\u503c\u7684\u8bed\u6cd5<code>${}</code>\u4f5c\u7528\u4e8e\u53c2\u6570\uff0c\u83b7\u53d6\u5230\u7684\u5c31\u662f\u5177\u4f53\u7684\u503c\u3002\u5982\u679c\u53c2\u6570\u4e3a\u53d8\u91cf\u7684\u8bdd\uff0c\u90a3\u4e48<code>${}</code>\u83b7\u53d6\u5230\u7684\u53c2\u6570\u5185\u5bb9\u5c31\u662f\u53d8\u91cf\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u8981\u60f3\u83b7\u53d6\u503c\u7684\u8bdd\u5c31\u8981\u4f7f\u7528 <code>${${}}</code>\u3002</p> <pre><code>set(a1 10)\nfunction(foo val)\n  message(STATUS \"val, ${val}, ${${val}}\")\nendfunction()\nfoo(a1)\n# \u663e\u793a\u7ed3\u679c\n# -- val, a1, 10\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#22","title":"2.2 \u5b8f\u7684\u57fa\u672c\u7528\u6cd5","text":"<p>\u5b8f\u4e0e\u51fd\u6570\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\uff0c\u5b8f\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u4f5c\u7528\u57df\uff0c\u800c\u662f\u5355\u7eaf\u7684\u53d1\u751f\u4e86\u6587\u672c\u66ff\u6362\uff0c\u8fd9\u4e0eC/C++\u5b8c\u5168\u4e00\u81f4</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#221","title":"2.2.1 \u5b9a\u4e49","text":"<pre><code>macro(myFun)\n  # macro\nendmacro()\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#222","title":"2.2.2 \u8c03\u7528","text":"<ul> <li>\u4e0e\u51fd\u6570\u4e00\u6837\uff0c\u5b8f\u5728\u8c03\u7528\u65f6\u4e5f\u53ef\u4ee5\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f46\u540c\u6837\u5efa\u8bae\u4f7f\u7528\u5c0f\u5199\u3002</li> <li>CMake 3.18 \u8d77\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>cmake_language(CALL ...)</code>\u5b50\u547d\u4ee4\u6765\u8c03\u7528\u5b8f\uff1a</li> </ul> <pre><code>macro(my_foo x1 x2)\n  message(STATUS \"x1 = ${x1}, x2 = ${x2}\")\nendmacro()\ncmake_language(CALL my_foo 2 7)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#223","title":"2.2.3 \u53c2\u6570","text":"<p>\u4e0e\u51fd\u6570\u4e00\u6837\uff0c\u540c\u6837\u53ef\u4ee5\u8bbe\u7f6e\u53c2\u6570\uff0c\u4e5f\u540c\u65f6\u5177\u5907<code>ARGC</code>\u3001<code>ARGV</code>\u3001<code>ARGVx</code>\u3001<code>ARGN</code>\u7684\u53c2\u6570\uff0c\u5982\u679c\u8fd9\u4e9b\u53c2\u6570\u5728\u5b8f\u5185\u90e8\u8fdb\u884c\u5f15\u7528\uff0c\u8c03\u7528\u8be5\u5b8f\u7684\u65f6\u5019\uff0c\u8fd9\u4e9b\u5185\u5bb9\u4f1a\u53d1\u751f\u66ff\u6362\uff0c\u4f8b\u5982</p> <pre><code>macro(my_macro xx)\n  message(STATUS \"xx   = ${xx}\")   # \u8fd9\u91cc\u7684 ${xx} \u4f1a\u88ab\u76f4\u63a5\u66ff\u6362\u4e3a aa\n  message(STATUS \"ARGC = ${ARGC}\") # \u8fd9\u91cc\u7684 ${ARGC} \u4f1a\u88ab\u76f4\u63a5\u66ff\u6362\u4e3a 3\n  message(STATUS \"ARGV = ${ARGV}\") # \u8fd9\u91cc\u7684 ${ARGV} \u4f1a\u88ab\u76f4\u63a5\u66ff\u6362\u4e3a aa;bb;cc\nendmacro()\n\nmy_macro(aa bb cc)\n\n# \u6253\u5370\u7ed3\u679c\n# -- xx   = aa\n# -- ARGC = 3\n# -- ARGV = aa;bb;cc\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#23","title":"2.3 \u51fd\u6570\u4e0e\u5b8f\u7684\u533a\u522b","text":"<ol> <li>\u5b8f\u4e0d\u4f1a\u5f00\u8f9f\u65b0\u7684\u4f5c\u7528\u57df\uff0c\u56e0\u6b64\u5728\u5b8f\u5185\u90e8\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5c06\u5728\u5916\u90e8\u7ee7\u7eed\u751f\u6548</li> </ol> <pre><code>macro(test)\n  set(val \"666\")\nendmacro()\n\nset(val \"123\")\nmessage(\"val = ${val}\")\ntest()\nmessage(\"val = ${val}\")\n\n# \u6253\u5370\u7ed3\u679c\n# -- val = 123\n# -- val = 666\n</code></pre> <p>\u8fd9\u4e00\u70b9\u5728\u51fd\u6570\u5c31\u4e0d\u4f1a\u51fa\u73b0\uff0c\u5185\u90e8\u8bbe\u7f6e\u7684\u53d8\u91cf\u4e00\u822c\u65e0\u6cd5\u8986\u76d6\u5916\u90e8\u7684\u53d8\u91cf\uff0c\u4f46\u5982\u679c\u9700\u8981\u8986\u76d6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>PARENT_SCOPE</code> \u63d0\u5347\u4f5c\u7528\u57df\u3002</p> <ol> <li>\u5b8f\u5728\u88ab\u8c03\u7528\u7684\u8303\u56f4\u5185\u6709\u4e00\u4e2a\u540c\u540d\u7684\u53d8\u91cf\uff0c\u5c06\u4f7f\u7528\u73b0\u6709\u53d8\u91cf\u800c\u4e0d\u662f\u53c2\u6570\u3002</li> </ol> <pre><code>macro(aaa)\n  # \u8fd9\u91cc\u7684 ${ARGN} \u5728\u8c03\u7528\u65f6\u4f1a\u53d1\u751f\u66ff\u6362\uff0c\u66ff\u6362\u4e3a x;y;z\n  foreach(m ${ARGN})\n    message(STATUS \"m = ${m}\")\n  endforeach() \n  message(STATUS \"================\")\n  # \u8fd9\u91cc\u7684 ARGN \u6ca1\u6709\u5f15\u7528\uff0c\u5728\u8c03\u7528\u65f6\u4e0d\u4f1a\u53d1\u751f\u66ff\u6362\n  foreach(m IN LISTS ARGN)\n    message(STATUS \"m = ${m}\")\n  endforeach()  \nendmacro()\n\nfunction(bbb)\n  aaa(x y z)\nendfunction()\n\nbbb(a b c)\n\n# \u6253\u5370\u7ed3\u679c\n# -- m = x\n# -- m = y\n# -- m = z\n# -- ================\n# -- m = a\n# -- m = b\n# -- m = c\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>ARGN</code> \u5176\u5b9e\u6307\u4ee3\u7684\u662f\u51fd\u6570\u4e2d\u7684 <code>ARGN</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#3","title":"3. \u53c2\u6570\u89e3\u6790","text":"<p>\u7ecf\u5e38\u89c1\u5230\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code># \u6848\u4f8b 1\ntarget_include_directories(\n  MyLib\n  PUBLIC include\n  PRIVATE _deps\n)\n# \u6848\u4f8b 2\nexecute_process(\n  COMMAND ls ${current_dir}\n  OUTPUT_VARIABLE subs\n)\n</code></pre> <p>\u8fd9\u4e9b\u5185\u7f6e\u7684\u51fd\u6570\u548c\u5b8f\u53ef\u4ee5\u5bf9\u4ee5\u4e0a\u7684<code>include</code>\u3001<code>_deps</code>\u548c<code>ls ${current_dir}</code>\u7b49\u5185\u5bb9\u8fdb\u884c\u89e3\u6790\uff0c\u5982\u679c\u6211\u4eec\u81ea\u5df1\u5199\u7684\u51fd\u6570\u6216\u5b8f\uff0c\u8981\u5982\u4f55\u5b9e\u73b0\u8fd9\u79cd\u53c2\u6570\u89e3\u6790\u7684\u529f\u80fd\uff1f\u8fd9\u91cc\u8981\u4ecb\u7ecd\u4e00\u4e2a CMake \u5185\u7f6e\u7684\u547d\u4ee4\uff1a<code>cmake_parse_arguments()</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#31","title":"3.1 \u7528\u6cd5","text":"<p>\u6709\u4e24\u4e2a\u5177\u4f53\u7684\u7528\u6cd5\uff1a</p> <pre><code>cmake_parse_arguments(&lt;prefix&gt; &lt;options&gt; &lt;one_value_keywords&gt;\n                      &lt;multi_value_keywords&gt; &lt;args&gt;...)\n\ncmake_parse_arguments(PARSE_ARGV &lt;N&gt; &lt;prefix&gt; &lt;options&gt;\n                      &lt;one_value_keywords&gt; &lt;multi_value_keywords&gt;)\n</code></pre> <p>\u901a\u5e38\u4f7f\u7528\u7b2c\u4e00\u4e2a\u7528\u6cd5\uff0c\u7b2c\u4e8c\u4e2a\u7528\u6cd5\u6574\u4f53\u4e0e\u7b2c\u4e00\u4e2a\u7c7b\u4f3c\uff0c\u6709\u5174\u8da3\u8005\u53ef\u4ee5\u53c2\u8003CMake\u5b98\u7f51\u3002\u4e0b\u9762\u4e3b\u8981\u5bf9\u7b2c\u4e00\u4e2a\u7528\u6cd5\u505a\u8bb2\u89e3\u3002</p> <ol> <li><code>&lt;options&gt;</code>\uff1a\u8868\u793a\u53ef\u9009\u5173\u952e\u8bcd\u5217\u8868\uff0c\u5982\u679c\u4f20\u5165\u53c2\u6570\u5305\u542b\u6b64\u53d8\u91cf\u540d\uff0c\u5219\u4e3a<code>TRUE</code>\uff0c\u53cd\u4e4b\u4e3a <code>FALSE</code>\u3002</li> </ol> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u5e38\u89c1\u7684<code>INTERFACE</code>\uff0c<code>PUBLIC</code>\uff0c<code>PRIVATE</code>\u90fd\u662f<code>target_include_directories</code>\u51fd\u6570\u4e2d\u53ef\u9009\u5173\u952e\u5b57\u5217\u8868\u4e2d\u7684\u5143\u7d20\u3002</p> <pre><code>set(options INTERFACE PUBLIC PRIVATE)\ncmake_parse_arguments(xxx \"${options}\" \"\" \"\" ${ARGN})\n</code></pre> <ol> <li> <p><code>&lt;one_value_keywords&gt;</code>\uff1a\u8868\u793a\u5355\u503c\u5173\u952e\u8bcd\u5217\u8868\uff0c\u6bcf\u4e2a\u5173\u952e\u8bcd\u4ec5\u5bf9\u5e94\u4e00\u4e2a\u503c\u3002</p> </li> <li> <p><code>&lt;multi_value_keywords&gt;</code>\uff1a\u8868\u793a\u591a\u503c\u5173\u952e\u8bcd\u5217\u8868\uff0c\u6bcf\u4e2a\u5173\u952e\u8bcd\u53ef\u5bf9\u5e94\u591a\u4e2a\u503c\u3002</p> </li> </ol> <p>::: tip    1. \u5b9e\u9645\u4e0a\uff0c\u80fd\u7528<code>&lt;one_value_keywords&gt;</code>\u7684\u90fd\u80fd\u7528<code>&lt;multi_value_keywords&gt;</code>\u3002    2. \u8981\u89e3\u6790\u7684\u53c2\u6570<code>&lt;args&gt;...</code>\uff0c\u6211\u4eec\u4e00\u822c\u4f20\u5165\u4e3a<code>${ARGN}</code>\u5373\u53ef\uff0c\u4e00\u822c\u5b9a\u4e49\u7684\u51fd\u6570\u6216\u5b8f\u662f\u65e0\u53c2\u7684\uff0c\u9664\u975e\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5173\u952e\u8bcd\uff0c\u90a3\u4e48\u6709\u591a\u5c11\u975e\u5173\u952e\u8bcd\u53d8\u91cf\uff0c\u5b9a\u4e49\u591a\u5c11\u5f62\u53c2\u3002    :::</p> <p>\u4e3e\u4e2a\u4f8b\u5b50</p> <pre><code>function(my_function)\n  set(multi_args YYY ZZZ)\n  cmake_parse_arguments(\"ABC\" \"\" \"\" \"${multi_args}\" ${ARGN})\n  message(STATUS \"YYY: ${ABC_YYY}\")\n  message(STATUS \"ZZZ: ${ABC_ZZZ}\")\nendfunction()\n\nmy_function(\n  YYY 123 456 789\n  ZZZ abc\n)\n\n# \u6253\u5370\u7ed3\u679c\n# -- YYY: 123;456;789\n# -- ZZZ: abc\n</code></pre> <ol> <li><code>prefix</code>\uff1a\u6211\u4eec\u5c06\u53c2\u6570<code>${ARGN}</code>\u6839\u636e<code>&lt;options&gt;</code>\uff0c<code>&lt;one_value_keywords&gt;</code>\uff0c<code>&lt;multi_value_keywords&gt;</code>\u89c4\u5219\u8fdb\u884c\u89e3\u6790\uff0c\u89e3\u6790\u51fa\u6765\u7684\u65b0\u53d8\u91cf\u540d\u6839\u636e<code>&lt;prefix&gt;</code>\u524d\u7f00\uff0c\u6309\u7167 <code>prefix_\u53c2\u6570\u540d</code>\u7684\u5f62\u5f0f\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff1a</li> </ol> <pre><code>set(options INTERFACE PUBLIC PRIVATE)\nset(multy_args DEPENDS)\ncmake_parse_arguments(ABC \"${options}\" \"\" \"${multy_args}\" ${ARGN})\n# \u8bbf\u95ee options \u7684\u5185\u5bb9\u662f\u5426\u4e3a ON\nif(${ABC_INTERFACE})   # ABC_ \u524d\u7f00\nelseif(${ABC_PUBLIC})  # ABC_ \u524d\u7f00\nelseif(${ABC_PRIVATE}) # ABC_ \u524d\u7f00\nendif()\n# \u8bbf\u95ee multy_args \u7684\u5185\u5bb9\nmessage(STATUS \"${ABC_DEPENDS}\") # ABC_ \u524d\u7f00\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/07-%E5%AE%8F%E4%B8%8E%E5%87%BD%E6%95%B0/#32","title":"3.2 \u6848\u4f8b","text":"<p>\u6700\u540e\uff0c\u6765\u770b RMVL \u4e2d\u4f7f\u7528\u6709\u5173\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b\u7684\u5b8f\u6765\u505a\u5de9\u56fa\uff1a</p> <pre><code># \u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u6dfb\u52a0\u65b0\u7684\u6d4b\u8bd5\u7528\u4f8b\n# \u7528\u6cd5:\n# rmvl_add_test(\n#   &lt;name&gt;\n#   [DEPENDS &lt;rmvl_target&gt;]\n#   [DEPEND_TESTS &lt;test_target&gt;]\n# )\n# \u793a\u4f8b:\n# rmvl_add_test(\n#   detector                       # \u6d4b\u8bd5\u540d\n#   DEPENDS armor_detector         # \u9700\u8981\u4f9d\u8d56\u7684 RMVL \u76ee\u6807\u5e93\n#   DEPEND_TESTS GTest::gtest_main # \u9700\u8981\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u6d4b\u8bd5\u5de5\u5177\u76ee\u6807\u5e93\n# )\nmacro(rmvl_add_test _name)\n  # add arguments variable    \n  set(multy_args DEPENDS DEPEND_TESTS)\n  cmake_parse_arguments(TEST \"\" \"\" \"${multy_args}\" ${ARGN})\n  # add testing executable\n  set(test_dir)\n  aux_source_directory(test test_dir)\n  add_executable(rmvl_${_name}_test ${test_dir})\n  # depends\n  foreach(_dep ${TEST_DEPENDS})\n    target_link_libraries(\n      rmvl_${_name}_test\n      PRIVATE rmvl_${_dep}\n    )\n  endforeach(_dep ${TEST_DEPENDS})\n  # test depends\n  target_link_libraries(\n    rmvl_${_name}_test\n    PRIVATE ${TEST_DEPEND_TESTS}\n  )\n  gtest_discover_tests(rmvl_${_name}_test)\nendmacro(rmvl_add_test _name)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/","title":"\u301008\u3011find_package \u8be6\u89e3","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#1","title":"1. \u524d\u8a00","text":"<p>\u5148\u770b\u4ee5\u4e0b\u5bfb\u627e\u5e76\u5305\u542b OpenCV \u7684 <code>CMakeLists.txt</code> \u793a\u4f8b</p> <pre><code>cmake_minimum_required(VERSION 3.10)\n\nproject(Demo)\n\nfind_package(OpenCV REQUIRED)\n\nadd_executable(demo main.cpp)\n\ntarget_link_libraries(\n  demo\n  PRIVATE ${OpenCV_LIBS}\n)\n</code></pre> <p>\u8fd9\u662f\u4e00\u6bb5\u518d\u719f\u6089\u4e0d\u8fc7\u7684 CMakeLists.txt \u4ee3\u7801\uff0c\u6211\u4eec\u901a\u8fc7 <code>find_package</code> \u547d\u4ee4\u5bfb\u627e\u5230\u4e86OpenCV\u5e93\uff0c\u5e76\u83b7\u5f97\u4e86\u5176\u4e2d\u7684\u5bfc\u5165\u76ee\u6807\u5217\u8868\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>message</code> \u9a8c\u8bc1\u4e00\u4e0b <code>OpenCV_LIBS</code> \u5305\u542b\u7684\u5185\u5bb9</p> <pre><code>foreach(m ${OpenCV_LIBS})\n  message(STATUS ${m})\nendforeach()\n\n# \u8f93\u51fa\u7ed3\u679c\n# opencv_core;opencv_imgproc;opencv_highgui;opencv_imgcodecs; ...\n</code></pre> <p>\u90a3\u4e48CMake\u662f\u5982\u4f55\u901a\u8fc7 <code>find_package</code> \u547d\u4ee4\u627e\u5230OpenCV\u5e76\u4e14\u5b8c\u6210\u914d\u7f6e\u7684\u5462?</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#2-find_package","title":"2. find_package \u89e3\u6790\u8fc7\u7a0b","text":"<p>Module \u6a21\u5f0f</p> <p>\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c<code>find_package</code> \u9700\u8981\u89e3\u6790 <code>Findxxx.cmake</code> \u6587\u4ef6\uff0c\u8fd9\u4e5f\u662f <code>find_package</code> \u9ed8\u8ba4\u5de5\u4f5c\u7684\u6a21\u5f0f</p> <p>Config \u6a21\u5f0f</p> <p>\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c<code>find_package</code> \u9700\u8981\u89e3\u6790 <code>xxxConfig.cmake</code> \u6587\u4ef6\u6216\u8005 <code>xxx-config.cmake</code> \u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\u53ea\u6709 <code>Findxxx.cmake</code> \u6587\u4ef6\u65e0\u6cd5\u627e\u5230\uff0c\u5373 Module \u6a21\u5f0f\u6267\u884c\u4e0d\u6210\u529f\uff0c\u624d\u4f1a\u8fdb\u5165 Config \u6a21\u5f0f\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#3-module","title":"3. Module \u6a21\u5f0f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#31","title":"3.1 \u7528\u6cd5","text":"<p>Module \u6a21\u5f0f\u4e0b <code>find_package</code> \u7684\u53c2\u6570\u4e3a\uff1a</p> <pre><code>find_package(&lt;package&gt; [VERSION] [EXACT] [QUIET] [MODULE]\n             [REQUIRED] [[COMPONENTS] [components...]]\n             [OPTIONAL_COMPONENTS components...]\n             [NO_POLICY_SCOPE])\n</code></pre> <p>\u8fd9\u91cc\u5bf9\u4e0a\u8ff0\u63d0\u53ca\u5230\u7684\u53c2\u6570\u505a\u4e2a\u7b80\u5355\u7684\u89e3\u91ca\uff1a</p> \u53c2\u6570\u540d\u79f0 \u53ef\u9009\u6027 \u540d\u79f0 \u5907\u6ce8 <code>package</code> \u5fc5\u586b \u9700\u8981\u67e5\u627e\u7684\u5305\u540d \u6ce8\u610f\u5927\u5c0f\u5199 <code>VERSION</code> \u53ef\u9009 \u6307\u5b9a\u7248\u672c\uff0c\u5982\u679c\u6307\u5b9a\u5c31\u5fc5\u987b\u68c0\u67e5\u627e\u5230\u7684\u5305\u7684\u7248\u672c\u662f\u5426\u548c<code>VERSION</code>\u517c\u5bb9 <code>EXACT</code> \u53ef\u9009 \u5982\u679c\u6307\u5b9a\u8be5\u53c2\u6570\uff0c\u5219\u8868\u793a\u9700\u8981\u5bfb\u627e\u5fc5\u987b\u5b8c\u5168\u5339\u914d\u7684\u7248\u672c\u800c\u4e0d\u662f\u517c\u5bb9\u7248\u672c \u914d\u5408<code>VERSION</code>\u4f7f\u7528 <code>REQUIRED</code> \u53ef\u9009 \u8868\u793a\u4e00\u5b9a\u8981\u627e\u5230\u5305\uff0c\u627e\u4e0d\u5230\u7684\u8bdd\u5c31\u7acb\u5373\u505c\u6389\u6574\u4e2a CMake \u89e3\u6790\u8fc7\u7a0b <code>QUIET</code> \u53ef\u9009 \u8868\u793a\u5982\u679c\u67e5\u627e\u5931\u8d25\uff0c\u4e0d\u4f1a\u5728\u5c4f\u5e55\u8fdb\u884c\u8f93\u51fa \u4e0d\u5f97\u4e0e<code>REQUIRED</code>\u642d\u914d <code>MODULE</code> \u53ef\u9009 \u524d\u9762\u63d0\u5230\u8bf4 \u201c Module \u6a21\u5f0f\u6267\u884c\u5931\u8d25\uff0c\u624d\u4f1a\u8fdb\u5165 Config \u6a21\u5f0f\u201d\uff0c\u4f46\u662f\u5047\u5982\u52a0\u5165\u4e86<code>MODULE</code>\u9009\u9879\uff0c\u90a3\u4e48\u5c31\u53ea\u5728 Module \u6a21\u5f0f\u67e5\u627e\uff0c\u5982\u679c Module \u6a21\u5f0f\u4e0b\u67e5\u627e\u5931\u8d25\u5e76\u4e0d\u5207\u6362\u5230 Config \u6a21\u5f0f\u67e5\u627e\u3002 <code>COMPONENTS</code> \u53ef\u9009 \u8868\u793a\u67e5\u627e\u7684\u5305\u4e2d\u5fc5\u987b\u8981\u627e\u5230\u7684\u7ec4\u4ef6(components)\uff0c\u5982\u679c\u6709\u4efb\u4f55\u4e00\u4e2a\u627e\u4e0d\u5230\u5c31\u7b97\u5931\u8d25\uff0c\u7c7b\u4f3c\u4e8e<code>REQUIRED</code>\uff0c\u5bfc\u81f4CMake \u505c\u6b62\u6267\u884c\u3002"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#32","title":"3.2 \u6587\u4ef6\u641c\u7d22\u8fc7\u7a0b","text":"<ul> <li>#2 \u63d0\u5230\u8fc7\uff0cModule \u6a21\u5f0f\u4e0b\u9700\u8981\u67e5\u627e\u5230\u540d\u4e3a <code>Find&lt;PackageName&gt;.cmake</code> \u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u7684\u67e5\u627e\u8fc7\u7a0b\u53ea\u6d89\u53ca\u5230\u4e24\u4e2a\u8def\u5f84\uff1a<code>CMAKE_MODULE_PATH</code> \u548c CMake \u5b89\u88c5\u8def\u5f84\u4e0b\u7684 Modules \u76ee\u5f55\u3002\u5373\uff0c\u641c\u7d22\u8def\u5f84\u4f9d\u6b21\u4e3a\uff1a</li> <li>\u5148\u5728 <code>CMAKE_MODULE_PATH</code> \u53d8\u91cf\u5bf9\u5e94\u7684\u8def\u5f84\u4e2d\u67e5\u627e\u3002\u5982\u679c\u8def\u5f84\u4e3a\u7a7a\uff0c\u6216\u8005\u8def\u5f84\u4e2d\u67e5\u627e\u5931\u8d25\uff0c\u5219\u5728 CMake \u5b89\u88c5\u76ee\u5f55\uff08\u5373 <code>CMAKE_ROOT</code> \u53d8\u91cf\uff09\u4e0b\u7684 Modules \u76ee\u5f55\u4e2d\u67e5\u627e\u3002\u8fd9\u4e2a\u76ee\u5f55\u901a\u5e38\u4e3a <code>/usr/share/cmake-x.xx/Modules</code>\u3002\u8fd9\u4e24\u4e2a\u53d8\u91cf\u53ef\u4ee5\u5728<code>CMakeLists.txt</code>\u6587\u4ef6\u4e2d\u6253\u5370\u67e5\u770b\u5177\u4f53\u5185\u5bb9\uff1a</li> <li>\u5176\u4e2d <code>CMAKE_MODULE_PATH</code> \u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u5229\u7528 <code>set</code> \u547d\u4ee4\u5bf9\u8be5\u53d8\u91cf\u8fdb\u884c\u8bbe\u7f6e\u3002</li> <li>\u5728\u5b89\u88c5 CMake \u65f6\uff0cCMake \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5f88\u591a\u5f00\u53d1\u5e93\u7684 <code>FindXXX.cmake</code> \u6a21\u5757\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u90fd\u5b9a\u4e49\u5728 <code>CMAKE_ROOT</code> \u6307\u4ee3\u8def\u5f84\u7684\u6587\u4ef6\u5939\u91cc\u9762\u3002\u53ef\u4ee5\u5728\u7ec8\u7aef\u901a\u8fc7\u952e\u5165\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u67e5\u8be2</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#4-config","title":"4. Config \u6a21\u5f0f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#41","title":"4.1 \u7528\u6cd5","text":"<p>Config \u6a21\u5f0f\u4e0b <code>find_package</code> \u7684\u5b8c\u6574\u547d\u4ee4\u53c2\u6570\u5982\u4e0b\uff0c\u4e0d\u5fc5\u5168\u90e8\u4e86\u89e3\u3002</p> <ul> <li>\u76f8\u6bd4\u4e8e Module \u6a21\u5f0f\uff0cConfig \u6a21\u5f0f\u7684\u53c2\u6570\u66f4\u591a\uff0c\u4e5f\u66f4\u590d\u6742\uff0c\u4f46\u5b9e\u9645\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6211\u4eec\u5e76\u4e0d\u4f1a\u7528\u5230\u6240\u6709\u53c2\u6570\uff0c\u5927\u90e8\u5206\u53c2\u6570\u90fd\u662f\u53ef\u9009\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u638c\u63e1\u57fa\u672c\u7684\u53c2\u6570\u7528\u6cd5\u5373\u53ef\u3002</li> <li>\u5176\u4e2d\u5177\u4f53\u67e5\u627e\u5e93\u5e76\u7ed9 <code>XXX_INCLUDE_DIRS</code> \u548c <code>XXX_LIBS</code> \u4e24\u4e2a\u53d8\u91cf\u8d4b\u503c\u7684\u64cd\u4f5c\u7531 <code>XXXConfig.cmake</code> \u6a21\u5757\u5b8c\u6210\u3002</li> <li>\u4e24\u79cd\u6a21\u5f0f\u770b\u8d77\u6765\u4f3c\u4e4e\u5dee\u4e0d\u591a\uff0c\u4e0d\u8fc7 CMake \u9ed8\u8ba4\u91c7\u53d6 Module \u6a21\u5f0f\uff0c\u5982\u679c Module \u6a21\u5f0f\u672a\u627e\u5230\u5e93\uff0c\u624d\u4f1a\u91c7\u53d6 Config \u6a21\u5f0f\u3002\u603b\u4e4b\uff0cConfig \u6a21\u5f0f\u662f\u4e00\u4e2a\u5907\u9009\u7b56\u7565\u3002\u901a\u5e38\uff0c\u5e93\u5b89\u88c5\u65f6\u4f1a\u62f7\u8d1d\u4e00\u4efd <code>XXXConfig.cmake</code> \u5230\u7cfb\u7edf\u76ee\u5f55\u4e2d\uff0c\u56e0\u6b64\u5728\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u641c\u7d22\u8def\u5f84\u65f6\u4e5f\u53ef\u4ee5\u987a\u5229\u627e\u5230\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#42","title":"4.2 \u6587\u4ef6\u641c\u7d22\u8fc7\u7a0b","text":"<ul> <li> <p>\u4e0e Module \u6a21\u5f0f\u4e0d\u540c\uff0cConfig \u6a21\u5f0f\u9700\u8981\u67e5\u627e\u7684\u8def\u5f84\u975e\u5e38\u975e\u5e38\u975e\u5e38\u591a\uff0c\u4e5f\u8981\u5339\u914d\u5f88\u591a\u7684\u53ef\u80fd\u6027\uff0c\u56e0\u6b64\u6709\u4e9b\u8def\u5f84\u662f\u9996\u5148\u4f5c\u4e3a\u6839\u76ee\u5f55\uff0c\u7136\u540e\u8fdb\u884c\u5b50\u76ee\u5f55\u7684\u5339\u914d\uff0c\u800c\u6709\u4e9b\u5219\u662f\u76f4\u63a5\u6307\u5b9a\u5230\u5177\u4f53\u7684 <code>XXXConfig.cmake</code> \u6587\u4ef6\u3002\u5177\u4f53\u5c06\u4f1a\u6309\u7167\u5982\u4e0b\u987a\u5e8f\u8fdb\u884c\u67e5\u627e\uff1a</p> </li> <li> <p><code>&lt;PackageName&gt;_DIR</code></p> </li> <li><code>CMAKE_PREFIX_PATH</code>\u3001<code>CMAKE_FRAMEWORK_PATH</code>\u3001<code>CMAKE_APPBUNDLE_PATH</code></li> <li><code>PATH</code>\u73af\u5883\u53d8\u91cf\u8def\u5f84</li> <li><code>CMAKE_SYSTEM_PREFIX_PATH</code>\u7b49\u7cfb\u7edf\u53d8\u91cf\u8def\u5f84</li> </ul> <p>\\&lt;PackageName&gt;_DIR</p> <p>\u9996\u5148\u641c\u7d22\u540d\u4e3a<code>&lt;PackageName&gt;_DIR</code>\u7684 CMake \u53d8\u91cf\u6216\u73af\u5883\u53d8\u91cf\u8def\u5f84\uff0c\u8fd9\u4e2a\u53d8\u91cf\u9ed8\u8ba4\u4e3a\u7a7a\u3002\u8fd9\u4e2a\u8def\u5f84\u9700\u8981\u76f4\u63a5\u6307\u5b9a\u5230<code>&lt;PackageName&gt;Config.cmake</code>\u6216<code>&lt;lower-case-package-name&gt;-config.cmake</code>\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u624d\u80fd\u627e\u5230\uff0c\u53ef\u53c2\u8003\u4ee5\u4e0b\u793a\u4f8b\uff1a</p> <p>CMAKE_PREFIX_PATH \u7b49\u53d8\u91cf</p> <p>\u5982\u679c\u6309\u7167<code>&lt;PackageName&gt;_DIR</code>\u641c\u7d22\u4e0d\u5230\u76f8\u5e94\u7684<code>XXXConfig.cmake</code>\u6587\u4ef6\u7684\u8bdd\uff0c\u5219\u4f1a\u67e5\u627e\u540d\u4e3a<code>CMAKE_PREFIX_PATH</code>\u3001<code>CMAKE_FRAMEWORK_PATH</code>\u3001<code>CMAKE_APPBUNDLE_PATH</code>\u7684 CMake \u53d8\u91cf\u6216\u73af\u5883\u53d8\u91cf\u8def\u5f84\u3002\u8fd9\u4e9b\u53d8\u91cf\u6307\u5b9a\u7684\u8def\u5f84\u5c06\u4f5c\u4e3a\u67e5\u627e\u65f6\u7684\u6839\u76ee\u5f55\uff0c\u5b83\u4eec\u9ed8\u8ba4\u90fd\u4e3a\u7a7a\u3002\u6839\u76ee\u5f55\u7684\u76f8\u5173\u5185\u5bb9\u5728\u540e\u6587\u4f1a\u63d0\u53ca\u3002</p> <p>::: tip \u5982\u679c\u4f60\u7535\u8111\u4e2d\u5b89\u88c5\u4e86 ROS \u5e76\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u4f60\u5728\u7ec8\u7aef\u6267\u884c <code>echo $CMAKE_PREFIX_PATH</code> \u4f1a\u53d1\u73b0 ROS \u4f1a\u5c06 <code>CMAKE_PREFIX_PATH</code> \u8fd9\u4e2a\u53d8\u91cf\u8bbe\u7f6e\u4e3a ROS \u4e2d\u7684\u5e93\u7684\u8def\u5f84\uff0c\u610f\u601d\u662f\u4f1a\u9996\u5148\u67e5\u627e ROS \u5b89\u88c5\u7684\u5e93\uff0c\u5982\u679c\u6070\u597d\u4f60\u5728 ROS \u4e2d\u5b89\u88c5\u4e86 OpenCV \u5e93\uff0c\u5c31\u4f1a\u53d1\u73b0\u9996\u5148\u627e\u5230\u7684\u662f ROS \u4e2d\u7684 OpenCV\uff0c\u800c\u4e0d\u662f\u4f60\u81ea\u5df1\u5b89\u88c5\u5230\u7cfb\u7edf\u4e2d\u7684 OpenCV\u3002 :::</p> <p>PATH \u73af\u5883\u53d8\u91cf\u8def\u5f84</p> <ul> <li>\u82e5\u8fd8\u627e\u4e0d\u5230\uff0c\u5219\u662f\u641c\u7d22 <code>PATH</code> \u73af\u5883\u53d8\u91cf\u8def\u5f84\uff0c\u8fd9\u4e2a\u8def\u5f84\u4e5f\u662f\u6839\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a\u7cfb\u7edf\u73af\u5883 <code>PATH</code> \u73af\u5883\u53d8\u91cf\u503c\u3002</li> <li>\u5176\u5b9e\u8fd9\u4e2a\u8def\u5f84\u624d\u662f Config \u6a21\u5f0f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u80fd\u591f\u67e5\u627e\u5230\u5b89\u88c5\u5230\u7cfb\u7edf\u4e2d\u5404\u79cd\u5e93\u7684\u539f\u56e0\u3002\u8fd9\u4e2a\u8def\u5f84\u7684\u67e5\u627e\u89c4\u5219\u4e3a\uff1a\u904d\u5386 <code>PATH</code> \u73af\u5883\u53d8\u91cf\u4e2d\u7684\u5404\u8def\u5f84\uff0c\u5982\u679c\u8be5\u8def\u5f84\u5982\u679c\u4ee5 <code>bin</code> \u6216 <code>sbin</code> \u7ed3\u5c3e\uff0c\u5219\u81ea\u52a8\u56de\u9000\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\u5f97\u5230\u6839\u76ee\u5f55\u3002\u5728\u7ec8\u7aef\u952e\u5165\u4ee5\u4e0b\u5185\u5bb9\u4ee5\u67e5\u770b\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u8def\u5f84\uff1a</li> </ul> <pre><code>echo $PATH\n</code></pre> <p>\u4e00\u822c\u60c5\u51b5\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff0c\u8fd9\u91cc\u5bf9\u6bcf\u4e2a\u8def\u5f84\u90fd\u505a\u4e86\u6362\u884c\u5904\u7406\uff0c\u5e76\u4e14\u52a0\u4e86\u4e9b\u7b80\u5355\u7684\u6ce8\u91ca\u3002</p> <pre><code>/home/&lt;user-name&gt;/.local/bin: # \u56de\u9000\u5230 /home/&lt;user-name&gt;/.local \u540e\u518d\u8fdb\u884c\u641c\u7d22\n/usr/local/sbin:              # \u56de\u9000\u5230 /usr/local \u540e\u518d\u8fdb\u884c\u641c\u7d22\n/usr/local/bin:               # \u540c\u4e0a\n/usr/sbin:                    # \u56de\u9000\u5230 /usr \u540e\u518d\u8fdb\u884c\u641c\u7d22\n/usr/bin:                     # \u540c\u4e0a\n/sbin:                        # \u56de\u9000\u5230 / \u540e\u518d\u8fdb\u884c\u641c\u7d22\n/bin:                         # \u540c\u4e0a\n/usr/games:\n/usr/local/games:\n/snap/bin                     # \u56de\u9000\u5230 /snap \u540e\u518d\u8fdb\u884c\u641c\u7d22\n</code></pre> <p>\u8bf4\u660e\u8fd9\u4e9b\u8def\u5f84\u4f1a\u88ab\u9ed8\u8ba4\u6dfb\u52a0\u5728 Config \u6a21\u5f0f\u7684\u641c\u7d22\u8def\u5f84\u4e2d\u3002</p> <p>CMAKE_SYSTEM_PREFIX_PATH \u7b49\u53d8\u91cf</p> <ul> <li>\u6211\u4eec\u5728\u5b89\u88c5 OpenCV \u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5728 <code>cmake-gui</code> \u4e2d\u4fee\u6539 <code>CMAKE_INSTALL_PREFIX</code> \u53d8\u91cf\u7684\u5185\u5bb9\uff0c\u628a OpenCV \u5b89\u88c5\u5728 <code>/opt/opencv</code> \u4e0b\uff0c\u6211\u4eec\u5728\u4f7f\u7528 <code>find_package</code> \u65f6\u4e5f\u4e0d\u9700\u8981\u6307\u540d\u8def\u5f84\uff0c\u8bf4\u660e\u9664\u4e86\u4e0a\u9762\u7684\u4e00\u4e9b\u53d8\u91cf\u4e4b\u5916\uff0c\u8fd8\u5b58\u5728\u53e6\u5916\u4e00\u7cfb\u5217\u8def\u5f84\u3002\u8fd9\u91cc\u5217\u51fa\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u53d8\u91cf\uff1a<code>CMAKE_SYSTEM_PREFIX_PATH</code></li> <li>\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a CMakeLists.txt \u6587\u4ef6\u4e0b\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</li> </ul> <pre><code>foreach(path ${CMAKE_SYSTEM_PREFIX_PATH})\n  message(STATUS \"${path}\")\nendforeach()\n</code></pre> <p>\u4f1a\u6253\u5370\u51fa\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>-- /usr/local\n-- /usr\n-- /\n-- /usr/local\n-- /usr/local\n-- /usr/X11R6\n-- /usr/pkg\n-- /opt\n</code></pre> <ul> <li>\u7559\u610f\u8be5\u53d8\u91cf\u6700\u540e\u4e00\u70b9\u5305\u542b\u7684\u5185\u5bb9\uff0c\u8fd9\u6b63\u662f\u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e09\u65b9\u5e93\u5b89\u88c5\u5728 <code>/opt</code> \u7684\u539f\u56e0\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5f88\u591a\u8f6f\u4ef6\u5305\u90fd\u662f\u9ed8\u8ba4\u5b89\u88c5\u5728 <code>/opt</code> \u4e0b\u7684\uff0c\u8b6c\u5982 ROS\u3002</li> </ul> <p>::: tip \u8865\u5145 \u76f8\u5173\u5305\u542b\u7684\u5185\u5bb9\u8fd8\u6709\u975e\u5e38\u4e4b\u591a\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u9605\u8bfb\u5b98\u7f51\u548c\u6e90\u7801\uff0c\u8fd9\u91cc\u7ed9\u51fa\u5b98\u7f51\u548c\u6e90\u7801 GitLab \u5730\u5740\uff1a - <code>find_package</code> \u5bfb\u627e\u5305\u542b\u8def\u5f84\u7684\u6e90\u7801 GitLab\uff1a\u6e90\u7801 GitLab \u5730\u5740 - <code>find_package</code> \u5bfb\u627e\u5305\u542b\u8def\u5f84\u7684\u5b98\u7f51\uff1a\u5b98\u7f51\u7f51\u5740 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#43","title":"4.3 \u6839\u76ee\u5f55\u8def\u5f84\u8be6\u89e3","text":"<p>\u4e0a\u8ff0\u63d0\u53ca\u5230\u7684\u6839\u76ee\u5f55\u8def\u5f84\uff0c\u5728\u6307\u660e\u8fd9\u4e9b\u5185\u5bb9\u65f6\uff0cCMake \u4f1a\u9996\u5148\u68c0\u67e5\u8fd9\u4e9b\u6839\u76ee\u5f55\u8def\u5f84\u4e0b\u662f\u5426\u6709\u540d\u4e3a <code>&lt;PackageName&gt;Config.cmake</code> \u6216 <code>&lt;lower-case-package-name&gt;-config.cmake</code> \u7684\u6a21\u5757\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\uff0cCMake \u4f1a\u7ee7\u7eed\u68c0\u67e5\u6216\u5339\u914d\u8fd9\u4e9b\u6839\u76ee\u5f55\u4e0b\u7684\u4ee5\u4e0b\u8def\u5f84\uff1a</p> <pre><code>&lt;prefix&gt;/(lib/&lt;arch&gt;|lib|share)/cmake/&lt;name&gt;*/\n&lt;prefix&gt;/(lib/&lt;arch&gt;|lib|share)/&lt;name&gt;*/\n&lt;prefix&gt;/(lib/&lt;arch&gt;|lib|share)/&lt;name&gt;*/(cmake|CMake)/\n</code></pre> <p>\u5176\u4e2d\u4e3a <code>arch</code> \u7cfb\u7edf\u67b6\u6784\u540d\uff0c\u5982 Ubuntu \u4e0b\u4e00\u822c\u4e3a\uff1a<code>x86_64-linux-gnu</code>\uff0c\u6574\u4e2a <code>(lib/&lt;arch&gt;|lib|share)</code> \u4e3a\u53ef\u9009\u8def\u5f84\uff0c\u4f8b\u5982 OpenCV \u5e93\u800c\u8a00\u4f1a\u68c0\u67e5\u6216\u5339\u914d\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li><code>&lt;prefix&gt;/lib/x86_64-linux-gnu/opencv4/</code></li> <li><code>&lt;prefix&gt;/lib/cmake/opencv4/</code></li> <li><code>&lt;prefix&gt;/share/opencv4/</code></li> <li>\u2026\u2026</li> </ol> <p>::: warning \u4e0a\u6587\u63d0\u53ca\u8fc7\u7684 <code>&lt;PackageName&gt;_DIR</code> \u8def\u5f84\u4e0d\u662f\u6839\u76ee\u5f55\u8def\u5f84 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#5-findxxxcmake","title":"5. FindXXX.cmake \u7b80\u5355\u5199\u6cd5","text":"<p>\u6211\u4eec\u4f7f\u7528 Module \u6a21\u5f0f\uff0c\u5199\u4e00\u4e2a <code>FindXXX.cmake</code> \u6587\u4ef6\uff0c\u6765\u4f53\u9a8c\u4e00\u4e0b\u81ea\u5df1\u7684<code>find_package</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#51","title":"5.1 \u6848\u4f8b","text":"<p>\u5047\u8bbe\u67d0\u5bb6\u76f8\u673a\u5382\u5546\u7684 SDK \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5047\u8bbe\u5c06\u5176\u653e\u5728\u4e86 <code>/opt/camera</code> \u6587\u4ef6\u5939\u4e0b\uff0c\u8bf7\u521b\u5efa\u4e00\u4e2a <code>CameraDemo</code> \u9879\u76ee\uff0c\u5e76\u8bbe\u8ba1\u4e00\u4e2a <code>FindCamera.cmake</code> \u6587\u4ef6\u4f9b\u672c\u9879\u76ee\u4e2d\u7684\u5176\u4f59\u76ee\u6807\u5305\u542b\uff0c\u4f7f\u5176\u80fd\u591f\u94fe\u63a5\u81f3\u672c\u76f8\u673a\u7684 SDK\u3002</p> <pre><code>.\n\u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CameraApi.h\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CameraDefine.h\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 CameraStatus.h\n\u2514\u2500\u2500 lib\n    \u2514\u2500\u2500 libMVSDK.so\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#52","title":"5.2 \u5206\u6790","text":"<p>\u6211\u4eec\u5728\u301005\u3011\u76ee\u6807\u6784\u5efa\u7684\u5bfc\u5165\u76ee\u6807\u4e2d\u9047\u5230\u8fc7\u7c7b\u4f3c\u7684\u60c5\u51b5\uff0c\u4f46\u8fd9\u91cc\u7684\u76f8\u673a SDK \u5e76\u6ca1\u6709\u4f4d\u4e8e\u672c\u9879\u76ee\u4e2d\u3002</p> <p>\u6ce8\u610f\u5230\u76f8\u673a\u5382\u5546\u7684 SDK \u5e76\u65e0\u63d0\u4f9b\u76f8\u5e94\u7684 <code>CameraConfig.cmake</code> \u6216 <code>camera-config.cmake</code> \u6587\u4ef6\uff0c\u56e0\u6b64\u9700\u8981\u81ea\u5df1\u624b\u5199 <code>FindCamera.cmake</code> \u6587\u4ef6\u3002</p> <p>\u6211\u4eec\u5148\u628a\u76f8\u673a\u9879\u76ee\u7684\u90e8\u7f72\u6846\u67b6\u7ed9\u5927\u6982\u5b9a\u4e49\u597d\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 cmake\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 FindCamera.cmake\n\u251c\u2500\u2500 CMakeLists.txt\n\u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u6d89\u53ca\u5230\u7684\u4e24\u4e2a CMake \u6587\u4ef6\u5df2\u7ecf\u6807\u7ea2\uff0c\u8fd9\u91cc\u7b80\u5355\u63cf\u8ff0\u4e00\u4e0b</p> <ul> <li> <p><code>FindCamera.cmake</code>\uff1a\u5176\u4ed6\u5e93\u76f4\u63a5\u5305\u542b\u3001\u94fe\u63a5 SDK \u63d0\u4f9b\u7684\u5e93\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u9700\u8981\u4e8b\u5148\u627e\u5230 SDK \u7684\u8def\u5f84\uff0c\u6b64\u6587\u4ef6\u5c31\u662f\u4e3a\u4e86\u63d0\u524d\u8ba9\u6574\u4e2a CMake \u5de5\u7a0b\u627e\u5230\u6b64 SDK\u3002</p> </li> <li> <p>\u9879\u76ee\u6839\u76ee\u5f55\u7684 <code>CMakeLists.txt</code>\uff1a\u6846\u67b6\u6574\u4f53\u914d\u7f6e\uff0c\u5305\u62ec\u9879\u76ee\u3001\u7f16\u8bd1\u5c5e\u6027\u3001\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u914d\u7f6e\u3002\u8fd9\u91cc <code>main.cpp</code> \u76f4\u63a5\u7528\u5230\u4e86 SDK \u7684\u5185\u5bb9\uff0c\u901a\u8fc7\u4ee5\u4e0b\u8bed\u53e5\u8fdb\u884c\u94fe\u63a5</p> </li> </ul> <pre><code>target_link_libraries(\n  demo\n  PRIVATE camera\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#53","title":"5.3 \u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#531-cmakeliststxt","title":"5.3.1 \u9879\u76ee\u6839\u76ee\u5f55\u7684 CMakeLists.txt","text":"<p>\u2460 \u4e3b\u8981\u76ee\u7684</p> <ol> <li>\u8bbe\u7f6e <code>CMAKE_MODULE_PATH</code> \u6a21\u5757\u6a21\u5f0f\u7684\u5de5\u4f5c\u8def\u5f84</li> <li>\u89e3\u6790 <code>FindCamera.cmake</code>\uff0c\u5e76\u627e\u5230 camera \u5bf9\u5e94\u7684\u5e93</li> <li>\u521b\u5efa\u53ef\u6267\u884c\u7a0b\u5e8f\u76ee\u6807\u5e76\u94fe\u63a5</li> </ol> <p>\u2461 \u793a\u4f8b\u4ee3\u7801</p> <pre><code>cmake_minimum_required(VERSION 3.10)\nproject(CameraDemo)\n# \u672c\u7bc7 2.2.2 \u8282\u63d0\u53ca\u8fc7\uff0c\u4e0b\u4e00\u53e5\u662f\u8ba9 CMake \u5de5\u7a0b\u80fd\u591f\u627e\u5230 FindCamera.cmake\nlist(CMAKE_MODULE_PATH APPEND \"${CMAKE_SOURCE_DIR}/cmake\")\n\n# \u627e\u5230 SDK\nfind_package(Camera)\n\n# \u6dfb\u52a0\u53ef\u6267\u884c\u6587\u4ef6\u5e76\u94fe\u63a5\nadd_executable(demo main.cpp)\ntarget_link_libraries(\n  demo\n  PRIVATE camera\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#532-findcameracmake","title":"5.3.2 FindCamera.cmake","text":"<p>\u2460 \u4e3b\u8981\u4efb\u52a1</p> <ol> <li>\u63d0\u4f9b\u4e00\u4e2a CMake \u76ee\u6807\u53d8\u91cf\uff08\u4e00\u822c\u662f\u5bfc\u5165\u76ee\u6807\uff09</li> <li>\u627e\u5230 SDK \u7684\u5934\u6587\u4ef6</li> <li>\u627e\u5230 SDK \u7684\u5e93\u6587\u4ef6</li> <li>\u63d0\u4f9b\u6709\u65e0\u627e\u5230\u7684\u72b6\u6001\u4fe1\u606f</li> </ol> <p>\u2461 \u8be6\u7ec6\u6ce8\u91ca\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code># \u8bbe\u7f6e mvsdk \u7684\u8def\u5f84\uff08\u53ef\u81ea\u884c\u8bbe\u7f6e\uff09\nset(mvsdk_root \"/opt/camera\")\n\n# \u53d1\u73b0\u5934\u6587\u4ef6\u8def\u5f84\uff0c\u5e76\u8bbe\u7f6e Camera_INCLUDE_DIRS\nfind_path(\n  Camera_INCLUDE_DIR\n  NAMES CameraApi.h CameraDefine.h CameraStatus.h\n  PATHS \"${mvsdk_root}/include\"\n  NO_DEFAULT_PATH # \u9ed8\u8ba4\u8def\u5f84\u4e0b\u4f1a\u5305\u542b /usr/local \u7b49\u5185\u5bb9\uff0c\u8fd9\u53e5\u8bdd\u8868\u660e\u4e0d\u5305\u542b\u9ed8\u8ba4\u8def\u5f84\n)\n\n# \u53d1\u73b0\u5e93\u6587\u4ef6\u8def\u5f84\nfind_library(\n  Camera_LIB\n  NAMES \"libMVSDK.so\"\n  PATHS \"${mvsdk_root}/lib\"\n  NO_DEFAULT_PATH # \u540c find_path\n)\n\n# \u8bbe\u7f6e\u5bfc\u5165\u76ee\u6807\uff0c\u79f0\u4e3a mvsdk\nif(NOT TARGET mvsdk)\n  # \u5c06\u76ee\u6807\u8bbe\u7f6e\u4e3a\u5728\u9879\u76ee\u4e2d\u5168\u5c40\u53ef\u89c1 GLOBAL\n  add_library(mvsdk SHARED IMPORTED GLOBAL)\n  # \u4e3a\u5bfc\u5165\u76ee\u6807\u6dfb\u52a0\u76f8\u5173\u5c5e\u6027\n  set_target_properties(mvsdk PROPERTIES\n    INTERFACE_INCLUDE_DIRECTORIES \"${Camera_INCLUDE_DIR}\"\n    IMPORTED_LOCATION \"${Camera_LIB}\"\n  )\nendif()\n\nset(Camera_INCLUDE_DIRS ${Camera_INCLUDE_DIR})\nset(Camera_LIBS mvsdk)\n\n# \u8fd9\u91cc\u7528\u5230\u4e86\u4e00\u4e2a CMake \u81ea\u5e26\u7684\u51fd\u6570\uff0c\u4f1a\u6839\u636e\u6307\u5b9a\u5185\u5bb9\u8bbe\u7f6e Camera_FOUND \u53d8\u91cf\ninclude(FindPackageHandleStandardArgs)\n# \u610f\u4e3a\u5fc5\u9700\u7684\u53c2\u6570\u662f Camera_LIBS\uff0c\u5982\u679c Camera_LIBS \u4e3a\u7a7a\uff0c\u5219 Camera_FOUND\n# \u5c06\u88ab\u8bbe\u7f6e\u4e3a FALSE\uff0c\u5e76\u5728\u4f7f\u7528 find_package(Camera REQUIRED) \u65f6\u4e5f\u4f1a\u62a5\u9519\nfind_package_handle_standard_args(\n  Camera\n  REQUIRED_VARS Camera_LIBS Camera_INCLUDE_DIRS\n)\n</code></pre> <p>\u2462 FindPackageHandleStandardArgs\u8be6\u89e3</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/08-find_package%20%E8%AF%A6%E8%A7%A3/#6-xxxconfigcmake","title":"6. XXXConfig.cmake","text":"<p>\u5173\u4e8e <code>XXXConfig.cmake</code> \u6216 <code>xxx-config.cmake</code> \u7684\u5199\u6cd5\u4f1a\u5728\u540e\u7eed\u6587\u7ae0\u4e2d\u8be6\u7ec6\u8bf4\u660e\uff1a</p> <ul> <li>\u301009\u3011\u751f\u6210\u5668\u8868\u8fbe\u5f0f</li> <li>\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"\u301009\u3011\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#1","title":"1. \u524d\u8a00","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#11-cmake","title":"1.1 CMake \u5de5\u4f5c\u6d41\u7a0b","text":"<p>CMake \u5de5\u4f5c\u6d41\u7a0b\u5206\u4e3a\u4e24\u6b65\uff0c==\u914d\u7f6e\u9636\u6bb5==\u548c==\u751f\u6210\u9636\u6bb5==\u3002\u6211\u4eec\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165<code>cmake ..</code>\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5728\u8f93\u51fa\u5185\u5bb9\u7684\u6700\u540e\u770b\u5230\u8fd9\u6837\u7684\u4e24\u884c\u8bdd</p> <pre><code>-- Configuring done\n-- Generating done\n</code></pre> <p>\u5206\u522b\u6307\u4ee3\u4e86\u8fd9\u4e24\u4e2a\u9636\u6bb5</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#111-configure","title":"1.1.1 Configure \u9636\u6bb5","text":"<p>\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0cCMake \u4f1a\u8bfb\u53d6\u4f60\u7684<code>CMakeLists.txt</code>\u6587\u4ef6\uff0c\u5e76\u6267\u884c\u5176\u4e2d\u7684\u547d\u4ee4\u3002\u8fd9\u4e9b\u547d\u4ee4\u53ef\u80fd\u4f1a\u68c0\u67e5\u7cfb\u7edf\u7684\u7279\u6027\uff08\u4f8b\u5982\uff0c\u67e5\u627e\u5e93\u6216\u8005\u7f16\u8bd1\u5668\u7279\u6027\uff09\uff0c\u8bbe\u7f6e\u53d8\u91cf\uff0c\u6216\u8005\u5b9a\u4e49\u6784\u5efa\u76ee\u6807\uff08\u4f8b\u5982\u5e93\u3001\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6216\u8005\u5176\u4ed6\u4f2a\u76ee\u6807\uff09\u3002\u8fd9\u4e2a\u9636\u6bb5\u7684\u4e3b\u8981\u76ee\u7684\u662f\u786e\u5b9a\u6784\u5efa\u8fc7\u7a0b\u9700\u8981\u7684\u6240\u6709\u4fe1\u606f\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#112-generate","title":"1.1.2 Generate \u9636\u6bb5","text":"<p>\u5728\u6b64\u9636\u6bb5 CMake \u4f1a\u751f\u6210\u5b9e\u9645\u7684\u5efa\u6784\u6863\u3002\u8fd9\u4e9b\u6587\u4ef6\u5305\u542b\u4e86\u5b9e\u9645\u7f16\u8bd1\u548c\u94fe\u63a5\u4f60\u7684\u4ee3\u7801\u6240\u9700\u8981\u7684\u547d\u4ee4\uff0c\u5305\u62ec</p> <ul> <li>\u5404\u79cd\u7f16\u8bd1\u9009\u9879</li> <li>\u4e0e\u76ee\u6807\u76f8\u5173\u7684\u64cd\u4f5c</li> </ul> <p>\u7684\u547d\u4ee4\u90fd\u662f\u5728\u751f\u6210\u9636\u6bb5\u6dfb\u52a0\u81f3\u5efa\u6784\u6863\u4e2d\u7684\u3002\u6bd4\u65b9\u8bf4</p> <pre><code>target_include_directories(\n  demo\n  PUBLIC include\n)\n\ntarget_link_libraries(\n  demo\n  PRIVATE core\n)\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u547d\u4ee4\u5747\u751f\u6548\u4e8e==\u751f\u6210\u9636\u6bb5==\u3002\u800c\u540e\u6587\u51c6\u5907\u4ecb\u7ecd\u7684\u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff0c\u5c31\u4f5c\u7528\u4e8e\u751f\u6210\u9636\u6bb5\u3002\u4e5f\u6b63\u56e0\u5982\u6b64\uff0c\u53ea\u6709\u80fd\u591f\u5728\u751f\u6210\u9636\u6bb5\u751f\u6548\u7684\u547d\u4ee4\u624d\u80fd\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff0c\u800c\u5728\u914d\u7f6e\u9636\u6bb5\u751f\u6548\u7684\u547d\u4ee4\uff0c\u4f8b\u5982\u7528\u4e8e\u8bbe\u7f6e\u53d8\u91cf\u7684 <code>set</code> \u547d\u4ee4\u5e76\u4e0d\u652f\u6301\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#12-cmake","title":"1.2 CMake \u7684\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u662f\u4ec0\u4e48","text":"<p>\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5728\u751f\u6210\u6784\u5efa\u7cfb\u7edf\u671f\u95f4\u8fdb\u884c\u8ba1\u7b97\uff0c\u4ee5\u751f\u6210\u7279\u5b9a\u4e8e\u6bcf\u4e2a\u751f\u6210\u914d\u7f6e\u7684\u4fe1\u606f\u3002\u4ed6\u4eec\u6709\u5982\u4e0b\u5f62\u5f0f\uff1a<code>$&lt;...&gt;</code>\u3002\u53ef\u53c2\u8003Generator Expression\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#13","title":"1.3 \u4e3a\u4ec0\u4e48\u8981\u5f15\u5165\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":"<p>\u5728\u8bbe\u7f6e\u67d0\u4e9b\u7f16\u8bd1\u9009\u9879\u7684\u65f6\u5019\uff0c\u5982\u679c\u5f53\u6761\u4ef6\u8f83\u591a\uff0c\u8981\u5236\u4f5c\u7684\u7f16\u8bd1\u9009\u9879\u7248\u672c\u4e5f\u76f8\u5e94\u589e\u591a\u3002\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u8bed\u6cd5\uff0c\u8ba9\u4e00\u90e8\u5206\u7f16\u8bd1\u4fe1\u606f\u5728\u751f\u6210\u9636\u6bb5\u81ea\u52a8\u5b8c\u6210\uff0c\u65e0\u9700\u5728\u914d\u7f6e\u9636\u6bb5\u8bbe\u7f6e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code># \u73b0\u8ba1\u5212\u7ed9 Debug \u548c Release \u4e24\u79cd\u6784\u5efa\u7c7b\u578b\u6dfb\u52a0\u4e0d\u540c\u7684\u7f16\u8bd1\u9009\u9879\nset(CMAKE_C_FLAGS_DEBUG \"${CMAKE_C_FLAGS_DEBUG} -g -O0\")\nset(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -g -O0\")\nset(CMAKE_C_FLAGS_RELEASE \"${CMAKE_C_FLAGS_RELEASE} -O2\")\nset(CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE} -O2\")\n\n# \u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u53ef\u4ee5\u7b80\u5316\u6210\nadd_compile_options(\n  $&lt;$&lt;CONFIG:Debug&gt;:-g -O0&gt;\n  $&lt;$&lt;CONFIG:Release&gt;:-O2&gt;\n)\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>add_compile_options</code> \u5c31\u5c5e\u4e8e\u5728\u751f\u6210\u9636\u6bb5\u751f\u6548\u7684\u547d\u4ee4\u3002\u4ee5\u4e0a\u4ee3\u7801\u5c5e\u4e8e==\u6761\u4ef6\u5b9a\u4e49==\uff0c\u5373\u5728\u4e0d\u540c\u7684\u6761\u4ef6\u4e0b\u751f\u6210\u4e0d\u540c\u7684\u53d8\u91cf\u3001\u5b8f\u7b49\u5185\u5bb9\u3002\u5176\u4e2d\u8fd9\u6bb5\u4ee3\u7801\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u7684\u6548\u679c\u662f\uff0c\u5728\u4e0d\u540c\u7684\u6784\u5efa\u7c7b\u578b\u4e0b\uff08Debug\u3001Release\uff09\uff0c\u4f1a\u751f\u6210\u4e0d\u540c\u7684\u88ab\u6dfb\u52a0\u8fdb\u7f16\u8bd1\u9009\u9879\u7684\u5b57\u7b26\u4e32\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#2","title":"2. \u5e38\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#21","title":"2.1 \u5e03\u5c14\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#211","title":"2.1.1 \u903b\u8f91\u8fd0\u7b97\u7b26","text":"<ol> <li><code>$&lt;BOOL:string&gt;</code></li> </ol> <p>\u5982\u679c\u5b57\u7b26\u4e32\u4e3a\u7a7a\u3001<code>0</code>\u3001\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684<code>FALSE</code>\u3001<code>OFF</code>\u3001<code>N</code>\u3001<code>NO</code>\u3001<code>IGNORE</code>\u3001<code>NOTFOUND</code>\uff0c\u6216\u8005\u533a\u5206\u5927\u5c0f\u5199\u7684\u4ee5<code>-NOTFOUND</code>\u7ed3\u5c3e\u7684\u5b57\u7b26\u4e32\uff0c\u5219\u8868\u8fbe\u5f0f\u7684\u503c\u4e3a<code>0</code>\uff0c\u5426\u5219\u4e3a<code>1</code></p> <pre><code>add_library(mylib ${SOURCES})\n\ntarget_compile_definitions(mylib PUBLIC\n  $&lt;$&lt;BOOL:${USE_OTHERLIB}&gt;:USE_OTHERLIB&gt;\n)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>$&lt;BOOL:${USE_OTHERLIB}&gt;</code> \u4f1a\u68c0\u67e5\u53d8\u91cf <code>USE_OTHERLIB</code> \u662f\u5426\u4e3a\u5047\u3002\u5982\u679c <code>USE_OTHERLIB</code> \u4e3a\u5047\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c31\u4f1a\u8fd4\u56de <code>0</code>\uff0c\u5426\u5219\u8fd4\u56de <code>1</code>\u3002\u7136\u540e\uff0c<code>$&lt;1:USE_OTHERLIB&gt;</code> \u4f1a\u5728\u524d\u9762\u7684\u8868\u8fbe\u5f0f\u4e3a\u771f\u65f6\u6dfb\u52a0\u4e00\u4e2a\u7f16\u8bd1\u5b9a\u4e49 <code>USE_OTHERLIB</code>\u3002</p> <ol> <li><code>$&lt;AND:conditions&gt;</code>\uff1a\u903b\u8f91\u4e0e</li> </ol> <p><code>conditons</code>\u662f\u4ee5\u9017\u53f7\u5206\u5272\u7684==\u6761\u4ef6\u5217\u8868==\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u6761\u4ef6\u662f\u5217\u8868\u7684\uff0c\u90fd\u662f\u4f7f\u7528\u9017\u53f7\u8fdb\u884c\u5206\u5272\uff0c\u540e\u6587\u4e0d\u518d\u8d58\u8ff0\u3002\u903b\u8f91\u8fd0\u7b97\u6761\u4ef6\u6210\u7acb\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u4e3a<code>0</code>\uff0c\u5426\u5219\u4e3a<code>1</code>\uff0c\u540e\u6587\u4e0d\u518d\u8d58\u8ff0\u3002</p> <pre><code>add_library(mylib ${SOURCES})\n\ntarget_compile_definitions(mylib PUBLIC\n  $&lt;$&lt;AND:$&lt;CONFIG:Debug&gt;,$&lt;TARGET_EXISTS:otherlib&gt;&gt;:USE_OTHERLIB&gt;\n)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>$&lt;AND:$&lt;CONFIG:Debug&gt;,$&lt;TARGET_EXISTS:otherlib&gt;&gt;</code>\u4f1a\u5728\u5f53\u524d\u914d\u7f6e\u4e3a<code>Debug</code>\u5e76\u4e14\u76ee\u6807 <code>otherlib</code> \u5b58\u5728\u65f6\u8fd4\u56de<code>1</code>\uff0c\u5426\u5219\u8fd4\u56de<code>0</code>\u3002\u7136\u540e\uff0c<code>$&lt;1:USE_OTHERLIB&gt;</code> \u4f1a\u5728\u524d\u9762\u7684\u8868\u8fbe\u5f0f\u4e3a\u771f\u65f6\u6dfb\u52a0\u4e00\u4e2a\u7f16\u8bd1\u5b9a\u4e49 <code>USE_OTHERLIB</code>\u3002</p> <ol> <li><code>$&lt;OR:conditions&gt;</code>\uff1a\u903b\u8f91\u6216</li> </ol> <p>\u5728\u7ed9\u5b9a\u7684\u4efb\u4f55\u6761\u4ef6\u4e3a\u771f\u65f6\u8fd4\u56de<code>1</code>\uff0c\u5426\u5219\u8fd4\u56de<code>0</code></p> <pre><code>add_library(mylib ${SOURCES})\n\ntarget_compile_definitions(mylib PUBLIC\n  $&lt;$&lt;OR:$&lt;CONFIG:Debug&gt;,$&lt;TARGET_EXISTS:otherlib&gt;&gt;:USE_OTHERLIB&gt;\n)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>$&lt;OR:$&lt;CONFIG:Debug&gt;,$&lt;TARGET_EXISTS:otherlib&gt;&gt;</code>\u4f1a\u5728\u5f53\u524d\u914d\u7f6e\u4e3a Debug \u6216\u8005\u76ee\u6807 <code>otherlib</code> \u5b58\u5728\u65f6\u8fd4\u56de 1\uff0c\u5426\u5219\u8fd4\u56de 0\u3002\u7136\u540e\uff0c<code>$&lt;1:USE_OTHERLIB&gt;</code> \u4f1a\u5728\u524d\u9762\u7684\u8868\u8fbe\u5f0f\u4e3a\u771f\u65f6\u6dfb\u52a0\u4e00\u4e2a\u7f16\u8bd1\u5b9a\u4e49 <code>USE_OTHERLIB</code>\u3002</p> <ol> <li><code>$&lt;NOT:condition&gt;</code>\uff1a\u903b\u8f91\u975e</li> </ol> <p>\u5728\u7ed9\u5b9a\u7684\u6761\u4ef6\u4e3a\u5047\u65f6\u8fd4\u56de<code>1</code>\uff0c\u5426\u5219\u8fd4\u56de<code>0</code></p> <pre><code>add_library(mylib ${SOURCES})\n\ntarget_compile_definitions(mylib PUBLIC\n  $&lt;$&lt;NOT:$&lt;TARGET_EXISTS:otherlib&gt;&gt;:USE_OTHERLIB&gt;\n)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>$&lt;NOT:$&lt;TARGET_EXISTS:otherlib&gt;&gt;</code>\u4f1a\u5728\u76ee\u6807<code>otherlib</code>\u4e0d\u5b58\u5728\u65f6\u8fd4\u56de<code>1</code>\uff0c\u5426\u5219\u8fd4\u56de<code>0</code>\u3002\u7136\u540e\uff0c<code>$&lt;1:USE_OTHERLIB&gt;</code> \u4f1a\u5728\u524d\u9762\u7684\u8868\u8fbe\u5f0f\u4e3a\u771f\u65f6\u6dfb\u52a0\u4e00\u4e2a\u7f16\u8bd1\u5b9a\u4e49 <code>USE_OTHERLIB</code>\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#212","title":"2.1.2 \u5b57\u7b26\u4e32\u6bd4\u8f83","text":"<ol> <li><code>$&lt;STREQUAL:string1,string2&gt;</code></li> </ol> <p>\u5224\u65ad\u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49</p> <ol> <li><code>$&lt;EQUAL:value1,value2&gt;</code></li> </ol> <p>\u5224\u65ad\u6570\u503c\u662f\u5426\u76f8\u7b49</p> <ol> <li><code>$&lt;IN_LIST:string,list&gt;</code></li> </ol> <p>\u5224\u65ad<code>string</code>\u662f\u5426\u5305\u542b\u5728<code>list</code>\u4e2d\uff0c<code>list</code>\u4f7f\u7528\u5206\u53f7\u5206\u5272</p> <p>::: warning \u8fd9\u91cc\u7684<code>list</code>\u662f\u5728\u9017\u53f7\u540e\u9762\u7684\u5217\u8868\uff0c\u5373<code>${...}</code>\u6240\u8868\u793a\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5176\u5185\u5bb9\u9700\u8981\u4f7f\u7528\u5206\u53f7\u5206\u5272\u3002 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#213","title":"2.1.3 \u53d8\u91cf\u67e5\u8be2","text":"<ol> <li><code>$&lt;TARGET_EXISTS:target&gt;</code></li> </ol> <p>\u5224\u65ad\u76ee\u6807\u662f\u5426\u5b58\u5728</p> <ol> <li><code>$&lt;CONFIG:cfgs&gt;</code></li> </ol> <p>\u5224\u65ad\u7f16\u8bd1\u7c7b\u578b\u914d\u7f6e\u662f\u5426\u5305\u542b\u5728<code>cfgs</code>\u5217\u8868\uff08\u6bd4\u5982\"Release\uff0cDebug\"\uff09\u4e2d\uff1b\u4e0d\u533a\u5206\u5927\u5c0f\u5199</p> <ol> <li><code>$&lt;PLATFORM_ID:platform_ids&gt;</code></li> </ol> <p>\u5224\u65adCMake\u5b9a\u4e49\u7684\u5e73\u53f0ID\u662f\u5426\u5305\u542b\u5728<code>platform_ids</code>\u5217\u8868\u4e2d</p> <ol> <li><code>$&lt;COMPILE_LANGUAGE:languages&gt;</code></li> </ol> <p>\u5224\u65ad\u7f16\u8bd1\u8bed\u8a00\u662f\u5426\u5305\u542b\u5728<code>languages</code>\u5217\u8868\u4e2d</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#22","title":"2.2 \u5b57\u7b26\u4e32\u751f\u6210\u5668\u8868\u8fbe\u5f0f","text":"<p>\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u7684\u4e3b\u8981\u76ee\u7684\u53ef\u80fd\u5c31\u662f\u56e0\u4e3a\u6b64\u529f\u80fd\u4e86\u3002\u6bd4\u5982 CMake \u5b98\u65b9\u7684\u4f8b\u5b50\uff1a\u57fa\u4e8e\u7f16\u8bd1\u5668 ID \u6307\u5b9ainclude\u76ee\u5f55\uff1a</p> <pre><code>include_directories(\"/usr/include/$&lt;CXX_COMPILER_ID&gt;/\")\n</code></pre> <p>\u6839\u636e\u7f16\u8bd1\u5668\u7684\u7c7b\u578b\uff0c<code>$&lt;CXX_COMPILER_ID&gt;</code>\u4f1a\u88ab\u66ff\u6362\u6210\u5bf9\u5e94\u7684ID\uff08\u6bd4\u5982\u201cGNU\u201d\u3001\u201cClang\u201d\uff09\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#221","title":"2.2.1 \u6761\u4ef6\u8868\u8fbe\u5f0f","text":"<ul> <li><code>$&lt;condition:true_string&gt;</code></li> </ul> <p>\u5982\u679c\u6761\u4ef6\u4e3a\u771f\uff0c\u5219\u7ed3\u679c\u4e3a<code>true_string</code>\uff0c\u5426\u5219\u4e3a\u7a7a</p> <ul> <li><code>$&lt;IF:condition,str1,str2&gt;</code></li> </ul> <p>\u5982\u679c\u6761\u4ef6\u4e3a\u771f\uff0c\u5219\u7ed3\u679c\u4e3a<code>str1</code>\uff0c\u5426\u5219\u4e3a<code>str2</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#222","title":"2.2.2 \u5b57\u7b26\u4e32\u8f6c\u6362","text":"<ul> <li><code>$&lt;LOWER_CASE:string&gt;</code></li> </ul> <p>\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u5c0f\u5199</p> <pre><code>add_library(mylib ${SOURCES})\n\nset(TARGET_NAME \"MYLIB\")\n\ntarget_compile_definitions(mylib PUBLIC\n  TARGET_NAME=$&lt;LOWER_CASE:${TARGET_NAME}&gt;\n)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c <code>$&lt;LOWER_CASE:${TARGET_NAME}&gt;</code>\u4f1a\u5c06<code>TARGET_NAME</code>\u53d8\u91cf\u7684\u503c\u8f6c\u6362\u4e3a\u5c0f\u5199\u3002\u7136\u540e\uff0c\u8fd9\u4e2a\u5c0f\u5199\u7684\u503c\u4f1a\u88ab\u8d4b\u7ed9\u7f16\u8bd1\u5b9a\u4e49 <code>TARGET_NAME</code>\u3002</p> <p>\u6240\u4ee5\uff0c<code>mylib</code> \u4f1a\u88ab\u7f16\u8bd1\u65f6\u5b9a\u4e49 <code>TARGET_NAME</code> \u4e3a <code>mylib</code>\u3002</p> <ul> <li><code>$&lt;UPPER_CASE:string&gt;</code>\uff0c\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u5927\u5199</li> </ul> <p>\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u79cd\u7c7b\u7e41\u591a\uff0c\u8fd9\u91cc\u4e0d\u518d\u4e00\u4e00\u5217\u4e3e</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#3","title":"3. \u6784\u5efa\u5b89\u88c5\u8868\u8fbe\u5f0f","text":"<p>\u8be5\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5c5e\u4e8e\u5b57\u7b26\u4e32\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u7684\u4e00\u79cd\u3002\u8fd9\u4e2a\u95ee\u9898\u6765\u81ea\u4e8e\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5\uff0c\u4f46\u4e0d\u770b\u5e76\u4e0d\u5f71\u54cd\u77e5\u8bc6\u70b9\u7684\u8bb2\u89e3\uff0c\u4e0b\u9762\u7ed9\u51fa\u8fd9\u4e2a\u95ee\u9898\u7684\u4ea7\u751f\u539f\u56e0\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#31","title":"3.1 \u95ee\u9898\u5f15\u51fa","text":"<p>\u5728\u5b89\u88c5\u5bfc\u51fa\u76ee\u6807\u7684\u65f6\u5019\uff0c\u5982\u679c\u5bfc\u51fa\u76ee\u6807\u4e2d\u5305\u542b\u7684\u76ee\u6807\u4f7f\u7528\u4e86 <code>target_include_directories</code> \u547d\u4ee4\uff0c\u4f8b\u5982</p> <pre><code>target_include_directories(\n  my_target PUBLIC include\n)\n</code></pre> <p>\u5219\u6267\u884c <code>cmake ..</code> \u7684\u64cd\u4f5c\u540e\u4f1a\u51fa\u73b0\u5f62\u5982</p> <pre><code>-- CMake Error in xxx/xxx/CMakeLists.txt:\n-- Target \"my_target\" INTERFACE_INCLUDE_DIRECTORIES property contains\n-- path:\n--  \n--   \"/xxx/xxx/include\"\n-- \n-- which is prefixed in the source directory.\n</code></pre> <p>\u7684\u95ee\u9898\uff0c\u8fd9\u8868\u793a\u5305\u542b\u76ee\u5f55\u5177\u6709\u7edd\u5bf9\u8def\u5f84\uff0c\u8fd9\u5176\u5b9e\u662f <code>install</code> \u6307\u5b9a\u7684\u5934\u6587\u4ef6\u5b89\u88c5\u8def\u5f84\uff08\u9ed8\u8ba4\u662f <code>/usr/local/include</code>\uff09\u4e0e <code>target_include_directories</code> \u6307\u5b9a\u7684\u8def\u5f84\uff08\u8fd9\u91cc\u662f\u90a3\u4e32\u7edd\u5bf9\u8def\u5f84 <code>/xxx/xxx/include</code>\uff09\u4e92\u76f8\u51b2\u7a81\u4e86</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/09-%E7%94%9F%E6%88%90%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F/#32","title":"3.2 \u89e3\u51b3\u65b9\u6cd5","text":"<p>\u6700\u4e3a\u6709\u6548\u4e14\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u5bfc\u51fa\u5b89\u88c5\u7684\u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff0c\u6709 <code>$&lt;BUILD_INTERFACE&gt;:xxx</code> \u548c <code>$&lt;INSTALL_INTERFACE:xxx</code>\uff0c\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u6bd4\u8f83\u5e38\u89c1\u7684\u793a\u4f8b\u3002</p> <pre><code>target_include_directories(\n  my_target PUBLIC\n  $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIRS}/include&gt;\n  $&lt;INSTALL_INTERFACE:include/MyLibrary&gt;\n)\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u8868\u793a\uff0c\u5c06\u4e00\u7cfb\u5217\u5185\u5bb9\u4ee5\u516c\u5f00\u4f20\u64ad\u65b9\u5f0f\u5305\u542b\u4e8e\u76ee\u6807 <code>my_target</code> \u4e2d\uff0c\u8fd9\u91cc\u7684\u4e00\u7cfb\u5217\u5185\u5bb9\u5219\u662f\u4f1a\u6839\u636e\u5f53\u524d\u5904\u4e8e\u4f55\u79cd\u65b9\u5f0f\uff08==\u6784\u5efa==\u6216\u662f==\u5b89\u88c5==\uff09\u8fdb\u884c\u9009\u62e9\u3002<code>BUILD_INTERFACE</code> \u8868\u793a\u5728\u6784\u5efa\u65f6\u542f\u7528\uff0c<code>INSTALL_INTERFACE</code> \u8868\u793a\u5728\u5b89\u88c5\u65f6\u542f\u7528\u3002</p> <p>\u5047\u8bbe\u5bfc\u51fa\u76ee\u6807\u540d\u4e3a <code>MyModules</code>\uff0c\u53ef\u4ee5\u5728\u5b89\u88c5\u8def\u5f84 <code>&lt;path-to-install&gt;/cmake/MyModules.cmake</code> \u4e0b\u627e\u5230\u5982\u4e0b\u7c7b\u4f3c\u7684\u8bed\u53e5</p> <pre><code>set_target_properties(my_target PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES \"${_IMPORT_PREFIX}/include/MyLibrary\"\n)\n</code></pre> <p>\u8fd9\u662f <code>INSTALL_INTERFACE</code> \u751f\u6210\u5668\u8868\u8fbe\u5f0f\u751f\u6548\u7684\u4ea7\u7269\u3002</p> <p>::: tip \u8865\u5145\u8bf4\u660e \u8fd9\u91cc\u5bf9\u4e0a\u6587\u51fa\u73b0\u7684\u4e09\u4e2a\u6807\u8bc6\u7b26\u505a\u4e2a\u7b80\u77ed\u7684\u4ecb\u7ecd - <code>my_target</code>\uff0c\u76ee\u6807\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u76ee\u6807\u548c\u4f2a\u76ee\u6807\uff0c\u53ef\u53c2\u8003\u301005\u3011\u76ee\u6807\u6784\u5efa - <code>MyModules</code>\uff0c\u5bfc\u51fa\u76ee\u6807\uff0c\u53ef\u53c2\u8003\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5 - <code>MyLibrary</code>\uff0c\u5305\u540d\uff0c\u4e00\u822c\u7528\u4e8e<code>find_package</code>\u3002\u53ef\u53c2\u8003\u301008\u3011find_package \u8be6\u89e3 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/","title":"\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#1","title":"1. \u524d\u8a00","text":"<p>\u5728\u301008\u3011find_package \u8be6\u89e3\u4e00\u6587\u4e2d\u6211\u4eec\u4e86\u89e3\u5230 <code>find_package</code> \u7684\u4e24\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff0c\u7b2c\u4e00\u79cd\u7684 Module \u6a21\u5f0f\u9700\u8981\u6211\u4eec\u4e3a\u73b0\u6210\u7684\u7b2c\u4e09\u65b9\u5934\u6587\u4ef6\u5e93\u6587\u4ef6\u7f16\u5199 <code>FindXxx.cmake</code> \u4ece\u800c\u80fd\u591f\u4f7f\u7528 <code>find_package</code>\uff0c\u7b2c\u4e8c\u79cd\u7684 Config \u6a21\u5f0f\u5219\u662f\u6253\u5305\u9879\u76ee\u65f6\u91c7\u7528\u7684\u4e3b\u6d41\u65b9\u5f0f\uff0c\u5373\u901a\u8fc7\u7f16\u5199 <code>XxxConfig.cmake</code> \u6587\u4ef6\u6765\u4f7f\u7528 <code>find_package</code>\u3002\u5927\u591a\u6570\u5f00\u6e90\u9879\u76ee\uff0c\u82e5\u662f\u4f7f\u7528CMake\u63d0\u4f9b\u4e86\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\uff0c\u4e00\u5b9a\u4f1a\u6d89\u53ca\u5230\u8fd9\u4e00\u6587\u4ef6\uff0c\u4f8b\u5982 OpenCV \u7684 <code>cmake/templates</code> \u6587\u4ef6\u5939\u4e2d\u5c31\u6709 <code>OpenCVConfig.cmake.in</code> \u7684\u6a21\u677f\u6587\u4ef6\uff0c\u8fd9\u4e00\u6587\u4ef6\u5728CMake\u7684\u914d\u7f6e\u9636\u6bb5\u4f1a\u751f\u6210\u5bf9\u5e94\u7684 <code>OpenCVConfig.cmake</code> \u6587\u4ef6\u3002</p> <p>\u5bf9\u4e8e <code>XxxConfig.cmake</code> \u6587\u4ef6\u7684\u5199\u6cd5\u4f1a\u5728\u6700\u540e\u8fdb\u884c\u4ecb\u7ecd\uff0c\u5728\u4e00\u5f00\u59cb\u8ba9\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e0b\u5b89\u88c5\u7684\u57fa\u672c\u547d\u4ee4\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#2","title":"2. \u6587\u4ef6\u3001\u76ee\u6807\u7684\u5b89\u88c5\u89c4\u5219","text":"<p>\u2014\u2014 <code>install</code> \u547d\u4ee4</p> <p>\u5728\u73b0\u4ee3 CMake \u4e2d\uff0c\u6240\u6709\u5185\u5bb9\u7684\u5b89\u88c5\uff0c\u5747\u6765\u81ea <code>install</code> \u547d\u4ee4\uff0c\u5305\u62ec\u6587\u4ef6\uff08\u5939\uff09\u3001\u4e8c\u8fdb\u5236\u76ee\u6807\u3001\u4f2a\u76ee\u6807\u4ee5\u53ca\u540e\u6587\u7684\u5bfc\u51fa\u76ee\u6807\u3002\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e86 <code>install</code> \u547d\u4ee4\u5e76\u4e0d\u4f1a\u76f4\u63a5\u6267\u884c\u5b89\u88c5\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a <code>install</code> \u53ea\u662f\u7ed9\u51fa\u4e86\u5b89\u88c5\u7684\u89c4\u5219\uff0c\u5e76\u53d1\u751f\u5728\u751f\u6210\u9636\u6bb5\u3002\u53ef\u4ee5\u56de\u987e\u301001\u3011\u5b89\u88c5\u4e0e\u57fa\u672c\u4ecb\u7ecd\u7684\u5185\u5bb9\uff0cCMake \u7684\u4f5c\u7528\u662f\u751f\u6210\u5efa\u6784\u6863\uff0c\u800c\u9700\u8981\u5b89\u88c5\u7684\u5177\u4f53\u5185\u5bb9\u5c06\u4f1a\u751f\u6210\u5728\u8be5\u5efa\u6784\u6863\u4e2d\uff0c\u5982 Unix Makefile\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u6267\u884c</p> <pre><code>cmake --install .\n</code></pre> <p>\u547d\u4ee4\uff0c\u5b8c\u6210\u5b9e\u9645\u7684\u5b89\u88c5\u64cd\u4f5c\u3002</p> <p>::: tip \u6b64\u5904\u53ea\u4ecb\u7ecd\u5177\u6709\u57fa\u672c\u6587\u4ef6\u7ed3\u6784\u7684\u5b89\u88c5\uff0c\u5bfc\u51fa\u76ee\u6807\u7684\u5b89\u88c5\u5728\u4e0b\u4e00\u8282\u8fdb\u884c\u4ecb\u7ecd\u3002 :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#21","title":"2.1 \u6587\u4ef6\u5b89\u88c5","text":"<p>\u5373\uff1a<code>install(FILES)</code></p> <p>\u8fd9\u91cc\u5148\u76f4\u63a5\u7ed9\u51fa\u6587\u4ef6\u5b89\u88c5\u7684 <code>install</code> \u547d\u4ee4\u7528\u6cd5\uff0c\u4e0b\u9762\u5217\u4e3e\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u9009\u5185\u5bb9\u3002</p> <ul> <li><code>DESTINATION</code>\uff1a\u6307\u5b9a\u8981\u5b89\u88c5\u5230\u7684\u76ee\u6807\u76ee\u5f55\u3002</li> <li><code>PERMISSIONS</code>\uff1a\u6307\u5b9a\u8981\u5b89\u88c5\u6587\u4ef6\u7684\u6743\u9650\uff0c\u6743\u9650\u53c2\u6570\u8981\u6c42\u662f\u4e00\u7cfb\u5217 <code>OWNER_*</code>\u3001<code>GROUP_*</code> \u548c <code>WORLD_*</code> \u6743\u9650\u503c\u7684\u7ec4\u5408\uff0c\u4f8b\u5982 <code>OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ</code>\u3002</li> <li><code>CONFIGURATIONS</code>\uff1a\u6307\u5b9a\u8981\u5728\u54ea\u4e9b\u6784\u5efa\u914d\u7f6e\u4e0b\u5b89\u88c5\u6587\u4ef6\u3002\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u6784\u5efa\u914d\u7f6e\u7684\u540d\u79f0\u6765\u9650\u5b9a\u3002</li> <li><code>COMPONENT</code>\uff1a\u6307\u5b9a\u8981\u5c06\u6587\u4ef6\u5f52\u7c7b\u5230\u7684\u7ec4\u4ef6\u540d\u79f0\uff0c\u4ee5\u4fbf\u4e8e\u540e\u7eed\u8fdb\u884c\u7ba1\u7406\u548c\u6253\u5305\uff08\u89c1\u301013\u3011CPack\uff09\u3002</li> <li><code>RENAME</code>\uff1a\u6307\u5b9a\u5728\u5b89\u88c5\u65f6\u91cd\u547d\u540d\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u540d\u79f0\u3002</li> <li><code>OPTIONAL</code>\uff1a\u8868\u793a\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u4e0d\u4f1a\u629b\u51fa\u9519\u8bef\u3002</li> </ul> <pre><code># \u5b9a\u4e49\u4e8e &lt;path-to-opencv&gt;/include/CMakeLists.txt \u4e2d\n\ninstall(FILES \"opencv2/opencv.hpp\"\n    DESTINATION ${OPENCV_INCLUDE_INSTALL_PATH}/opencv2\n    COMPONENT dev)\n</code></pre> <p>\u8fd9\u53e5\u547d\u4ee4\u6dfb\u52a0\u4e86\u5c06\u5355\u4e00\u6587\u4ef6 <code>opencv2/opencv.hpp</code> \u5b89\u88c5\u5230\u6307\u5b9a\u76ee\u5f55\u7684\u5b89\u88c5\u89c4\u5219\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f <code>/usr/local/include/opencv4/opencv2</code> \u4e2d\uff0c\u5e76\u5f52\u7c7b\u5230 <code>dev</code> \u7ec4\u4ef6\u7684\u5b89\u88c5\u89c4\u5219\u4e2d\uff0c\u5728\u6267\u884c <code>cmake --install .</code> \u547d\u4ee4\u7684\u65f6\u5019\u4f1a\u6267\u884c\u8be5\u5b89\u88c5\u64cd\u4f5c\u3002</p> <p>\u5176\u4f59\u53ef\u9009\u5185\u5bb9\u5982 <code>RENAME</code> \u7528\u6cd5\u4e0e\u4e0a\u6587\u7ed9\u51fa\u7684\u4f8b\u5b50\u7c7b\u4f3c\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#22","title":"2.2 \u76ee\u5f55\uff08\u6587\u4ef6\u5939\uff09\u5b89\u88c5","text":"<p>\u5373 <code>install(DIRECTORY)</code></p> <p>\u4f7f\u7528\u65b9\u5f0f\u4e0e\u6587\u4ef6\u5b89\u88c5\u57fa\u672c\u4e00\u81f4\uff0c\u4f46\u76f8\u6bd4\u4e8e\u6587\u4ef6\u5b89\u88c5\uff0c\u4e3b\u8981\u591a\u51fa\u4e86 <code>PATTERN</code>\u3001<code>EXCLUDE_PATTERN</code> \u548c <code>RECURSE</code> \u5173\u952e\u5b57\uff0c\u901a\u8fc7 <code>PATTERN</code> \u548c <code>EXCLUDE_PATTERN</code> \u53c2\u6570\u6307\u5b9a\u8981\u5305\u542b\u548c\u6392\u9664\u7684\u6587\u4ef6\uff0c\u4f7f\u7528 <code>RECURSE</code> \u53c2\u6570\u8fdb\u884c\u9012\u5f52\u5b89\u88c5\u3002\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u7b80\u5355\u7684\uff0cOpenCV \u4e2d\u5b89\u88c5\u6587\u6863\u6240\u5728\u6587\u4ef6\u5939\u7684\u4f8b\u5b50\u3002</p> <pre><code># \u5b9a\u4e49\u4e8e &lt;path-to-opencv&gt;/doc/CMakeLists.txt \u4e2d\n\ninstall(DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/doxygen/html\n  DESTINATION \"${OPENCV_DOC_INSTALL_PATH}\"\n  COMPONENT \"docs\" OPTIONAL\n  ${compatible_MESSAGE_NEVER} # \u53ef\u4ee5\u4e0d\u7528\u7ba1\u8fd9\u53e5\u8bdd\n)\n</code></pre> <p>\u8fd9\u53e5\u547d\u4ee4\u5c06\u5f53\u524d\u4e8c\u8fdb\u5236\u751f\u6210\u76ee\u5f55\u4e2d\u7684 <code>doxygen/html</code> \u6587\u4ef6\u5939\u5b89\u88c5\u5230 <code>${OPENCV_DOC_INSTALL_PATH}</code> \u4e2d\uff0c\u5e76\u5f52\u7c7b\u5230 <code>docs</code> \u4e2d\uff0c<code>OPTIONAL</code> \u8bf4\u660e\u4e86\u5373\u4f7f\u8fd9\u4e2a\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u4e5f\u4e0d\u4f1a\u629b\u51fa\u5b89\u88c5\u7684\u9519\u8bef\u3002\u540c\u6837\uff0c\u9700\u8981\u5728\u7ec8\u7aef\u6267\u884c <code>cmake --install .</code> \u547d\u4ee4\u4ee5\u5b8c\u6210\u5b89\u88c5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#23","title":"2.3 \u76ee\u6807\u5b89\u88c5","text":"<p>\u5373 <code>install(TARGETS)</code>\uff0c\u5148\u7ed9\u51fa\u76ee\u6807\u5b89\u88c5\u7684\u7b7e\u540d</p> <pre><code>install(TARGETS &lt;target&gt;... [EXPORT &lt;export-name&gt;]\n        [RUNTIME_DEPENDENCIES &lt;arg&gt;...|RUNTIME_DEPENDENCY_SET &lt;set-name&gt;]\n        [&lt;artifact-option&gt;...]\n        [&lt;artifact-kind&gt; &lt;artifact-option&gt;...]...\n        [INCLUDES DESTINATION [&lt;dir&gt; ...]]\n        )\n</code></pre> <p>\u7528\u6cd5\u4e0e\u6587\u4ef6\u3001\u6587\u4ef6\u5939\u5b89\u88c5\u57fa\u672c\u4e00\u81f4\uff0c\u4f46\u7531\u4e8e CMake \u4e2d\u7684\u76ee\u6807\u4e0d\u4ec5\u4ec5\u5305\u542b\u52a8\u6001\u3001\u9759\u6001\u5e93\uff0c\u4e5f\u6709\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4e5f\u6709\u63a5\u53e3\u5e93\u3001\u5bfc\u5165\u5e93\u7b49\u4f2a\u76ee\u6807\uff0c\u56e0\u6b64 CMake \u76ee\u6807\u5b89\u88c5\u662f\u4e2a\u5e7f\u6cdb\u7684\u6982\u5ff5\uff0c\u63a5\u53e3\u4e0a\u4e5f\u80fd\u9002\u914d\u591a\u79cd\u76ee\u6807\u7684\u5b89\u88c5\uff0c\u4f8b\u5982\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>install(\n  TARGETS my_target\n  LIBRARY DESTINATION lib\n  ARCHIVE DESTINATION lib\n  RUNTIME DESTINATION bin\n)\n</code></pre> <p>\u5148\u6765\u8003\u8651\u4e8c\u8fdb\u5236\u76ee\u6807\u7684\u60c5\u51b5</p> <ul> <li><code>LIBRARY</code> \u6307\u4ee3\u7684\u662f Unix \u6587\u4ef6\u7cfb\u7edf\u7684\u5171\u4eab\u5e93</li> <li><code>ARCHIVE</code> \u6307\u4ee3\u7684\u662f Unix \u6587\u4ef6\u7cfb\u7edf\u7684\u9759\u6001\u5e93\uff0c\u4ee5\u53ca Windows \u4e0b\u7684\u9759\u6001\u94fe\u63a5\u5e93\u548c\u5bfc\u5165\u5e93</li> <li><code>RUNTIME</code> \u6307\u4ee3\u7684\u662f\u53ef\u6267\u884c\u6587\u4ef6\u4ee5\u53ca Windows \u4e0b\u7684\u52a8\u6001\u94fe\u63a5\u5e93</li> </ul> <p>\u5f53 <code>my_target</code> \u662f\u666e\u901a\u5e93\u76ee\u6807\u65f6\uff0c\u5728 Linux \u4e0b\uff0c\u5bf9\u5e94\u7684 <code>*.so</code> \u6216 <code>*.a</code> \u76ee\u6807\u4f1a\u88ab\u5b89\u88c5\u81f3 <code>&lt;prefix&gt;/lib</code> \u4e0b\uff0c\u540c\u6837\uff0c\u5728 Windows \u4e0b\uff0c\u5bf9\u5e94\u7684 <code>*.dll</code> \u548cDLL\u5bfc\u5165\u5e93 <code>*.lib</code> \u4e5f\u4f1a\u88ab\u5b89\u88c5\u5230 <code>&lt;prefix&gt;/lib</code> \u4e0b\u3002\u5f53 <code>my_target</code> \u662f\u53ef\u6267\u884c\u6587\u4ef6\u65f6\uff0c\u4f1a\u88ab\u5b89\u88c5\u5230 <code>&lt;prefix&gt;/bin</code> \u4e0b</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#3","title":"3. \u5bfc\u51fa\u76ee\u6807\u7684\u5b89\u88c5\u89c4\u5219","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#31","title":"3.1 \u4f55\u4e3a\u5bfc\u51fa\u76ee\u6807\u3001\u5bfc\u51fa\u914d\u7f6e","text":"<p>\u5728\u301005\u3011\u76ee\u6807\u6784\u5efa #2.4\u6211\u4eec\u4ecb\u7ecd\u8fc7 <code>IMPORTED</code> \u5bfc\u5165\u76ee\u6807\u7684\u6982\u5ff5\uff0c\u867d\u7136 <code>IMPORTED</code> \u76ee\u6807\u672c\u8eab\u5f88\u6709\u7528\uff0c\u4f46\u6211\u4eec\u4ecd\u7136\u9700\u8981\u77e5\u9053\u8fd9\u4e9b <code>IMPORTED</code> \u76ee\u6807\u6240\u6307\u4ee3\u6216\u8005\u5305\u542b\u7684\u6587\u4ef6\u5728\u78c1\u76d8\u4e0a\u7684\u4f4d\u7f6e\u3002 <code>IMPORTED</code> \u76ee\u6807\u7684\u771f\u6b63\u5f3a\u5927\u4e4b\u5904\u5728\u4e8e\uff0c\u5f53\u63d0\u4f9b\u76ee\u6807\u6587\u4ef6\u7684\u9879\u76ee\u8ba1\u5212\u63d0\u4f9b\u4e00\u4e2a CMake \u6587\u4ef6\u6765\u5e2e\u52a9\u5bfc\u5165\u5b83\u4eec\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u9879\u76ee\u4ee5\u751f\u6210\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5176\u4ed6 CMake \u9879\u76ee\u53ef\u4ee5\u8f7b\u677e\u5730\u4f7f\u7528\u5b83\uff0c\u8fd9\u4e00\u5fc5\u8981\u7684\u4fe1\u606f\u5c31\u662f\u6240\u8c13\u7684\u5bfc\u51fa\u76ee\u6807\u3002</p> <p>\u5728\u5f00\u53d1\u5b8c\u4e00\u4e2a\u5e93\u7684\u65f6\u5019\uff0c\u9700\u8981\u5c06\u5176\u6253\u5305\u7ed9\u4ed6\u4eba\u4f7f\u7528\uff08\u6ce8\u610f\u4e0d\u662f\u6253\u5305\u8ba9\u4ed6\u4eba\u6e90\u7801\u7f16\u8bd1\uff0c\u800c\u662f\u76f4\u63a5\u62ff\u6765\u7528\uff09\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5305\u542b\u8fd9\u4e2a\u5e93\u91cc\u9762\u6240\u6709\u5f85\u5bfc\u51fa\u76ee\u6807\u4fe1\u606f\u7684 <code>*.cmake</code> \u6587\u4ef6\uff0c\u79f0\u4e3a\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u6b63\u662f\u5728 CMake \u7684\u751f\u6210\u9636\u6bb5\u7531\u5bfc\u51fa\u76ee\u6807\u751f\u6210\u7684\u3002\u4e0d\u8fc7\uff0c\u8fd9\u4e00\u6587\u4ef6\u6211\u4eec\u5e76\u4e0d\u4f1a\u76f4\u63a5\u4f7f\u7528\uff0c\u800c\u662f\u95f4\u63a5\u7684\u901a\u8fc7\u4f7f\u7528 <code>XxxConfig.cmake</code> \u7684\u65b9\u5f0f\u4f7f\u7528\u8be5\u5bfc\u51fa\u76ee\u6807\u5bf9\u5e94\u7684 <code>*.cmake</code> \u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u3002\u6211\u4eec\u5148\u56de\u5230\u6700\u57fa\u672c\u7684\uff0c\u5982\u4f55\u6dfb\u52a0\u5bfc\u51fa\u76ee\u6807\u548c\u751f\u6210\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#32","title":"3.2 \u57fa\u672c\u8bed\u6cd5","text":"<p>\u9996\u5148\u6211\u4eec\u9700\u8981\u6307\u5b9a\u54ea\u4e9b\u76ee\u6807\u9700\u8981\u5bfc\u51fa\uff0c\u5e76\u4e14\u8bbe\u7f6e\u5bfc\u51fa\u76ee\u6807\u7684\u540d\u79f0\uff0c\u5047\u8bbe\u8fd8\u662f\u4e0a\u6587\u7684 <code>my_target</code> \u76ee\u6807\uff0c\u6211\u4eec\u5728\u4f7f\u7528 <code>install</code> \u547d\u4ee4\u65f6\u53ef\u4ee5\u6307\u5b9a <code>EXPORT</code>\uff0c\u5373</p> <pre><code>install(\n  TARGETS my_target\n  EXPORT MyModules\n  LIBRARY DESTINATION lib\n  ARCHIVE DESTINATION lib\n  RUNTIME DESTINATION bin\n)\n</code></pre> <p>::: warning <code>EXPORT</code> \u5fc5\u987b\u5728 <code>TARGETS</code> \u4e4b\u540e\uff0c<code>[&lt;artifact-option&gt;...]</code> \u4e4b\u524d\uff0c\u5982\u7b7e\u540d\u7684\u8981\u6c42\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5199\u6210</p> <pre><code>install(\n  EXPORT MyModules\n  TARGETS my_target\n)\n</code></pre> <p>\u6216\u8005</p> <pre><code>install(\n  TARGETS my_target\n  LIBRARY DESTINATION lib\n  EXPORT MyModules\n)\n</code></pre> <p>\u90fd\u662f\u9519\u8bef\u7684\u5199\u6cd5\uff0c\u5728 CMake \u914d\u7f6e\u671f\u95f4\u4f1a\u62a5\u9519\u3002 :::</p> <p>\u8fd9\u91cc\u7684 <code>MyModules</code> \u5c31\u662f\u5bfc\u51fa\u76ee\u6807\u540d\uff0c\u5e76\u4e14\u8be5\u5bfc\u51fa\u76ee\u6807\u5305\u542b\u4e86\u5173\u4e8e <code>my_target</code> \u7684\u6240\u6709\u4fe1\u606f\uff0c\u5305\u62ec\u5934\u6587\u4ef6\u8def\u5f84\u3001\u5e93\u6587\u4ef6\u8def\u5f84\u7b49\u5185\u5bb9\u3002\u5982\u679c\u6211\u5728\u6b64\u4e4b\u4e0a\u7ee7\u7eed\u5199\u5165</p> <pre><code>install(\n  TARGETS my_target_2\n  EXPORT MyModules\n  LIBRARY DESTINATION lib\n  ARCHIVE DESTINATION lib\n)\n</code></pre> <p>\u5219\u6b64\u65f6\u5bfc\u51fa\u76ee\u6807 <code>MyModules</code> \u5305\u542b\u4e86\u4e24\u4e2a\u76ee\u6807\u7684\u5185\u5bb9\uff0c\u5373 <code>my_target</code> \u548c <code>my_target_2</code>\u3002</p> <p>\u6700\u540e\u9700\u8981\u5c06\u8be5\u5bfc\u51fa\u76ee\u6807\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684 <code>*.cmake</code> \u6587\u4ef6\uff0c\u5373\u6307\u5b9a\u5bfc\u51fa\u76ee\u6807\u7684\u5b89\u88c5\u7b56\u7565\uff0c\u8bed\u6cd5\u91c7\u7528 <code>install(EXPORTS)</code></p> <pre><code>install(\n  EXPORT MyModules\n  FILE MyModules.cmake\n  DESTINATION \"lib/cmake/${PROJECT_NAME}\" # \u4e00\u822c\u5b89\u88c5\u8def\u5f84\u4f1a\u8bbe\u7f6e\u5728\u6b64\u5904\n)\n</code></pre> <p>\u5982\u679c\u4e0d\u989d\u5916\u6307\u5b9a OpenCV \u7684\u5b89\u88c5\u8def\u5f84\uff0c\u53ef\u4ee5\u5728 <code>/usr/local/lib/cmake/opencv4</code> \u4e0b\u627e\u5230 <code>OpenCVModules.cmake</code> \u4ee5\u53ca <code>OpenCVModules-release.cmake</code>\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff0c\u8fd9\u4e2a\u5c31\u662f OpenCV \u7684\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#33","title":"3.3 \u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u7684\u57fa\u672c\u5185\u5bb9","text":"<p>\u6211\u4eec\u5c31\u4ee5 OpenCV 4.8.0 \u5728\u6267\u884c\u5b8c\u5b89\u88c5\u547d\u4ee4\u4e4b\u540e\u751f\u6210\u7684\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6</p> <ol> <li><code>OpenCVModules.cmake</code>\uff0c\u70b9\u51fb\u6b64\u5904\u8df3\u8f6c\u81f3\u8be5\u6587\u4ef6</li> <li><code>OpenCVModules-release.cmake</code>\uff0c\u70b9\u51fb\u6b64\u5904\u8df3\u8f6c\u81f3\u8be5\u6587\u4ef6</li> </ol> <p>\u4e24\u4e2a\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u8fdb\u884c\u4ecb\u7ecd\uff0c\u56e0\u4e3a\u8fd9\u7c7b\u6587\u4ef6\u662f\u7531\u5bfc\u51fa\u76ee\u6807\u5728\u5b89\u88c5\u540e\u81ea\u52a8\u751f\u6210\u7684\uff0c\u6240\u4ee5\u4e0d\u8bba\u662f\u4ec0\u4e48\u9879\u76ee\uff0c\u5728\u5185\u5bb9\u4e0a\u90fd\u5177\u6709\u76f8\u4f3c\u6027</p> <p>\u4e0a\u6587\u4e2d\u7684 <code>OpenCVModules.cmake</code> \u6587\u4ef6\uff0c\u5177\u6709\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206</p> <ol> <li>\u9632\u6b62\u91cd\u590d\u5305\u542b\uff0c\u6765\u81ea\u5982\u4e0b\u6ce8\u91ca\uff1a</li> </ol> <pre><code># Protect against multiple inclusion, which would fail when already imported targets are added once more.</code></pre> <p>\u4f7f\u7528 <code>foreach</code> \u904d\u5386\u6240\u6709\u5f85\u5bfc\u5165\u76ee\u6807\u7684\u540d\u5b57\uff08\u5373\u5df2\u88ab\u5b89\u88c5\u7684\u76ee\u6807\u7684\u540d\u5b57\uff09\uff0c\u5224\u65ad\u8fd9\u4e9b\u53d8\u91cf\u662f\u5426\u5df2\u7ecf\u662f\u76ee\u6807\uff0c\u5982\u679c\u662f\u8bf4\u660e\u5df2\u7ecf\u91cd\u590d\u5305\u542b\u3002</p> <ol> <li>\u83b7\u53d6\u8be5\u9879\u76ee\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u5e76\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u53d8\u91cf <code>_IMPORT_PREFIX</code>\uff0c\u8be5\u53d8\u91cf\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6267\u884c\u4e86\u597d\u51e0\u6b21\u91cd\u590d\u7684\u547d\u4ee4</li> </ol> <pre><code>get_filename_component(_IMPORT_PREFIX \"${CMAKE_CURRENT_LIST_FILE}\" PATH)\nget_filename_component(_IMPORT_PREFIX \"${_IMPORT_PREFIX}\" PATH)\nget_filename_component(_IMPORT_PREFIX \"${_IMPORT_PREFIX}\" PATH)\nget_filename_component(_IMPORT_PREFIX \"${_IMPORT_PREFIX}\" PATH)\n</code></pre> <p>\u5982\u679c\u5f53\u524d\u6587\u4ef6\u8def\u5f84\u662f <code>/usr/local/lib/cmake/opencv4</code>\uff0c\u90a3\u4e48\u56db\u6b21\u8bbe\u7f6e <code>get_filename_component</code> \u5206\u522b\u8868\u793a</p> <ul> <li>\u5f97\u5230<code>/usr/local/lib/cmake/opencv4</code></li> <li>\u5f97\u5230<code>/usr/local/lib/cmake</code></li> <li>\u5f97\u5230<code>/usr/local/lib</code></li> <li>\u5f97\u5230<code>/usr/local</code></li> </ul> <p>\u6700\u7ec8\u7684 <code>_IMPORT_PREFIX</code> \u6b63\u662f\u9879\u76ee\u7684\u5b89\u88c5\u8def\u5f84 <code>/usr/local</code></p> <ol> <li>\u521b\u5efa\u5bfc\u5165\u76ee\u6807\uff0c\u5e76\u521d\u6b65\u8bbe\u7f6e\u5c5e\u6027</li> </ol> <p>\u8fd9\u662f\u8be5\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u7684\u6838\u5fc3\u6240\u5728\uff0c\u5305\u542b\u4e86\u7c7b\u4f3c\u5982\u4e0b\u7684\u4e00\u7cfb\u5217\u8bed\u53e5</p> <pre><code># Create imported target opencv_core\nadd_library(opencv_core SHARED IMPORTED)\n\n# Create imported target opencv_flann\nadd_library(opencv_flann SHARED IMPORTED)\n\nset_target_properties(opencv_flann PROPERTIES\n  INTERFACE_LINK_LIBRARIES \"opencv_core;opencv_core\"\n)\n</code></pre> <p>\u53ef\u80fd\u6709\u8bfb\u8005\u4f1a\u6ce8\u610f\u5230\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u4e3a\u5bfc\u5165\u76ee\u6807\u8bbe\u7f6e <code>IMPORTED_LOCATION</code> \u5c5e\u6027\u3002\u6ca1\u9519\uff0c\u6240\u4ee5\u8bf4\u8fd9\u91cc\u662f==\u521d\u6b65==\u8bbe\u7f6e\u5c5e\u6027\u3002</p> <ol> <li> <p>\u5305\u542b <code>OpenCVModules-&lt;config&gt;.cmake</code> \u6587\u4ef6\uff0c\u5728\u6b64\u6587\u4ef6\u4e2d==\u8fdb\u4e00\u6b65==\u8bbe\u7f6e\u5c5e\u6027\u3002\u5982\u679c\u8be5\u9879\u76ee\u662f</p> </li> <li> <p>Release \u6a21\u5f0f\u7f16\u8bd1\u7684\uff0c\u90a3\u4e48\u4f1a\u5305\u542b <code>OpenCVModules-release.cmake</code> \u6587\u4ef6</p> </li> <li>Debug \u6a21\u5f0f\u7f16\u8bd1\u7684\uff0c\u90a3\u4e48\u4f1a\u5305\u542b <code>OpenCVModules-debug.cmake</code> \u6587\u4ef6</li> <li>\u4e0d\u6307\u5b9a\u914d\u7f6e\u6a21\u5f0f\u7684\uff0c\u90a3\u4e48\u4f1a\u5305\u542b <code>OpenCVModules-noconfig.cmake</code> \u6587\u4ef6</li> </ol> <p>\u5728 <code>OpenCVModules-&lt;config&gt;.cmake</code> \u6587\u4ef6\u4e2d\u4f1a\u4e3a\u5bfc\u5165\u76ee\u6807\u8bbe\u7f6e <code>IMPORTED_LOCATION_&lt;config&gt;</code> \u7684\u76f8\u5173\u5c5e\u6027\uff0c\u4f8b\u5982</p> <pre><code># Import target \"opencv_core\" for configuration \"Release\"\nset_property(TARGET opencv_core APPEND PROPERTY IMPORTED_CONFIGURATIONS RELEASE)\nset_target_properties(opencv_core PROPERTIES\n  IMPORTED_LOCATION_RELEASE \"${_IMPORT_PREFIX}/lib/libopencv_core.so.4.8.0\"\n  IMPORTED_SONAME_RELEASE \"libopencv_core.so.408\"\n  )\n\nlist(APPEND _IMPORT_CHECK_TARGETS opencv_core )\n</code></pre> <p>\u65e0\u8bba\u662f\u8fd9\u91cc\u7684 <code>IMPORTED_LOCATION_RELEASE</code> \u8fd8\u662f\u81ea\u5df1\u8bbe\u7f6e\u5bfc\u5165\u76ee\u6807\u4e2d\u7684 <code>IMPORTED_LOCATION</code>\uff0c\u90fd\u4f1a\u4e3a\u76ee\u6807\u8bbe\u7f6e <code>LOCATION</code> \u5c5e\u6027\uff0c\u8fd9\u6b63\u662f\u76ee\u6807\u80fd\u591f\u88ab\u6b63\u786e\u94fe\u63a5\u7684\u5173\u952e\u3002</p> <ol> <li>\u68c0\u67e5\u6240\u6709\u5bfc\u5165\u76ee\u6807\u6240\u6307\u5b9a\u7684\u5e93\u6587\u4ef6\uff08<code>*.a</code> \u6216\u8005 <code>*.so</code>\uff09\u662f\u5426\u5b58\u5728\u3002</li> </ol> <p><code>OpenCVModules-&lt;config&gt;.cmake</code> \u6587\u4ef6\u4e2d\u4e3a\u6240\u6709\u7684\u5bfc\u5165\u76ee\u6807\u90fd\u8bbe\u7f6e\u4e86\u5e93\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u8fd9\u4e2a\u8def\u5f84\u7684\u5b58\u5728\u4e0e\u5426\u5c06\u5728\u6b64\u8fdb\u884c\u5224\u65ad\uff0c\u4e0d\u5b58\u5728\u5c06\u4f1a\u7acb\u523b\u7ec8\u6b62 CMake \u7a0b\u5e8f\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#34-target_xxx","title":"3.4 \u56de\u987e\uff1a\u4e3a\u4f55\u8981\u4f7f\u7528 target_xxx","text":"<p>::: tip \u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e2a\u7ecf\u5e38\u88ab\u63d0\u53ca\u7684\u8bdd\u9898\uff0c\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 <code>target_xxx</code> :::</p> <p>\u5728\u301005\u3011\u76ee\u6807\u6784\u5efa #2\u4e00\u6587\u4e2d\u4ecb\u7ecd\u4e86 <code>target_include_directories</code> \u548c <code>target_link_libraries</code> \u7684\u7528\u6cd5\uff0c\u5e76\u6307\u51fa\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528 <code>include_directories</code> \u548c <code>link_libraries</code> \u4e24\u79cd\uff0c\u4e0b\u9762\u5c06\u6839\u636e\u672c\u6587\u5bfc\u51fa\u914d\u7f6e\u7684\u5185\u5bb9\u4ecb\u7ecd\u4e3a\u4f55\u8981\u4f7f\u7528 <code>target_xxx</code>\u3002</p> <p>\u4e00\u822c\u4f7f\u7528 <code>target_include_directories</code> \u7684\u65f6\u5019\uff0c\u9700\u8981\u5305\u542b\u7684\u76ee\u5f55\u4f1a\u4e0e\u6307\u5b9a\u7684 CMake \u76ee\u6807\u7ed1\u5b9a\u8d77\u6765\uff08\u8fd9\u91cc\u7684\u76ee\u6807\u540c\u6837\u53ef\u4ee5\u662f\u5e93\u3001\u53ef\u6267\u884c\u6587\u4ef6\u3001\u63a5\u53e3\u5e93\u7b49\u5185\u5bb9\uff09\uff0c\u6bd4\u65b9\u8bf4\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>add_library(aa aaa.cpp)\ntarget_include_directories(\n  aa PUBLIC\n  $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIR}/include&gt;\n  $&lt;INSTALL_INTERFACE:include/MyLibrary&gt;\n)\n\n####################\n###  other code  ###\n####################\n\nadd_library(bb bbb.cpp)\ntarget_link_libraries(\n  bb\n  PUBLIC aa\n)\n</code></pre> <p>\u6839\u636e\u4ee5\u524d\u7684\u77e5\u8bc6</p> <ul> <li>\u4f1a\u628a <code>include</code> \u76ee\u5f55\u6dfb\u52a0\u5230 <code>aa</code> \u76ee\u6807\u4e0b</li> <li><code>aa</code> \u4f1a\u88ab <code>bb</code> \u6240\u94fe\u63a5</li> </ul> <p>\u6b64\u5916\uff0c\u5982\u679c <code>aa</code> \u548c <code>bb</code> \u76ee\u6807\u88ab\u5b89\u88c5\u81f3\u5bfc\u51fa\u76ee\u6807 <code>MyModules</code> \u4e0a\uff0c\u5e76\u4e14\u5b89\u88c5\uff0c\u5373\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code>install(\n  TARGETS aa bb\n  EXPORT MyModules\n)\ninstall(\n  EXPORT MyModules\n  FILE MyModules.cmake\n  DESTINATION \"${CMAKE_INSTALL_LIBDIR}/cmake/MyLibrary\"\n)\n</code></pre> <p>\u8fd0\u884c <code>cmake --install .</code> \u540e\u53ef\u4ee5\u5728\u5b89\u88c5\u8def\u5f84 <code>&lt;path-to-install&gt;/cmake/MyLibrary/MyModules.cmake</code> \u4e0b\u627e\u5230\u5982\u4e0b\u7c7b\u4f3c\u7684\u8bed\u53e5</p> <pre><code># Create imported target aa\nadd_library(aa STATIC IMPORTED)\n\nset_target_properties(aa PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES \"${_IMPORT_PREFIX}/include/MyLibrary\"\n)\n\n## Create imported target bb\nadd_library(bb STATIC IMPORTED)\n\nset_target_properties(bb PROPERTIES\n  INTERFACE_LINK_LIBRARIES \"aa\"\n)\n</code></pre> <p>\u8fd9\u4fbf\u662f\u4f7f\u7528 <code>target_xxx</code> \u547d\u4ee4\u7684\u4f5c\u7528\uff0c\u5728\u5bfc\u51fa\u5e76\u5b89\u88c5\u65f6\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u94fe\u63a5\u3001\u5305\u542b\u5173\u7cfb\u7ee7\u7eed\u7ed1\u5b9a\u5728\u8be5\u76ee\u6807\u4e0a\uff0c\u800c\u4f7f\u7528 <code>include_directories</code> \u548c <code>link_libraries</code> \u5219\u6ca1\u6709\u8fd9\u4e9b\u6548\u679c\u3002\u5f53\u7136\uff0c\u5728\u4e0d\u9700\u8981\u8fdb\u884c\u5bfc\u51fa\u5b89\u88c5\u7684\u9879\u76ee\u4e2d\uff0c\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e0d\u5e26 <code>target_</code> \u524d\u7f00\u7684\u8fd9\u4e9b\u547d\u4ee4\u3002\u4e0d\u8fc7\u8fd9\u4e9b\u4e0d\u5e26 <code>target_</code> \u4e3a\u524d\u7f00\u7684\u547d\u4ee4\u4f1a\u4f5c\u4e3a\u5168\u5c40\u5305\u542b\u7684\u5f62\u5f0f\u7ed9\u5176\u4ed6\u76ee\u6807\u4f7f\u7528\uff0c\u6709\u4e00\u5b9a\u7684 \u201c\u6c61\u67d3\u201d \u5acc\u7591\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#4-xxxconfigcmake","title":"4. XxxConfig.cmake \u6587\u4ef6\u7684\u4e00\u822c\u5199\u6cd5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#41","title":"4.1 \u5199\u6cd5","text":"<p>\u5728\u4f7f\u7528</p> <pre><code>find_package(OpenCV REQUIRED)\n</code></pre> <p>\u7684\u65f6\u5019\uff0c\u5c31\u662f\u6309\u7167\u641c\u7d22\u539f\u5219\uff0c\u5728\u7cfb\u7edf\u8def\u5f84\u4e0b\u5bfb\u627e <code>OpenCVConfig.cmake</code> \u6587\u4ef6\uff0c\u82e5\u6211\u4eec\u60f3\u901a\u8fc7\u4f7f\u7528 <code>Config</code> \u6a21\u5f0f\uff0c\u4f7f\u7528</p> <pre><code>find_package(MyLibrary REQUIRED)\n</code></pre> <p>\u6765\u53d1\u73b0\u5305\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u521b\u5efa <code>MyLibraryConfig.cmake</code> \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u4e00\u822c\u662f\u901a\u8fc7\u4f7f\u7528\u6587\u4ef6\u5b89\u88c5\uff08\u5373 <code>install(FILES)</code> \u7684\u65b9\u5f0f\u5b89\u88c5\u5230\u6307\u5b9a\u4f4d\u7f6e\u7684\uff09\u3002\u4e00\u4e2a <code>XxxConfig.cmake</code> \u6587\u4ef6\u4e0e <code>FindXxx.cmake</code> \u5305\u542b\u7684\u5185\u5bb9\u57fa\u672c\u4e00\u81f4\uff0c\u5305\u542b</p> <ol> <li>\u641c\u7d22\u5934\u6587\u4ef6</li> <li>\u641c\u7d22\u5e93\u6587\u4ef6</li> <li>\u63d0\u4f9b CMake \u76ee\u6807\u53d8\u91cf</li> <li>\u641c\u5bfb\u7684\u7ed3\u679c\u3001\u72b6\u6001</li> </ol> <p>\u8fd9\u91cc\u76f4\u63a5\u7ed9\u51fa\u5185\u5bb9</p> <pre><code># ======================================================\n#  MyLibrary CMake \u914d\u7f6e\u6587\u4ef6\n# ======================================================\n\n# ======================================================\n#  \u5934\u6587\u4ef6\u641c\u7d22\n# ======================================================\n# \u83b7\u53d6\u6ca1\u6709 ../.. \u76f8\u5bf9\u8def\u5f84\u6807\u8bb0\u7684\u7edd\u5bf9\u8def\u5f84\nget_filename_component(ML_CONFIG_PATH \"${CMAKE_CURRENT_LIST_DIR}\" REALPATH)\nget_filename_component(ML_INSTALL_PATH \"${ML_CONFIG_PATH}/../../../\" REALPATH)\n\n# \u641c\u7d22\uff0c\u6dfb\u52a0\u81f3\u5168\u5c40\u53d8\u91cf MyLibrary_INCLUDE_DIRS\nset(ML_INCLUDE_COMPONENTS \"${ML_INSTALL_PATH}/include/MyLibrary\")\nset(MyLibrary_INCLUDE_DIRS \"\")\nforeach(d ${ML_INCLUDE_COMPONENTS})\n  get_filename_component(_d \"${d}\" REALPATH)\n  if(NOT EXISTS \"${_d}\")\n    message(WARNING \"MyLibrary: Include directory doesn't exist: '${d}'. MyLibrary installation may be broken. Skip...\")\n  else()\n    list(APPEND MyLibrary_INCLUDE_DIRS \"${_d}\")\n  endif()\nendforeach()\nunset(_d)\n\n# ======================================================\n# \u5e93\u6587\u4ef6\u641c\u7d22\n# ======================================================\n# \u5305\u542b\u5bfc\u51fa\u914d\u7f6e\u7684 *.cmake \u6587\u4ef6\ninclude(${CMAKE_CURRENT_LIST_DIR}/MyModules.cmake)\n\n# \u6dfb\u52a0\u81f3\u5168\u5c40\u53d8\u91cf MyLibrary_LIBS\nset(ML_LIB_COMPONENTS my_target;my_target_2)\nforeach(_mlcomponent ${ML_LIB_COMPONENTS})\n  set(MyLibrary_LIBS ${MyLibrary_LIBS} \"${_mlcomponent}\")\nendforeach()\n\n# ======================================================\n# \u641c\u5bfb\u7684\u7ed3\u679c\u3001\u72b6\u6001\n# ======================================================\ninclude(FindPackageHandleStandardArgs)\nfind_package_handle_standard_args(\n  MyLibrary\n  REQUIRED_VARS ML_INSTALL_PATH\n)\n</code></pre> <p>\u53ef\u4ee5\u7559\u610f\u5230\u8fd9\u91cc\u7684\u5e93\u6587\u4ef6\u641c\u7d22\u4e0d\u518d\u50cf <code>FindXxx.cmake</code> \u90a3\u6837\u9700\u8981\u81ea\u5df1\u6307\u5b9a\u52a8\u6001\u5e93\u6216\u9759\u6001\u5e93\u7684\u8def\u5f84\uff0c\u8fd9\u91cc\u662f\u5426\u662f\u52a8\u6001\u5e93\u6216\u8005\u9759\u6001\u5e93\u5b8c\u5168\u4e0d\u9700\u8981\u7531\u5bfc\u51fa\u8005\u6307\u5b9a\uff0c\u5bfc\u51fa\u8005\u53ea\u9700\u8981\u5305\u542b\u5bfc\u51fa\u914d\u7f6e\u7684\u6587\u4ef6\u5373\u53ef\uff0c\u56e0\u4e3a\u4e0e\u5e93\u76ee\u6807\u76f8\u5173\u7684\u8bbe\u7f6e\u6b63\u662f\u7531\u5bfc\u51fa\u914d\u7f6e\u5b8c\u6210\u3002\u7406\u8bba\u4e0a\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5168\u5c40\u53d8\u91cf <code>xxx_INLCUDE_DIRS</code> \u6216\u8005 <code>xxx_LIBS</code> \u4ee5\u53ca\u641c\u5bfb\u7684\u72b6\u6001\u7684\u8bdd\uff0c<code>XxxConfig.cmake</code> \u6587\u4ef6\u53ef\u4ee5\u77ed\u5230\u53ea\u6709\u51e0\u884c\uff08\u6ce8\u91ca\u5220\u6389\u5c31\u662f 1 \u884c\uff09\uff1a</p> <pre><code># ======================================================\n#  MyLibrary CMake \u914d\u7f6e\u6587\u4ef6\n# ======================================================\n\ninclude(${CMAKE_CURRENT_LIST_DIR}/MyModules.cmake)\n</code></pre> <p>\u56e0\u4e3a\u5728 <code>MyLibrary</code> \u4e2d\uff0c\u76ee\u6807\u53ea\u6709 <code>my_target</code> \u548c <code>my_target_2</code>\uff0c\u5e76\u4e14\u4e0e\u5176\u76f8\u5173\u7684\u914d\u7f6e\u5168\u90e8\u8bbe\u7f6e\u5728\u4e86\u5bfc\u51fa\u76ee\u6807\u7684\u6587\u4ef6 <code>MyModules.cmake</code> \u4e2d\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#42-opencvconfigcmake","title":"4.2 \u5256\u6790 OpenCVConfig.cmake","text":"<p>\u4ee5\u4e0b\u5c55\u793a\u4e86 OpenCV 4.8.0 \u7684\u7528\u4e8e <code>find_package</code> \u7684 Config \u6587\u4ef6\uff0c\u70b9\u51fb\u6b64\u5904\u8df3\u8f6c\u81f3\u8be5\u6587\u4ef6\u3002</p> <p>\u6309\u7167\u6587\u4ef6\u4e2d\u7684\u987a\u5e8f\uff0c\u4e3b\u8981\u5305\u542b</p> <ol> <li>\u63d0\u4f9b\u6ce8\u91ca</li> </ol> <p><code>OpenCVConfig.cmake</code> \u6587\u4ef6\u63d0\u4f9b\u4e86\u5f88\u957f\u7684\u6ce8\u91ca\u5185\u5bb9\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u5bf9\u7167\u6b64\u6ce8\u91ca\u5185\u5bb9\u8fdb\u884c\u4f7f\u7528</p> <ol> <li>\u63d0\u4f9b\u7248\u672c\u4fe1\u606f</li> </ol> <p>\u5728\u6b64\u6587\u4ef6\u7684\u4e00\u5f00\u5934\uff0cOpenCV \u5c31\u8bbe\u7f6e\u4e86\u7248\u672c\u53f7\u4fe1\u606f</p> <ol> <li>\u641c\u7d22\u5934\u6587\u4ef6</li> </ol> <p>\u5e38\u89c4\u64cd\u4f5c\uff0c\u4e0e\u4e0a\u6587\u7684\u4e00\u822c\u5199\u6cd5\u57fa\u672c\u4e00\u81f4</p> <ol> <li>\u641c\u7d22\u5e93\u6587\u4ef6\u3001\u63d0\u4f9b CMake \u76ee\u6807\u53d8\u91cf</li> </ol> <p>\u5e38\u89c4\u64cd\u4f5c\uff0c\u540c\u6837\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\u3002\u7b2c\u4e00\u90e8\u5206\u76f4\u63a5\u5305\u542b\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6 <code>OpenCVModules.cmake</code>\uff0c\u7528\u4e8e\u914d\u7f6e\u6240\u6709\u7684\u5bfc\u5165\u76ee\u6807\uff0c\u7b2c\u4e8c\u90e8\u5206\u8bbe\u7f6e <code>OpenCV_LIBS</code> \u53d8\u91cf\uff0c\u7528\u4e8e\u5305\u542b\u6240\u6709\u7684\u5bfc\u5165\u76ee\u6807\u3002</p> <p>::: warning    - \u4e0e\u4e0a\u6587\u4e00\u822c\u5199\u6cd5\u6709\u6240\u4e0d\u540c\u7684\u662f\uff0cOpenCV \u6ca1\u6709\u5728 <code>OpenCVModules.cmake</code> \u4e2d\u4e3a\u76ee\u6807\u914d\u7f6e\u5305\u542b\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\uff0c\u56e0\u4e3a OpenCV \u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u7684 <code>ocv_target_include_directories</code> \u547d\u4ee4\u4f7f\u7528\u4e86 <code>PRIVATE</code> \u4f5c\u4e3a\u4f20\u64ad\u5c5e\u6027\uff0c\u90a3\u4e48\u4e5f\u5c31\u4e0d\u4f1a\u5728 <code>OpenCVModules.cmake</code> \u4e2d\u6709\u5305\u542b\u5934\u6587\u4ef6\u8def\u5f84\u7684\u914d\u7f6e\uff1b</p> <ul> <li> <p>\u4e0d\u8fc7\u5728 <code>OpenCVConfig.cmake</code> \u4e2d\u662f\u901a\u8fc7\u624b\u52a8 <code>foreach</code> \u6bcf\u4e2a\u5bfc\u5165\u76ee\u6807\u5e76\u8fdb\u884c <code>set_target_properties</code> \u64cd\u4f5c\uff0c\u4e3a\u6bcf\u4e2a\u5bfc\u5165\u76ee\u6807\u914d\u7f6e <code>INTERFACE_INCLUDE_DIRECTORIES</code> \u5c5e\u6027\u7684\u3002    :::</p> </li> <li> <p>\u641c\u5bfb\u7684\u7ed3\u679c\u3001\u72b6\u6001</p> </li> </ul> <p>\u5e38\u89c4\u64cd\u4f5c\uff0c\u540c\u6837\u662f\u4f7f\u7528 <code>find_package_handle_standard_args</code> \u547d\u4ee4\u83b7\u53d6\u641c\u7d22\u7684\u7ed3\u679c\u4e0e\u72b6\u6001</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#5-cmake","title":"5. CMake \u9879\u76ee\u5bfc\u51fa\u4e0e\u5b89\u88c5\u7684\u5185\u5bb9\u603b\u7ed3","text":"<p>\u603b\u7684\u6765\u8bf4\u9700\u8981\u5b8c\u6210</p> <ul> <li>\u6dfb\u52a0\u5e38\u89c4\u76ee\u6807\u7684\u5b89\u88c5\u89c4\u5219\uff0c\u5e76\u6307\u5b9a\u5bfc\u51fa\u76ee\u6807</li> <li>\u6dfb\u52a0\u5bfc\u51fa\u76ee\u6807\u7684\u5b89\u88c5\u89c4\u5219</li> <li>\u7f16\u5199 <code>XxxConfig.cmake</code> \u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u5b89\u88c5\u89c4\u5219</li> <li>\u7f16\u8bd1\u9879\u76ee\uff0c\u6267\u884c\u5b89\u88c5\u6b65\u9aa4\uff0c\u4f8b\u5982 <code>cmake --install .</code></li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/10-%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AE%89%E8%A3%85/#thinking","title":"\u601d\u8003 :thinking:","text":"<ol> <li>\u5bfc\u5165\u76ee\u6807\u548c\u5bfc\u51fa\u76ee\u6807\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\u4f7f\u7528\u573a\u666f\u662f\u4ec0\u4e48\uff1f</li> <li>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u63a5\u53e3\u5e93\uff0c\u4f1a\u6709\u4ec0\u4e48\u6548\u679c\uff1f    <pre><code>install(\n  TARGETS my_interface\n  LIBRARY DESTINATION lib\n  ARCHIVE DESTINATION lib\n  RUNTIME DESTINATION bin\n)\n</code></pre></li> </ol> <p>\u7b54\u6848 \u3010\u70b9\u6b64\u67e5\u770b\u3011</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/","title":"\u301011\u3011\u9879\u76ee\u5b9e\u6218","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#1","title":"1. \u5e38\u89c4\u975e\u8de8\u5e73\u53f0\u9879\u76ee","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#11_1","title":"1.1 \u9884\u671f\u76ee\u6807","text":"<p>\u73b0\u8ba1\u5212\u5f00\u53d1\u4e00\u4e2a\u4e13\u4e3a Linux \u5e73\u53f0\u8bbe\u8ba1\u7684\u89c6\u89c9\u5904\u7406\u5e93 <code>visionlib</code> \u53ca\u793a\u4f8b\u7a0b\u5e8f <code>vl_demo</code>\uff0c\u5e93\u5728\u4ece\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ol> <li>\u9700\u8981\u652f\u6301 C++17 \u6807\u51c6\uff1b</li> <li>\u5f3a\u5236\u4f9d\u8d56 OpenCV 4 \u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u5e76\u7528\u5230\u5176\u4e2d\u7684 <code>core</code>\u3001<code>imgproc</code>\u3001<code>highgui</code> \u6a21\u5757\uff0c\u5206\u522b\u5bf9\u5e94 <code>opencv_core</code>\u3001<code>opencv_imgproc</code>\u3001<code>opencv_highgui</code> \u8fd9 3 \u4e2a CMake \u76ee\u6807\uff1b</li> <li>\u9ed8\u8ba4\u4ee5\u9759\u6001\u5e93\u7684\u5f62\u5f0f\u6784\u5efa <code>visionlib</code>\uff0c\u4f46\u5141\u8bb8\u7528\u6237\u901a\u8fc7 CMake \u9009\u9879\u8bbe\u7f6e\u6784\u5efa\u4e3a\u52a8\u6001\u5e93\uff1b</li> <li>\u5e93\u5305\u542b\u4e86 <code>vl_a</code>\u3001<code>vl_b</code>\u3001<code>vl_c</code> \u548c <code>vl_d</code> \u5171 4 \u4e2a\u6a21\u5757\uff0c\u5206\u522b\u5bf9\u5e94 <code>a</code>\u3001<code>b</code>\u3001<code>c</code> \u548c <code>d</code> 4 \u4e2a\u6587\u4ef6\u5939\uff0c\u5747\u9ed8\u8ba4\u53c2\u4e0e\u6784\u5efa\uff0c\u4f46\u662f\u5141\u8bb8\u7528\u6237\u901a\u8fc7 CMake \u9009\u9879\u8bbe\u7f6e\u4efb\u4e00\u6a21\u5757\u662f\u5426\u53c2\u4e0e\u6784\u5efa\uff1b</li> <li>\u9879\u76ee\u5305\u542b\u4e86\u4e00\u4e2a\u793a\u4f8b\u7a0b\u5e8f <code>vl_demo</code>\uff0c\u9ed8\u8ba4\u53c2\u4e0e\u6784\u5efa\uff0c\u5141\u8bb8\u7528\u6237\u901a\u8fc7 CMake \u9009\u9879\u8bbe\u7f6e\u5176\u662f\u5426\u53c2\u4e0e\u6784\u5efa\uff1b</li> <li>\u8fd9\u51e0\u4e2a\u6a21\u5757\u548c\u793a\u4f8b\u7a0b\u5e8f\u4e4b\u95f4\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f7f\u7528 \u2192 \u8868\u793a\u4f9d\u8d56\u5173\u7cfb\uff0c\u5982  \u8868\u793a <code>vl_c</code> \u4f9d\u8d56 <code>vl_a</code></li> </ol> <p>::: center      </p> <pre><code> **\u56fe 1-1\uff1a\u4f9d\u8d56\u5173\u7cfb\u56fe**\n</code></pre> <p>:::</p> <ol> <li>\u9879\u76ee\u7684\u5b89\u88c5\u76ee\u5f55\u4e3a <code>/usr/local</code>\uff0c\u5176\u4e2d</li> <li>\u793a\u4f8b\u7a0b\u5e8f\u5b89\u88c5\u5230 <code>/usr/local/bin</code></li> <li>\u5934\u6587\u4ef6\u5b89\u88c5\u5230 <code>/usr/local/include</code></li> <li>\u5e93\u6587\u4ef6\u5b89\u88c5\u5230 <code>/usr/local/lib</code></li> <li>CMake \u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u5b89\u88c5\u5230 <code>/usr/local/lib/cmake/VisionLib</code></li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#12","title":"1.2 \u8981\u6c42\u4e0e\u6587\u4ef6\u7ed3\u6784","text":"<p>\u8be5\u9879\u76ee\u4e2d\u6240\u6709\u7684 CMake \u76ee\u6807\u5fc5\u987b\u5747\u4ee5 <code>vl_</code> \u5f00\u5934\uff0c\u4f8b\u5982\u6587\u4ef6\u5939 <code>a</code> \u5bf9\u5e94\u7684\u76ee\u6807\u662f <code>vl_a</code>\uff0c\u8be5\u9879\u76ee\u7684\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b</p> <p>``` :collapsed-lines . \u251c\u2500\u2500 modules \u2502   \u251c\u2500\u2500 a \u2502   \u2502   \u251c\u2500\u2500 include \u2502   \u2502   \u2502   \u2514\u2500\u2500 visionlib \u2502   \u2502   \u2502       \u2514\u2500\u2500 a.hpp \u2502   \u2502   \u2514\u2500\u2500 src \u2502   \u2502       \u251c\u2500\u2500 a1.cpp \u2502   \u2502       \u2514\u2500\u2500 a2.cpp \u2502   \u251c\u2500\u2500 b \u2502   \u2502   \u251c\u2500\u2500 include \u2502   \u2502   \u2502   \u2514\u2500\u2500 visionlib \u2502   \u2502   \u2502       \u2514\u2500\u2500 b.hpp \u2502   \u2502   \u2514\u2500\u2500 src \u2502   \u2502       \u251c\u2500\u2500 b1.cpp \u2502   \u2502       \u251c\u2500\u2500 b2.cpp \u2502   \u2502       \u251c\u2500\u2500 b3.cpp \u2502   \u2502       \u2514\u2500\u2500 b4.cpp \u2502   \u251c\u2500\u2500 c \u2502   \u2502   \u251c\u2500\u2500 include \u2502   \u2502   \u2502   \u2514\u2500\u2500 visionlib \u2502   \u2502   \u2502       \u2514\u2500\u2500 c.hpp \u2502   \u2502   \u2514\u2500\u2500 src \u2502   \u2502       \u2514\u2500\u2500 c.cpp \u2502   \u2514\u2500\u2500 d \u2502       \u251c\u2500\u2500 include \u2502       \u2502   \u2514\u2500\u2500 visionlib \u2502       \u2502       \u2514\u2500\u2500 d.hpp \u2502       \u2514\u2500\u2500 src \u2502           \u251c\u2500\u2500 d1.cpp \u2502           \u2514\u2500\u2500 d2.cpp \u2514\u2500\u2500 samples     \u2514\u2500\u2500 demo.cpp</p> <p>19 directories, 14 files <pre><code>### 1.3 \u5206\u6790\n\n- \u524d 3 \u4e2a\u9884\u671f\u76ee\u6807\u662f\u5173\u4e8e\u9879\u76ee\u7684\u8981\u6c42\uff0c\u53ef\u76f4\u63a5\u5728\u9879\u76ee\u6839\u76ee\u5f55\u7684 `CMakeLists.txt` \u4e2d\u5b9e\u73b0\n- \u7b2c 4 \u5230\u7b2c 6 \u4e2a\u9884\u671f\u76ee\u6807\u662f\u5173\u4e8e\u9879\u76ee\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u5728\u6bcf\u4e2a\u6a21\u5757\u7684 `CMakeLists.txt` \u4e2d\u5b9e\u73b0\n- \u6bcf\u4e2a\u6a21\u5757\u5747\u6d89\u53ca\u5230\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u6dfb\u52a0\u3001\u6e90\u6587\u4ef6\u7f16\u8bd1\u3001\u5e93\u6587\u4ef6\u94fe\u63a5\u3001\u4f9d\u8d56\u5e93\u6dfb\u52a0\u3001\u5b89\u88c5\u76ee\u6807\u7b49\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5185\u5bb9\u5c01\u88c5\u5230\u4e00\u4e2a\u51fd\u6570\u4e2d\uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u6a21\u5757\u7684 `CMakeLists.txt` \u4e2d\u8c03\u7528\n\n### 1.4 \u5b9e\u73b0\n\n\u5728\u9879\u76ee\u4e2d\u6dfb\u52a0\n\n- `CMakeLists.txt` \u2014\u2014 \u9879\u76ee\u6839\u76ee\u5f55\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `cmake/VisionLibInstall.cmake` \u2014\u2014 \u9879\u76ee\u7684\u5b89\u88c5\u8def\u5f84\u914d\u7f6e\u6587\u4ef6\n- `cmake/VisionLibModule.cmake` \u2014\u2014 \u9879\u76ee\u7684 CMake \u51fd\u6570\u5e93\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u76ee\u6807\u7684\u4fbf\u6377\u521b\u5efa\n- `cmake/templates/VisionLibConfig.cmake.in` \u2014\u2014 \u9879\u76ee\u5728 `find_package` \u65f6\u9700\u8981\u7684\u914d\u7f6e\u6587\u4ef6\u6a21\u677f\n- `modules/CMakeLists.txt` \u2014\u2014 \u9879\u76ee\u7684\u6a21\u5757\u5217\u8868\n- `modules/a/CMakeLists.txt` \u2014\u2014 \u6a21\u5757 `a` \u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/b/CMakeLists.txt` \u2014\u2014 \u6a21\u5757 `b` \u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/c/CMakeLists.txt` \u2014\u2014 \u6a21\u5757 `c` \u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/d/CMakeLists.txt` \u2014\u2014 \u6a21\u5757 `d` \u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `samples/CMakeLists.txt` \u2014\u2014 \u793a\u4f8b\u7a0b\u5e8f\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n\n\u5171 10 \u4e2a\u6587\u4ef6\u3002\n\n#### 1.4.1 \u9879\u76ee\u914d\u7f6e\n\n::: code-tabs\n\n@tab CMakeLists.txt\n\n```cmake :collapsed-lines\ncmake_minimum_required(VERSION 3.10)\n\nproject(VisionLib)\n\n# ----------------------------------------------------------------------------\n#   \u914d\u7f6e\u9879\u76ee\n# ----------------------------------------------------------------------------\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\nfind_package(OpenCV 4 REQUIRED)\noption(BUILD_SHARED_LIBS \"Build shared libraries?\" OFF)\n\ninclude(cmake/VisionLibInstall.cmake)\ninclude(cmake/VisionLibModule.cmake)\n\n# ----------------------------------------------------------------------------\n#   \u5c06\u5b50\u76ee\u5f55\u6dfb\u52a0\u5230\u6784\u5efa\u7cfb\u7edf\u4e2d\n# ----------------------------------------------------------------------------\nadd_subdirectory(modules)\nadd_subdirectory(samples)\n\n# ----------------------------------------------------------------------------\n#   \u5bfc\u51fa\u3001\u5b89\u88c5\u914d\u7f6e\n# ----------------------------------------------------------------------------\ninstall(\n  EXPORT VisionLibTargets\n  FILE VisionLibTargets.cmake\n  DESTINATION ${VL_CFG_INSTALL_PATH}\n  # VL_CFG_INSTALL_PATH \u5b9a\u4e49\u4e8e VisionLibInstall.cmake \u4e2d\n)\n\nconfigure_file(\n  cmake/templates/VisionLibConfig.cmake.in\n  \"${CMAKE_CURRENT_BINARY_DIR}/VisionLibConfig.cmake\"\n  @ONLY\n)\n\ninstall(\n  FILES \"${CMAKE_CURRENT_BINARY_DIR}/VisionLibConfig.cmake\"\n  DESTINATION ${VL_CFG_INSTALL_PATH}\n)\n</code></pre></p> <p>@tab VisionLibInstall.cmake</p> <pre><code># \u5b89\u88c5\u8def\u5f84\u76f8\u5173\u914d\u7f6e\n\nset(CMAKE_INSTALL_PREFIX \"/usr/local\")\nset(VL_INSTALL_PATH \"${CMAKE_INSTALL_PREFIX}\")\nset(VL_INC_INSTALL_PATH \"include/VisionLib\")\nset(VL_LIB_INSTALL_PATH \"lib\")\nset(VL_CFG_INSTALL_PATH \"${VL_LIB_INSTALL_PATH}/cmake/VisionLib\")\n</code></pre> <p>@tab VisionLibModule.cmake</p> <p>```cmake :collapsed-lines</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#visionlibconfigcmake","title":"\u7528\u4e8e\u6536\u96c6\u6240\u6709\u9700\u8981\u53c2\u4e0e\u6784\u5efa\u7684\u6a21\u5757\uff0c\u7ed9 VisionLibConfig.cmake \u4f7f\u7528","text":"<p>set(VL_LIB_COMPONENTS \"\" CACHE INTERNAL \"VisionLib components\")</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#visionlib","title":"\u66f4\u65b0 VisionLib \u76ee\u6807\u6784\u5efa\u7684\u6807\u5fd7\u4f4d\uff0c\u7528\u4e8e\u63a7\u5236\u662f\u5426\u6784\u5efa\u6307\u5b9a\u6a21\u5757\uff0c\u4e0d\u5f71\u54cd\u7528\u6237\u7684\u9009\u62e9","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-build_xxx_init","title":"- \u4e3b\u8981\u66f4\u65b0 <code>BUILD_xxx_INIT</code> \u53d8\u91cf","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-build_xxx_init-on-off","title":"- \u5728\u6ee1\u8db3\u6761\u4ef6\u65f6\uff0c\u8bbe\u7f6e <code>BUILD_xxx_INIT</code> \u4e3a <code>ON</code>\uff0c\u5426\u5219\u4e3a <code>OFF</code>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_1","title":"\u7528\u6cd5:","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_update_build-condition","title":"vl_update_build( [CONDITION])","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_2","title":"\u793a\u4f8b:","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_update_buildd-off","title":"vl_update_build(d OFF)","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_1","title":"---------------------------------------------------------------------------- <p>macro(vl_update_build name)   if(${ARGN})     set(BUILD${name}_INIT ON)   else()     set(BUILD${_name}_INIT OFF)   endif() endmacro()</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_2","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_3","title":"\u6dfb\u52a0\u6a21\u5757","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_4","title":"\u7528\u6cd5\uff1a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_add_module","title":"vl_add_module(","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#depends-vl_","title":"[DEPENDS   ...]             # \u4ee5 vl_ \u5f00\u5934\u7684\u6a21\u5757\u540d","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#ext_depends","title":"[EXT_DEPENDS   ...] # \u5916\u90e8\u4f9d\u8d56","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_5","title":")","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_6","title":"\u793a\u4f8b\uff1a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_add_modulea","title":"vl_add_module(a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#depends-b-c","title":"DEPENDS b c","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#ext_depends-opencv_core","title":"EXT_DEPENDS opencv_core","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_7","title":")","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_3","title":"---------------------------------------------------------------------------- <p>macro(vl_add_module name)   # \u5224\u65ad\u662f\u5426\u53c2\u4e0e\u6784\u5efa   if(NOT DEFINED BUILD${name}_INIT)     set(BUILD${name}_INIT ON)   endif()   option(BUILD${name}     \"Include ${_name} module into the VisionLib build\" ${BUILD${_name}_INIT}   ) # create option to enable/disable this module</p> <p>if(BUILD_${name})     # \u4ee5 vl \u5f00\u5934\u7684\u6a21\u5757\u540d\uff0c\u4f8b\u5982 vl_add_module(a) \u4f1a\u751f\u6210 vl_a     set(module_name vl_${name})     # \u89e3\u6790\u53c2\u6570     set(multi_args DEPENDS EXT_DEPENDS)     cmake_parse_arguments(VLMD \"\" \"\" \"${multi_args}\" ${ARGN})     # \u521b\u5efa\u76ee\u6807     aux_source_directory(src target_src)     add_library(${module_name} ${target_src})     # \u6dfb\u52a0\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\uff0c\u53ef\u53c2\u8003\u301009\u3011\u751f\u6210\u5668\u8868\u8fbe\u5f0f     target_include_directories(${module_name} PUBLIC       $       $       # VL_INC_INSTALL_PATH \u5b9a\u4e49\u4e8e VisionLibInstall.cmake \u4e2d     )     # \u6dfb\u52a0\u4f9d\u8d56     target_link_libraries(       ${module_name}       PUBLIC ${VLMD_EXT_DEPENDS}     )     foreach(m ${VLMD_DEPENDS})       target_link_libraries(         ${module_name}         PUBLIC vl${m}       )     endforeach()     # \u5b89\u88c5\u76ee\u6807     install(       DIRECTORY include/visionlib       DESTINATION ${VL_INC_INSTALL_PATH}     )     install(       TARGETS ${module_name}       EXPORT VisionLibTargets       LIBRARY DESTINATION ${VL_LIB_INSTALL_PATH}       ARCHIVE DESTINATION ${VL_LIB_INSTALL_PATH}     )     set(VL_LIB_COMPONENTS ${VL_LIB_COMPONENTS} \"${module_name}\" CACHE INTERNAL \"VisionLib components\")     unset(module_name)   endif() endmacro()","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_4","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_8","title":"\u6dfb\u52a0\u793a\u4f8b\u7a0b\u5e8f","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_9","title":"\u7528\u6cd5\uff1a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_add_exe","title":"vl_add_exe(","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#sources","title":"SOURCES   ...               # \u6e90\u6587\u4ef6","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#depends-vl__1","title":"[DEPENDS   ...]             # \u4ee5 vl_ \u5f00\u5934\u7684\u6a21\u5757\u540d","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#ext_depends_1","title":"[EXT_DEPENDS   ...] # \u5916\u90e8\u4f9d\u8d56","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_10","title":")","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_11","title":"\u793a\u4f8b\uff1a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#vl_add_exedemo","title":"vl_add_exe(demo","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#sources-democpp","title":"SOURCES demo.cpp","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#depends-a-b","title":"DEPENDS a b","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#ext_depends-opencv_highgui","title":"EXT_DEPENDS opencv_highgui","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_12","title":")","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_5","title":"---------------------------------------------------------------------------- <p>macro(vl_add_exe name)   # \u5224\u65ad\u662f\u5426\u53c2\u4e0e\u6784\u5efa   if(NOT DEFINED BUILD${name}_INIT)     set(BUILD${name}_INIT ON)   endif()   option(BUILD${name}     \"Include ${_name} module into the VisionLib build\" ${BUILD${_name}_INIT}   ) # create option to enable/disable this module</p> <p>if(BUILD_${name})     set(module_name vl${name})     set(multi_args SOURCES DEPENDS EXT_DEPENDS)     cmake_parse_arguments(VLMD \"\" \"\" \"${multi_args}\" ${ARGN})     if(NOT VLMD_SOURCES)       message(FATAL_ERROR \"No sources provided for executable ${module_name}\")     endif()     add_executable(${module_name} ${VLMD_SOURCES})     target_link_libraries(       ${module_name}       PRIVATE ${VLMD_EXT_DEPENDS}     )     foreach(m ${VLMD_DEPENDS})       target_link_libraries(         ${module_name}         PRIVATE vl${m}       )     endforeach()     install(       TARGETS ${module_name}       RUNTIME DESTINATION bin     )     unset(module_name)   endif() endmacro() <pre><code>:::\n\n#### 1.4.2 \u6a21\u5757\u914d\u7f6e\n\n::: code-tabs\n\n@tab `modules`\n\n```cmake\nset(cur_path \"${CMAKE_CURRENT_SOURCE_DIR}\")\nfile(GLOB modules RELATIVE \"${cur_path}\" \"${cur_path}/*\")\n\nforeach(m ${modules})\n  if(IS_DIRECTORY ${cur_path}/${m})\n    add_subdirectory(${cur_path}/${m})\n  endif()\nendforeach()\n\n# \u7b80\u5355\u8d77\u89c1\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5199\n# add_subdirectory(a)\n# add_subdirectory(b)\n# add_subdirectory(c)\n# add_subdirectory(d)\n</code></pre></p> <p>@tab <code>modules/a</code></p> <pre><code>vl_add_module(a)\n</code></pre> <p>@tab <code>modules/b</code></p> <pre><code>vl_add_module(b\n  DEPENDS d\n  EXT_DEPENDS opencv_imgproc\n)\n</code></pre> <p>@tab <code>modules/c</code></p> <pre><code>vl_add_module(c\n  DEPENDS a\n  EXT_DEPENDS opencv_core\n)\n</code></pre> <p>@tab <code>modules/d</code></p> <pre><code>vl_add_module(d\n  DEPENDS b c\n)\n</code></pre> <p>:::</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#143","title":"1.4.3 \u793a\u4f8b\u7a0b\u5e8f\u914d\u7f6e","text":"<p>::: code-tabs</p> <p>@tab samples/CMakeLists.txt</p> <p>```cmake :collapsed-lines vl_add_exe(demo   SOURCES demo.cpp   DEPENDS d   EXT_DEPENDS opencv_highgui ) <pre><code>:::\n\n#### 1.4.4 VisionLibConfig.cmake.in \u914d\u7f6e\n\n\u82e5\u5bf9\u8be5\u6587\u4ef6\u6709\u7591\u95ee\uff0c\u8bf7\u53c2\u8003[\u6b64\u5904](10-\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5.md#_4-xxxconfig-cmake-\u6587\u4ef6\u7684\u4e00\u822c\u5199\u6cd5)\u3002\n\n::: code-tabs\n\n@tab VisionLibConfig.cmake.in\n\n```cmake :collapsed-lines\n# ----------------------------------------------------------------------------\n#  VisionLib CMake \u914d\u7f6e\u6587\u4ef6\n#\n#                  ** \u8be5\u6587\u4ef6\u7531 CMake \u751f\u6210\uff0c\u8bf7\u52ff\u624b\u52a8\u4fee\u6539 **\n#\n#  \u57fa\u672c\u7528\u6cd5\uff1a\n#    find_package(VisionLib REQUIRED)\n#    target_link_libraries(your_target PRIVATE vl_a vl_b ...)\n# ----------------------------------------------------------------------------\n\n# ----------------------------------------------------------------------------\n#   \u83b7\u53d6 VisionLib \u5b89\u88c5\u8def\u5f84\n# ----------------------------------------------------------------------------\nget_filename_component(VL_CONFIG_PATH\n  \"${CMAKE_CURRENT_LIST_FILE}\" PATH\n)\nset(VL_INSTALL_PATH \"@VL_INSTALL_PATH@\")\n\n# ----------------------------------------------------------------------------\n#   \u8bbe\u7f6e\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u53d8\u91cf\n# ----------------------------------------------------------------------------\nset(VisionLib_INCLUDE_DIRS \"${VL_INSTALL_PATH}/@VL_INC_INSTALL_PATH@\")\n\n# ----------------------------------------------------------------------------\n#   \u8bbe\u7f6e\u5e93\u6587\u4ef6\u8def\u5f84\u53d8\u91cf\n# ----------------------------------------------------------------------------\nset(VisionLib_LIBS @VL_LIB_COMPONENTS@)\n\nif(NOT TARGET vl_a)\n  include(\"${VL_CONFIG_PATH}/VisionLibTargets.cmake\")\nendif()\n\n# ----------------------------------------------------------------------------\n#   \u641c\u5bfb\u7684\u7ed3\u679c\u3001\u72b6\u6001\n# ----------------------------------------------------------------------------\ninclude(FindPackageHandleStandardArgs)\n\nfind_package_handle_standard_args(VisionLib\n  REQUIRED_VARS VL_INSTALL_PATH\n)\n</code></pre></p> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#15-thinking","title":"1.5 \u601d\u8003 :thinking:","text":"<p>\u7528\u6237\u5728\u4f7f\u7528 VisionLib \u4e2d\u7684 <code>vl_d</code> \u76ee\u6807\u7684\u65f6\u5019\u4e00\u822c\u5728\u9879\u76ee\u4e2d\u4f1a\u5199\u4e0a</p> <pre><code>add_executable(demo main.cpp)\n\nfind_package(VisionLib REQUIRED)\n\ntarget_link_libraries(demo PRIVATE vl_d)\n</code></pre> <p>\u4f46\u662f\u8fd9\u65f6\u5019\u7f16\u8bd1\u4f1a\u51fa\u73b0\u5f62\u5982\u4ee5\u4e0b\u5185\u5bb9\u7684\u62a5\u9519</p> <pre><code>[ 50%] Building CXX object CMakeFiles/demo.dir/main.cpp.o\nIn file included from /usr/local/include/VisionLib/visionlib/d.hpp:3,\n                 from /path/to/vl_deploy_demo/main.cpp:1:\n/usr/local/include/VisionLib/visionlib/c.hpp:5:10: fatal error: opencv2/core.hpp: No such file or directory\n    5 | #include &lt;opencv2/core.hpp&gt;\n      |          ^~~~~~~~~~~~~~~~~~\ncompilation terminated.\nmake[2]: *** [CMakeFiles/demo.dir/build.make:76\uff1aCMakeFiles/demo.dir/main.cpp.o] error 1\nmake[1]: *** [CMakeFiles/Makefile2:83\uff1aCMakeFiles/demo.dir/all] error 2\nmake: *** [Makefile:91\uff1aall] error 2\n</code></pre> <p>\u8bf7\u5206\u6790\u51fa\u73b0\u8be5\u95ee\u9898\u7684\u539f\u56e0\u4ee5\u53ca\u89e3\u51b3\u65b9\u6cd5\u3002</p> <p>\u7b54\u6848 \u3010\u70b9\u6b64\u67e5\u770b\u3011</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#2","title":"2. \u5916\u90e8\u4f9d\u8d56\u7ba1\u7406","text":"<p>C/C++ \u4e00\u4e2a\u9971\u53d7\u8bdf\u75c5\u7684\u8bdd\u9898\u5c31\u662f\u5305\u7ba1\u7406\uff0c\u4e00\u4e9b\u73b0\u4ee3\u7684\u8bed\u8a00\u90fd\u5177\u6709\u6bd4\u8f83\u5b8c\u5584\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u4f8b\u5982 Python \u7684 <code>pip</code>\u3001Node.js \u7684 <code>npm</code> \u548c <code>yarn</code>\u3001Rust \u7684 <code>cargo</code> \u7b49\uff0c\u800c C/C++ \u6ca1\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u3001\u5b98\u65b9\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5bfc\u81f4\u4e86 C/C++ \u9879\u76ee\u7684\u4f9d\u8d56\u7ba1\u7406\u975e\u5e38\u56f0\u96be\u3002CMake \u63d0\u4f9b\u4e86 <code>FetchContent</code> \u548c <code>ExternalProject</code> \u6a21\u5757\uff0c\u53ef\u4ee5\u7528\u4e8e\u7ba1\u7406\u9879\u76ee\u7684\u5916\u90e8\u4f9d\u8d56\uff0c\u76f8\u6bd4\u4e8e\u624b\u52a8\u4e0b\u8f7d\u3001\u7f16\u8bd1\u3001\u5b89\u88c5\uff0c<code>FetchContent</code> \u548c <code>ExternalProject</code> \u5df2\u7ecf\u5c3d\u53ef\u80fd\u7684\u7b80\u5316\u4e86\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p> <p><code>ExternalProject</code> \u7528\u4e8e\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u4e0b\u8f7d\u3001\u914d\u7f6e\u3001\u6784\u5efa\u548c\u5b89\u88c5\u5916\u90e8\u9879\u76ee\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u5904\u7406\u5927\u578b\u7684\u3001\u72ec\u7acb\u7684\u5916\u90e8\u9879\u76ee\u3002\u800c <code>FetchContent</code> \u7528\u4e8e\u5728\u914d\u7f6e\u9636\u6bb5\u4e0b\u8f7d\u548c\u6dfb\u52a0\u5916\u90e8\u9879\u76ee\u7684\u6e90\u4ee3\u7801\u3002\u5b83\u9002\u7528\u4e8e\u9700\u8981\u5c06\u5916\u90e8\u9879\u76ee\u7684\u6e90\u4ee3\u7801\u76f4\u63a5\u96c6\u6210\u5230\u4e3b\u9879\u76ee\u4e2d\u7684\u60c5\u51b5\u3002\u540e\u6587\u5c06\u4e3b\u8981\u4ecb\u7ecd <code>FetchContent</code> \u7684\u4f7f\u7528\uff0c<code>ExternalProject</code> \u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#21-fetchcontent","title":"2.1 <code>FetchContent</code>","text":"<p><code>FetchContent</code> \u4f9d\u8d56\u7ba1\u7406\u5b9a\u4e49\u4e8e <code>FetchContent</code> CMake \u6a21\u5757\u4e2d\uff0c\u53ef\u4f7f\u7528</p> <pre><code>include(FetchContent)\n</code></pre> <p>\u6765\u5f15\u5165\u3002<code>FetchContent</code> \u6a21\u5757\u63d0\u4f9b\u4e86 <code>FetchContent_Declare</code>\u3001<code>FetchContent_MakeAvailable</code> \u7b49\u51fd\u6570\uff0c\u7528\u4e8e\u4e0b\u8f7d\u3001\u89e3\u538b\u3001\u914d\u7f6e\u3001\u7f16\u8bd1\u3001\u5b89\u88c5\u5916\u90e8\u9879\u76ee\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#211-fetchcontent_declare","title":"2.1.1 <code>FetchContent_Declare</code>","text":"<p>\u2014\u2014 \u58f0\u660e\u5916\u90e8\u4f9d\u8d56\u9879</p> <pre><code>FetchContent_Declare(\n  &lt;name&gt;\n  &lt;contentOptions&gt;...\n  [EXCLUDE_FROM_ALL]          # add in CMake 3.28\n  [SYSTEM]                    # add in CMake 3.25\n  [OVERRIDE_FIND_PACKAGE |\n   FIND_PACKAGE_ARGS args...] # add in CMake 3.24\n)\n</code></pre> <p>\u4e0a\u8ff0\u58f0\u660e\u7684\u53ef\u9009\u9879\u5747\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f <code>&lt;contentOptions&gt;</code>\u3002\u4ee5\u4e0b\u662f\u4f7f\u7528 <code>FetchContent_Declare</code> \u58f0\u660e <code>googletest</code> \u9879\u76ee\u7684\u793a\u4f8b\uff0c\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u58f0\u660e\u5916\u90e8\u4f9d\u8d56\u9879\uff0c\u4e00\u79cd\u662f\u4f7f\u7528 Git \u5b58\u50a8\u5e93\u4f5c\u4e3a\u5916\u90e8\u4f9d\u8d56\u9879\uff0c\u53e6\u4e00\u79cd\u662f\u4f7f\u7528 URL \u5730\u5740\u4f5c\u4e3a\u5916\u90e8\u4f9d\u8d56\u9879\u3002</p> <p>::: code-tabs</p> <p>@tab \u4f7f\u7528 Git \u5b58\u50a8\u5e93</p> <pre><code>FetchContent_Declare(\n  googletest\n  GIT_REPOSITORY https://github.com/google/googletest.git\n  GIT_TAG        703bd9caab50b139428cea1aaff9974ebee5742e # release-1.10.0\n)\n\n# GIT_REPOSITORY: \u8868\u793a\u5916\u90e8\u4f9d\u8d56\u9879\u7684 Git \u4ed3\u5e93\u5730\u5740\uff1b\n# GIT_TAG:        \u8868\u793a\u5916\u90e8\u4f9d\u8d56\u9879\u7684 Git \u4ed3\u5e93\u7684\u6807\u7b7e\uff0c\u53ef\u4ee5\u662f\u5206\u652f\u540d\u3001\u6807\u7b7e\u540d\u3001\u63d0\u4ea4\u54c8\u5e0c\u7b49\uff0c\n#                 \u4f46\u5efa\u8bae\u662f\u7a33\u5b9a\u7684\u6807\u7b7e\u540d\u9632\u6b62\u4e0d\u7a33\u5b9a\u7684\u4ee3\u7801\u8fdb\u5165\u9879\u76ee\u3002\n</code></pre> <p>@tab \u4f7f\u7528 URL \u5730\u5740</p> <pre><code>FetchContent_Declare(\n  googletest\n  URL https://github.com/google/googletest/archive/main.zip\n)\n\n# URL: \u8868\u793a\u5916\u90e8\u4f9d\u8d56\u9879\u7684 URL \u5730\u5740\u3002\n</code></pre> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#212-fetchcontent_makeavailable","title":"2.1.2 <code>FetchContent_MakeAvailable</code>","text":"<p>\u2014\u2014 \u4f7f\u5916\u90e8\u4f9d\u8d56\u9879\u751f\u6548\uff0c\u5e76\u52a0\u5165\u6784\u5efa\u7cfb\u7edf</p> <pre><code>FetchContent_MakeAvailable(&lt;name1&gt; [&lt;name2&gt;...])\n</code></pre> <p>\u8be5\u547d\u4ee4\u4fdd\u8bc1\u5728\u8c03\u7528\u7ed3\u675f\u540e\uff0c\u6bcf\u4e2a\u547d\u540d\u7684\u4f9d\u8d56\u9879\u90fd\u53ef\u4f9b\u9879\u76ee\u4f7f\u7528\u3002\u4f8b\u5982\u4e0a\u6587\u7684 <code>googletest</code> \u9879\u76ee\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u4f7f\u7528\uff1a</p> <pre><code>FetchContent_MakeAvailable(googletest)\n</code></pre> <p>\u5982\u679c\u6709\u591a\u4e2a\u5916\u90e8\u4f9d\u8d56\u9879\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u4f7f\u7528\uff1a</p> <pre><code>FetchContent_MakeAvailable(ext1 ext2 ext3)\n</code></pre> <p>\u8be5\u547d\u4ee4\u5c06\u4f9d\u6b21\u914d\u7f6e <code>ext1</code>\u3001<code>ext2</code> \u548c <code>ext3</code> \u9879\u76ee</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#213-fetchcontent","title":"2.1.3 <code>FetchContent</code> \u793a\u4f8b","text":"<p>\u6765\u81ea\u3010\u590d\u6742\u4f9d\u8d56\u3011</p> <pre><code>include(FetchContent)\nFetchContent_Declare(\n  projB\n  GIT_REPOSITORY git@mycompany.com:git/projB.git\n  GIT_TAG        4a89dc7e24ff212a7b5167bef7ab079d\n)\nFetchContent_Declare(\n  projC\n  GIT_REPOSITORY git@mycompany.com:git/projC.git\n  GIT_TAG        4ad4016bd1d8d5412d135cf8ceea1bb9\n)\nFetchContent_Declare(\n  projD\n  GIT_REPOSITORY git@mycompany.com:git/projD.git\n  GIT_TAG        origin/integrationBranch\n)\n\n# Order is important, see notes in the discussion further below\nFetchContent_MakeAvailable(projD projB projC)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#22","title":"2.2 \u9884\u671f\u76ee\u6807","text":"<p>\u73b0\u8ba1\u5212\u5f00\u53d1\u4e00\u4e2a Windows \u5e73\u53f0\u4e0b\u7684 OPC UA \u901a\u4fe1\u5e93 <code>opcua</code>\uff0c\u8be5\u5e93\u4f9d\u8d56\u4e8e <code>open62541</code>[^1]\uff0c<code>open62541</code> \u662f\u4e00\u4e2a\u5f00\u6e90\u7684 OPC UA \u534f\u8bae\u6808\uff0c\u63d0\u4f9b\u4e86 OPC UA \u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7684 C \u8bed\u8a00\u5b9e\u73b0\u3002<code>opcua</code> \u5e93\u7684\u5f00\u53d1\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ol> <li>\u9700\u8981\u652f\u6301 C++17 \u6807\u51c6\uff1b</li> <li>\u5f3a\u5236\u4f9d\u8d56 <code>open62541</code>\uff0c\u6ca1\u6709\u8be5\u5e93\u9700\u8981\u81ea\u52a8\u4e0b\u8f7d\u3001\u5e76\u6dfb\u52a0\u81f3\u9879\u76ee\u4e2d\uff0c\u5982\u679c\u662f\u81ea\u52a8\u4e0b\u8f7d\u7684 <code>open62541</code>\uff0c\u90a3\u4e48 <code>opcua</code> \u5e93\u5728\u5b89\u88c5\u65f6\u9700\u8981\u5c06 <code>open62541</code> ==\u4e00\u5e76\u5b89\u88c5==\uff1b</li> <li><code>open62541</code> \u7684\u914d\u7f6e\u8981\u6c42\u5982\u4e0b</li> <li>==\u65e0\u9700==\u542f\u7528 <code>UA_ENABLE_AMALGAMATION</code> \u9009\u9879\uff1b</li> <li>\u5176\u4ed6\u9009\u9879\u9ed8\u8ba4\u5373\u53ef\uff1b</li> <li>\u9ed8\u8ba4\u4ee5\u9759\u6001\u5e93\u7684\u5f62\u5f0f\u6784\u5efa <code>opcua</code>\uff0c\u4f46\u5141\u8bb8\u7528\u6237\u901a\u8fc7 CMake \u9009\u9879\u8bbe\u7f6e\u6784\u5efa\u4e3a\u52a8\u6001\u5e93\uff1b</li> <li><code>opcua</code> \u9879\u76ee\u7684\u5b89\u88c5\u76ee\u5f55\u4e3a <code>D:\\opcua</code>\uff0c\u5176\u4e2d</li> <li>\u5934\u6587\u4ef6\u5b89\u88c5\u5230 <code>D:\\opcua\\include</code>\uff1b</li> <li>\u9759\u6001\u5e93\u3001\u5bfc\u5165\u5e93\u6587\u4ef6\u5b89\u88c5\u5230 <code>D:\\opcua\\x64\\vc16\\lib</code>\uff1b</li> <li>\u52a8\u6001\u5e93\u6587\u4ef6\u5b89\u88c5\u5230 <code>D:\\opcua\\x64\\vc16\\bin</code>\uff08\u5982\u679c\u6784\u5efa\u4e3a\u52a8\u6001\u5e93\uff09\uff1b</li> <li>CMake \u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u5b89\u88c5\u5230 <code>D:\\opcua\\x64\\vc16\\bin</code>\uff1b</li> <li><code>open62541</code> \u7684\u5b89\u88c5\u8981\u6c42\u7531 <code>open62541Config.cmake</code> \u6307\u5b9a\u4e86\uff0c\u5177\u4f53\u5b89\u88c5\u8def\u5f84\u4e0d\u505a\u8be6\u7ec6\u8bf4\u660e\uff0c\u53ea\u9700\u4fdd\u8bc1 <code>open62541</code> \u7684\u5b89\u88c5\u8def\u5f84\u5728 <code>D:\\opcua</code> \u4e0b\u5373\u53ef\u3002</li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#23","title":"2.3 \u6587\u4ef6\u7ed3\u6784","text":"<p>\u8be5\u9879\u76ee\u7684\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b\uff0c\u53c2\u8003\u81ea rmvl_opcua \u6a21\u5757\u3002</p> <p>``` :collapsed-lines . \u251c\u2500\u2500 include \u2502\u00a0\u00a0 \u251c\u2500\u2500 opcua \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 client.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 event.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 method.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 object.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 publisher.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 server.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 subscriber.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 utilities.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 variable.hpp \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 view.hpp \u2502\u00a0\u00a0 \u2514\u2500\u2500 opcua.hpp \u2514\u2500\u2500 src     \u251c\u2500\u2500 client.cpp     \u251c\u2500\u2500 cvt.hpp     \u251c\u2500\u2500 helper.cpp     \u251c\u2500\u2500 publisher.cpp     \u251c\u2500\u2500 server.cpp     \u2514\u2500\u2500 subscriber.cpp</p> <p>6 directories, 19 files <pre><code>### 2.4 \u5b9e\u73b0\n\n\u5728\u9879\u76ee\u4e2d\u6dfb\u52a0\n\n- `3rdparty/open62541/CMakeLists.txt` \u2014\u2014 `open62541` \u7684\u914d\u7f6e\u6587\u4ef6\n- `CMakeLists.txt` \u2014\u2014 \u9879\u76ee\u6839\u76ee\u5f55\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `cmake/opcuaInstall.cmake` \u2014\u2014 \u9879\u76ee\u7684\u5b89\u88c5\u8def\u5f84\u914d\u7f6e\u6587\u4ef6\n- `cmake/opcuaConfig.cmake` \u2014\u2014 \u63d0\u4f9b\u7ed9\u7528\u6237\u5728 `find_package` \u65f6\u6240\u9700\u8981\u7684\u914d\u7f6e\u6587\u4ef6\uff08\u56e0\u4e3a\u6574\u4e2a\u9879\u76ee\u53ea\u6709\u4e00\u4e2a\u76ee\u6807\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4f7f\u7528\u6a21\u677f\u6587\u4ef6\u4e86\uff09\n\n\u5171 4 \u4e2a\u6587\u4ef6\uff0c\u5982\u4e0b\u6587\u4ef6\u7ed3\u6784\u6240\u793a\n</code></pre> . \u251c\u2500\u2500 3rdparty \u2502   \u2514\u2500\u2500 open62541 \u2502       \u2514\u2500\u2500 CMakeLists.txt (New) \u251c\u2500\u2500 CMakeLists.txt         (New) \u251c\u2500\u2500 cmake \u2502   \u251c\u2500\u2500 opcuaConfig.cmake  (New) \u2502   \u2514\u2500\u2500 opcuaInstall.cmake (New) \u251c\u2500\u2500 include \u2502   \u2514\u2500\u2500 ... \u2514\u2500\u2500 src     \u2514\u2500\u2500 ... <pre><code>#### 2.4.1 \u9879\u76ee\u914d\u7f6e\n\n::: code-tabs\n\n@tab CMakeLists.txt\n\n```cmake :collapsed-lines\n# --------------------------------------------------------\n#  \u9879\u76ee\u914d\u7f6e\n# --------------------------------------------------------\ncmake_minimum_required(VERSION 3.16)\nproject(opcua)\n\nset(CMAKE_CXX_STANDARD 17)\noption(BUILD_SHARED_LIBS \"Build shared libraries?\" OFF)\n\ninclude(cmake/opcuaInstall.cmake)\n\n# --------------------------------------------------------\n#  \u5916\u90e8\u4f9d\u8d56\u7ba1\u7406\n# --------------------------------------------------------\nfind_package(open62541 QUIET)\nif(NOT open62541_FOUND)\n  add_subdirectory(3rdparty/open62541)\nendif()\n\n# --------------------------------------------------------\n#  \u76ee\u6807\u6784\u5efa\n# --------------------------------------------------------\naux_source_directory(src target_src)\nadd_library(opcua ${target_src})\n\ntarget_include_directories(opcua PUBLIC\n  $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n  $&lt;INSTALL_INTERFACE:include&gt;\n)\n\ntarget_link_libraries(opcua\n  PUBLIC open62541::open62541\n)\n\ninstall(\n  TARGETS opcua\n  EXPORT opcuaTarget\n  LIBRARY DESTINATION ${OPCUA_BIN_INSTALL_PATH}\n  ARCHIVE DESTINATION ${OPCUA_LIB_INSTALL_PATH}\n  RUNTIME DESTINATION ${OPCUA_BIN_INSTALL_PATH}\n  INCLUDES DESTINATION ${OPCUA_INC_INSTALL_PATH}\n)\n\n# --------------------------------------------------------\n#  \u5bfc\u51fa\u3001\u5b89\u88c5\n# --------------------------------------------------------\ninstall(\n  EXPORT opcuaTarget\n  FILE opcuaTarget.cmake\n  DESTINATION ${OPCUA_CFG_INSTALL_PATH}\n)\n\ninstall(\n  FILES cmake/opcuaConfig.cmake\n  DESTINATION ${OPCUA_CFG_INSTALL_PATH}\n)\n</code></pre></p> <p>@tab opcuaInstall.cmake</p> <pre><code>set(CMAKE_INSTALL_PREFIX \"D:/opcua\")\nset(OPCUA_INSTALL_PATH \"${CMAKE_INSTALL_PREFIX}\")\nset(OPCUA_INC_INSTALL_PATH \"include\")\nset(OPCUA_LIB_INSTALL_PATH \"x64/vc16/lib\")\nset(OPCUA_BIN_INSTALL_PATH \"x64/vc16/bin\")\n# \u7406\u8bba\u4e0a\u8fd9\u4e2a\u8def\u5f84\u8981\u6839\u636e MSVC \u7248\u672c\u548c\u7cfb\u7edf\u67b6\u6784\u6765\u786e\u5b9a\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3e\u4f8b\uff0c\u5c31\u4e0d\u505a\u989d\u5916\u5224\u65ad\u4e86\nset(OPCUA_CFG_INSTALL_PATH \"${OPCUA_LIB_INSTALL_PATH}\")\n</code></pre> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#242","title":"2.4.2 \u5916\u90e8\u4f9d\u8d56\u914d\u7f6e","text":"<p>::: code-tabs</p> <p>@tab 3rdparty/open62541/CMakeLists.txt</p> <pre><code>option(UA_ENABLE_AMALGAMATION \"Enable amalgamation\" OFF)\n\nFetchContent_Declare(\n  open62541\n  GIT_REPOSITORY https://github.com/open62541/open62541.git\n  GIT_TAG        v1.4.8\n)\n\nFetchContent_MakeAvailable(open62541)\n</code></pre> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#244-opcuaconfigcmake","title":"2.4.4 opcuaConfig.cmake \u914d\u7f6e","text":"<p>\u7531\u4e8e <code>opcua</code> \u9879\u76ee\u53ea\u6709\u4e00\u4e2a\u76ee\u6807\uff0c\u56e0\u6b64 <code>opcuaConfig.cmake</code> \u6587\u4ef6\u975e\u5e38\u7b80\u5355\uff0c\u65b9\u4fbf\u8d77\u89c1\u4e5f\u4e0d\u9700\u8981\u5411\u7528\u6237\u63d0\u4f9b\u8bf8\u5982 <code>opcua_INCLUDE_DIRS</code> \u548c <code>opcua_LIBS</code> \u8fd9\u6837\u7684\u96c6\u5408\u53d8\u91cf\uff0c\u56e0\u6b64 <code>opcuaConfig.cmake</code> \u53ea\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u529f\u80fd\u5373\u53ef</p> <ul> <li>\u63d0\u4f9b CMake \u76ee\u6807\u53d8\u91cf\uff08\u5bfc\u5165 <code>opcua</code> \u76ee\u6807\uff09</li> <li>\u63d0\u4f9b <code>find_package</code> \u641c\u7d22\u7684\u7ed3\u679c\u548c\u72b6\u6001</li> </ul> <p>::: code-tabs</p> <p>@tab opcuaConfig.cmake</p> <pre><code># ----------------------------------------------------------------------------\n#  opcua CMake \u914d\u7f6e\u6587\u4ef6\n#\n#  \u57fa\u672c\u7528\u6cd5\uff1a\n#    find_package(opcua REQUIRED)\n#    target_link_libraries(your_target PRIVATE opcua)\n# ----------------------------------------------------------------------------\n\nif(NOT TARGET opcua)\n  include(${CMAKE_CURRENT_LIST_DIR}/opcuaTarget.cmake)\nendif()\n\ninclude(FindPackageHandleStandardArgs)\nfind_package_handle_standard_args(opcua)\n</code></pre> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#3","title":"3. \u4ea4\u53c9\u7f16\u8bd1\u9879\u76ee","text":"<p>CPU \u6709\u4e0d\u540c\u7684\u67b6\u6784\u3001\u6307\u4ee4\u96c6\uff0cC/C++ \u5f00\u53d1\u4e2d\u7684\u4ee3\u7801\u7f16\u8bd1\u540e\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5728\u4e0d\u540c\u7684 CPU \u4e0a\u76f4\u63a5\u8fd0\u884c\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u5bf9\u6b64\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u5728\u76ee\u6807\u5e73\u53f0\u4e0a\u76f4\u63a5\u7f16\u8bd1\u4ee3\u7801\uff0c\u4f8b\u5982\u4e3a\u4e86\u5728 64 \u4f4d ARM \u5e73\u53f0\u4e0a\u8fd0\u884c\u4ee3\u7801\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 <code>aarch64</code> \u5e73\u53f0\u4e0a\u7f16\u8bd1\u4ee3\u7801\u3002\u4f46\u4e00\u822c\u6765\u8bf4\uff0cARM \u5e73\u53f0\u5e38\u89c1\u4e8e\u5d4c\u5165\u5f0f\u8bbe\u5907\uff0c\u8fd9\u7c7b\u8bbe\u5907\u53ef\u80fd\u7f3a\u5c11\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u5728\u6027\u80fd\u4e0a\u4e5f\u975e\u5e38\u6709\u9650\uff0c\u56e0\u6b64\u8fd9\u79cd\u65b9\u5f0f\u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u60c5\u51b5\u3002</li> <li>\u76f4\u63a5\u5728 PC \u4e0a\u7f16\u8bd1\u76ee\u6807\u5e73\u53f0\u7684\u4ee3\u7801\uff0c\u7136\u540e\u5c06\u7f16\u8bd1\u597d\u7684\u4ee3\u7801\u79fb\u690d\uff08\u590d\u5236\u7c98\u8d34\uff09\u5230\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\u3002\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3a==\u4ea4\u53c9\u7f16\u8bd1==\uff0c\u5728\u5d4c\u5165\u5f0f Linux \u5f00\u53d1\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u4f8b\u5982\u5728 <code>amd64</code> \u5e73\u53f0\u4e0a\u7f16\u8bd1 ARM \u5e73\u53f0\u7684\u4ee3\u7801\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#31","title":"3.1 \u5de5\u5177\u94fe\u6587\u4ef6\u7684\u7f16\u5199","text":"<p>CMake \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u4ea4\u53c9\u7f16\u8bd1\u652f\u6301\uff0c\u800c\u4e14\u4ec5\u9700\u4e00\u4e2a==\u5de5\u5177\u94fe\u6587\u4ef6==\u5373\u53ef\u5b8c\u6210\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u4f5c\u3002\u5de5\u5177\u94fe\u6587\u4ef6\u662f\u4e00\u4e2a CMake \u811a\u672c\uff0c\u7528\u4e8e\u6307\u5b9a\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff0c\u4f8b\u5982\u7f16\u8bd1\u5668\u3001\u94fe\u63a5\u5668\u3001\u5e93\u6587\u4ef6\u8def\u5f84\u7b49\u3002\u5de5\u5177\u94fe\u6587\u4ef6\u6ca1\u6709\u4e25\u683c\u7684\u547d\u540d\u89c4\u5219\uff0c\u5c31\u5982\u540c\u666e\u901a\u7684 <code>*.cmake</code> \u6587\u4ef6\u4e00\u6837\uff0c\u4e0d\u8fc7\u4e00\u822c\u4e60\u60ef\u4e0a\u4f1a\u5728\u5de5\u5177\u94fe\u6587\u4ef6\u7684\u540d\u5b57\u4e2d\u63d0\u5230\u5e73\u53f0\u6216 <code>toolchain</code> \u5b57\u6837\uff0c\u5728 CMake \u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u4f7f\u7528 <code>-DCMAKE_TOOLCHAIN_FILE</code> \u9009\u9879\u6307\u5b9a\u5de5\u5177\u94fe\u6587\u4ef6\uff0c\u4f8b\u5982</p> <pre><code>cmake -DCMAKE_TOOLCHAIN_FILE=toolchain-aarch64.cmake ..\n</code></pre> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5de5\u5177\u94fe\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code># \u6307\u5b9a\u76ee\u6807\u7cfb\u7edf\nset(CMAKE_SYSTEM_NAME Linux)\n# \u6307\u5b9a\u76ee\u6807\u5904\u7406\u5668\u67b6\u6784\nset(CMAKE_SYSTEM_PROCESSOR aarch64)\n\n# \u6307\u5b9a\u76ee\u6807\u7cfb\u7edf\u7684\u6839\u76ee\u5f55\uff0c\u5c06\u76f4\u63a5\u5f71\u54cd\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u7684\u884c\u4e3a\nset(CMAKE_SYSROOT \"/path/to/sysroot\")\n\n# \u6307\u5b9a C \u4ea4\u53c9\u7f16\u8bd1\u5668\nset(CMAKE_C_COMPILER \"/path/to/arm-gcc\")\n# \u6307\u5b9a C++ \u4ea4\u53c9\u7f16\u8bd1\u5668\nset(CMAKE_CXX_COMPILER \"/path/to/arm-g++\")\n\n# \u6307\u5b9a CMake \u67e5\u627e\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u4f8b\u5982 find_package\nset(CMAKE_FIND_ROOT_PATH \"/path/to/sysroot\")\n# \u4e0d\u67e5\u627e\u7a0b\u5e8f\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\n# \u53ea\u67e5\u627e\u5e93\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\n# \u53ea\u67e5\u627e\u5934\u6587\u4ef6\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#32","title":"3.2 \u9884\u671f\u76ee\u6807","text":"<p>\u73b0\u8ba1\u5212\u5f00\u53d1\u4e00\u4e2a EtherCAT \u534f\u8bae\u7684\u673a\u68b0\u81c2\u9a71\u52a8\u7a0b\u5e8f <code>ec_robot</code>\uff0c\u8be5\u7a0b\u5e8f\u9700\u8981\u5728 aarch64 \u67b6\u6784\u7684 Linux \u5e73\u53f0\u4e0b\u8fd0\u884c\uff0c<code>ec_robot</code> \u9879\u76ee\u7684\u5f00\u53d1\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ol> <li>\u9700\u8981\u4f7f\u7528\u6307\u5b9a\u7684\u5de5\u5177\u94fe\u8fdb\u884c\u4ea4\u53c9\u7f16\u8bd1\uff0c\u76ee\u6807\u7cfb\u7edf\u6839\u76ee\u5f55\u5047\u8bbe\u5728 <code>/home/ecdev/buildroot/host/</code> \u4e0b</li> <li>C \u4ea4\u53c9\u7f16\u8bd1\u5668\u4e3a <code>aarch64-linux-gnu-gcc</code>\uff0c\u4f4d\u4e8e\u76ee\u6807\u7cfb\u7edf\u6839\u76ee\u5f55\u7684 <code>/usr/bin</code> \u76ee\u5f55\u4e0b\uff1b</li> <li>C++ \u4ea4\u53c9\u7f16\u8bd1\u5668\u4e3a <code>aarch64-linux-gnu-g++</code>\uff0c\u4f4d\u4e8e\u76ee\u6807\u7cfb\u7edf\u6839\u76ee\u5f55\u7684 <code>/usr/bin</code> \u76ee\u5f55\u4e0b\uff1b</li> <li>\u9700\u8981\u652f\u6301 C++17 \u6807\u51c6\uff1b</li> <li>\u5f3a\u5236\u4f9d\u8d56 IgH \u5b9e\u73b0\u7684 <code>EtherCAT</code> \u4e3b\u7ad9\u9a71\u52a8\u5e93\uff0c\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5728 <code>/home/ecdev/buildroot/host/usr/lib/cmake/ethercat</code> \u4e0b\uff0c\u5bf9\u5e94\u7684\u76ee\u6807\u540d\u4e3a <code>EtherLab::EtherCAT</code>\uff1b</li> <li><code>ec_robot</code> \u9879\u76ee==\u65e0\u9700==\u5b89\u88c5\uff0c\u53ea\u9700\u6784\u5efa\u5373\u53ef\u3002</li> <li>\u6ca1\u6709\u590d\u6742\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u672c\u9879\u76ee\u53ea\u6709\u4e00\u4e2a <code>src</code> \u76ee\u5f55\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</li> </ol> <pre><code>.\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 ec_robot.cpp\n    \u251c\u2500\u2500 ec_robot.hpp\n    \u2514\u2500\u2500 main.cpp\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#33","title":"3.3 \u5206\u6790","text":"<ul> <li>\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u5de5\u5177\u94fe\u6587\u4ef6 <code>toolchain-aarch64.cmake</code>\uff0c\u7528\u4e8e\u6307\u5b9a\u4ea4\u53c9\u7f16\u8bd1\u7684\u5de5\u5177\u94fe\uff1b</li> <li><code>EtherCATConfig.cmake</code> \u6587\u4ef6\u5728 <code>find_package</code> \u7684 Config \u6a21\u5f0f\u80fd\u591f\u76f4\u63a5\u627e\u5230\u7684\u4f4d\u7f6e\uff0c\u524d\u63d0\u662f\u5de5\u5177\u94fe\u6587\u4ef6\u4e2d\u7684 <code>CMAKE_FIND_ROOT_PATH</code> \u8bbe\u7f6e\u6b63\u786e\uff1b</li> <li>\u9879\u76ee\u9664\u4e86\u5de5\u5177\u94fe\u6587\u4ef6\u5916\uff0c\u53ea\u9700\u8981\u4e00\u4e2a <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u5e76\u4e14\u6784\u5efa\u65b9\u5f0f\u548c\u666e\u901a\u9879\u76ee\u4e00\u6837\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#34","title":"3.4 \u5b9e\u73b0","text":"<p>\u5728\u9879\u76ee\u4e2d\u6dfb\u52a0</p> <ul> <li><code>platform/toolchain-aarch64.cmake</code> \u2014\u2014 \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u6587\u4ef6</li> <li><code>CMakeLists.txt</code> \u2014\u2014 \u9879\u76ee\u6839\u76ee\u5f55\u7684 CMake \u914d\u7f6e\u6587\u4ef6</li> </ul> <p>\u5171 2 \u4e2a\u6587\u4ef6\uff0c\u5982\u4e0b\u6587\u4ef6\u7ed3\u6784\u6240\u793a</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt              (New)\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 ec_robot.cpp\n\u2502   \u251c\u2500\u2500 ec_robot.hpp\n\u2502   \u2514\u2500\u2500 main.cpp\n\u2514\u2500\u2500 platform\n    \u2514\u2500\u2500 toolchain-aarch64.cmake (New)\n</code></pre> <p>::: code-tabs</p> <p>@tab CMakeLists.txt</p> <p>```cmake :collapsed-lines cmake_minimum_required(VERSION 3.16)</p> <p>project(ec_robot)</p> <p>set(CMAKE_CXX_STANDARD 17)</p> <p>find_package(EtherCAT REQUIRED)</p> <p>aux_source_directory(src target_src) add_executable(ec_robot ${target_src})</p> <p>target_link_libraries(ec_robot   PRIVATE EtherLab::EtherCAT ) <pre><code>@tab platform/toolchain-aarch64.cmake\n\n```cmake\nset(CMAKE_SYSTEM_NAME Linux)\nset(CMAKE_SYSTEM_PROCESSOR aarch64)\n\nset(CMAKE_SYSROOT \"/home/ecdev/buildroot/host\")\n\nset(CMAKE_C_COMPILER \"/home/ecdev/buildroot/host/usr/bin/aarch64-linux-gnu-gcc\")\nset(CMAKE_CXX_COMPILER \"/home/ecdev/buildroot/host/usr/bin/aarch64-linux-gnu-g++\")\n\nset(CMAKE_FIND_ROOT_PATH \"/home/ecdev/buildroot/host\")\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\n</code></pre></p> <p>:::</p> <p>\u4e0d\u8981\u60ca\u8bb6\u4e3a\u4ec0\u4e48 <code>CMakeLists.txt</code> \u4e2d\u6ca1\u6709\u5f15\u7528\u5de5\u5177\u94fe\u6587\u4ef6\uff0c\u56e0\u4e3a\u4e60\u60ef\u4e0a\u4f1a\u5728 CMake \u6267\u884c\u914d\u7f6e\u751f\u6210\u8fc7\u7a0b\u65f6\u518d\u6307\u5b9a\u5de5\u5177\u94fe\u6587\u4ef6\u3002</p> <p>\u6253\u5f00\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c</p> <pre><code>mkdir build\ncmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=platform/toolchain-aarch64.cmake\ncmake --build build\n</code></pre> <p>\u5373\u53ef\u5b8c\u6210\u7f16\u8bd1\u3002\u53ef\u80fd\u6709\u90e8\u5206\u8bfb\u8005\u6ca1\u6709\u89c1\u8fc7 <code>-B</code> \u548c <code>-S</code> \u9009\u9879\uff0c\u8fd9\u662f CMake 3.13 \u7248\u672c\u5f15\u5165\u7684\u529f\u80fd\u3002<code>-B</code> \u9009\u9879\u7528\u4e8e\u6307\u5b9a\u6784\u5efa\u76ee\u5f55\uff0c<code>-S</code> \u9009\u9879\u7528\u4e8e\u6307\u5b9a\u6e90\u7801\u76ee\u5f55\uff0c\u8fd9\u6837\u53ef\u4ee5\u5c06\u6784\u5efa\u76ee\u5f55\u548c\u6e90\u7801\u76ee\u5f55\u5206\u5f00\uff0c\u907f\u514d\u5728\u6e90\u7801\u76ee\u5f55\u4e2d\u751f\u6210\u6784\u5efa\u6587\u4ef6\u3002</p> <p>\u7f16\u8bd1\u540e\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5728 <code>build</code> \u76ee\u5f55\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u5230\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u4f8b\u5982\u53ef\u4ee5\u4f7f\u7528 SSH \u5de5\u5177\u7684 <code>scp</code> \u547d\u4ee4\u5c06\u6587\u4ef6\u590d\u5236\u5230\u76ee\u6807\u5e73\u53f0\u4e0a\uff0c\u4f46\u8981\u786e\u4fdd\u76ee\u6807\u5e73\u53f0\u6709 <code>libethercat.so</code> \u7684\u5e93\u6587\u4ef6\uff0c\u5e76\u4e14\u4fdd\u8bc1\u590d\u5236\u540e\u7684\u53ef\u6267\u884c\u6587\u4ef6\u80fd\u591f\u627e\u5230\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#4","title":"4. \u8de8\u5e73\u53f0\u9879\u76ee","text":"<p>\u4ea4\u53c9\u7f16\u8bd1\u9879\u76ee\u867d\u7136\u6d89\u53ca\u5230\u4e0d\u540c\u7684\u5e73\u53f0\uff0c\u4f46\u662f\u53ea\u9700\u8981\u4e00\u4e2a\u5de5\u5177\u94fe\u6587\u4ef6\u5373\u53ef\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u4ea4\u53c9\u7f16\u8bd1\u9879\u76ee\u90fd\u53ea\u6d89\u53ca Linux \u5185\u6838\uff0c\u53ea\u4e0d\u8fc7\u6d89\u53ca\u5230\u4e0d\u540c\u7684 CPU \u67b6\u6784\u3001OS\u3001\u6587\u4ef6\u7cfb\u7edf\uff0c\u800c\u8de8\u5e73\u53f0\u9879\u76ee\u5219\u9700\u8981\u8003\u8651\u4e0d\u540c\u5e73\u53f0\u7684\u5dee\u5f02\uff0c\u4f8b\u5982 Windows \u548c Linux \u4e24\u4e2a\u5e73\u53f0\u7684\u5dee\u5f02\u5c31\u975e\u5e38\u5927\u3002</p> <p>\u8de8\u5e73\u53f0\u662f\u9879\u76ee\u5f00\u53d1\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u5411\uff0c\u6309\u7167 ISO \u6807\u51c6\u7f16\u5199\u7684 C++ \u7a0b\u5e8f\u8de8\u5e73\u53f0\u6027\u8f83\u597d\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u5f80\u5f80\u4f1a\u4f7f\u7528\u4e00\u4e9b\u5e73\u53f0\u76f8\u5173\u6216\u8005\u662f\u7f16\u8bd1\u5668\u76f8\u5173\u7684 API\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u8de8\u5e73\u53f0\u7684\u56f0\u96be\u3002\u4f7f\u7528 CMake \u5b8c\u6210\u8de8\u5e73\u53f0\u9879\u76ee\u7684\u5f00\u53d1\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\uff0cCMake \u63d0\u4f9b\u4e86\u5f88\u591a\u5de5\u5177\u548c\u51fd\u6570\uff0c\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u597d\u7684\u5b9e\u73b0\u8de8\u5e73\u53f0\u9879\u76ee\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8de8\u5e73\u53f0\u9879\u76ee\u7684\u5f00\u53d1\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a</p> <ul> <li>\u7f16\u8bd1\u5668\u7684\u7f16\u8bd1\u9009\u9879\u4e0d\u540c\uff0c\u4f8b\u5982\u7528\u4e8e\u63a7\u5236 C++ \u8bed\u8a00\u6807\u51c6\u7684\u9009\u9879\uff0c\u5728 GCC \u4e2d\u662f <code>-std=c++&lt;ver&gt;</code>\uff0c\u5728 MSVC \u4e2d\u662f <code>/std:c++&lt;ver&gt;</code>\uff1b</li> </ul> <p>::: important   \u4e0d\u8fc7\u5728 CMake \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>CMAKE_CXX_STANDARD</code> \u53d8\u91cf\u6765\u6307\u5b9a C++ \u6807\u51c6\uff0cCMake \u4f1a\u6839\u636e\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u81ea\u52a8\u9009\u62e9\u6b63\u786e\u7684\u7f16\u8bd1\u9009\u9879\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3e\u4e2a\u4f8b\u5b50\u3002   :::</p> <ul> <li>\u4e0d\u540c\u5e73\u53f0\u7684\u5e93\u6587\u4ef6\u540e\u7f00\u540d\u4e0d\u540c\uff0c\u4f8b\u5982 Windows \u4e0b\u7684\u9759\u6001\u5e93\u6587\u4ef6\u540e\u7f00\u540d\u662f <code>*.lib</code>\uff0cLinux \u4e0b\u7684\u9759\u6001\u5e93\u6587\u4ef6\u540e\u7f00\u540d\u662f <code>*.a</code>\uff0c\u5e76\u4e14\u5e93\u6587\u4ef6\u7684\u7ec4\u7ec7\u65b9\u5f0f\u4e5f\u4e0d\u540c\uff0cWindows \u4e0b\u5728\u94fe\u63a5\u52a8\u6001\u5e93\u65f6\u9700\u8981\u4f7f\u7528\u5bfc\u5165\u5e93 <code>*.lib</code>\uff0cLinux \u4e0b\u5728\u94fe\u63a5\u52a8\u6001\u5e93\u65f6\u5219\u76f4\u63a5\u4f7f\u7528\u52a8\u6001\u5e93 <code>*.so</code>\u3002</li> <li>\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u4e0d\u540c\uff0cWindows \u4e0b\u7684\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u662f <code>C:\\Program Files</code>\uff0cLinux \u4e0b\u7684\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\u662f <code>/usr/local</code>\uff0c\u4f46 Windows \u4e0d\u5efa\u8bae\u76f4\u63a5\u5b89\u88c5\u5230 <code>C:\\Program Files</code>\uff0c\u800c Linux \u5219\u6ca1\u6709\u8fc7\u591a\u7684\u9650\u5236\u3002</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#41","title":"4.1 \u9884\u671f\u76ee\u6807","text":"<p>\u73b0\u8ba1\u5212\u5f00\u53d1\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684\u57fa\u7840\u6570\u503c\u7b97\u6cd5\u548c\u6700\u4f18\u5316\u5e93 <code>numopt</code>\uff0c\u8be5\u5e93\u9700\u8981\u652f\u6301 Windows \u548c Linux \u4e24\u4e2a\u5e73\u53f0\uff0c<code>numopt</code> \u9879\u76ee\u7684\u5f00\u53d1\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ol> <li>\u9700\u8981\u652f\u6301 C++17 \u6807\u51c6\uff1b</li> <li>\u9ed8\u8ba4\u4ee5\u9759\u6001\u5e93\u7684\u5f62\u5f0f\u6784\u5efa <code>numopt</code>\uff0c\u4f46\u5141\u8bb8\u7528\u6237\u901a\u8fc7 CMake \u9009\u9879\u8bbe\u7f6e\u6784\u5efa\u4e3a\u52a8\u6001\u5e93\uff1b</li> <li>\u5e93\u5305\u542b\u4e86 <code>core</code>\u3001<code>num</code> \u548c <code>opt</code> 3 \u4e2a\u6a21\u5757\u548c <code>numopt_version</code> 1 \u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5176\u4e2d <code>num</code> \u548c <code>opt</code> \u4f9d\u8d56 <code>core</code> \u6a21\u5757\uff0c<code>numopt_version</code> \u4f9d\u8d56 <code>core</code> \u6a21\u5757\uff1b</li> <li><code>numopt</code> \u9879\u76ee\u7684\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u5982\u4e0b</li> </ol> \u5185\u5bb9 Window \u5b89\u88c5\u8def\u5f84 Linux \u5b89\u88c5\u8def\u5f84 \u9879\u76ee\u6839\u76ee\u5f55 <code>${CMAKE_BINARY_DIR}/install</code> \u8bb0\u4f5c <code>&lt;prefix&gt;</code> <code>/usr/local</code> \u8bb0\u4f5c <code>&lt;prefix&gt;</code> \u5934\u6587\u4ef6 <code>&lt;prefix&gt;\\include</code> <code>&lt;prefix&gt;/include/numopt</code> \u53ef\u6267\u884c\u6587\u4ef6 <code>&lt;prefix&gt;\\x64\\vc16\\bin</code> <code>&lt;prefix&gt;/bin</code> \u9759\u6001\u5e93\u6587\u4ef6 <code>&lt;prefix&gt;\\x64\\vc16\\lib</code> <code>&lt;prefix&gt;/lib</code> \u52a8\u6001\u5e93\u6587\u4ef6 <code>&lt;prefix&gt;\\x64\\vc16\\bin</code> <code>&lt;prefix&gt;/lib</code> \u5bfc\u5165\u5e93\u6587\u4ef6 <code>&lt;prefix&gt;\\x64\\vc16\\lib</code> \u2014\u2014 CMake \u914d\u7f6e\u6587\u4ef6 <code>&lt;prefix&gt;\\x64\\vc16\\lib</code> <code>&lt;prefix&gt;/lib/cmake/numopt</code> <ol> <li>\u9700\u8981\u63d0\u4f9b <code>uninstall</code> \u76ee\u6807\uff0c\u7528\u4e8e\u5378\u8f7d\u5df2\u5b89\u88c5\u7684\u6587\u4ef6\uff0c\u5728\u6267\u884c</li> </ol> <pre><code>cmake --build . --target uninstall\n</code></pre> <p>\u540e\uff0c\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u90fd\u4f1a\u88ab\u5220\u9664\u3002</p> <p>\u6587\u4ef6\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p>``` :collapsed-lines . \u251c\u2500\u2500 modules \u2502   \u251c\u2500\u2500 core \u2502   \u2502   \u251c\u2500\u2500 include \u2502   \u2502   \u2502   \u2514\u2500\u2500 ... \u2502   \u2502   \u2514\u2500\u2500 src \u2502   \u2502       \u2514\u2500\u2500 ... \u2502   \u251c\u2500\u2500 num \u2502   \u2502   \u251c\u2500\u2500 include \u2502   \u2502   \u2502   \u2514\u2500\u2500 ... \u2502   \u2502   \u2514\u2500\u2500 src \u2502   \u2502       \u2514\u2500\u2500 ... \u2502   \u2514\u2500\u2500 opt \u2502       \u251c\u2500\u2500 include \u2502       \u2502   \u2514\u2500\u2500 ... \u2502       \u2514\u2500\u2500 src \u2502           \u2514\u2500\u2500 ... \u2514\u2500\u2500 samples     \u2514\u2500\u2500 version.cpp <pre><code>### 4.2 \u5b9e\u73b0\n\n\u5728\u9879\u76ee\u6784\u5efa\u90e8\u5206\u548c[\u5e38\u89c4\u975e\u8de8\u5e73\u53f0\u9879\u76ee](#_1-\u5e38\u89c4\u975e\u8de8\u5e73\u53f0\u9879\u76ee)\u4e00\u81f4\uff0c\u53ea\u662f\u5728\u5b89\u88c5\u90e8\u5206\u9700\u8981\u8003\u8651\u4e0d\u540c\u5e73\u53f0\u7684\u5dee\u5f02\uff0c\u56e0\u6b64\u8de8\u5e73\u53f0\u9879\u76ee\u53ea\u662f\u6bd4\u5e38\u89c4\u9879\u76ee\u591a\u4e86\u4e00\u4e9b\u5e73\u53f0\u76f8\u5173\u7684\u914d\u7f6e\u3002\n\n\u548c\u5e38\u89c4\u975e\u8de8\u5e73\u53f0\u9879\u76ee\u4e00\u6837\uff0c\u5728\u9879\u76ee\u4e2d\u6dfb\u52a0\n\n- `modules/core/CMakeLists.txt` \u2014\u2014 `core` \u6a21\u5757\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/num/CMakeLists.txt` \u2014\u2014 `num` \u6a21\u5757\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/opt/CMakeLists.txt` \u2014\u2014 `opt` \u6a21\u5757\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `modules/CMakelists.txt` \u2014\u2014 \u9879\u76ee\u7684\u6a21\u5757\u5217\u8868\n- `samples/CMakeLists.txt` \u2014\u2014 \u793a\u4f8b\u7a0b\u5e8f\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `CMakeLists.txt` \u2014\u2014 \u9879\u76ee\u6839\u76ee\u5f55\u7684 CMake \u914d\u7f6e\u6587\u4ef6\n- `cmake/numoptInstall.cmake` \u2014\u2014 \u4e0e\u9879\u76ee\u5b89\u88c5\u8def\u5f84\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\n- `cmake/templates/numoptConfig.cmake.in` \u2014\u2014 \u9879\u76ee\u7684 CMake \u914d\u7f6e\u6587\u4ef6\u7684\u6a21\u677f\u6587\u4ef6\n- `cmake/templates/cmake_uninstall.cmake.in` \u2014\u2014 \u81ea\u5b9a\u4e49\u5378\u8f7d\u76ee\u6807\u7684\u6a21\u677f\u6587\u4ef6\n\n\u5171 7 \u4e2a\u6587\u4ef6\uff0c\u5982\u4e0b\u6587\u4ef6\u7ed3\u6784\u6240\u793a\n\n``` :collapsed-lines\n.\n\u251c\u2500\u2500 CMakeLists.txt                   (New)\n\u251c\u2500\u2500 cmake\n\u2502   \u251c\u2500\u2500 numoptInstall.cmake          (New)\n\u2502   \u2514\u2500\u2500 templates\n\u2502       \u251c\u2500\u2500 cmake_uninstall.cmake.in (New)\n\u2502       \u2514\u2500\u2500 numoptConfig.cmake.in    (New)\n\u251c\u2500\u2500 modules\n\u2502   \u251c\u2500\u2500 core\n\u2502   \u2502   \u251c\u2500\u2500 CMakeLists.txt           (New)\n\u2502   \u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 src\n\u2502   \u2502       \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 num\n\u2502   \u2502   \u251c\u2500\u2500 CMakeLists.txt           (New)\n\u2502   \u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 src\n\u2502   \u2502       \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 opt\n\u2502   \u2502   \u251c\u2500\u2500 CMakeLists.txt           (New)\n\u2502   \u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 src\n\u2502   \u2502       \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 CMakeLists.txt               (New)\n\u2514\u2500\u2500 samples\n    \u251c\u2500\u2500 CMakeLists.txt               (New)\n    \u2514\u2500\u2500 version.cpp\n</code></pre></p> <p>\u65b9\u4fbf\u8d77\u89c1\uff0c\u5c31\u4e0d\u6dfb\u52a0\u7c7b\u4f3c\u4e8e <code>vl_add_module</code> \u548c <code>vl_add_exe</code> \u7684\u5b8f\u4e86\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#421","title":"4.2.1 \u9879\u76ee\u914d\u7f6e","text":"<p>::: code-tabs</p> <p>@tab CMakeLists.txt</p> <p>```cmake :collapsed-lines</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_6","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_13","title":"\u9879\u76ee\u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_7","title":"---------------------------------------------------------------------------- <p>cmake_minimum_required(VERSION 3.16)</p> <p>project(   numopt   LANGUAGES CXX )</p> <p>set(CMAKE_CXX_STANDARD 17)</p> <p>option(BUILD_SHARED_LIBS \"Build shared libraries?\" OFF)</p> <p>include(cmake/numoptInstall.cmake)</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_8","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_14","title":"\u76ee\u6807\u6784\u5efa","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_9","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#main-target","title":"main target <p>add_subdirectory(modules)</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#executable-target","title":"executable target <p>add_subdirectory(samples)</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#uninstall-target","title":"uninstall target <p>if(NOT TARGET uninstall)   configure_file(     \"${CMAKE_CURRENT_SOURCE_DIR}/cmake/templates/cmake_uninstall.cmake.in\"     \"${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake\"     IMMEDIATE @ONLY   )</p> <p>add_custom_target(uninstall     COMMAND ${CMAKE_COMMAND} -P ${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake   ) endif()</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_10","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_15","title":"\u5bfc\u51fa\u3001\u5b89\u88c5","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_11","title":"---------------------------------------------------------------------------- <p>install(   EXPORT numoptModules   DESTINATION ${NUMOPT_CFG_INSTALL_PATH}   FILE numoptModules.cmake )</p> <p>file(RELATIVE_PATH NUMOPT_INSTALL_RELATIVE_PATH    \"${CMAKE_INSTALL_PREFIX}/${NUMOPT_CFG_INSTALL_PATH}/\" ${CMAKE_INSTALL_PREFIX})</p> <p>configure_file(   cmake/numoptConfig.cmake.in   \"${CMAKE_CURRENT_BINARY_DIR}/numoptConfig.cmake\"   @ONLY )</p> <p>install(   FILES \"${CMAKE_CURRENT_BINARY_DIR}/numoptConfig.cmake\"   DESTINATION ${NUMOPT_CFG_INSTALL_PATH} ) <pre><code>@tab cmake/numoptInstall.cmake\n\n```cmake :collapsed-lines\n# ----------------------------------------------------------\n#  \u9879\u76ee\u5b89\u88c5\u8def\u5f84\u7684\u9884\u5148\u914d\u7f6e\n# ----------------------------------------------------------\nif(NOT CMAKE_TOOLCHAIN_FILE)\n  if(WIN32)\n    set(CMAKE_INSTALL_PREFIX \"${CMAKE_BINARY_DIR}/install\")\n  else()\n    set(CMAKE_INSTALL_PREFIX \"/usr/local\")\n  endif()\nelse()\n  # \u4ea4\u53c9\u7f16\u8bd1\u65f6\u7684\u5b89\u88c5\u8def\u5f84\n  set(CMAKE_INSTALL_PREFIX \"${CMAKE_BINARY_DIR}/install\")\nendif()\n\n# ----------------------------------------------------------\n#  MSVC \u5b89\u88c5\u8def\u5f84\u7684\u9884\u5148\u914d\u7f6e\n# ----------------------------------------------------------\nif(MSVC)\n  if(\"${CMAKE_GENERATOR}\" MATCHES \"(Win64|IA64)\")\n    set(ARCH_forMSVC \"x64\")\n  elseif(\"${CMAKE_GENERATOR_PLATFORM}\" MATCHES \"ARM64\")\n    set(ARCH_forMSVC \"ARM64\")\n  elseif(\"${CMAKE_GENERATOR}\" MATCHES \"ARM\")\n    set(ARCH_forMSVC \"ARM\")\n  elseif(\"${CMAKE_SIZEOF_VOID_P}\" STREQUAL \"8\")\n    set(ARCH_forMSVC \"x64\")\n  else()\n    set(ARCH_forMSVC x86)\n  endif()\n\n  if(MSVC_VERSION EQUAL 1400)\n    set(RUNTIME_forMSVC vc8)\n  elseif(MSVC_VERSION EQUAL 1500)\n    set(RUNTIME_forMSVC vc9)\n  elseif(MSVC_VERSION EQUAL 1600)\n    set(RUNTIME_forMSVC vc10)\n  elseif(MSVC_VERSION EQUAL 1700)\n    set(RUNTIME_forMSVC vc11)\n  elseif(MSVC_VERSION EQUAL 1800)\n    set(RUNTIME_forMSVC vc12)\n  elseif(MSVC_VERSION EQUAL 1900)\n    set(RUNTIME_forMSVC vc14)\n  elseif(MSVC_VERSION MATCHES \"^191[0-9]$\")\n    set(RUNTIME_forMSVC vc15)\n  elseif(MSVC_VERSION MATCHES \"^192[0-9]$\")\n    set(RUNTIME_forMSVC vc16)\n  elseif(MSVC_VERSION MATCHES \"^19[34][0-9]$\")\n    set(RUNTIME_forMSVC vc17)\n  endif()\nendif()\n\n# ----------------------------------------------------------\n#  \u5b89\u88c5\u8def\u5f84\u8bbe\u7f6e\n# ----------------------------------------------------------\nif(MSVC)\n  if(DEFINED ARCH_forMSVC AND DEFINED RUNTIME_forMSVC)\n    set(MSVC_INSTALL_PREFIX \"${ARCH_forMSVC}/${RUNTIME_forMSVC}\")\n  else()\n    set(MSVC_INSTALL_PREFIX \"\")\n  endif()\n\n  set(NUMOPT_INC_INSTALL_PATH \"include\")\n  set(NUMOPT_LIB_INSTALL_PATH \"${MSVC_INSTALL_PREFIX}/lib\")\n  set(NUMOPT_BIN_INSTALL_PATH \"${MSVC_INSTALL_PREFIX}/bin\")\n  set(NUMOPT_CFG_INSTALL_PATH \"${MSVC_INSTALL_PREFIX}/lib\")\nelseif()\n  set(NUMOPT_INC_INSTALL_PATH \"include/numopt\")\n  set(NUMOPT_LIB_INSTALL_PATH \"lib\")\n  set(NUMOPT_BIN_INSTALL_PATH \"bin\")\n  set(NUMOPT_CFG_INSTALL_PATH \"lib/cmake/numopt\")\nendif()\n</code></pre></p> <p>:::</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#422","title":"4.2.2 \u6a21\u5757\u914d\u7f6e","text":"<p><code>modules</code> \u76ee\u5f55\u4e0b\u7684 <code>CMakeLists.txt</code> \u548c\u5404\u4e2a\u6a21\u5757\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6\u5982\u4e0b\uff1a</p> <p>::: code-tabs</p> <p>@tab modules</p> <pre><code>add_subdirectory(core)\nadd_subdirectory(num)\nadd_subdirectory(opt)\n</code></pre> <p>@tab <code>core</code> \u6a21\u5757</p> <p>```cmake :collapsed-lines aux_source_directory(src core_src)</p> <p>add_library(core ${core_src})</p> <p>target_include_directories(core PUBLIC   $   $ ) <p>install(TARGETS core   LIBRARY DESTINATION ${NUMOPT_BIN_INSTALL_PATH}   ARCHIVE DESTINATION ${NUMOPT_LIB_INSTALL_PATH}   RUNTIME DESTINATION ${NUMOPT_BIN_INSTALL_PATH}   INCLUDES DESTINATION ${NUMOPT_INC_INSTALL_PATH} ) <pre><code>@tab `num` \u6a21\u5757\n\n```cmake :collapsed-lines\naux_source_directory(src num_src)\n\nadd_library(num ${num_src})\n\ntarget_include_directories(num PUBLIC\n  $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n  $&lt;INSTALL_INTERFACE:${NUMOPT_INC_INSTALL_PATH}&gt;\n)\n\ntarget_link_libraries(num PUBLIC core)\n\ninstall(TARGETS num\n  LIBRARY DESTINATION ${NUMOPT_BIN_INSTALL_PATH}\n  ARCHIVE DESTINATION ${NUMOPT_LIB_INSTALL_PATH}\n  RUNTIME DESTINATION ${NUMOPT_BIN_INSTALL_PATH}\n  INCLUDES DESTINATION ${NUMOPT_INC_INSTALL_PATH}\n)\n</code></pre></p> <p>@tab <code>opt</code> \u6a21\u5757</p> <p>```cmake :collapsed-lines aux_source_directory(src opt_src)</p> <p>add_library(opt ${opt_src})</p> <p>target_include_directories(opt PUBLIC   $   $ ) <p>target_link_libraries(opt PUBLIC core)</p> <p>install(TARGETS opt   LIBRARY DESTINATION ${NUMOPT_BIN_INSTALL_PATH}   ARCHIVE DESTINATION ${NUMOPT_LIB_INSTALL_PATH}   RUNTIME DESTINATION ${NUMOPT_BIN_INSTALL_PATH}   INCLUDES DESTINATION ${NUMOPT_INC_INSTALL_PATH} ) <pre><code>:::\n\n::: tip\n\u7531\u4e8e\u6ca1\u6709\u4f7f\u7528\u5b8f\uff0c`core` \u6a21\u5757\u3001`num` \u6a21\u5757\u548c `opt` \u6a21\u5757\u7684\u914d\u7f6e\u5199\u4e86\u5927\u91cf\u7684\u91cd\u590d\u4ee3\u7801\uff0c\u53ef\u8bfb\u6027\u964d\u4f4e\u3002\u56e0\u6b64\u5728\u5fc5\u8981\u65f6\u5019\u4f7f\u7528\u5b8f\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\u8fd9\u91cc\u5c31\u4e0d\u518d\u5c55\u793a\u5b8f\u7684\u4f7f\u7528\uff0c\u8bfb\u8005\u53ef\u4ee5\u6309\u7167[\u5e38\u89c4\u975e\u8de8\u5e73\u53f0\u9879\u76ee\u914d\u7f6e](#_1-4-1-\u9879\u76ee\u914d\u7f6e)\u4e2d\u7684\u5185\u5bb9\u81ea\u884c\u6dfb\u52a0\u5b8f\u3002\n:::\n\n#### 4.2.3 \u793a\u4f8b\u7a0b\u5e8f\u914d\u7f6e\n\n::: code-tabs\n\n@tab samples/CMakeLists.txt\n\n```cmake :collapsed-lines\nadd_executable(numopt_version version.cpp)\n\ntarget_link_libraries(numopt_version PRIVATE core)\n</code></pre></p> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#424-cmake","title":"4.2.4 CMake \u914d\u7f6e\u6587\u4ef6\u6a21\u677f","text":"<p><code>cmake_uninstall.cmake.in</code> \u6587\u4ef6\u53c2\u8003\u81ea\u6b64\u5904\uff0c\u7528\u6237\u5728\u5b9e\u9645\u4f7f\u7528\u65f6\u6700\u597d\u52a0\u4e0a\u51fa\u5904\u3002</p> <p>::: code-tabs</p> <p>@tab numoptConfig.cmake.in</p> <p>```cmake :collapsed-lines</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_12","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#numopt-cmake","title":"numopt CMake \u914d\u7f6e\u6587\u4ef6","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_16","title":"","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#cmake","title":"** \u8be5\u6587\u4ef6\u7531 CMake \u751f\u6210\uff0c\u8bf7\u52ff\u624b\u52a8\u4fee\u6539 **","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_17","title":"","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_18","title":"\u57fa\u672c\u7528\u6cd5\uff1a","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#find_packagenumopt-required","title":"find_package(numopt REQUIRED)","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#target_link_librariesyour_target-private-numopt_libs","title":"target_link_libraries(your_target PRIVATE ${numopt_LIBS})","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_13","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_14","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#numopt","title":"\u83b7\u53d6 numopt \u5b89\u88c5\u8def\u5f84","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_15","title":"---------------------------------------------------------------------------- <p>get_filename_component(NUMOPT_CONFIG_PATH \"${CMAKE_CURRENT_LIST_FILE}\" PATH) get_filename_component(NUMOPT_INSTALL_PATH   \"${NUMOPT_CONFIG_PATH}/@NUMOPT_INSTALL_RELATIVE_PATH@\" REALPATH )</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_16","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_19","title":"\u8bbe\u7f6e\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u53d8\u91cf","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_17","title":"---------------------------------------------------------------------------- <p>set(numopt_INCLUDE_DIRS \"${NUMOPT_INSTALL_PATH}/@NUMOPT_INC_INSTALL_PATH@\")</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_18","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_20","title":"\u8bbe\u7f6e\u5e93\u6587\u4ef6\u8def\u5f84\u53d8\u91cf","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_19","title":"---------------------------------------------------------------------------- <p>set(numopt_LIBS @NUMOPT_LIB_COMPONENTS@)</p> <p>if(NOT TARGET core)   include(\"${NUMOPT_CONFIG_PATH}/numoptModules.cmake\") endif()</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_20","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_21","title":"\u641c\u5bfb\u7684\u7ed3\u679c\u3001\u72b6\u6001","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_21","title":"---------------------------------------------------------------------------- <p>include(FindPackageHandleStandardArgs)</p> <p>find_package_handle_standard_args(numopt   REQUIRED_VARS numopt_INSTALL_PATH ) <pre><code>@tab cmake_uninstall.cmake.in\n\n```cmake :collapsed-lines\n# -----------------------------------------------\n# File that provides \"make uninstall\" target\n# We use the file 'install_manifest.txt'\n#\n# Details:\n# https://gitlab.kitware.com/cmake/community/-/wikis/FAQ#can-i-do-make-uninstall-with-cmake\n# -----------------------------------------------\n\nif(NOT EXISTS \"@CMAKE_BINARY_DIR@/install_manifest.txt\")\n  message(FATAL_ERROR\n    \"Cannot find install manifest: \\\"@CMAKE_BINARY_DIR@/install_manifest.txt\\\"\"\n  )\nendif()\n\nfile(READ \"@CMAKE_BINARY_DIR@/install_manifest.txt\" files)\nstring(REGEX REPLACE \"\\n\" \";\" files \"${files}\")\nforeach(file ${files})\n  message(STATUS \"Uninstalling: $ENV{DESTDIR}${file}\")\n  if(IS_SYMLINK \"$ENV{DESTDIR}${file}\" OR EXISTS \"$ENV{DESTDIR}${file}\")\n    execute_process(\n      COMMAND \"@CMAKE_COMMAND@\" \"-E\" \"remove\" \"$ENV{DESTDIR}${file}\"\n      OUTPUT_VARIABLE rm_out\n      RESULT_VARIABLE rm_retval\n    )\n    if(NOT \"${rm_retval}\" STREQUAL 0)\n      message(FATAL_ERROR \"Problem when removing $ENV{DESTDIR}${file}\")\n    endif()\n  else(IS_SYMLINK \"$ENV{DESTDIR}${file}\" OR EXISTS \"$ENV{DESTDIR}${file}\")\n    message(STATUS \"File $ENV{DESTDIR}${file} does not exist.\")\n  endif()\nendforeach()\n</code></pre></p> <p>:::</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#43-visual-studio","title":"4.3 \u9488\u5bf9 Visual Studio \u7684\u7279\u6b8a\u8bbe\u8ba1","text":"<p>\u5bf9\u4e8e\u591a\u4e2a\u76ee\u6807\u7684\u9879\u76ee\uff0c\u4f1a\u751f\u6210\u591a\u4e2a\u5e93\u6587\u4ef6\uff0c\u4f8b\u5982\u672c <code>numopt</code> \u9879\u76ee\uff0c\u5728 Windows \u4e0b\u4f1a\u751f\u6210 <code>core.lib</code>\u3001<code>num.lib</code> \u548c <code>opt.lib</code> 3 \u4e2a\u5e93\u6587\u4ef6\uff0c\u5728 Visual Studio \u4e2d\uff0c\u5229\u7528\u8fd9 3 \u4e2a\u5e93\u6587\u4ef6\u8fdb\u884c\u5f00\u53d1\uff0c\u9700\u8981\u518d\u9879\u76ee\u4e2d\u624b\u52a8\u6dfb\u52a0\uff0c\u8fd9\u6837\u4f1a\u589e\u52a0\u5f00\u53d1\u8005\u7684\u5de5\u4f5c\u91cf\u3002\u4e3a\u4e86\u7b80\u5316\u5f00\u53d1\u8005\u7684\u5de5\u4f5c\uff0c\u53ef\u4ee5\u5c06\u8fd9 3 \u4e2a\u5e93\u6587\u4ef6\u6253\u5305\u6210\u4e00\u4e2a <code>numopt_world.lib</code> \u6587\u4ef6\uff0c\u8fd9\u6837\u5f00\u53d1\u8005\u53ea\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u5e93\u6587\u4ef6\u5373\u53ef\u3002</p> <p>\u4f8b\u5982 OpenCV \u539f\u5148\u4f1a\u751f\u6210 <code>opencv_core.lib</code>\u3001<code>opencv_imgproc.lib</code> \u4ee5\u53ca <code>opencv_highgui.lib</code> \u7b49\u5bfc\u5165\u5e93\u6587\u4ef6\uff0c\u5728\u542f\u7528 <code>BUILD_opencv_world</code> \u9009\u9879\u540e\uff0c\u5219\u4e0d\u518d\u751f\u6210\u539f\u5148\u7684\u5e93\u6587\u4ef6\uff0c\u800c\u662f\u751f\u6210\u4e00\u4e2a <code>opencv_world.lib</code> \u5bfc\u5165\u5e93\u6587\u4ef6\u3002\u8fd9\u65f6\u5f00\u53d1\u8005\u5728\u4f7f\u7528 Visual Studio \u5bf9\u9879\u76ee\u7684\u5bfc\u5165\u5e93\u8fdb\u884c\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u53ea\u9700\u6dfb\u52a0 <code>opencv_world.lib</code> \u8be5\u5bfc\u5165\u5e93\u6587\u4ef6\u7684\u8def\u5f84\u548c\u540d\u5b57\u5373\u53ef\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728 <code>core</code>\u3001<code>num</code> \u548c <code>opt</code> \u6a21\u5757\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0\u5224\u65ad\uff0c\u4e0b\u9762\u4ee5 <code>core</code> \u6a21\u5757\u4e3a\u4f8b\uff1a</p> <pre><code>if(NOT BUILD_WORLD)\n  # \u539f\u5148\u7684\u914d\u7f6e\nelse()\n  aux source_directory(src core_src)\n  set(NUMOPT_SRC \"${NUMOPT_SRCS} ${core_src}\" CACHE INTERNAL \"\")\n  set(NUMOPT_INC \"${NUMOPT_INC} ${CMAKE_CURRENT_SOURCE_DIR}/include\" CACHE INTERNAL \"\")\n  # \u7531\u4e8e\u6ca1\u6709\u5916\u90e8\u4f9d\u8d56\u5e93\uff0c\u6240\u4ee5\u5c31\u4e0d\u5199 NUMOPT_LIB \u4e86\nendif()\n</code></pre> <p>\u4fee\u6539\u9879\u76ee\u7684\u6839\u76ee\u5f55\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6</p> <p>```cmake :collapsed-lines</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_22","title":"...","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_22","title":"----------------------------------------------------------------------------","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_23","title":"\u76ee\u6807\u6784\u5efa","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#-_23","title":"---------------------------------------------------------------------------- <p>if(BUILD_WORLD)   set(NUMOPT_SRC \"\" CACHE INTERNAL \"\")   set(NUMOPT_INC \"\" CACHE INTERNAL \"\")   # \u7531\u4e8e\u6ca1\u6709\u5916\u90e8\u4f9d\u8d56\u5e93\uff0c\u6240\u4ee5\u5c31\u4e0d\u5199 NUMOPT_LIB \u4e86 endif()</p> <p>add_subdirectory(modules) add_subdirectory(samples)</p> <p>if(BUILD_WORLD)   add_library(numopt_world ${NUMOPT_SRC})   target_include_directories(numopt_world PUBLIC     $     $   ) endif()","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_24","title":"... <pre><code>\u8fd8\u6709\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u662f\u4f7f\u7528[\u5bf9\u8c61\u5e93](05-\u76ee\u6807\u6784\u5efa.md#_3-1-1-\u5bf9\u8c61\u5e93)\uff0c\u5c06 `core`\u3001`num` \u548c `opt` \u6a21\u5757\u7684\u6e90\u6587\u4ef6\u7f16\u8bd1\u6210\u5bf9\u8c61\u6587\u4ef6\uff0c\u7136\u540e\u518d\u5c06\u8fd9\u4e9b\u5bf9\u8c61\u6587\u4ef6\u94fe\u63a5\u6210\u4e00\u4e2a\u5e93\u6587\u4ef6\u3002\u4f8b\u5982\n\n```cmake\nadd_library(core_obj OBJECT ${core_src})\n</code></pre> <p>\u5f00\u53d1\u8005\u53ef\u4ee5\u81ea\u884c\u589e\u52a0 <code>if</code> \u5224\u65ad\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u6765\u9009\u62e9\u5408\u9002\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <p>\u4f7f\u7528\u5f62\u5982\u4ee5\u4e0b\u7684\u4ee3\u7801\u6765\u5b89\u88c5\uff1a</p> <p>::: code-tabs</p> <p>@tab <code>core</code> \u6a21\u5757</p> <pre><code>add_library(core_obj OBJECT ${core_src})\n\ninstall(TARGETS core_obj\n  EXPORT numoptModules\n)\n</code></pre> <p>@tab <code>num</code> \u6a21\u5757</p> <pre><code>add_library(num_obj OBJECT ${num_src})\n\ninstall(TARGETS num_obj\n  EXPORT numoptModules\n)\n</code></pre> <p>@tab <code>opt</code> \u6a21\u5757</p> <pre><code>add_library(opt_obj OBJECT ${opt_src})\n\ninstall(TARGETS opt_obj\n  EXPORT numoptModules\n)\n</code></pre> <p>:::</p> <p>\u4e0d\u8fc7\uff0c\u5bf9\u8c61\u5e93\u7b49\u6548\u4e8e\u5b89\u88c5\u4e00\u4e2a\u63a5\u53e3\u5e93\uff0c\u5b89\u88c5\u63a5\u53e3\u5e93\u7684\u6548\u679c\u53ef\u4ee5\u53c2\u8003\u301010\u3011\u9879\u76ee\u7684\u5bfc\u51fa\u4e0e\u5b89\u88c5 - \u601d\u8003\u4e2d\u7684\u7b2c 2 \u4e2a\u95ee\u9898\uff0c\u56e0\u6b64\u5728\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e5f\u5177\u6709\u76f8\u5e94\u7684\u4fe1\u606f\uff0c\u4f8b\u5982 <code>numoptModules.cmake</code> \u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f1a\u5305\u542b\u5927\u81f4\u5982\u4e0b\u5185\u5bb9</p> <pre><code># Create imported target core_obj\nadd_library(core_obj INTERFACE IMPORTED)\n\n# Create imported target num_obj\nadd_library(num_obj INTERFACE IMPORTED)\n\n# Create imported target opt_obj\nadd_library(opt_obj INTERFACE IMPORTED)\n</code></pre> <p>::: warning \u5982\u679c\u5e0c\u671b\u5728 <code>numoptModules.cmake</code> \u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6\u4e2d\u53ea\u5305\u542b\u4e00\u4e2a <code>numopt_world</code> \u76ee\u6807\u800c\u4e0d\u5305\u542b <code>core_obj</code> \u7b49\u7531\u5bf9\u8c61\u5e93\u5bfc\u51fa\u751f\u6210\u7684\u63a5\u53e3\u5e93\uff0c\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e00\u79cd\u65b9\u6848\u3002 :::</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/11-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/#_25","title":"\u5199\u5728\u540e\u9762","text":"<p>\u6709\u5173 CMake \u9879\u76ee\u5b9e\u6218\u7684\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003 RMVL[^2] \u9879\u76ee\u7684 CMake \u6846\u67b6\uff0c\u672c\u6587\u6d89\u53ca\u5230\u7684</p> <ul> <li>\u5e38\u89c4\u76ee\u6807\u6784\u5efa\u7684\u5185\u5bb9</li> <li>\u5916\u90e8\u4f9d\u8d56\u7ba1\u7406\u7684\u5185\u5bb9</li> <li>\u4ea4\u53c9\u7f16\u8bd1\u7684\u5185\u5bb9</li> <li>\u8de8\u5e73\u53f0\u7684\u5185\u5bb9</li> </ul> <p>\u5bf9\u5e94\u7684 CMake \u914d\u7f6e\uff0c\u90fd\u80fd\u5728 RMVL \u9879\u76ee\u4e2d\u627e\u5230\u3002</p> <p>[^1]: open62541 developers. open62541, September 2014. [^2]: zhaoxi and other RMVL developers. rmvl, September 2023.</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/","title":"\u301012\u3011CTest \u5de5\u5177","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#1","title":"1. \u524d\u8a00","text":"<p>CMake \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a CTest \u7684\u5de5\u5177\uff0c\u7528\u4e8e\u7ba1\u7406\u548c\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002\u4e3b\u8981\u529f\u80fd\u6709</p> <ul> <li>\u81ea\u52a8\u53d1\u73b0\u548c\u8fd0\u884c\u6d4b\u8bd5</li> <li>\u5e76\u884c\u6d4b\u8bd5\u6267\u884c</li> <li>\u6d4b\u8bd5\u7ed3\u679c\u6536\u96c6\u548c\u62a5\u544a</li> </ul> <p>::: tip</p> <p>\u6d4b\u8bd5\u4e00\u822c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>\u5355\u5143\u6d4b\u8bd5 \u2014\u2014 \u5b83\u662f\u5bf9\u8f6f\u4ef6\u4e2d\u7684\u6700\u5c0f\u53ef\u6d4b\u8bd5\u5355\u5143\u8fdb\u884c\u68c0\u67e5\u548c\u9a8c\u8bc1\u7684\u8fc7\u7a0b\u3002\u5355\u5143\u6d4b\u8bd5\u901a\u5e38\u662f\u7531\u5f00\u53d1\u4eba\u5458\u7f16\u5199\u7684\uff0c\u7528\u4e8e\u9a8c\u8bc1\u4ee3\u7801\u7684\u6b63\u786e\u6027\u3002\u5355\u5143\u6d4b\u8bd5\u7684\u76ee\u7684\u662f\u786e\u4fdd\u4ee3\u7801\u7684\u6bcf\u4e2a\u90e8\u5206\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u4ee3\u7801\u7684\u8d28\u91cf\u3002\u5355\u5143\u6d4b\u8bd5\u4e00\u822c\u9694\u79bb\u6027\u5f3a\uff0c\u4e0d\u4f9d\u8d56\u5916\u90e8\u7ec4\u4ef6\u3002</li> <li>\u96c6\u6210\u6d4b\u8bd5 \u2014\u2014 \u5b83\u662f\u5bf9\u8f6f\u4ef6\u4e2d\u7684\u591a\u4e2a\u6a21\u5757\u8fdb\u884c\u8054\u5408\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u3002\u96c6\u6210\u6d4b\u8bd5\u901a\u5e38\u662f\u7531\u6d4b\u8bd5\u4eba\u5458\u548c\u5f00\u53d1\u4eba\u5458\u5171\u540c\u7f16\u5199\u7684\uff0c\u7528\u4e8e\u9a8c\u8bc1\u8f6f\u4ef6\u7684\u6574\u4f53\u529f\u80fd\u3002\u96c6\u6210\u6d4b\u8bd5\u7684\u76ee\u7684\u662f\u786e\u4fdd\u8f6f\u4ef6\u7684\u5404\u4e2a\u6a21\u5757\u80fd\u591f\u534f\u540c\u5de5\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u8f6f\u4ef6\u7684\u8d28\u91cf\u3002\u96c6\u6210\u6d4b\u8bd5\u4e00\u822c\u9700\u8981\u6d4b\u8bd5\u73af\u5883\u3002</li> <li>\u7cfb\u7edf\u6d4b\u8bd5 \u2014\u2014 \u5b83\u662f\u5bf9\u8f6f\u4ef6\u7684\u6574\u4f53\u529f\u80fd\u8fdb\u884c\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u3002\u7cfb\u7edf\u6d4b\u8bd5\u901a\u5e38\u662f\u7531\u6d4b\u8bd5\u4eba\u5458\u7f16\u5199\u7684\uff0c\u7528\u4e8e\u9a8c\u8bc1\u8f6f\u4ef6\u7684\u6574\u4f53\u529f\u80fd\u3002\u7cfb\u7edf\u6d4b\u8bd5\u7684\u76ee\u7684\u662f\u786e\u4fdd\u8f6f\u4ef6\u7684\u6574\u4f53\u529f\u80fd\u80fd\u591f\u6ee1\u8db3\u7528\u6237\u7684\u9700\u6c42\u3002\u7cfb\u7edf\u6d4b\u8bd5\u4e00\u822c\u9700\u8981\u5b8c\u6574\u7684\u6d4b\u8bd5\u73af\u5883\uff0c\u4e3b\u8981\u5728\u529f\u80fd\u3001\u6027\u80fd\u3001\u8d1f\u8f7d\u3001\u5b89\u5168\u7b49\u65b9\u9762\u8fdb\u884c\u6d4b\u8bd5\u3002</li> </ul> <p>:::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#2-ctest","title":"2. CTest \u7684\u57fa\u672c\u4ecb\u7ecd","text":"<p>\u5728\u5b89\u88c5 CMake \u7684\u540c\u65f6\uff0cCTest \u4e5f\u4f1a\u88ab\u5b89\u88c5\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u4f7f\u7528 CTest \u76f8\u5173\u7684\u5185\u5bb9\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#21","title":"2.1 \u542f\u7528\u6d4b\u8bd5","text":"<p>\u5728\u6dfb\u52a0\u6d4b\u8bd5\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u542f\u7528\u6d4b\u8bd5\u3002\u542f\u7528\u6d4b\u8bd5\u7684\u65b9\u6cd5\u662f\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0</p> <pre><code>enable_testing()\n</code></pre> <p>\u6211\u4eec\u5148\u51c6\u5907\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u7b97\u4e24\u6570\u4e4b\u548c\u7684\u9879\u76ee\uff0c\u76ee\u5f55\u5982\u4e0b</p> <pre><code>Add\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 main.cpp\n\u251c\u2500\u2500 add.cpp\n\u2514\u2500\u2500 add.hpp\n</code></pre> <p>::: code-tabs</p> <p>@tab <code>add.cpp</code></p> <pre><code>#include \"add.hpp\"\n\nint add(int a, int b)\n{\n    return a + b;\n}\n</code></pre> <p>@tab <code>add.hpp</code></p> <pre><code>#ifndef ADD_HPP\n#define ADD_HPP\n\nint add(int a, int b);\n\n#endif // ADD_HPP\n</code></pre> <p>@tab <code>main.cpp</code></p> <p>```cpp :collapsed-lines=6</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#include","title":"include","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#include_1","title":"include","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#include-addhpp","title":"include \"add.hpp\" <p>int main(int argc, char *argv[]) {     if (argc &lt; 4)     {         printf(\"Usage: %s   \\n\", argv[0]);         return -1;     } <pre><code>int a = std::atoi(argv[1]);\nint b = std::atoi(argv[2]);\nint predict = std::atoi(argv[3]);\nint sum = add(a, b);\nreturn sum == predict ? 0 : -1;\n</code></pre> <p>} <code>:::  \u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u7b97\u4e24\u6570\u4e4b\u548c\u7684\u9879\u76ee\uff0c\u9700\u8981\u7528\u6237\u8f93\u5165 3 \u4e2a\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5206\u522b\u662f\u4e24\u4e2a\u52a0\u6570\u548c\u9884\u671f\u7684\u548c\u3002\u5982\u679c\u8ba1\u7b97\u7ed3\u679c\u4e0e\u9884\u671f\u7684\u548c\u76f8\u7b49\uff0c\u5219\u8fd4\u56de `0`\uff0c\u5426\u5219\u8fd4\u56de `-1`\u3002\u7136\u540e\uff0c\u6211\u4eec\u5728 `CMakeLists.txt` \u6587\u4ef6\u4e2d\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9</code>cmake cmake_minimum_required(VERSION 3.16)  project(Add)  add_library(add STATIC add.cpp) add_executable(demo main.cpp)  target_link_libraries(demo PRIVATE add)  enable_testing() ```</p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5b8c\u6210\u4e86\u6d4b\u8bd5\u7684\u524d\u671f\u51c6\u5907\u5de5\u4f5c\u3002</p>","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#22","title":"2.2 \u6dfb\u52a0\u6d4b\u8bd5","text":"<p>\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0\u6d4b\u8bd5\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 <code>add_test</code> \u547d\u4ee4\u3002<code>add_test</code> \u547d\u4ee4\u7684\u8bed\u6cd5\u5982\u4e0b</p> <pre><code>add_test(\n  NAME &lt;name&gt;                         # \u6d4b\u8bd5\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u968f\u4fbf\u5199\uff0c\u4f46\u6700\u597d\u89c1\u540d\u77e5\u610f\n  COMMAND &lt;command&gt; [arg1 [arg2 ...]] # \u6d4b\u8bd5\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u6216\u4e00\u4e2a\u811a\u672c\n)\n</code></pre> <p>\u5176\u4e2d\uff0c<code>name</code> \u662f\u6d4b\u8bd5\u7684\u540d\u79f0\uff0c<code>command</code> \u662f\u6d4b\u8bd5\u7684\u547d\u4ee4\u3002\u6211\u4eec\u5728 <code>CMakeLists.txt</code> \u6587\u4ef6\u672b\u5c3e\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\u4ee5\u6dfb\u52a0 5 \u4e2a\u6d4b\u8bd5</p> <pre><code>add_test(NAME AddTest.positive COMMAND demo 1 2 3)\nadd_test(NAME AddTest.negative COMMAND demo -1 -2 -3)\nadd_test(NAME AddTest.zero COMMAND demo 0 0 0)\nadd_test(NAME AddTest.mixed COMMAND demo 1 -2 -1)\nadd_test(NAME AddTest.failed_example COMMAND demo 1 2 4)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#23","title":"2.3 \u8fd0\u884c\u6d4b\u8bd5","text":"<p>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6784\u5efa\u9879\u76ee</p> <pre><code>mkdir build\ncd build\ncmake ..\ncmake --build .\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u6d4b\u8bd5</p> <pre><code>ctest\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>Test project /path/to/Add/build\n    Start 1: AddTest.positive\n1/5 Test #1: AddTest.positive .................   Passed    0.00 sec\n    Start 2: AddTest.negative\n2/5 Test #2: AddTest.negative .................   Passed    0.00 sec\n    Start 3: AddTest.zero\n3/5 Test #3: AddTest.zero .....................   Passed    0.00 sec\n    Start 4: AddTest.mixed\n4/5 Test #4: AddTest.mixed ....................   Passed    0.00 sec\n    Start 5: AddTest.failed_example\n5/5 Test #5: AddTest.failed_example ...........***Failed    0.00 sec\n\n80% tests passed, 1 tests failed out of 5\n\nTotal Test time (real) =   0.01 sec\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#3-googletest","title":"3. \u4e0e GoogleTest \u7ed3\u5408\u4f7f\u7528","text":"<p>GoogleTest \u662f Google \u5f00\u53d1\u7684\u4e00\u4e2a C++ \u6d4b\u8bd5\u6846\u67b6\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u65ad\u8a00\u548c\u6d4b\u8bd5\u7528\u4f8b\u7ba1\u7406\u529f\u80fd\uff0cCMake \u4e5f\u63d0\u4f9b\u4e86 GoogleTest \u76f8\u5173\u7684\u5b8f\u548c\u51fd\u6570\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5c06 GoogleTest \u4e0e CTest \u96c6\u6210\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#31","title":"3.1 \u6587\u4ef6\u51c6\u5907","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5220\u9664 <code>main.cpp</code> \u6587\u4ef6\uff0c\u4f46\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6 <code>test_add.cpp</code>\uff0c\u53d8\u66f4\u540e\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b</p> <pre><code>Add\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 add.cpp\n\u251c\u2500\u2500 add.hpp\n\u2514\u2500\u2500 test_add.cpp\n</code></pre> <p><code>test_add.cpp</code> \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b</p> <pre><code>#include &lt;gtest/gtest.h&gt;\n\n#include \"add.hpp\"\n\nTEST(AddTest, Positive) { EXPECT_EQ(add(1, 2), 3); }\nTEST(AddTest, Negative) { EXPECT_EQ(add(-1, -2), -3); }\nTEST(AddTest, Zero) { EXPECT_EQ(add(0, 0), 0); }\nTEST(AddTest, Mixed) { EXPECT_EQ(add(1, -2), -1); }\nTEST(AddTest, FailedExample) { EXPECT_EQ(add(1, 2), 4); }\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u6539\u5199 <code>CMakeLists.txt</code> \u6587\u4ef6\uff0c\u4f7f\u5176\u652f\u6301 GoogleTest \u6d4b\u8bd5\u6846\u67b6\u3002\u6539\u5199\u540e\u7684 <code>CMakeLists.txt</code> \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b</p> <pre><code>cmake_minimum_required(VERSION 3.16)\n\nproject(Add)\n\nadd_library(add STATIC add.cpp)\n# \u5148\u4e0d\u8981\u7591\u60d1\u4e3a\u4ec0\u4e48 test_add.cpp \u6ca1\u6709 main \u51fd\u6570\u4e5f\u53ef\u4ee5\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u540e\u9762\u4f1a\u89e3\u91ca\nadd_executable(test_add test_add.cpp)\n\nfind_package(GTest REQUIRED) # \u5bfb\u627e GTest \u5e93\ninclude(GoogleTest)          # \u4f7f\u7528 GoogleTest \u63d0\u4f9b\u7684 CMake \u51fd\u6570\n\n# GTest::gtest_main \u63d0\u4f9b\u4e86 main \u51fd\u6570\uff0c\u56e0\u6b64 test_add.cpp \u4e0d\u9700\u8981\u989d\u5916\u63d0\u4f9b main \u51fd\u6570\ntarget_link_libraries(test_add\n  PRIVATE add GTest::gtest_main\n)\n\nenable_testing()\n\n# \u81ea\u52a8\u6dfb\u52a0 GoogleTest \u6d4b\u8bd5\u7528\u4f8b\ngtest_discover_tests(test_add)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/12-CTest%20%E5%B7%A5%E5%85%B7/#32","title":"3.2 \u8fd0\u884c\u6d4b\u8bd5","text":"<p>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6784\u5efa\u9879\u76ee</p> <pre><code>mkdir build\ncd build\ncmake ..\ncmake --build .\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u6d4b\u8bd5</p> <pre><code>ctest\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>Test project /path/to/Add/build\n    Start 1: AddTest.Positive\n1/5 Test #1: AddTest.Positive .................   Passed    0.00 sec\n    Start 2: AddTest.Negative\n2/5 Test #2: AddTest.Negative .................   Passed    0.00 sec\n    Start 3: AddTest.Zero\n3/5 Test #3: AddTest.Zero .....................   Passed    0.00 sec\n    Start 4: AddTest.Mixed\n4/5 Test #4: AddTest.Mixed ....................   Passed    0.00 sec\n    Start 5: AddTest.FailedExample\n5/5 Test #5: AddTest.FailedExample ............***Failed    0.00 sec\n\n80% tests passed, 1 tests failed out of 5\n\nTotal Test time (real) =   0.01 sec\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/","title":"\u301013\u3011CPack \u5de5\u5177","text":"<p>::: warning \u672a\u5b8c\u6210... :::</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#1","title":"1. \u7b80\u4ecb","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#11-cpack","title":"1.1 CPack \u7684\u57fa\u672c\u4ecb\u7ecd","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#12-cpack","title":"1.2 CPack \u652f\u6301\u7684\u751f\u6210\u5668","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#2-cpack","title":"2. CPack \u7684\u57fa\u672c\u4f7f\u7528","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#21-cpack","title":"2.1 \u901a\u7528 CPack \u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#22-cpack","title":"2.2 \u90e8\u5206\u751f\u6210\u5668 CPack \u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#debian-cpack","title":"Debian \u751f\u6210\u5668 CPack \u4e13\u5c5e\u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#nsis-cpack","title":"NSIS \u751f\u6210\u5668 CPack \u4e13\u5c5e\u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/cmake/13-CPack%20%E5%B7%A5%E5%85%B7/#3-cpack","title":"3. \u9879\u76ee CPack \u6587\u4ef6\u7684\u5199\u6cd5","text":"<p>\u7528\u4e8e\u6253\u5305\u7684 CPack \u914d\u7f6e\u6587\u4ef6\u547d\u540d\u6ca1\u6709\u7279\u522b\u7684\u8bb2\u7a76\uff0c\u6bd4\u65b9\u8bf4 OpenCV \u7684 CPack \u914d\u7f6e\u6587\u4ef6\u547d\u540d\u4e3a <code>OpenCVPackaging.cmake</code>\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06 CPack \u914d\u7f6e\u6587\u4ef6\u547d\u540d\u4e3a <code>&lt;PackageName&gt;Packaging.cmake</code>\uff0c\u5e76\u653e\u7f6e\u5728\u9879\u76ee <code>cmake</code> \u76ee\u5f55\u4e0b\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/01-clangd%E9%85%8D%E7%BD%AE/","title":"\u301001\u3011clangd/config.yaml\u914d\u7f6e","text":"<pre><code>CompileFlags:\n  Add: [-std=c++23, -I/usr/include]\nIndex:\n  Background: true\n</code></pre>"}]}